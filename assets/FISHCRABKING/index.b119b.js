window.__require=function t(e,i,o){function n(s,a){if(!i[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!a&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){return n(e[s][1][t]||t)},h,h.exports,t,e,i,o)}return i[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<o.length;s++)n(o[s]);return n}({FISHCRABKING_GameLogic:[function(t,e,i){"use strict";cc._RF.push(e,"1a417u2cdjB922hg7aKlyLn","FISHCRABKING_GameLogic");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0}),i.SupportedFish=i.INVALID_DWORD=void 0;var s=t("./GameScripts/FISHKingCrab_FishKindMap"),a=t("./GameScripts/FISHKingCrab_GameDefine"),c=t("./GameScripts/FISHKingCrab_GoldRoutine"),l=t("./GameScripts/FISHKingCrab_ResourceMgr"),h=t("./GameScripts/FISHKingCrab_ShootSelectSetting");i.INVALID_DWORD=4294967295,i.SupportedFish=[100,101,102,103,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134];var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ServerTick=0,e.game=null,e.ReplaceCatchAndroids=[],e.isEnterForeground=!1,e.gameFort=[],e.functionLayer=null,e.bottomLayer=null,e.touchNode=null,e.labelGold=null,e.lableWinScore=null,e.autoFireButton=null,e.autoFireSetBtn=null,e.mouseCollider=null,e.changePaoBtn=null,e.jps=[],e.lblAccount=null,e.myInfo=null,e.lblVersion=null,e.signal=null,e.shootSelect=null,e.ruleDetails=null,e.mouseAni=null,e.scoreAndGoldLayer=null,e.fortGameIdMap=new Map,e.fortChairIdMap=new Map,e.UpSideDown=!1,e.mySeat=0,e.myChairID=0,e.myMultiple=1,e.mouseSpriteComp=null,e._currWinScore=0,e.isPress=!1,e.goldRoutineArray=[],e.goldRoutineRuningArray=[],e.chooseLock=!1,e.showpao1=null,e.showpao2=null,e}return n(e,t),e.prototype.onAndroidBankOperator=function(){},e.prototype.onLoad=function(){this.scoreAndGoldLayer=this.node.getChildByName("scoreAndGoldLayer")},e.prototype.clearData=function(){this.game.mCrashGrid=null},e.prototype.start=function(){this.mouseSpriteComp=this.mouseCollider.getComponent(cc.Sprite),this.touchNode.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.touchNode.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.touchNode.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.touchNode.on(cc.Node.EventType.MOUSE_MOVE,this.mouseMove,this),this.touchNode.on(cc.Node.EventType.MOUSE_LEAVE,this.mouseLeave,this),this.touchNode.on(cc.Node.EventType.MOUSE_ENTER,this.mouseEnter,this)},e.prototype.onEnable=function(){},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.a:}},e.prototype.onDisable=function(){var t,e;this.touchNode.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.touchNode.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.touchNode.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.touchNode.off(cc.Node.EventType.MOUSE_MOVE,this.mouseMove,this),this.touchNode.off(cc.Node.EventType.MOUSE_LEAVE,this.mouseLeave,this),this.touchNode.off(cc.Node.EventType.MOUSE_ENTER,this.mouseEnter,this);try{for(var i=r(this.gameFort),o=i.next();!o.done;o=i.next())o.value.reset()}catch(s){t={error:s}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}if(this.goldRoutineRuningArray.length>0)for(var n=0;n<this.goldRoutineRuningArray.length;n++)this.goldRoutineRuningArray[n].release()},e.prototype.getFortByGamId=function(t){return this.fortGameIdMap.has(t)?this.fortGameIdMap.get(t):null},e.prototype.netWorkDelay=function(){var t=this;this.signal.active=!0,setTimeout(function(){t.signal.active=!1},3e3)},e.prototype.mouseAnimation=function(){var t=cc.tween().by(.5,{angle:-20}),e=cc.tween().to(.5,{scale:1.1}),i=cc.tween().to(.5,{scale:1}),o=cc.tween().parallel(t,e),n=cc.tween().parallel(t,i),r=cc.tween().sequence(o,n);return cc.tween().repeatForever(r)},e.prototype.onUpScore=function(t){this.gameFort[this.mySeat].currScore+=t,this.labelGold.string=this.game.iGameBase.getNum(this.gameFort[this.mySeat].currScore,!0)},e.prototype.onGameScene=function(t){this.initGameScene(),this.game.gameScene.setCurrSceneBg(t)},e.prototype.setGameViewUpSideDown=function(t){var e,i;this.UpSideDown=t,this.game.fishMgr&&(this.game.fishMgr.UpSideDown=this.UpSideDown);try{for(var o=r(this.gameFort),n=o.next();!n.done;n=o.next())n.value.UpSideDown=t}catch(s){e={error:s}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}},e.prototype.setPropertyUIPos=function(){var t=cc.find("layout",this.myInfo),e=t.getChildByName("Property"),i=t.getChildByName("Winscore");if(0==this.mySeat){this.myInfo.scaleX=1;for(var o=e.childrenCount,n=0;n<o;n++)e.children[n].scaleX=1;for(o=i.childrenCount,n=0;n<o;n++)i.children[n].scaleX=1;this.lblAccount.node.anchorX=0,this.lblAccount.node.scaleX=1,this.lblVersion.node.anchorX=1,this.lblVersion.node.scaleX=1}else if(1==this.mySeat){for(this.myInfo.scaleX=-1,o=e.childrenCount,n=0;n<o;n++)e.children[n].scaleX=-1;for(o=i.childrenCount,n=0;n<o;n++)i.children[n].scaleX=-1;this.lblAccount.node.anchorX=1,this.lblAccount.node.scaleX=-1,this.lblVersion.node.anchorX=0,this.lblVersion.node.scaleX=-1}this.lblAccount.string=this.game.iGameBase.GlobalUserItem_account(),this.lblVersion.getComponent(cc.Widget).updateAlignment(),e.active=!0},e.prototype.initGameScene=function(){this.game.iGameBase.CommonUI_RootNode(this.node),this.game.fishMgr.clearFish(),this.game.bulletMgr.clearBullets(),this.myMultiple=1,this.chooseLock=!1;for(var t=this.game.iGameBase.UserManager_getTableUserItems(),e=0;e<4;e++){var i=this.switchChairToSeat(e),o=this.gameFort[i];this.fortChairIdMap.set(e,this.gameFort[i]),t[e]?(o.init(t[e]),this.fortGameIdMap.set(t[e].getGameID(),o),t[e].getUserID()==this.game.iGameBase.getUserID()&&(this.mySeat=i,this.myChairID=e,this.setPropertyUIPos())):o.node.opacity=130}this.game.gameScene.init(),this.game.iGameBase.setExectUpdate(!0)},e.prototype.userLeave=function(t){var e=this.fortChairIdMap.get(t);e?e.reset():console.error("\u8fd9\u4e2a\u73a9\u5bb6\u4e0d\u5b58\u5728\uff1a"+t)},e.prototype.myLeave=function(){this.gameFort&&this.gameFort.forEach(function(t){t.reset(),t.destroyEffect(!0)})},e.prototype.userEnter=function(t,e){var i=this.fortChairIdMap.get(t);i.init(e),this.fortGameIdMap.set(e.getGameID(),i);var o=this.switchChairToSeat(t);e.getUserID()==this.game.iGameBase.getUserID()&&(this.mySeat=o,this.myChairID=t)},e.prototype.switchChairToSeat=function(t){var e=t;if(this.UpSideDown)switch(t){case 0:e=3;break;case 1:e=2;break;case 2:e=1;break;case 3:e=0}return e},e.prototype.mouseEnter=function(){if(cc.game.canvas.style.cursor="none",this.mouseSpriteComp.node.opacity=255,this.mouseAni)this.mouseAni.start();else{var t=this.mouseAnimation();this.mouseAni=cc.tween(this.mouseSpriteComp.node).then(t).start()}},e.prototype.mouseLeave=function(){this.mouseAni.stop(),this.mouseSpriteComp.node.opacity=0,cc.game.canvas.style.cursor="url(/web-mobile/mouseIcon.png),auto"},e.prototype.mouseMove=function(t){var e=t.getLocation(),i=cc.v2();this.node.convertToNodeSpaceAR(e,i),this.mouseSpriteComp.node.setPosition(i);var o=this.gameFort[this.mySeat];o.isWaitfire&&o.isCanFire&&this.isPress&&o.aimAt(e,!0)},e.prototype.onTouchStart=function(t){if(this.game.isInit){var e=this.gameFort[this.mySeat],i=t.getLocation(),o=cc.v2();if(this.node.convertToNodeSpaceAR(i,o),this.mouseSpriteComp.node.setPosition(o),e.isWaitfire)this.isPress=!0;else if(e.isCanFire&&e.checkScoreCanFire(!0))if(2==e.currentPaoIndex){var n=this.game.quadCollision.check(this.game.fishMgr.getGameFish,this.mouseCollider),r=n.length;if(r>0){for(var s=n[0],a=1;a<r;a++){var c=n[a];c.node.parent==s.node.parent?c.node.getSiblingIndex()>s.node.getSiblingIndex()&&(s=c):c.node.parent.getSiblingIndex()>s.node.parent.getSiblingIndex()&&(s=c)}e.setNormalAutoFire();var l=s.fishInfo.dwFishIndex;this.onClickFish(l,i)}}else e.AutoFire?e.aimAt(i):(e.aimAt(i).fire(),e.setNormalAutoFire())}},e.prototype.onTouchMove=function(t){if(this.game.isInit){var e=this.gameFort[this.mySeat];if(e.isWaitfire&&this.isPress){var i=t.getLocation();e.aimAt(i,!0)}e.isPress&&1==e.currentPaoIndex&&(i=t.getLocation(),e.aimAt(i))}},e.prototype.onTouchEnd=function(t){if(this.game.isInit){this.isPress=!1;var e=this.gameFort[this.mySeat];if(e.isPress=!1,e.isWaitfire&&e.isCanFire){var i=t.getLocation();e.fireFunctionGun(),e.aimAt(i).fire()}}},e.prototype.onClickFish=function(t){var e=this.gameFort[this.mySeat];e.isCanFire&&(e.AutoFire||e.isPress)&&this.game.iGameBase.sendLockFish(t)},e.prototype.autoScendLockFish=function(t){var e=this;void 0===t&&(t=!1);var o=this.gameFort[this.mySeat];if(2==o.currentPaoIndex&&o.LockFishIndex==i.INVALID_DWORD){if(t)return void this.game.iGameBase.sendLockFish(i.INVALID_DWORD);if(o.AutoFire){if(!this.shootSelect)return;var n=this.shootSelect.getCurrentSelectFishID(),r=i.INVALID_DWORD;if(n.length>0){for(var s=0;s<n.length;s++){var c=this.game.fishMgr.getFishByKindID(n[s]);if(c.length>0&&(r=c[this.game.iGameBase.utils_random(0,c.length-1)].fishInfo.dwFishIndex),r!=i.INVALID_DWORD)break}r!=i.INVALID_DWORD?this.game.iGameBase.sendLockFish(r):this.scheduleOnce(function(){e.autoScendLockFish()},a.fireTime)}}}},e.prototype.onPlayerInfo=function(t,e,i,o,n,s,a){var c,l,h=this.switchChairToSeat(e),u=this.gameFort[h];if(this.fortGameIdMap.set(t,u),u){var p=this.game.iGameBase.UserManager_getTableUserItems(),d=null;try{for(var f=r(p),g=f.next();!g.done;g=f.next()){var y=g.value;if(y){var m=y.getGameID();if(m&&m==t){d=y;break}}}}catch(v){c={error:v}}finally{try{g&&!g.done&&(l=f.return)&&l.call(f)}finally{if(c)throw c.error}}if(u.init(d),u.initInfo(i,o,n),u.setPaoType(n),e==this.myChairID){this.myMultiple=i,this.mySeat=h,this.myChairID=e,this.labelGold.string=this.game.iGameBase.getNum(o,!0),this.setWin(s),cc.error("---\u5f53\u524d\u79ef\u5206\uff1a",o,"\u5f53\u524d\u8d62\u5206\uff1a",s);var b=cc.find("showpao1",this.changePaoBtn),_=cc.find("showpao2",this.changePaoBtn);2==n?(b.active=!0,_.active=!1,this.autoFireSetBtn.active=!0):(b.active=!1,_.active=!0,this.autoFireSetBtn.active=!1)}else u.setLockFish(a)}},e.prototype.onExchangeMultiple=function(t,e,i){var o=this.fortGameIdMap.get(e);o.labelMultiple.string=this.game.iGameBase.getNum(i,!0),o.currMultiple=i,e==t&&(this.myMultiple=i)},e.prototype.onUpdate=function(t){var e,i;if(this.gameFort[this.mySeat].isActive)try{for(var o=r(this.gameFort),n=o.next();!n.done;n=o.next()){var s=n.value;s.isActive&&s.autoFire(t)}}catch(c){e={error:c}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}if(this.goldRoutineRuningArray.length>0)for(var a=0;a<this.goldRoutineRuningArray.length;a++)this.goldRoutineRuningArray[a].onUpdate(t)},e.prototype.onUserFire=function(t,e,i,o,n,r,s,c,l){var h=this.fortGameIdMap.get(e);if(h){var u=i;if(u>a.FunctionType.normal){var p=h.onFire(o),d=h.getWorldAngle();h.hideCountdown(),u==a.FunctionType.laser?(h.fireLaser(n,e),h.currFunctionType=a.FunctionType.normal):u==a.FunctionType.drill&&(h.hideDrillGun(),this.game.bulletMgr.fire(h.chairId,e,n,p,d,h.LockFishIndex,s,c,u),h.currFunctionType=a.FunctionType.normal),h.isCanFire=!1,h.isWaitfire=!1}else 2==h.currentPaoIndex?h.playRaigunFire(l,n):(p=h.onFire(o),d=h.getWorldAngle(),this.game.bulletMgr.fire(h.chairId,e,n,p,d,h.LockFishIndex,s,c,u));this.game.iGameBase.isNoWin()?h.currScore-=r:h.currScore=r}else cc.error("\u627e\u4e0d\u5230\u5f00\u706b\u7684\u73a9\u5bb6");if(e==t&&(this.labelGold.string=this.game.iGameBase.getNum(this.gameFort[this.mySeat].currScore,!0),this.gameFort[this.mySeat].checkCanAutoFire())){if(this.gameFort[this.mySeat].AutoFire){var f=this.autoFireButton.cancelAutoFire();this.gameFort[this.mySeat].AutoFire=f}this.game.iGameBase.PopMessage_ShowMessage(1)}},e.prototype.onLockFish=function(t,e){var i=this.fortGameIdMap.get(t);i&&i.isActive&&i.setLockFish(e)},e.prototype.playGoldAnimation=function(t,e,i,o){if(t&&!(t<0)){var n=null;if(this.goldRoutineArray.length>0)for(var r=0;r<this.goldRoutineArray.length;r++)if(this.goldRoutineArray[r].getStateIsIdle){n=this.goldRoutineArray.splice(r,1)[0];break}null==n&&(n=new c.default(this.scoreAndGoldLayer,this,this.goldPlayComplete)).setGame(this.game),n.init(i,e,t,o),this.goldRoutineRuningArray.push(n)}},e.prototype.goldPlayComplete=function(t){var e=this.goldRoutineRuningArray.indexOf(t);-1!=e&&this.goldRoutineRuningArray.splice(e,1),this.goldRoutineArray.push(t)},e.prototype.showFunctionTotalScore=function(t,e,i){var o=a.getFunctionUITypeByFunctionType(i),n=this.fortGameIdMap.get(t);if(n){var r=a.getWeightByType(i);if(i==a.FunctionType.laser||i==a.FunctionType.drill)n.hidefunctionUI(r);else if(i==a.FunctionType.vortex){var s=n.getEffect(a.FunctionWeight.vortex);return void(s&&s.beforDestroy(e))}n.showFunctionUI(i,o,null,e)}},e.prototype.getCatchFishLen=function(t){var e=0;return t.forEach(function(t){if(!(t<4294967295))return e;e++}),e},e.prototype.nextExect=function(t,e,i,o){var n=a.getWeightByType(t),r=e.getEffect(n);r?r.isNext&&(e.checkMultiple(n,o,i)?(r&&r.beforDestroy(i),e.deleteWeightMultiple(n)):r&&r.nextStep(i)):cc.error("\u8be5\u6743\u4f4d\u5bf9\u5e94\u7684\u7279\u6548\u4e0d\u5b58\u5728\uff1a",a.FunctionWeight[n])},e.prototype.onCatchMushFish=function(t,e,i,o,n,r){var s=this.fortGameIdMap.get(t),c=this.getCatchFishLen(e),l=i;if(0!=o){var h=a.getWeightByType(o);if(!s.existWeight(h))return void cc.error("\u73a9\u5bb6\u6ca1\u6709\u8fd9\u4e2a\u7279\u6548\uff1a",o);if(s.showFunctionCatchScroe(h,l),o==a.FunctionType.lighting){var u=s.getEffect(h);if(u){u.setGame(this.game);for(var p=[],d=0;d<c;d++){var f=e[d];if(b=this.game.fishMgr.getFishByIndex(e[d])){b.node.setParent(this.bottomLayer),p.push(b.getCurrWorldPos());var g=this.game.iGameBase.getNum(n[d],!1),y=this.game.iGameBase.utils_gen_handler(this.playGoldAnimation,this,g,s);b.playDieAni(s,y)}else cc.error("catchFish not found",e[d])}u.play(p)}}else if(o==a.FunctionType.vortex){var m=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);for(d=0;d<c;d++)f=e[d],(b=this.game.fishMgr.getFishByIndex(e[d]))?(b.node.setParent(this.bottomLayer),y=this.game.iGameBase.utils_gen_handler(this.playGoldAnimation,this,n[d],s),b.playVortex(m,y)):cc.error("catchFish not found",e[d])}else{for(d=0;d<c;d++){var b;f=e[d],(b=this.game.fishMgr.getFishByIndex(f))?(y=this.game.iGameBase.utils_gen_handler(this.playGoldAnimation,this,n[d],s),b.playDieAni(s,y)):cc.error("catchFish not found",e[d])}this.nextExect(o,s,l,r)}}},e.prototype.onCatchFish=function(t,e,i,o,n,r,c){var l=this.fortGameIdMap.get(e),h=i,u=o;if(0!=n){var p=a.getWeightByType(n);if(!l.existWeight(p))return;l.showFunctionCatchScroe(p,h)}var d=this.game.fishMgr.getFishByIndex(r);if(d){var f=!1,g=-1,y=null,m=d.fishInfo.nFishKindID;if(s.FishKindMap[m].weight&&(p=s.FishKindMap[m].weight,l.setWeightMultiple(p,u),l.addEffectWeight(p)),d.fishKind.animType==a.FishAnimType.goldBomb)return f=n==a.FunctionType.normal,void this.functionLayer.playGoldBombEffect(d,l,e,u,f);if(129==m)l.isCanFire=!1,l.currFunctionType=a.FunctionType.drill,l.showDrillGun();else if(130==m)l.isCanFire=!1,l.currFunctionType=a.FunctionType.laser,l.showLaserGun(this.game.iGameBase.utils_gen_handler(this.functionLayer.playLaserEffect,this.functionLayer));else{if(128==m)return l.isCanFire=!1,e==t&&(g=l.fire(a.FunctionType.bombShark)),void this.functionLayer.playBombSharkEffect(d,l,g,e);if(131==m)return e==t&&(g=l.fire(a.FunctionType.rocket)),void this.functionLayer.playRocketEffect(d,l,g,e);if(132==m){l.isCanFire=!1,e==t&&(g=l.fire(a.FunctionType.localBomb));var b=d.getCurrWorldPos(),_=this.node.convertToNodeSpaceAR(b);this.functionLayer.playSuperBombEffect(_,g,l)}else if(m>=119&&m<=122)b=d.getCurrWorldPos(),l.showFunctionUI(a.FunctionType.normal,a.FunctionUIType.common,null,u,b,m),this.functionLayer.playGoldBigBomb(b);else if(m>=125&&m<=127)y=this.game.iGameBase.utils_gen_handler(this.playGoldAnimation,this,u,l),this.functionLayer.playLightingEffect(l,d),l.showFunctionUI(a.FunctionType.lighting,a.FunctionUIType.common,null,0,null,m);else if(123==m||124==m){l.isCanFire=!1,this.jackpotIndex=0;var v=a.FunctionUIType.silvercrab;124==m&&(v=a.FunctionUIType.goldencrab,this.jackpotIndex=1);var C=this.jps[this.jackpotIndex];C.active=!1,l.showFunctionUI(a.FunctionType.ingot,v,null,0),b=d.getCurrWorldPos(),this.functionLayer.playIngotEffect(l,e,c,this.jackpotIndex,C,b,d.node.angle)}else if(133==m)l.isCanFire=!1,e==t&&(g=l.fire(a.FunctionType.vortex)),y=this.game.iGameBase.utils_gen_handler(this.functionLayer.playVortexEffect,this.functionLayer,l,g,this.bottomLayer);else if(134==m){l.isCanFire=!1,this.functionLayer.playGoldBigBomb(d.getCurrWorldPos());var F=this.game.iGameBase.utils_gen_handler(this.functionLayer.playTreasureBoxEffect,this.functionLayer,l,e,l.currMultiple);l.showFunctionUI(a.FunctionType.treasureBox,a.FunctionUIType.turnplate,null,u,F,null)}else f=n==a.FunctionType.normal,y=this.game.iGameBase.utils_gen_handler(this.playGoldAnimation,this,u,l)}d.playDieAni(l,y,f)}else cc.error("catchFish not found",r)},e.prototype.onSwitchCannon=function(t,e,i){var o,n;try{for(var s=r(this.gameFort),a=s.next();!a.done;a=s.next()){var c=a.value;if(c.isActive&&c.chairId==e){c.gameId==t&&(2==i?(this.showpao1.active=!0,this.showpao2.active=!1,this.autoFireSetBtn.active=!0):(this.showpao1.active=!1,this.showpao2.active=!0,this.autoFireSetBtn.active=!1)),c.changePaoTypeTween(i);break}}}catch(l){o={error:l}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}},e.prototype.changeScene=function(t){this.gameFort.forEach(function(t){t.changeScene(!0)}),this.game.quadCollision.setCollider(!1),this.game.fishMgr.changeScene(),this.game.gameScene.changeScene(t,this.recycleFish.bind(this))},e.prototype.recycleFish=function(){this.gameFort.forEach(function(t){t.changeScene(!1)}),this.game.quadCollision.setCollider(!0),this.game.fishMgr.changeSceneComplete()},e.prototype.onDrillBomb=function(t,e){this.game.bulletMgr.bulletDrillBomb(t,e),this.fortGameIdMap.get(e).subEffectWeight(a.FunctionWeight.drill)},e.prototype.onGongNengBulletOver=function(t,e,i){var o=e;cc.log("\u529f\u80fd\u6d88\u5931",e,o),i>0&&this.showFunctionTotalScore(t,o,i)},e.prototype.onChangeBackGround=function(t,e){e!=t&&this.fortGameIdMap.get(e).destroyEffect()},e.prototype.onUpdateTreasureBox=function(t,e){var i=this.fortChairIdMap.get(t);if(i){var o=e;i.showFunctionCatchScroe(a.FunctionWeight.treasureBox,o)}else cc.error("\u4e0d\u5b58\u5728\u8fd9\u4e2a\u73a9\u5bb6\uff1a",t)},e.prototype.onTreasureBoxEnd=function(t,e){var i=this.fortChairIdMap.get(t);if(i){var o=e;i.showFunctionCatchScroe(a.FunctionWeight.treasureBox,o,!0);var n=i.getEffect(a.FunctionWeight.treasureBox);n&&n.beforDestroy(o)}},e.prototype.onIngot=function(t,e){var i=this.fortChairIdMap.get(t);if(i){var o=i.getEffect(a.FunctionWeight.ingot);o&&o.nextStep(e)}},e.prototype.onIngotEnd=function(t,e){var i=this.fortChairIdMap.get(t);if(i){var o=e,n=i.getEffect(a.FunctionWeight.ingot);if(n){n.beforDestroy(),i.hidefunctionUI(a.FunctionWeight.ingot),i.showFunctionUI(a.FunctionType.ingot,a.FunctionUIType.turnplate,null,o);var r=this.jps[this.jackpotIndex];r.scale=0,r.active=!0,cc.tween(r).to(5,{scale:1}).start()}}},e.prototype.setProperty=function(t,e){this.game.iGameBase.isNoWin()||(this._currWinScore-=t,this.lableWinScore.string=this.game.iGameBase.getNum(this._currWinScore,!0),this.labelGold.string=this.game.iGameBase.getNum(e,!0),this.gameFort[this.mySeat].currScore=e)},e.prototype.setWinScore=function(t,e){t==this.game.gameId&&(this.game.iGameBase.isNoWin()?(this.gameFort[this.mySeat].currScore+=e,this.labelGold.string=this.game.iGameBase.getNum(this.gameFort[this.mySeat].currScore,!0)):(this._currWinScore+=e,this.lableWinScore.string=this.game.iGameBase.getNum(this._currWinScore,!0)))},e.prototype.onBtnAddMultiple=function(){this.game.iGameBase.sendPlayerExchangeBullet(!0),this.game.iAudioPlayer.play_sound("changeMultiple")},e.prototype.onBtnSubMultiple=function(){this.game.iGameBase.sendPlayerExchangeBullet(!1),this.game.iAudioPlayer.play_sound("changeMultiple")},e.prototype.onBtnLockFish=function(){this.chooseLock=!this.chooseLock,this.chooseLock||this.game.iGameBase.sendLockFish(i.INVALID_DWORD)},e.prototype.onSkillBtnClick=function(){},e.prototype.onChangePaoBtnClick=function(){if(this.gameFort[this.mySeat].isCanFire&&!this.gameFort[this.mySeat].isWaitfire){var t=this.gameFort[this.mySeat];t.isCanFire=!1;var e=1==t.currentPaoIndex?2:1;this.game.iGameBase.sendSwitchCannon(this.myChairID,e)}},e.prototype.onBtnAutoFire=function(){if(this.gameFort[this.mySeat].checkScoreCanFire(!0)){var t=this.autoFireButton.changeAutoFire();this.gameFort[this.mySeat].AutoFire=t,2==this.gameFort[this.mySeat].currentPaoIndex&&t?this.autoScendLockFish():t||2!=this.gameFort[this.mySeat].currentPaoIndex||(this.game.iGameBase.sendLockFish(i.INVALID_DWORD),this.gameFort[this.mySeat].setLockFish(i.INVALID_DWORD))}},e.prototype.setAutoFire=function(){if(this.gameFort[this.mySeat].checkScoreCanFire(!0)){var t=this.autoFireButton.setAutoFire();this.gameFort[this.mySeat].AutoFire=t,2==this.gameFort[this.mySeat].currentPaoIndex&&t&&this.autoScendLockFish()}},e.prototype.cancelAutoFire=function(){var t=this.autoFireButton.cancelAutoFire();this.gameFort[this.mySeat].AutoFire=t,2==this.gameFort[this.mySeat].currentPaoIndex&&(this.game.iGameBase.sendLockFish(i.INVALID_DWORD),this.gameFort[this.mySeat].setLockFish(i.INVALID_DWORD))},e.prototype.onAutoFireSetBtnClick=function(t){if(void 0===t&&(t=!1),!this.shootSelect){var e=this.game.resourMgr.getRes("ShootSelectPanel",l.ResourceType.initPrefab,cc.Prefab),i=cc.instantiate(e);this.shootSelect=i.addComponent(h.default),this.shootSelect.contentNode=cc.find("bg/content",i),this.shootSelect.prefab=cc.find("Item",this.shootSelect.contentNode);var o=cc.find("bg/closebtn",i);this.shootSelect.SetBtnEvent(o.getComponent(cc.Button),!0,!0);var n=cc.find("bg/OKBtn",i);this.shootSelect.SetBtnEvent(n.getComponent(cc.Button),!0,!0);var r=cc.find("bg/ClearBtn",i);return this.shootSelect.SetBtnEvent(r.getComponent(cc.Button),!0,!0),this.shootSelect.setGame(this.game),this.shootSelect.onOk=this.setAutoFire.bind(this),this.node.addChild(i),void(t?(cc.find("bg/OKBtn",this.shootSelect.node).active=!1,cc.find("bg/ClearBtn",this.shootSelect.node).active=!1):(cc.find("bg/OKBtn",this.shootSelect.node).active=!0,cc.find("bg/ClearBtn",this.shootSelect.node).active=!0))}this.shootSelect.node.setSiblingIndex(this.node.childrenCount-1),this.shootSelect.node.active=!0,t?(cc.find("bg/OKBtn",this.shootSelect.node).active=!1,cc.find("bg/ClearBtn",this.shootSelect.node).active=!1):(cc.find("bg/OKBtn",this.shootSelect.node).active=!0,cc.find("bg/ClearBtn",this.shootSelect.node).active=!0)},e.prototype.onConverPropertyBtnClick=function(){this.game.iGameBase.isNoWin()||this.game.iGameBase.ShowDona()},e.prototype.onInfoBtnClick=function(){this.onAutoFireSetBtnClick(!0)},e.prototype.showWin=function(t,e){this.game.iGameBase.isNoWin()?(e.active=!1,t.active=!1):(e.active=!0,t.active=!0)},e.prototype.setWin=function(t){this.game.iGameBase.isNoWin()||(this.lableWinScore.string=this.game.iGameBase.getNum(t,!0),this._currWinScore=t)},e.prototype.bulletSync=function(t,e,i,o){this.game.bulletMgr.bulletSync(t,e,i,o)},e.prototype.onFishInfo=function(t){this.game.fishMgr&&this.game.fishMgr.onFishInfo(t)},e.prototype.onLastTimeBullet=function(){cc.log("\u6700\u540e\u4e00\u6b21")},e.prototype.fullScreenSetcontentSize=function(){this.game.iGameBase&&!this.game.iGameBase.getExectUpdate()||this.game.gameScene.init()},e.prototype.getWinScore=function(){return this._currWinScore},e}(cc.Component);i.default=u,cc._RF.pop()},{"./GameScripts/FISHKingCrab_FishKindMap":"FISHKingCrab_FishKindMap","./GameScripts/FISHKingCrab_GameDefine":"FISHKingCrab_GameDefine","./GameScripts/FISHKingCrab_GoldRoutine":"FISHKingCrab_GoldRoutine","./GameScripts/FISHKingCrab_ResourceMgr":"FISHKingCrab_ResourceMgr","./GameScripts/FISHKingCrab_ShootSelectSetting":"FISHKingCrab_ShootSelectSetting"}],FISHCRABKING_Game:[function(t,e,i){"use strict";cc._RF.push(e,"a2d79j0H5ND5rKCZgTxTfyd","FISHCRABKING_Game");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0}),i.AssetType=void 0;var s,a=t("./FISHCRABKING_GameLogic"),c=t("./GameScripts/FISHKingCrab_ResourceMgr"),l=t("./GameScripts/FISHKingCrab_GameSceneMgr"),h=t("./GameScripts/FISHKingCrab_BulletManager"),u=t("./GameScripts/FISHKingCrab_FishManager"),p=t("./GameScripts/FISHKingCrab_FishPathCrash"),d=t("./GameScripts/FISHKingCrab_CrashGrid"),f=t("./GameScripts/FISHKingCrab_PoolManager"),g=t("./GameScripts/FISHKingCrab_QuadtreeCollision"),y=t("./GameScripts/FISHKingCrab_ResourceMgr"),m=t("./GameScripts/FISHKingCrab_AutoFireButton"),b=t("./GameScripts/FISHKingCrab_BulletManager"),_=t("./GameScripts/FISHKingCrab_FishManager"),v=t("./GameScripts/FISHKingCrab_FunctionLayer"),C=t("./FISHCRABKING_GameLogic"),F=t("./GameScripts/FISHKingCrab_GameFort"),S=t("./GameScripts/FISHKingCrab_GameFortGunAni"),I=t("./GameScripts/FISHKingCrab_FunctionFort"),P=t("./GameScripts/FISHKingCrab_PoolManager"),w=t("./GameScripts/FISHKingCrab_GameSceneMgr"),G=t("./GameScripts/FISHKingCrab_MyFishSetting");(function(t){t[t.AT_SpriteFrame=0]="AT_SpriteFrame",t[t.AT_SpriteAtlas=1]="AT_SpriteAtlas",t[t.AT_Prefab=2]="AT_Prefab",t[t.AT_AudioClip=3]="AT_AudioClip",t[t.AT_Material=4]="AT_Material"})(s=i.AssetType||(i.AssetType={}));var M=cc._decorator,B=M.ccclass,T=M.menu,A=M.property,R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.GameLogic=null,e.handlerPriority=2,e.handlerName="FISHCRABKING",e.scriptName="FISHCRABKING_Game",e.gameScene=null,e.fishMgr=null,e.bulletMgr=null,e.poolMgr=null,e.isAccordStand=!1,e.fishPathMgr=null,e.UpSideDown=!1,e.resourMgr=null,e.iGameBase=null,e.isInit=!1,e.currTime=0,e}return n(e,t),e.prototype.setIGameBase=function(t){this.iGameBase=t,this.iAudioPlayer=this.iGameBase.getIAudioPlayer(),this.resourMgr=new y.default,this.iGameBase.newFishResMgrBase(),this.resourMgr.setIMrgBase(this.iGameBase.getFishResMgrBase()),this.gameId=this.iGameBase.GlobalUserItem_gameId(),this.mCrashGrid=new d.CrashGrid(this.iGameBase.getDeviceWIDTH(),this.iGameBase.getDeviceHEIGHT()),this.fishPathMgr=new p.default,this.fishPathMgr.setGame(this),this.fishPathMgr.loadFishPath(),this.resourMgr.KindID=this.iGameBase.GetKindID(),this.SetGameObject(),this.poolMgr.init()},e.prototype.netWorkDelay=function(){},e.prototype.onEnable=function(){cc.sys.isBrowser&&(cc.macro.CLEANUP_IMAGE_CACHE=!1,cc.dynamicAtlasManager.enabled=!0,cc.dynamicAtlasManager.maxFrameSize=642),this.isAccordStand=!1},e.prototype.start=function(){this.quadCollision=new g.default(this.node.getBoundingBoxToWorld())},e.prototype.enterGame=function(){this.iGameBase.enterGame(),this.isInit=!0},e.prototype.onDestroy=function(){this.iGameBase.RemoveHandler(),this.fishPathMgr.release(),this.mCrashGrid=null,this.resourMgr.iMrgBase.release(),this.iGameBase.releaseGameRes(this.resourMgr.KindID)},e.prototype.getGameUINode=function(){return this.gameScene.node},e.prototype.update=function(t){if(this.iGameBase){if(!this.iGameBase.onUpdate(t))return;if(!this.iGameBase.getExectUpdate())return;this.GameLogic.onUpdate(t),this.fishMgr.onUpdate(t),this.bulletMgr.onUpdate(t)}},e.prototype.GetGameAsset=function(t,e){return this.iGameBase.GetGameAsset(this.handlerName,t,e)},e.prototype.SetGameObject=function(){var t=cc.find("Pool",this.node);this.poolMgr=t.addComponent(P.default),this.poolMgr.setGame(this),this.initPoolManager(t);var e=cc.find("Playing",this.node),i=cc.find("GameScene",this.node);this.gameScene=i.addComponent(w.default),this.gameScene.setGame(this),this.initgameScene(i,e);var o=this.resourMgr.getRes("fort",c.ResourceType.initPrefab,cc.Prefab);this.fortPrefab=o,cc.error("\u6700\u7ec8\u52a0\u8f7d\u5b8c\u6210\uff01",this.fortPrefab),this.initPlaying(e),this.initSetting(e),this.iGameBase.setMyGameLogic(this.GameLogic,this.iGameBase.GetKindID(),a.SupportedFish),this.enterGame()},e.prototype.initPoolManager=function(){var t=new f.FISHKingCrab_Pool;t.isInitRes=!0,t.nodeType=f.NodeType.gold,t.prefab=this.resourMgr.getRes("gold",c.ResourceType.initPrefab,cc.Prefab),t.initCount=20,t.setGame(this),this.poolMgr.poolArray.push(t);var e=new f.FISHKingCrab_Pool;e.isInitRes=!0,e.nodeType=f.NodeType.score,e.prefab=this.resourMgr.getRes("Score",c.ResourceType.initPrefab,cc.Prefab),e.initCount=30,e.setGame(this),this.poolMgr.poolArray.push(e)},e.prototype.initgameScene=function(t,e){this.gameScene.mainBgContainer=cc.find("bg1Container",t),this.gameScene.maskBgContainer=cc.find("bg2Container",e);var i=cc.find("bg1",this.gameScene.mainBgContainer),o=cc.find("bg2",this.gameScene.maskBgContainer);this.gameScene.water=cc.find("water",this.gameScene.maskBgContainer),this.gameScene.gameBgArray.push(i),this.gameScene.gameBgArray.push(o)},e.prototype.initPlaying=function(t){var e=cc.find("touchNode",t),i=cc.find("fishLayer",t),o=(cc.find("fishCircleLayer",t),cc.find("bulletLayer",t)),n=cc.find("bulletHitLayer",t),r=cc.find("functionLayer",t),a=cc.find("FunctionFort",t),l=cc.find("signal",t);this.bulletMgr=o.addComponent(b.default),this.bulletMgr.setGame(this),this.bulletMgr.bulletPrefab=this.GetGameAsset("Res/Prefab/GameBullet_DEMO",s.AT_Prefab),this.bulletMgr.bulletHitPrefab=this.GetGameAsset("Res/Prefab/GameBulletHit_DEMO",s.AT_Prefab),this.bulletMgr.bulletDrillPrefab=this.resourMgr.getRes("GameBulletDrill_DEMO",c.ResourceType.initPrefab,cc.Prefab),this.bulletMgr.bulletDrillPrefab||cc.error("0---GameBulletDrill_DEMO \u4e3a\u7a7a===="),this.bulletMgr.bulletHitNode=n,this.fishMgr=i.addComponent(_.default),this.fishMgr.setGame(this),this.fishMgr.shadowMaterial=this.GetGameAsset("Res/Shader/sprite-shadow",s.AT_Material);var h=r.addComponent(v.default);h.setGame(this);for(var u=[],p=cc.find("jpLayer",t),d=0;d<2;d++)u[d]=p.getChildByName("jp"+String(d+1));var f=cc.find("bottomLayer",t);this.GameLogic=t.addComponent(C.default),this.GameLogic.game=this,this.GameLogic.functionLayer=h,this.GameLogic.bottomLayer=f,this.GameLogic.touchNode=e,this.GameLogic.jps=u;var g=cc.find("MyInfoPoint",t),y=this.resourMgr.getRes("MyInfo",c.ResourceType.initPrefab,cc.Prefab);if(cc.error("====myInfoPrefabs==",y),y){var P=cc.instantiate(y);g.addChild(P);var w=cc.find("lblAccount",P).getComponent(cc.Label),G=cc.find("lblVersion",P).getComponent(cc.Label),M=cc.find("layout",P),B=cc.find("Property/labelGold",M).getComponent(cc.Label),T=M.getChildByName("Winscore"),A=cc.find("labelScore",T).getComponent(cc.Label),R=cc.find("Property/btnConver",M).getComponent(cc.Button);this.SetBtnEvent(R,!this.iGameBase.isNoWin(),!0),this.GameLogic.myInfo=P,this.GameLogic.lblAccount=w,this.GameLogic.lblVersion=G,this.GameLogic.labelGold=B,this.GameLogic.lableWinScore=A,this.GameLogic.showWin(R,T)}else cc.error("====MyInfoPoint\u9884\u5236\u4f53 \u4e3a\u7a7a\uff1a");var x=cc.find("middlebottomPoint",t),H=this.resourMgr.getRes("Middlebottom",c.ResourceType.initPrefab,cc.Prefab);if(H){var O=cc.instantiate(H);x.addChild(O);var D=cc.find("AutoFireSetBtn",O);this.SetBtnEvent(D.getComponent(cc.Button),!0,!0);var K=cc.find("ChangePaoBtn",O);this.SetBtnEvent(K.getComponent(cc.Button),!0,!0);var k=cc.find("AutoFireBtn",O),E=k.addComponent(m.default),N=cc.find("autolight",k),j=cc.find("light",N);E.autoFireLight=j,E.autoFireOn=N.getComponent(cc.Sprite),this.SetBtnEvent(k.getComponent(cc.Button),!0,!0),this.GameLogic.changePaoBtn=K,this.GameLogic.autoFireSetBtn=D,this.GameLogic.autoFireButton=E,this.GameLogic.showpao1=cc.find("showpao1",K),this.GameLogic.showpao2=cc.find("showpao2",K)}else cc.error("====Middlebottom \u4e3a\u7a7a ===",H);var L=this.resourMgr.getRes("mouse1",c.ResourceType.initPrefab,cc.Prefab);if(L){var U=cc.instantiate(L);U.getComponent(cc.Sprite).spriteFrame=this.resourMgr.getRes("Common/mouseIcon1",c.ResourceType.imgs,cc.SpriteFrame),t.addChild(U);var W=U.getComponent(cc.CircleCollider);this.GameLogic.mouseCollider=W}else cc.error("====mouse1\u9884\u5236\u4f53\uff1a",L);this.GameLogic.signal=l;for(var V=cc.find("forts",t),q=0;q<4;q++){var z=cc.find("functionFort"+q,a),J=cc.find("container",z),Y=cc.find("gunbarrel",z),X=cc.find("laserGun/laserPoint",Y),Z=cc.find("fort"+q,V);if(this.fortPrefab){var Q=cc.instantiate(this.fortPrefab);Z.addChild(Q);var $=cc.find("gunbarrel",Q),tt=cc.find("drillGun/drillLightEffect",$),et=cc.find("normalGun",$);et.addComponent(S.default);var it=cc.find("bulletPoint",et),ot=(O=cc.find("bottom",Q),cc.find("Option",Q)),nt=cc.find("multiplebg/labelMultiple",ot).getComponent(cc.Label);nt.font=this.resourMgr.getRes("Common/font/bf_number2",c.ResourceType.imgs,cc.Font);var rt=cc.find("btnAddMultple",ot);this.SetBtnEvent(rt.getComponent(cc.Button),!0,!0);var st=cc.find("btnSubMultple",ot);this.SetBtnEvent(st.getComponent(cc.Button),!0,!0);var at=cc.find("countdown",Q);at.getComponent(cc.Sprite).spriteFrame=this.resourMgr.getRes("Cannon/DrillGun/timeShot",c.ResourceType.imgs,cc.SpriteFrame);var ct=cc.find("lblcountdown",at).getComponent(cc.Label);ct.font=this.resourMgr.getRes("Cannon/Font/LabelAtlasNumber3",c.ResourceType.imgs,cc.Font);var lt=Z.addComponent(F.default);lt.setGame(this),lt.siteIndex=q,lt.gunbarrel=$,lt.normalGun=$.getChildByName("normalGun").getComponent(cc.Animation),lt.drillGun=$.getChildByName("drillGun").getComponent(cc.Animation),lt.laserGun=$.getChildByName("laserGun").getComponent(cc.Animation),lt.electricityGun=$.getChildByName("electricityGun"),lt.bottom=O,lt.labelMultiple=nt,lt.btnAddMultple=rt,lt.btnSubMultple=st,lt.drillLightEffect=tt,lt.bulletPoint=it,lt.countdown=at,lt.lblcountdown=ct,lt.functionFort=z.addComponent(I.default),lt.functionFort.setGame(this),lt.functionFort.container=J,lt.functionFort.laserPoint=X,lt.functionFort.gunbarrel=Y,lt.functionFort.fort=lt,this.GameLogic.gameFort.push(lt)}else cc.error("====\u9884\u5236\u4f53 for \u4e3a\u7a7a\uff1a")}},e.prototype.initSetting=function(t){var e=cc.find("SettingPoint",t),i=this.resourMgr.getRes("Setting",c.ResourceType.initPrefab,cc.Prefab);if(i){var o=cc.instantiate(i);e.addChild(o),o.addComponent(G.default).Init(this.iGameBase,"FISHKingCrab_MyFishSetting",this,this.GameLogic.onInfoBtnClick.bind(this.GameLogic))}else cc.error("setting \u4e3a\u7a7a===")},e.prototype.SetBtnEvent=function(t,e,i){if(void 0===e&&(e=!0),void 0===i&&(i=!0),null!=t){var o=new cc.Component.EventHandler;o.target=this.node,o.component=this.scriptName,o.handler="BtnEventCallback",t.clickEvents.push(o),t.node.active=e,t.interactable=i}},e.prototype.BtnEventCallback=function(t){var e=t.target;this.OnClickBtn(e)},e.prototype.OnClickBtn=function(t){switch(cc.log("===============>>\u6240\u6709\u6309\u94ae\u70b9\u51fb\u4e8b\u4ef6\uff1a"+t.name),t.name){case"btnConver":this.GameLogic.onConverPropertyBtnClick();break;case"AutoFireSetBtn":this.GameLogic.onAutoFireSetBtnClick();break;case"ChangePaoBtn":this.GameLogic.onChangePaoBtnClick();break;case"AutoFireBtn":this.GameLogic.onBtnAutoFire();break;case"btnAddMultple":this.GameLogic.onBtnAddMultiple();break;case"btnSubMultple":this.GameLogic.onBtnSubMultiple()}},r([A(l.default)],e.prototype,"gameScene",void 0),r([A(u.default)],e.prototype,"fishMgr",void 0),r([A({type:h.default})],e.prototype,"bulletMgr",void 0),r([A(f.default)],e.prototype,"poolMgr",void 0),r([B,T("FISHKingCrab/Game")],e)}(cc.Component);i.default=R,cc._RF.pop()},{"./FISHCRABKING_GameLogic":"FISHCRABKING_GameLogic","./GameScripts/FISHKingCrab_AutoFireButton":"FISHKingCrab_AutoFireButton","./GameScripts/FISHKingCrab_BulletManager":"FISHKingCrab_BulletManager","./GameScripts/FISHKingCrab_CrashGrid":"FISHKingCrab_CrashGrid","./GameScripts/FISHKingCrab_FishManager":"FISHKingCrab_FishManager","./GameScripts/FISHKingCrab_FishPathCrash":"FISHKingCrab_FishPathCrash","./GameScripts/FISHKingCrab_FunctionFort":"FISHKingCrab_FunctionFort","./GameScripts/FISHKingCrab_FunctionLayer":"FISHKingCrab_FunctionLayer","./GameScripts/FISHKingCrab_GameFort":"FISHKingCrab_GameFort","./GameScripts/FISHKingCrab_GameFortGunAni":"FISHKingCrab_GameFortGunAni","./GameScripts/FISHKingCrab_GameSceneMgr":"FISHKingCrab_GameSceneMgr","./GameScripts/FISHKingCrab_MyFishSetting":"FISHKingCrab_MyFishSetting","./GameScripts/FISHKingCrab_PoolManager":"FISHKingCrab_PoolManager","./GameScripts/FISHKingCrab_QuadtreeCollision":"FISHKingCrab_QuadtreeCollision","./GameScripts/FISHKingCrab_ResourceMgr":"FISHKingCrab_ResourceMgr"}],FISHKingCrab_AutoFireButton:[function(t,e,i){"use strict";cc._RF.push(e,"1a417l9wzWPq2VHumfcmtQX","FISHKingCrab_AutoFireButton");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.menu,l=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.autoFireOn=null,e.autoFireLight=null,e.rotateTween=null,e}return n(e,t),e.prototype.start=function(){this.autoFireOn.node.active=!1,this.rotateTween=cc.tween(this.autoFireLight).repeatForever(cc.rotateBy(.8,360))},e.prototype.changeAutoFire=function(){return this.autoFireOn.node.active=!this.autoFireOn.node.active,this.autoFireOn.node.active?this.rotateTween.start():this.rotateTween.stop(),this.autoFireOn.node.active},e.prototype.setAutoFire=function(){return this.rotateTween.start(),this.autoFireOn.node.active=!0,!0},e.prototype.cancelAutoFire=function(){return this.rotateTween.stop(),this.autoFireOn.node.active=!1,!1},r([l(cc.Sprite)],e.prototype,"autoFireOn",void 0),r([l(cc.Node)],e.prototype,"autoFireLight",void 0),r([a,c("FISHKingCrab/FISHKingCrab_AutoFireButton")],e)}(cc.Component);i.default=h,cc._RF.pop()},{}],FISHKingCrab_BombSharkEffect:[function(t,e,i){"use strict";cc._RF.push(e,"950a2hHx3JDiJGmzkwtyoGm","FISHKingCrab_BombSharkEffect");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("../FISHKingCrab_GameDefine"),a=t("./FISHKingCrab_SharkEatEvent"),c=cc._decorator,l=c.ccclass,h=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ball=null,e.firstBomb=null,e.lastBomb=null,e.fishEatEvent=null,e.fishOne=null,e.fishTwo=null,e.currWeight=s.FunctionWeight.bombShark,e.isNext=!0,e}return n(e,t),e.prototype.setGame=function(t){this.game=t},e.prototype.initFunction=function(t,e,i,o){this.playerId=o,this._bulletIndex=i,this.targetFort=t,this.targetFort.setEffect(this),this.game.iAudioPlayer.play_music("bombSharkBgm"),this.lastBomb.on(cc.Animation.EventType.FINISHED,this.sendCatchFish.bind(this)),this.play(e.getCurrWorldPos())},e.prototype.onDestroy=function(){this.targetFort.subEffectWeight(this.currWeight),this.game.gameScene.playMusicBg()},e.prototype.nextStep=function(){this.scheduleOnce(this.playFishEatBall,2)},e.prototype.beforDestroy=function(){this.node.destroy()},e.prototype.ImmediatelyDestroy=function(){this.node.destroy()},e.prototype.play=function(t){var e=this;this.fishEatEvent.eventCB=this.triggerEvent.bind(this);var i=this.node.convertToNodeSpaceAR(t);this.firstBomb.setPosition(i);var o=this.firstBomb.getComponent(cc.Animation);o.on(cc.Animation.EventType.FINISHED,function(){e.firstBomb.active=!1}),o.play(),this.firstBomb.active=!0,this.ball.setPosition(i),this.ball.active=!0,this.ball.getComponent(cc.Animation).play(),cc.tween(this.ball).to(1.5,{position:cc.Vec3.ZERO}).call(function(){e.scheduleOnce(e.playFishEatBall,1)}).start()},e.prototype.playFishEatBall=function(){var t=this;this.fishOne.x=-.5*cc.visibleRect.width-.5*this.fishOne.width,this.fishTwo.x=.5*cc.visibleRect.width+.5*this.fishOne.width,this.fishEatEvent.node.active=!0,this.fishEatEvent.getComponent(cc.Animation).play(),this.scheduleOnce(function(){t.game.iAudioPlayer.play_sound("BombShark")},.75),cc.tween(this.fishOne).to(1.5,{x:.5*cc.visibleRect.width+.5*this.fishOne.width}).start(),cc.tween(this.fishTwo).to(1.5,{x:-.5*cc.visibleRect.width-.5*this.fishOne.width}).start()},e.prototype.triggerEvent=function(){this.lastBomb.node.active=!0,this.lastBomb.getComponent(cc.Animation).play()},e.prototype.sendCatchFish=function(){if(this.lastBomb.node.active=!1,this.game.gameId==this.playerId){var t=this.game.fishMgr.getFunctionCatchFishs(s.FunctionCatchCount.bombShark);this.game.iGameBase.EmitEvent(s.EventCode.FunctionCatchFishs,{wChairID:this.game.iGameBase.UserManager_getChairID(),dwBulletIndex:this._bulletIndex,dwFishIndex:t,cbFishCount:t.length})}},r([h(cc.Node)],e.prototype,"ball",void 0),r([h(cc.Node)],e.prototype,"firstBomb",void 0),r([h(cc.Animation)],e.prototype,"lastBomb",void 0),r([h(a.default)],e.prototype,"fishEatEvent",void 0),r([h(cc.Node)],e.prototype,"fishOne",void 0),r([h(cc.Node)],e.prototype,"fishTwo",void 0),r([l],e)}(cc.Component);i.default=u,cc._RF.pop()},{"../FISHKingCrab_GameDefine":"FISHKingCrab_GameDefine","./FISHKingCrab_SharkEatEvent":"FISHKingCrab_SharkEatEvent"}],FISHKingCrab_BulletManager:[function(t,e,i){"use strict";cc._RF.push(e,"f46d811g4PI+so1HNexNEBQ","FISHKingCrab_BulletManager");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./FISHKingCrab_GameBulletBase"),c=t("./FISHKingCrab_GameBulletDrill"),l=t("./FISHKingCrab_GameBulletHit"),h=t("./FISHKingCrab_GameDefine"),u=cc._decorator,p=u.ccclass,d=u.menu,f=u.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bulletPrefab=null,e.bulletDrillPrefab=null,e.bulletHitPrefab=null,e.bulletHitNode=null,e.bulletsInfo=[],e.gameBullets=[],e.bulletCache=[],e.hitCache=[],e}return n(e,t),e.prototype.setGame=function(t){this.game=t},e.prototype.clearBullets=function(){this.bulletsInfo=[];for(var t=this.gameBullets.length-1;t>=0;t--)this.recycleBullet(this.gameBullets[t]);this.gameBullets=[],this.bulletCache=[],this.hitCache=[]},e.prototype.fire=function(t,e,i,o,n,r,s,a,c){this.bulletsInfo.push({chairID:t,gameID:e,bulletIndex:i,crashGridPos:o,angle:n,lockFishIndex:r,multiple:s,createTick:a,isDrillGun:c==h.FunctionType.drill})},e.prototype.recycleBullet=function(t){var e=this.gameBullets.indexOf(t);-1!=e&&this.gameBullets.splice(e,1),t.bulletInfo.isDrillGun?t.node.destroy():this.bulletCache.push(t.recycle())},e.prototype.bulletDrillBomb=function(t,e,i){var o,n;try{for(var r=s(this.gameBullets),a=r.next();!a.done;a=r.next()){var c=a.value;if(c.bulletInfo.bulletIndex==t){null!=c&&c.playBomb(e,i);break}}}catch(l){o={error:l}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}},e.prototype.getOutBullet=function(t){if(t){var e,i=(e=cc.instantiate(this.bulletDrillPrefab)).addComponent(c.default);return i.collider=e.getComponent(cc.Collider),i.flameParent=cc.find("flameParent",e),i.streak=cc.find("New Particle",e),i.bullerAni=e.getComponent(cc.Animation),i.setGame(this.game),i}return this.bulletCache.length>0?this.bulletCache.shift():(e=cc.instantiate(this.bulletPrefab)).getComponent(a.default)},e.prototype.updateBulletOut=function(){this.game.iGameBase.GetServerTick();for(var t=0;t<this.bulletsInfo.length;t++)if(this.bulletsInfo[t]){var e=this.bulletsInfo.splice(t,1)[0],i=null,o=e.isDrillGun;if((i=this.getOutBullet(o)).setGame(this.game),this.node.addChild(i.node),o){var n=this.game.GameLogic.getFortByGamId(e.gameID);n?(i.init(e,this,n),this.gameBullets.push(i)):cc.error("\u627e\u4e0d\u5230\u8fd9\u4e2a\u73a9\u5bb6\uff1a",e.gameID)}else i.init(e,this),this.gameBullets.push(i);t--}},e.prototype.bulletSync=function(t,e,i,o){this.onrestorescene(t,e,i,o)},e.prototype.onrestorescene=function(t,e,i,o){var n,r;if(!this.game||this.game.iGameBase.getExectUpdate()){var c=this.game.GameLogic.getFortByGamId(e);if(c){var l=c.getBulletInitPos(),h=this.game.mCrashGrid.getCrashGridByPos(l).clone(),u=this.get_restore_bullet_context(h.x,h.y,i,this.game.iGameBase.GetServerTick()-o);if(u){var p=0;try{for(var d=s(this.game.GameLogic.gameFort),f=d.next();!f.done;f=d.next()){var g=f.value;g.isActive&&g.gameId==e&&(p=g.chairId)}}catch(b){n={error:b}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}var y=null;y=this.bulletCache.length>0?this.bulletCache.shift():cc.instantiate(this.bulletPrefab).getComponent(a.default);var m={chairID:p,gameID:e,bulletIndex:t,crashGridPos:u.pos,angle:u.rotation,lockFishIndex:0,multiple:0,createTick:o,isDrillGun:!1};this.node.addChild(y.node),y.setGame(this.game),y.init(m,this),this.gameBullets.push(y)}else console.error("lnhewbfwefewfbyewfewfwe")}else console.error("\u8fd9\u4e2a\u73a9\u5bb6\u4e0d\u5b58\u5728")}},e.prototype.get_restore_bullet_context=function(t,e,i,o){var n=this.build_bullet_born_info(t,e,i);if(!n)return console.log("sjewvfwefwefwwe"),null;var r=o/1e3,s=Math.floor(r/h.FrameTime);if(s>120/h.FrameTime)return console.log("\u6240\u9700\u65f6\u95f4\u592a\u5927"),null;if(s<=0)return n;var a=n.born_row,c=n.born_col,l=n.speed_row,u=n.speed_col,p=this.caculate_bullet_in_row_in_col_speed_row_speed_col(a,c,l,u,s);return n.born_row=p.in_row,n},e.prototype.build_bullet_born_info=function(t,e,i){var o=this.game.mCrashGrid.getGridPos(t,e);if(!o)return console.error("\u5f53\u524d\u4f4d\u7f6e\u4e0d\u5728\u5c4f\u5e55\u4e2d"),null;var n=.5*Math.sin(i*Math.PI/180),r=.5*Math.cos(i*Math.PI/180),s=this.caculate_bullet_speed_x_y(n,r);return{born_row:t,born_col:e,speed_row:n,speed_col:r,pos:o,rotation:this.caculate_bullet_rotation(n,r),speed_x:s[0],speed_y:s[1]}},e.prototype.caculate_bullet_in_row_in_col_speed_row_speed_col=function(t,e,i,o,n){var r=this.game.mCrashGrid.CrashRowMin,s=this.game.mCrashGrid.CrashRowMax,a=this.game.mCrashGrid.CrashColMin,c=this.game.mCrashGrid.CrashColMax;return t<=(r+=.5)?i<0&&(i=-i):t>=(s+=.5)&&i>0&&(i=-i),e<=(a+=.5)?o<0&&(o=-o):e>=(c+=.5)&&o>0&&(o=-o),t+=i,e+=o,(n-=1)>0&&this.caculate_bullet_in_row_in_col_speed_row_speed_col(t,e,i,o,n),{in_row:t,in_col:e}},e.prototype.caculate_bullet_rotation=function(t,e){return 180*Math.atan2(t,e)/Math.PI},e.prototype.caculate_bullet_speed_x_y=function(t,e){return[e*this.game.mCrashGrid.GridWidth,t*this.game.mCrashGrid.GridHeight]},e.prototype.updateBulletMove=function(){for(var t=this.game.iGameBase.GetServerTick(),e=0;e<this.gameBullets.length;e++)this.gameBullets[e].updateMove(t)},e.prototype.playHit=function(t){var e=null;if(this.hitCache.length>0)e=this.hitCache.shift();else{var i=cc.instantiate(this.bulletHitPrefab);i&&(e=i.getComponent(l.default))}e.setGame(this.game),t.angle&&(e.node.angle=t.angle+90),this.bulletHitNode.addChild(e.node),e.node.setPosition(t.pos),e.playHit(t.bulletIndex,t.hitType,t.cb,t.bomb,t.playerId)},e.prototype.onHitFinish=function(t){this.hitCache.length<30?(t.node.removeFromParent(!0),this.hitCache.push(t)):t.node.destroy()},e.prototype.onUpdate=function(t){this.updateBulletOut(),this.updateBulletMove(t)},e.prototype.onDisable=function(){console.log("BulletManager \u7981\u7528\u72b6\u6001")},r([f(cc.Prefab)],e.prototype,"bulletPrefab",void 0),r([f(cc.Prefab)],e.prototype,"bulletDrillPrefab",void 0),r([f(cc.Prefab)],e.prototype,"bulletHitPrefab",void 0),r([f(cc.Node)],e.prototype,"bulletHitNode",void 0),r([p,d("FISHKingCrab/FISHKingCrab_BulletManager")],e)}(cc.Component);i.default=g,cc._RF.pop()},{"./FISHKingCrab_GameBulletBase":"FISHKingCrab_GameBulletBase","./FISHKingCrab_GameBulletDrill":"FISHKingCrab_GameBulletDrill","./FISHKingCrab_GameBulletHit":"FISHKingCrab_GameBulletHit","./FISHKingCrab_GameDefine":"FISHKingCrab_GameDefine"}],FISHKingCrab_CMD:[function(t,e,i){"use strict";cc._RF.push(e,"9c63faJJNcZSU8VrDBNiK89","FISHKingCrab_CMD"),Object.defineProperty(i,"__esModule",{value:!0}),i.SceneStatus=void 0,function(t){t[t.SCENE_NONE=0]="SCENE_NONE",t[t.SCENE_WAIT_TIDE=1]="SCENE_WAIT_TIDE",t[t.SCENE_RUNNING=2]="SCENE_RUNNING"}(i.SceneStatus||(i.SceneStatus={}));var o=function(){function t(){}return t.GAME_PLAYER=4,t.SUB_S_ANDROID_BANKOPERATOR=511,t.SUB_S_FISH=2002,t.SUB_S_USER_FIRE=2003,t.SUB_S_EXCHANGE_BULLET=2004,t.SUB_S_SWITCH_SCENE=2005,t.SUB_S_CATCH_CHAIN=2006,t.SUB_S_TIMER_SYNC=2007,t.SUB_S_LOCK_FISH=2008,t.SUB_S_PLAYER_SYNC=2010,t.SUB_S_FISH_SYNC=2011,t.SUB_S_BULLET_SYNC=2012,t.SUB_S_REPLACE_CATCH=2013,t.SUB_S_SWITCH_CANNON=2009,t.SUB_S_BULLET_OVER=2014,t.SUB_S_THUNDER_CATCH_CHAIN=2015,t.SUB_S_TRANSITION_SCORE=2016,t.SUB_S_ZUAN_TOU=2017,t.SUB_S_BACKSTAGE=2018,t.SUB_S_TREASURE_BOX=2020,t.SUB_S_TREASURE_BOX_END=2021,t.SUB_S_INGOT=2022,t.SUB_S_INGOT_END=2023,t.CMD_S_GameScene=[{k:"nSceneID",t:"int"},{k:"lBaseScore",t:"score"},{k:"nStyleID",t:"int"},{k:"wPlayerCount",t:"word"},{k:"wFishCount",t:"word"},{k:"wBulletCount",t:"word"},{k:"dwServerTicket",t:"dword"}],t.CMD_S_PlayerInfo=[{k:"nPlayerID",t:"int"},{k:"wChairID",t:"word"},{k:"lPlayerScore",t:"score"},{k:"dwPlayerMultiple",t:"dword"},{k:"dwLockFishIndex",t:"dword"},{k:"cbCannonType",t:"byte"},{k:"fWinScore",t:"score"}],t.CMD_S_FishInfo=[{k:"dwFishIndex",t:"dword"},{k:"nFishKindID",t:"int"},{k:"wPathID",t:"word"},{k:"wPath_Index",t:"word"},{k:"dwCreteTicket",t:"dword"},{k:"nSpecialFishKindID",t:"int",l:[3,0]}],t.CMD_S_BulletInfo=[{k:"dwBulletIndex",t:"dword"},{k:"nPlayerID",t:"int"},{k:"dBulletAngle",t:"double"},{k:"dwBulletTicket",t:"dword"},{k:"cbBulletDefine",t:"byte"}],t.CMD_S_UserFire=[{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"},{k:"nBulletMultiple",t:"int"},{k:"dBulletAngle",t:"double"},{k:"lPlayerScore",t:"score"},{k:"dwCreateTicket",t:"dword"},{k:"dwFishIndex",t:"dword"},{k:"cbBulletDefine",t:"byte"}],t.CMD_S_PlayerExchangeBullet=[{k:"nPlayerID",t:"int"},{k:"nPlayerMultiple",t:"int"}],t.CMD_S_PlayerCatchFish=[{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"},{k:"cbBulletDefine",t:"byte"},{k:"dwFishIndex",t:"dword"},{k:"lFishScore",t:"score"},{k:"lGongNengScore",t:"score"},{k:"fWinScore",t:"score"},{k:"iBulletMultiple",t:"int"},{k:"cbSpecial",t:"byte"}],t.CMD_S_CatchMuchFish=[{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"},{k:"cbBulletDefine",t:"byte"},{k:"dwFishIndex",t:"dword",l:[40,0]},{k:"lFishScore",t:"score",l:[40,0]},{k:"lGongNengScore",t:"score"},{k:"fWinScore",t:"score"},{k:"fFirePower",t:"double"}],t.CMD_S_BulletInfoSyn=[{k:"dwBulletIndex",t:"dword"},{k:"dCol",t:"double"},{k:"dRow",t:"double"}],t.CMD_S_CHANGE_SCENE=[{k:"nSceneID",t:"int"}],t.CMD_S_LockFish=[{k:"nPlayerID",t:"int"},{k:"dwLockFishIndex",t:"dword"}],t.CMD_S_SynTime=[{k:"dwServerTicket",t:"dword"}],t.CMD_S_Replace_Catch=[{k:"dwMaxReplaceGameID",t:"dword",l:[3,0]}],t.CMD_S_SwitchCannon=[{k:"wChairID",t:"word"},{k:"cbCannonType",t:"byte"}],t.CMD_S_GongNengBulletOver=[{k:"wChairID",t:"word"},{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"},{k:"cbBulletDefine",t:"byte"},{k:"lGongNengScore",t:"score"}],t.CMD_S_Transition_Score=[{k:"bTransition",t:"bool"},{k:"fScore",t:"double"},{k:"fTransitionScore",t:"double"}],t.CMD_S_ZuanTouBulletOver=[{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"}],t.CMD_S_BackStage=[{k:"nPlayerID",t:"int"}],t.CMD_S_CatchTreasureBox=[{k:"wChairID",t:"word"},{k:"fScore",t:"score"}],t.CMD_S_CatchIngot=[{k:"wChairID",t:"word"},{k:"fIngotScore",t:"score"},{k:"iFirePower",t:"int"}],t.SUB_C_USER_FIRE=1,t.SUB_C_EXCHANGE_BULLET=2,t.SUB_C_CATCH_FISH=3,t.SUB_C_TIMER_SYNC=4,t.SUB_C_LOCK_FISH=5,t.SUB_C_SWITCH_CANNON=6,t.SUB_C_SHAN_DIAN_CATCH_FISH=7,t.SUB_C_ZUAN_TOU_CATCH_FISH=9,t.SUB_C_TRANSITION_SCORE=15,t.SUB_C_BACKSTAGE_START=16,t.SUB_C_BACKSTAGE_END=17,t.SUB_C_GONG_NENG_CATCH_FISH=19,t.SUB_C_CATCH_TREASURE_BOX=20,t.SUB_C_CATCH_INGOT=21,t.CMD_C_UserFire=[{k:"dwBulletIndex",t:"dword"},{k:"dBulletAngle",t:"double"},{k:"dwFishIndex",t:"dword"},{k:"cbUserDefine",t:"byte"}],t.CMD_C_Transition_Score=[{k:"fScore",t:"double"}],t.CMD_C_PlayerExchangeBullet=[{k:"bMultiple",t:"bool"}],t.CMD_C_PlayerCatchFish=[{k:"wChairID",t:"word"},{k:"dwBulletIndex",t:"dword"},{k:"dwFishIndex",t:"dword"}],t.CMD_C_PlayerShanDianCatchFish=[{k:"wChairID",t:"word"},{k:"dwBulletIndex",t:"dword"},{k:"dwFishIndex",t:"dword"}],t.CMD_C_PlayerGongNengCatchFish=[{k:"wChairID",t:"word"},{k:"dwBulletIndex",t:"dword"},{k:"cbFishCount",t:"byte"},{k:"dwFishIndex",t:"dword",l:[40,0]}],t.CMD_C_PlayerZuanTouCatchFish=[{k:"wChairID",t:"word"},{k:"dwBulletIndex",t:"dword"},{k:"dwFishIndex",t:"dword"}],t.CMD_C_LockFish=[{k:"dwLockFishIndex",t:"dword"}],t.CMD_C_SwitchCannon=[{k:"wChairID",t:"word"},{k:"cbCannonType",t:"byte"}],t}();i.default=o,cc._RF.pop()},{}],FISHKingCrab_CrashGrid:[function(t,e,i){"use strict";cc._RF.push(e,"6691bjRBJzWyG6RiUZt3OXn","FISHKingCrab_CrashGrid");var o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0}),i.CrashGrid=i.GridItem=i.GridConfig=void 0,i.GridConfig={row:21,col:38};var n=function(t,e,i,o){this.rect=null,this.center=null,this.fishList=null,this.rect=cc.rect(t,e,i,o),this.center=cc.v2(t+i/2,e+o/2),this.fishList=[]};i.GridItem=n;var r=function(){function t(t,e){this.NetColCount=0,this.NetRowCount=0,this.CrashRowMin=0,this.CrashRowMax=0,this.CrashColMin=0,this.CrashColMax=0,this.BeginRow=0,this.BeginCol=0,this.GridWidth=0,this.GridHeight=0,this.CrashMinX=0,this.CrashMaxX=0,this.CrashMinY=0,this.CrashMaxY=0,this.beginPos=null,this.gridItems={},this.Device_WIDTH=0,this.Device_HEIGHT=0,this.Device_WIDTH=t,this.Device_HEIGHT=e,this.CrashMaxX=t,this.CrashMaxY=e,this.initGrid(),this.generateNetGrid()}return t.prototype.release=function(){this.gridItems={}},t.prototype.clear=function(){for(var t in this.gridItems)for(var e in this.gridItems[t])this.gridItems[t][e].fishList=[]},t.prototype.initGrid=function(){var t=Math.max(i.GridConfig.row,i.GridConfig.col);this.NetColCount=3*(t+i.GridConfig.col),this.NetRowCount=3*(t+i.GridConfig.row),this.GridWidth=cc.visibleRect.width/i.GridConfig.col,this.GridHeight=cc.visibleRect.height/i.GridConfig.row,this.CrashColMax=i.GridConfig.col-1,this.CrashRowMax=i.GridConfig.row-1,this.beginPos=cc.visibleRect.bottomLeft;var e=cc.winSize.width/(cc.winSize.height*this.Device_WIDTH/this.Device_HEIGHT);if(e>1){var o=Math.ceil((e-1)*i.GridConfig.col/2);this.CrashColMin=-o,this.CrashColMax+=o,this.CrashMinX-=o*this.GridWidth,this.CrashMaxX+=o*this.GridWidth}this.BeginCol=-t,this.BeginRow=-t},t.prototype.generateNetGrid=function(){for(var t=this.BeginRow;t<this.BeginRow+this.NetRowCount;t++){this.gridItems[t]={};for(var e=this.BeginCol;e<this.BeginCol+this.NetColCount;e++){var i=this.beginPos.x+this.GridWidth*e,o=this.beginPos.y+this.GridHeight*t,r=new n(i,o,this.GridWidth,this.GridHeight);this.gridItems[t][e]=r}}},t.prototype.getGridItem=function(t,e){return this.gridItems[t]?this.gridItems[t][e]:null},t.prototype.getGridItemCenter=function(t,e){var i=this.getGridItem(t,e);return i?i.center:cc.v2(-999,-999)},t.prototype.getGridPos=function(t,e){var i=Math.floor(t),o=Math.floor(e),n=this.getGridItem(i,o);return n?cc.v2(n.rect.x+(e-o)*this.GridWidth,n.rect.y+(t-i)*this.GridHeight):(cc.error("getGridPos row",i,"col",o),null)},t.prototype.isCrashGrid=function(t,e){return t>=this.CrashRowMin&&t<=this.CrashRowMax&&e>=this.CrashColMin&&e<=this.CrashColMax},t.prototype.getCrashGridByPos=function(t,e){void 0===e&&(e=!0);var i=t.sub(this.beginPos),o=i.x/this.GridWidth,n=i.y/this.GridHeight;return!e||this.isCrashGrid(n,o)?cc.v2(n,o):(cc.log("\u4e0d\u5728\u7f51\u683c\u5185   "+t),null)},t.prototype.insertCrashItem=function(t,e){var i,n;try{for(var r=o(t.CrashGrid),s=r.next();!s.done;s=r.next()){var a=s.value,c=this.getGridItem(a.x,a.y);c&&c.fishList.push(e)}}catch(l){i={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}},t.prototype.removeCrashItem=function(t,e){var i,n;if(t.CrashGrid)try{for(var r=o(t.CrashGrid),s=r.next();!s.done;s=r.next()){var a=s.value,c=this.getGridItem(a.x,a.y);if(c){var l=c.fishList.indexOf(e);l>=0&&c.fishList.splice(l,1)}}}catch(h){i={error:h}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}},t.prototype.getFishInGrid=function(t,e){var i=this.getGridItem(Math.floor(t),Math.floor(e));return i?i.fishList:[]},t}();i.CrashGrid=r,cc._RF.pop()},{}],FISHKingCrab_FishKindMap:[function(t,e,i){"use strict";cc._RF.push(e,"399c2UI0Uz+6vmLVScBRvg5","FISHKingCrab_FishKindMap"),Object.defineProperty(i,"__esModule",{value:!0}),i.FishKindMap=void 0;var o=t("./FISHKingCrab_GameDefine");i.FishKindMap={100:{id:100,name:"\u5927\u773c\u775b\u9c7c",model:1,multipleMin:2,multipleMax:2,type:6,animType:o.FishAnimType.frameAnim,moveSpeed:.02,goldCount:1},101:{id:101,name:"\u8717\u725b\u9c7c",model:1,multipleMin:2,multipleMax:2,type:6,animType:o.FishAnimType.frameAnim,moveSpeed:.02,goldCount:1},102:{id:102,name:"\u5c0f\u9ec4\u9c7c",model:1,multipleMin:2,multipleMax:2,type:6,animType:o.FishAnimType.frameAnim,moveSpeed:.02,goldCount:1},103:{id:103,name:"\u5c0f\u65d7\u9c7c",model:1,multipleMin:3,multipleMax:3,type:6,animType:o.FishAnimType.frameAnim,moveSpeed:.02,goldCount:1},104:{id:104,name:"\u5c0f\u6cb3\u8c5a",model:1004,multipleMin:15,multipleMax:15,type:1,animType:o.FishAnimType.frameAnim,moveSpeed:.02,goldCount:1},105:{id:105,name:"\u8774\u8776\u9c7c",model:1003,multipleMin:10,multipleMax:10,type:6,animType:o.FishAnimType.frameAnim,moveSpeed:.02,goldCount:3},106:{id:106,name:"\u5c0f\u4e11\u9c7c",model:1,multipleMin:6,multipleMax:6,type:6,animType:o.FishAnimType.frameAnim,goldCount:3},107:{id:107,name:"\u9f99\u867e",model:1015,multipleMin:8,multipleMax:8,type:6,animType:o.FishAnimType.frameAnim,isNoneShadow:!0,goldCount:3},108:{id:108,name:"\u5251\u9c7c",model:1005,multipleMin:5,multipleMax:5,type:6,animType:o.FishAnimType.frameAnim,goldCount:5},109:{id:109,name:"\u7ae0\u9c7c",model:16,multipleMin:300,multipleMax:300,type:2,animType:o.FishAnimType.frameAnim,goldCount:5},110:{id:110,name:"\u706f\u7b3c\u9c7c",model:7,multipleMin:18,multipleMax:18,type:1,animType:o.FishAnimType.frameAnim,goldCount:5},111:{id:111,name:"\u5c0f\u6d77\u9f9f",model:4,multipleMin:9,multipleMax:9,type:6,animType:o.FishAnimType.frameAnim,goldCount:6},112:{id:112,name:"\u9e2d\u5634\u9c7c",model:1010,multipleMin:40,multipleMax:40,type:1,animType:o.FishAnimType.frameAnim,goldCount:6},113:{id:113,name:"\u84dd\u8759\u8760\u9c7c",model:1001,multipleMin:35,multipleMax:35,type:1,animType:o.FishAnimType.frameAnim,goldCount:6},114:{id:114,name:"\u5927\u9ec4\u9c7c",model:1008,multipleMin:50,multipleMax:50,type:3,animType:o.FishAnimType.frameAnim,moveSpeed:.02,goldCount:8},115:{id:115,name:"\u5927\u523a\u732c\u9c7c",model:1007,multipleMin:20,multipleMax:20,type:1,animType:o.FishAnimType.goldBomb,moveSpeed:.025,goldCount:8},116:{id:116,name:"\u5927\u70df\u6597\u9c7c",model:1006,multipleMin:7,multipleMax:7,type:6,animType:o.FishAnimType.goldBomb,moveSpeed:.02,goldCount:8},117:{id:117,name:"\u5927\u9b54\u9b3c\u9c7c",model:1009,multipleMin:45,multipleMax:45,type:1,animType:o.FishAnimType.goldBomb,moveSpeed:.02,goldCount:8},118:{id:118,name:"\u5927\u84dd\u867e",model:1013,multipleMin:30,multipleMax:30,type:1,animType:o.FishAnimType.goldBomb,moveSpeed:.02,goldCount:10},119:{id:119,name:"\u91d1\u9f99\u9c7c",model:1013,multipleMin:30,multipleMax:30,type:1,animType:o.FishAnimType.goldBomb,goldCount:10,functionUIName:"Piranhas",functionUIType:o.FunctionUIType.common},120:{id:120,name:"\u84dd\u9f99",model:100,multipleMin:50,multipleMax:50,type:100,animType:o.FishAnimType.no_ani,goldCount:10,moveSpeed:.02,functionUIName:"IceDragon",functionUIType:o.FunctionUIType.common},121:{id:121,name:"\u91d1\u8272\u6d77\u8c5a",model:101,multipleMin:60,multipleMax:60,type:101,animType:o.FishAnimType.no_ani,goldCount:10,functionUIName:"DolpHin",functionUIType:o.FunctionUIType.common,isDontCanfunctionCatch:!0},122:{id:122,name:"\u9e92\u9e9f",model:1016,multipleMin:50,multipleMax:50,type:3,animType:o.FishAnimType.no_ani,moveSpeed:.025,isNoneShadow:!0,goldCount:10,functionUIName:"FireKylin",functionUIType:o.FunctionUIType.common,isDontCanfunctionCatch:!0},123:{id:123,name:"\u94f6\u5143\u5b9d",model:102,multipleMin:70,multipleMax:70,type:102,animType:o.FishAnimType.none,moveSpeed:.02,isNoneShadow:!0,goldCount:10,isDontCanfunctionCatch:!0},124:{id:124,name:"\u91d1\u5143\u5b9d",model:11,multipleMin:60,multipleMax:60,type:3,animType:o.FishAnimType.none,moveSpeed:.02,isNoneShadow:!0,goldCount:10,isDontCanfunctionCatch:!0},125:{id:125,name:"1\u79cd\u9c7c\u540c\u7c7b\u9c7c",model:103,multipleMin:80,multipleMax:80,type:103,animType:-1,moveSpeed:.025,isNoneShadow:!0,goldCount:10,isSpecial:!0,weight:o.FunctionWeight.lighting,isDontCanfunctionCatch:!0,functionUIName:"Aced",functionUIType:o.FunctionUIType.common},126:{id:126,name:"2\u79cd\u9c7c\u540c\u7c7b\u9c7c",model:10,multipleMin:80,multipleMax:80,type:3,animType:o.FishAnimType.no_ani,moveSpeed:.025,isNoneShadow:!0,goldCount:10,isSpecial:!0,weight:o.FunctionWeight.lighting,isDontCanfunctionCatch:!0,functionUIName:"DoubleKill",functionUIType:o.FunctionUIType.common},127:{id:127,name:"3\u79cd\u9c7c\u540c\u7c7b\u9c7c",model:13,multipleMin:100,multipleMax:100,type:3,animType:o.FishAnimType.no_ani,moveSpeed:.025,goldCount:10,isSpecial:!0,weight:o.FunctionWeight.lighting,isDontCanfunctionCatch:!0,functionUIName:"TripleKill",functionUIType:o.FunctionUIType.common},128:{id:128,name:"\u70b8\u5f39\u9ca8\u9c7c",model:14,multipleMin:120,multipleMax:120,type:3,animType:o.FishAnimType.no_ani,moveSpeed:.025,goldCount:10,weight:o.FunctionWeight.bombShark,isDontCanfunctionCatch:!0,functionUIType:o.FunctionUIType.bombShark},129:{id:129,name:"\u94bb\u5934\u70ae",model:20,multipleMin:200,multipleMax:200,type:2,animType:o.FishAnimType.no_ani,moveSpeed:.02,goldCount:13,weight:o.FunctionWeight.drill,isDontCanfunctionCatch:!0},130:{id:130,name:"\u6fc0\u5149\u70ae",model:18,multipleMin:25,multipleMax:25,type:1,animType:o.FishAnimType.no_ani,moveSpeed:.02,goldCount:10,weight:o.FunctionWeight.laser,isDontCanfunctionCatch:!0},131:{id:131,name:"\u706b\u7bad\u70ae",model:15,multipleMin:100,multipleMax:140,type:4,animType:o.FishAnimType.frameAnim,moveSpeed:.045,goldCount:15,weight:o.FunctionWeight.rocket,isDontCanfunctionCatch:!0,functionUIType:o.FunctionUIType.turnplate},132:{id:132,name:"\u5c40\u90e8\u70b8\u5f39",model:3,multipleMin:7,multipleMax:7,type:5,animType:o.FishAnimType.no_ani,moveSpeed:.045,goldCount:15,weight:o.FunctionWeight.localBomb,isDontCanfunctionCatch:!0},133:{id:133,name:"\u706b\u8783\u87f9",model:4,multipleMin:9,multipleMax:9,type:5,animType:o.FishAnimType.bomb,goldCount:10,moveSpeed:.045,isNoneShadow:!0,isDontCanfunctionCatch:!0,weight:o.FunctionWeight.vortex},134:{id:134,name:"\u5b9d\u7bb1",model:6,multipleMin:10,multipleMax:10,type:5,animType:o.FishAnimType.no_ani,moveSpeed:.045,goldCount:10,weight:o.FunctionWeight.treasureBox,isDontCanfunctionCatch:!0}},cc._RF.pop()},{"./FISHKingCrab_GameDefine":"FISHKingCrab_GameDefine"}],FISHKingCrab_FishManager:[function(t,e,i){"use strict";cc._RF.push(e,"36950ag/AFf+1k1B+1cfIIG","FISHKingCrab_FishManager");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./FISHKingCrab_FishKindMap"),c=cc._decorator,l=c.ccclass,h=c.menu,u=c.property,p=t("./FISHKingCrab_GameFish"),d=t("./FISHKingCrab_ResourceMgr"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shadowMaterial=null,e.handlerPriority=8,e.UpSideDown=!1,e.fishInfo=[],e.gameFish=[],e.fishCache={},e.fishNodes={},e.fishShadowNodes={},e.loadingFish={},e.loadCompletes=new Map,e}return n(e,t),Object.defineProperty(e.prototype,"getGameFish",{get:function(){return this.gameFish},enumerable:!1,configurable:!0}),e.prototype.setGame=function(t){this.game=t},e.prototype.onLoad=function(){var t=new cc.Node("FishShadows");for(var e in this.node.addChild(t),a.FishKindMap)a.FishKindMap[e],this.fishShadowNodes[e]=new cc.Node,t.addChild(this.fishShadowNodes[e]),this.fishNodes[e]=new cc.Node,this.node.addChild(this.fishNodes[e])},e.prototype.onDestroy=function(){this.fishInfo=[],this.gameFish=[],this.fishCache={},this.fishNodes={},this.fishShadowNodes={}},e.prototype.getFishByIndex=function(t){var e,i;try{for(var o=s(this.gameFish),n=o.next();!n.done;n=o.next()){var r=n.value;if(r.fishInfo.dwFishIndex==t)return r}}catch(a){e={error:a}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}return null},e.prototype.getFishByKindID=function(t){var e,i,o=[];try{for(var n=s(this.gameFish),r=n.next();!r.done;r=n.next()){var a=r.value;a.fishInfo.nFishKindID==t&&null!=a&&a.isCanCatch&&a.checkInScreenRegion()&&o.push(a)}}catch(c){e={error:c}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}return o},e.prototype.clearFish=function(){var t,e;this.fishInfo=[];try{for(var i=s(this.gameFish),o=i.next();!o.done;o=i.next()){var n=o.value;this.recycleFish(n)}}catch(r){t={error:r}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}this.gameFish=[]},e.prototype.onFishInfo=function(t){this.fishInfo=this.fishInfo.concat(t)},e.prototype.changeScene=function(){this.fishInfo=[]},e.prototype.changeSceneComplete=function(){for(;this.gameFish.length>0;)this.gameFish.shift().enterChangeSceneState()},e.prototype.updateFishOut=function(t){void 0===t&&(t=10);for(var e=this.game.iGameBase.GetServerTick(),i=0,o=0;o<this.fishInfo.length;o++){if(this.fishInfo[o]&&this.fishInfo[o].dwCreteTicket<=e){var n=this.fishInfo.splice(o,1)[0],r=n.nFishKindID;if(this.fishCache[r]&&this.fishCache[r].length>0){var s=this.fishCache[r].shift();this.createFish(r,n,s,!1)}else this.createFish(r,n,null,!0);o--,++i}if(i>=t)break}},e.prototype.createFish=function(t,e,i,o){var n=this;if(void 0===o&&(o=!1),o){var r=this.game.resourMgr.getRes(t,d.ResourceType.fishPrefab,cc.Prefab);if(!r)return void cc.error("\u6ca1\u6709\u8fd9\u4e2a\u9c7c\u7684\u9884\u5236\u4f53,fishKind\uff1a"+t);var s=cc.instantiate(r);i=s.getComponent(p.default)}if(null!=i){this.fishNodes[e.nFishKindID].addChild(i.node),i.node.setPosition(-5e4,0),i.setGame(this.game);var c=null;a.FishKindMap[t].isSpecial&&(c=[],e.nSpecialFishKindID.forEach(function(t,e){if(t>0){var o=n.game.resourMgr.getRes(t,d.ResourceType.fishPrefab,cc.Prefab),r=cc.instantiate(o);r.setParent(i.fishContainers[e]);var s=r.getComponent(p.default);i.setGame(n.game),s.setGame(n.game),s.activeCollider(!1),s.playMoveAni(),c.push(s)}}));var l=this.game.iGameBase.utils_gen_handler(this.recycleFish,this);i.initWithFishInfo(e,this.UpSideDown,null,l,c),this.gameFish.push(i)}else cc.error("\u5b9e\u4f8b\u5316\u7684\u9c7c\u4e3a\u7a7a\uff1a",t,o)},e.prototype.getCanCatchFish=function(){for(var t=[],e=0;e<this.getGameFish.length;e++){var i=this.getGameFish[e];i.isCanCatch&&t.push(i)}return t},e.prototype.getFunctionCatchFishs=function(t){for(var e=[],i=new Map,o=this.getCanCatchFish(),n=0;n<o.length;n++){var r=o[this.game.iGameBase.utils_random(0,o.length-1)];if(r.isCanCatch&&!r.fishKind.isDontCanfunctionCatch&&r.checkInScreenRegion())if(i.has(r.fishInfo.dwFishIndex))n--;else if(e.push(r.fishInfo.dwFishIndex),i.set(r.fishInfo.dwFishIndex,!0),e.length>=t)break}return e},e.prototype.updateFishMove=function(t){for(var e=this.game.iGameBase.GetServerTick(),i=0;i<this.gameFish.length;i++)if(this.gameFish[i].updateMove(e,t)){var o=this.gameFish.splice(i,1)[0];this.recycleFish(o),i--}},e.prototype.recycleFish=function(t,e){if(void 0===e&&(e=!0),!e)for(var i=0;i<this.gameFish.length;i++)if(this.gameFish[i].fishInfo.dwFishIndex==t.fishInfo.dwFishIndex){this.gameFish.splice(i,1)[0];break}null==this.fishCache[t.fishKind.id]&&(this.fishCache[t.fishKind.id]=[]),null!=t&&this.fishCache[t.fishKind.id].push(t.recycle())},e.prototype.onUpdate=function(t){this.updateFishOut(),this.updateFishMove(t)},r([u(cc.Material)],e.prototype,"shadowMaterial",void 0),r([l,h("FISHKingCrab/FISHKingCrab_FishManager")],e)}(cc.Component);i.default=f,cc._RF.pop()},{"./FISHKingCrab_FishKindMap":"FISHKingCrab_FishKindMap","./FISHKingCrab_GameFish":"FISHKingCrab_GameFish","./FISHKingCrab_ResourceMgr":"FISHKingCrab_ResourceMgr"}],FISHKingCrab_FishPathCrash:[function(t,e,i){"use strict";cc._RF.push(e,"99c434F2DZKVA2tB2V1Tf9c","FISHKingCrab_FishPathCrash"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./FISHKingCrab_ResourceMgr"),n=function(){function t(){this.FishPath={}}return t.prototype.setGame=function(t){this.game=t},t.prototype.release=function(){this.releaseMem()},t.prototype.releaseMem=function(){this.FishPath={}},t.prototype.loadFishPath=function(){var t=this.game.resourMgr.getRes("Path",o.ResourceType.fishPath,cc.JsonAsset).json;for(var e in t)this.FishPath[e]=t[e],this.FishPath[e].len==this.FishPath[e].row.length&&this.FishPath[e].len==this.FishPath[e].col.length||cc.error("wPathID",e,this.FishPath[e].len,this.FishPath[e].row.length,this.FishPath[e].col.length)},t}();i.default=n,cc._RF.pop()},{"./FISHKingCrab_ResourceMgr":"FISHKingCrab_ResourceMgr"}],FISHKingCrab_FunctionFort:[function(t,e,i){"use strict";cc._RF.push(e,"e023eNNVDUD43uQrCE68jjz","FISHKingCrab_FunctionFort");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s};Object.defineProperty(i,"__esModule",{value:!0});var c=t("./FISHKingCrab_FishKindMap"),l=t("./FISHKingCrab_functionUI"),h=t("./FISHKingCrab_GameDefine"),u=t("./FISHKingCrab_ResourceMgr"),p=t("./FISHKingCrab_TreasureBoxUI"),d=t("./FISHKingCrab_TurnplateUI"),f=cc._decorator,g=f.ccclass,y=f.menu,m=(f.inspector,f.property),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.laserPoint=null,e.gunbarrel=null,e.container=null,e.functionUIOriginPos=null,e.drillTotalScoreNodePos=null,e.fort=null,e.functionUIMap=null,e.whalekingArray=null,e.isDestroy=!1,e}return n(e,t),e.prototype.setGame=function(t){this.game=t},e.prototype.onLoad=function(){this.functionUIMap=new Map,this.whalekingArray=[]},e.prototype.getComponentByUIType=function(t,e){switch(t){case h.FunctionUIType.treasureBox:return e.getComponent(p.default);case h.FunctionUIType.turnplate:return e.getComponent(d.default);default:return e.getComponent(l.default)}},e.prototype.showFunctionUI=function(t,e,i,o,n,r,s){var a=null,p=null,d=h.getWeightByType(t),f=h.FunctionUIType[e]+"FunctionUI";if(e==h.FunctionUIType.drill||e==h.FunctionUIType.laser){var g=this.game.resourMgr.getRes(f,u.ResourceType.initPrefab,cc.Prefab);cc.error("drill laser ===",f,g),a=cc.instantiate(g),this.container.addChild(a);var y=a.position;a.position=new cc.Vec3(y.x,y.y+50,y.z);var m=a.addComponent(l.default);m.type=e,t==h.FunctionType.drill&&(m.catchScore=cc.find("catchScore",a),m.lblCatchScore=cc.find("lblCatchScore",m.catchScore).getComponent(cc.Label),cc.error("drill====",m.catchScore,m.lblCatchScore)),m.totalScore=cc.find("totalScore",a),m.lblTotalScore=cc.find("lblTotalScore",m.totalScore).getComponent(cc.Label),p=m}else{var b=this.game.resourMgr.getRes(f,u.ResourceType.initPrefab,cc.Prefab);if(a=cc.instantiate(b),p=this.getComponentByUIType(e,a),e==h.FunctionUIType.common){var _=c.FishKindMap[s].functionUIName,v=this.game.resourMgr.getRes("functionUIAtlas",u.ResourceType.functionUI,cc.SpriteAtlas);p.bg.getComponent(cc.Sprite).spriteFrame=v.getSpriteFrame(_)}i?a.setParent(i):(this.container.addChild(a),a.setSiblingIndex(this.container.childrenCount-1))}p.setGame(this.game),this.functionUIMap.set(d,p),p.show(d,o,n?this.showTotalScoreComplete.bind(this):null,r)},e.prototype.checkCanFire=function(t){var e,i,o=!0;if(this.functionUIMap){try{for(var n=s(this.functionUIMap.keys()),r=n.next();!r.done;r=n.next()){var a=r.value;if(-1!=h.DisableFireFunction.indexOf(a)){o=!1;break}}}catch(c){e={error:c}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}t!=h.FunctionWeight.drill&&t!=h.FunctionWeight.laser||(this.fort.showGunbarrel(),this.fort.isWaitfire=!1),o&&(this.fort.isCanFire=!0)}},e.prototype.showTotalScoreComplete=function(t,e){this.functionUIMap.delete(t),this.checkCanFire(t),this.game.GameLogic.setWinScore(this.fort.gameId,e)},e.prototype.showDrillCatchScroe=function(t,e,i){void 0===e&&(e=0),this.functionUIMap.has(t)?this.functionUIMap.get(t).showCatchScore(e,i):cc.error("\u4e0d\u5b58\u5728\u8fd9\u4e2aUI\uff1a",h.FunctionWeight[t],this.functionUIMap)},e.prototype.hideTotalScore=function(t){var e,i;if(null!=t)this.hidefunctionUI(t);else try{for(var o=s(this.functionUIMap),n=o.next();!n.done;n=o.next()){var r=a(n.value,2),c=r[0];r[1].destoryFunction(),this.functionUIMap.delete(c)}}catch(l){e={error:l}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}},e.prototype.hidefunctionUI=function(t){var e=this.functionUIMap.get(t);this.functionUIMap.delete(t),e&&e.destoryFunction()},e.prototype.setLaserEffect=function(t){this.laserPoint.addChild(t),t.setPosition(cc.v2()),t.angle=0,this.gunbarrel.angle=0},e.prototype.getMountPoint=function(t){return this.functionUIMap.has(t)?this.functionUIMap.get(t).getMountPoint():null},e.prototype.destoryFunctionUI=function(t){var e,i,o=this;if(void 0===t&&(t=!1),this.isDestroy=!0,t){try{for(var n=s(this.functionUIMap.entries()),r=n.next();!r.done;r=n.next()){var c=a(r.value,2),l=c[0];c[1].destoryFunction(),this.functionUIMap.delete(l)}}catch(f){e={error:f}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}for(var u=0,p=this.whalekingArray.length;u<p;u++)this.whalekingArray[u].destoryFunction(),u--;this.whalekingArray=[]}else{var d=[h.FunctionWeight.localBomb,h.FunctionWeight.drill];d.forEach(function(t){o.functionUIMap.has(t)&&(o.functionUIMap.get(t).destoryFunction(),o.functionUIMap.delete(t))}),d=null}},r([m(cc.Node)],e.prototype,"laserPoint",void 0),r([m(cc.Node)],e.prototype,"gunbarrel",void 0),r([m(cc.Node)],e.prototype,"container",void 0),r([g,y("FISHKingCrab/FunctionFort")],e)}(cc.Component);i.default=b,cc._RF.pop()},{"./FISHKingCrab_FishKindMap":"FISHKingCrab_FishKindMap","./FISHKingCrab_GameDefine":"FISHKingCrab_GameDefine","./FISHKingCrab_ResourceMgr":"FISHKingCrab_ResourceMgr","./FISHKingCrab_TreasureBoxUI":"FISHKingCrab_TreasureBoxUI","./FISHKingCrab_TurnplateUI":"FISHKingCrab_TurnplateUI","./FISHKingCrab_functionUI":"FISHKingCrab_functionUI"}],FISHKingCrab_FunctionLayer:[function(t,e,i){"use strict";cc._RF.push(e,"c815dkZKAkI95SPTnLdzFE6","FISHKingCrab_FunctionLayer");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("./effectFunction/FISHKingCrab_BombSharkEffect"),a=t("./effectFunction/FISHKingCrab_GoldBombEffect"),c=t("./effectFunction/FISHKingCrab_IngotEffect"),l=t("./effectFunction/FISHKingCrab_RocketEffect"),h=t("./effectFunction/FISHKingCrab_LocalBombEffect"),u=t("./effectFunction/FISHKingCrab_VortexEffect"),p=t("./FISHKingCrab_GameDefine"),d=t("./FISHKingCrab_PoolManager"),f=t("./FISHKingCrab_ResourceMgr"),g=t("./effectFunction/FISHKingCrab_LightingEffect"),y=t("./effectFunction/FISHKingCrab_TreasureBoxEffect"),m=cc._decorator,b=m.ccclass,_=m.menu,v=m.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.greenpeopleEffectLayer=null,e._points=null,e.vortexSoundId=-1,e}return n(e,t),Object.defineProperty(e.prototype,"points",{get:function(){return this._points},enumerable:!1,configurable:!0}),e.prototype.setGame=function(t){this.game=t},e.prototype.start=function(){this._points=[];var t=cc.winSize.width/4,e=cc.winSize.height/4,i=cc.v2(),o=cc.v2(t,-e),n=cc.v2(-t,-e),r=cc.v2(-t,e),s=cc.v2(t,e);this._points.push(i),this._points.push(o),this._points.push(n),this._points.push(r),this._points.push(s)},e.prototype.playSuperBombEffect=function(t,e,i){this.game.iAudioPlayer.play_sound("showBomb");var o=this.game.resourMgr.getRes("localBombEffect",f.ResourceType.initPrefab,cc.Prefab);cc.error("====\u8fde\u73af\u70b8\u5f39===",o);var n=cc.instantiate(o);this.node.addChild(n),n.setPosition(t);var r=n.getComponent(h.default);r.setGame(this.game),r.initFunction(i,e)},e.prototype.playLaserEffect=function(t){var e=this.game.resourMgr.getRes("laserEffect",f.ResourceType.initPrefab,cc.Prefab),i=cc.instantiate(e);t.setLaserEffect(i)},e.prototype.playGoldEffect=function(t){var e=this;this.game.poolMgr.AsyncDequeue(d.NodeType.goldBomb,function(i){var o=i;e.node.addChild(o),o.setPosition(t);var n=o.getComponent(sp.Skeleton);n.clearTracks(),n.setAnimation(0,"Sprite",!1),n.setCompleteListener(function(){n.timeScale=0,n.setCompleteListener(null),e.game.poolMgr.Enqueue(o,d.NodeType.goldBomb)}),n.paused=!1,n.timeScale=1})},e.prototype.playVortex=function(t){var e=this,i=this.game.resourMgr.getRes("vortex",f.ResourceType.initPrefab,cc.Prefab),o=cc.instantiate(i);o.scale=0,this.node.addChild(o),o.setPosition(t);var n=cc.tween(o).sequence(cc.scaleTo(.5,1.5),cc.repeat(cc.rotateBy(.35,-360),1e4)).start();this.vortexSoundId=this.game.iAudioPlayer.play_sound("vortex"),this.scheduleOnce(function(){cc.tween(o).then(cc.scaleTo(.5,0)).call(function(){n.stop(),o.destroy()}).start(),-1!=e.vortexSoundId&&e.game.iAudioPlayer.stop_sound(e.vortexSoundId)},3)},e.prototype.playLightingEffect=function(t,e){var i=this.game.resourMgr.getRes("LightingEffect",f.ResourceType.initPrefab,cc.Prefab),o=cc.instantiate(i);this.node.addChild(o);var n=o.getComponent(g.default);n.setGame(this.game),n.initFunction(t,e)},e.prototype.playGoldBombEffect=function(t,e,i,o,n){var r=this.game.resourMgr.getRes("GoldEffect",f.ResourceType.initPrefab,cc.Prefab),s=cc.instantiate(r);this.node.addChild(s);var c=s.getComponent(a.default);c.setGame(this.game),c.initFunction(e,i,o,t,n),t.playDieAni(e)},e.prototype.playBombSharkEffect=function(t,e,i,o){var n=this.game.resourMgr.getRes("BombSharkEffect",f.ResourceType.initPrefab,cc.Prefab),r=cc.instantiate(n);this.node.addChild(r);var a=r.getComponent(s.default);a.setGame(this.game),a.initFunction(e,t,i,o),t.playDieAni(e)},e.prototype.playRocketEffect=function(t,e,i,o){var n=this.game.resourMgr.getRes("RocketEffect",f.ResourceType.initPrefab,cc.Prefab),r=cc.instantiate(n);this.node.addChild(r);var s=r.getComponent(l.default);s.setGame(this.game),s.initFunction(e,t,i,o),t.playDieAni(e)},e.prototype.playGoldBigBomb=function(t){var e=this.game.resourMgr.getRes("GoldBigBombEffect",f.ResourceType.initPrefab,cc.Prefab),i=cc.instantiate(e);this.node.addChild(i);var o=this.node.convertToNodeSpaceAR(t);i.setPosition(o);var n=i.children[0].getComponent(cc.Animation);n.on(cc.Animation.EventType.FINISHED,function(){i.destroy()}),n.play(),this.game.iAudioPlayer.play_sound("mediumdie1",!1,1,this.game.iGameBase.utils_gen_handler(this.playGoldBigBombSound,this,2))},e.prototype.playGoldBigBombSound=function(t){var e="";switch(t){case 2:e="mediumdie2_"+this.game.iGameBase.utils_random(1,2),this.game.iAudioPlayer.play_sound(e,!1,1,this.game.iGameBase.utils_gen_handler(this.playGoldBigBombSound,this,3));break;case 3:e="effect"+this.game.iGameBase.utils_random(2311,2320),this.game.iAudioPlayer.play_sound(e)}},e.prototype.playTreasureBoxEffect=function(t,e,i){t.showFunctionUI(p.FunctionType.treasureBox,p.FunctionUIType.treasureBox,null,0);var o=this.game.resourMgr.getRes("TreasureBoxEffect",f.ResourceType.initPrefab,cc.Prefab),n=cc.instantiate(o);this.node.addChild(n),n.setPosition(0,0);var r=n.getComponent(y.default);r.setGame(this.game),r.initFunction(t,e,i)},e.prototype.playIngotEffect=function(t,e,i,o,n,r,s){var a=this.game.resourMgr.getRes("IngotEffect",f.ResourceType.initPrefab,cc.Prefab);this.game.iAudioPlayer.play_sound("ingotDie");var l=cc.instantiate(a);l.setParent(this.node);var h=l.getComponent(c.default);h.setGame(this.game),h.initFunction(t,e,i,o,n,r,s)},e.prototype.playVortexEffect=function(t,e,i){var o=this.game.resourMgr.getRes("VortexEffect",f.ResourceType.initPrefab,cc.Prefab),n=cc.instantiate(o);n.setParent(i),n.setPosition(i.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.Vec2.ZERO)));var r=n.getComponent(u.default);r.setGame(this.game),r.initFunction(t,e)},e.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},r([v(cc.Node)],e.prototype,"greenpeopleEffectLayer",void 0),r([b,_("FISHKingCrab/FunctionLayer")],e)}(cc.Component);i.default=C,cc._RF.pop()},{"./FISHKingCrab_GameDefine":"FISHKingCrab_GameDefine","./FISHKingCrab_PoolManager":"FISHKingCrab_PoolManager","./FISHKingCrab_ResourceMgr":"FISHKingCrab_ResourceMgr","./effectFunction/FISHKingCrab_BombSharkEffect":"FISHKingCrab_BombSharkEffect","./effectFunction/FISHKingCrab_GoldBombEffect":"FISHKingCrab_GoldBombEffect","./effectFunction/FISHKingCrab_IngotEffect":"FISHKingCrab_IngotEffect","./effectFunction/FISHKingCrab_LightingEffect":"FISHKingCrab_LightingEffect","./effectFunction/FISHKingCrab_LocalBombEffect":"FISHKingCrab_LocalBombEffect","./effectFunction/FISHKingCrab_RocketEffect":"FISHKingCrab_RocketEffect","./effectFunction/FISHKingCrab_TreasureBoxEffect":"FISHKingCrab_TreasureBoxEffect","./effectFunction/FISHKingCrab_VortexEffect":"FISHKingCrab_VortexEffect"}],FISHKingCrab_GameBulletBase:[function(t,e,i){"use strict";cc._RF.push(e,"6a540Fkm7rpsXY9fuUBHcmF","FISHKingCrab_GameBulletBase");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("./FISHKingCrab_GameDefine"),a=cc._decorator,c=a.ccclass,l=a.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collider=null,e.bulletInfo=null,e.currentAngel=0,e.startGrid=null,e.currentGrid=null,e.speedRow=0,e.speedCol=0,e.speedX=0,e.speedY=0,e.bulletMgr=null,e}return n(e,t),e.prototype.setGame=function(t){this.game=t},e.prototype.init=function(t,e){this.bulletInfo=t,this.currentAngel=t.angle,this.startGrid=this.game.mCrashGrid.getCrashGridByPos(this.bulletInfo.crashGridPos),this.startGrid?(this.currentGrid=this.startGrid.clone(),this.bulletMgr=e,this.collider.enabled=!0,this.node.setPosition(t.crashGridPos)):cc.error("startGrid \u4e3anull")},e.prototype.updateSpeed=function(){this.speedRow=Math.sin(this.currentAngel*Math.PI/180)*this.currSpeed,this.speedCol=Math.cos(this.currentAngel*Math.PI/180)*this.currSpeed,this.speedX=this.speedCol*this.game.mCrashGrid.GridWidth,this.speedY=this.speedRow*this.game.mCrashGrid.GridHeight},e.prototype.caculate_bullet_rotation=function(t,e){return 180*Math.atan2(t,e)/Math.PI},e.prototype.updateMove=function(){if(null!=this.currentGrid){var t=!1,e=this.currentGrid.x,i=this.currentGrid.y;e+=this.speedRow,i+=this.speedCol;var o=this.game.mCrashGrid.CrashRowMin,n=this.game.mCrashGrid.CrashRowMax,r=this.game.mCrashGrid.CrashColMin,s=this.game.mCrashGrid.CrashColMax;return e<=o?this.speedRow<0&&(this.speedRow=-this.speedRow,t=!0):e>=n+1?this.speedRow>0&&(this.speedRow=-this.speedRow,t=!0):i<=r?this.speedCol<0&&(this.speedCol=-this.speedCol,t=!0):i>=s+1&&this.speedCol>0&&(this.speedCol=-this.speedCol,t=!0),t&&(this.speedX=this.speedCol*this.game.mCrashGrid.GridWidth,this.speedY=this.speedRow*this.game.mCrashGrid.GridHeight,this.currentAngel=this.caculate_bullet_rotation(this.speedRow,this.speedCol)),this.node.angle=this.currentAngel,this.update_bullet_pos(),this.checkCollider()}},e.prototype.update_bullet_pos=function(){var t=this.currentGrid.x,e=this.currentGrid.y;if(t+=this.speedRow,e+=this.speedCol,0==this.check_bullet_row_col(t,e)){this.currentGrid.x=t,this.currentGrid.y=e;var i=cc.v2(this.node.x+this.speedX,this.node.y+this.speedY);this.node.setPosition(i)}},e.prototype.check_bullet_row_col=function(t,e){var i=this.game.mCrashGrid.CrashRowMin,o=this.game.mCrashGrid.CrashRowMax,n=this.game.mCrashGrid.CrashColMin,r=this.game.mCrashGrid.CrashColMax;return t<i?1:t>o+1?2:e<n?3:e>r+1?4:0},e.prototype.checkCollider=function(){var t=this.game.quadCollision.check(this.game.fishMgr.getGameFish,this.collider);if(t.length>0){for(var e=null,i=0;i<t.length&&(!(e=t[i])||!e.isCanCatch);i++)e=null;if(e)return e.playByHit(),this.bulletInfo.gameID==this.game.gameId&&(this.bulletInfo.isDrillGun?this.game.iGameBase.EmitEvent(s.EventCode.DrillCatchFishs,{wChairID:this.bulletInfo.chairID,dwBulletIndex:this.bulletInfo.bulletIndex,dwFishIndex:e.fishInfo.dwFishIndex}):this.game.iGameBase.EmitEvent(s.EventCode.SendCatchFish,{wChairID:this.bulletInfo.chairID,dwBulletIndex:this.bulletInfo.bulletIndex,dBulletRow:this.currentGrid.x,dBulletCol:this.currentGrid.y,dwFishIndex:e.fishInfo.dwFishIndex,wPathIndex:e?e.CurrentStep:0,bFreeBullet:this.bulletInfo.isDrillGun})),!0}return!1},e.prototype.recycle=function(){return this.node.removeFromParent(!0),this},r([l(cc.BoxCollider)],e.prototype,"collider",void 0),r([c],e)}(cc.Component);i.default=h,cc._RF.pop()},{"./FISHKingCrab_GameDefine":"FISHKingCrab_GameDefine"}],FISHKingCrab_GameBulletDrill:[function(t,e,i){"use strict";cc._RF.push(e,"1dabexBPQyoDl0wujSuodKM","FISHKingCrab_GameBulletDrill");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("./FISHKingCrab_GameBulletBase"),a=t("./FISHKingCrab_GameDefine"),c=t("./FISHKingCrab_PoolManager"),l=cc._decorator,h=l.ccclass,u=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currWeight=a.FunctionWeight.drill,e.isNext=!1,e.currSpeed=1,e.flameParent=null,e.streak=null,e.bullerAni=null,e}return n(e,t),e.prototype.initFunction=function(t){this.targetFort=t,this.targetFort.setEffect(this)},e.prototype.init=function(e,i,o){t.prototype.init.call(this,e,i),this.initFunction(o),this.bullerAni.play("drillBulletRotate"),this.streak.active=!0,this.updateSpeed()},e.prototype.updateSpeed=function(){t.prototype.updateSpeed.call(this)},e.prototype.updateMove=function(e){return t.prototype.updateMove.call(this,e)&&this.bulletMgr.playHit({pos:this.node.getPosition(),hitType:a.HitType.drillHit,angle:this.node.angle}),!1},e.prototype.strackEffect=function(){var t=this;this.game.poolMgr.AsyncDequeue(c.NodeType.flame,function(e){var i=e,o=i.getComponent(cc.Animation);o.on(cc.Animation.EventType.FINISHED,function(){i.off(cc.Animation.EventType.FINISHED),t.game.poolMgr.Enqueue(i,c.NodeType.flame)});var n=t.flameParent.convertToWorldSpaceAR(cc.v2());t.bulletMgr.node.addChild(i),n=t.bulletMgr.node.convertToNodeSpaceAR(n),i.setPosition(n),i.angle=t.node.angle,o.play()})},e.prototype.playBomb=function(t,e){this.streak.active=!1,this.unschedule(this.strackEffect),this.bulletMgr.playHit({pos:this.node.getPosition(),hitType:a.HitType.bigBang,cb:e,bulletIndex:this.bulletInfo.bulletIndex,bomb:a.bombType.drill,playerId:t}),this.bulletMgr.recycleBullet(this)},e.prototype.nextStep=function(){},e.prototype.beforDestroy=function(){},e.prototype.ImmediatelyDestroy=function(){this.bulletMgr.recycleBullet(this)},e.prototype.onDestroy=function(){cc.error("onDestroy GameBulletDrill=="),this.unscheduleAllCallbacks()},r([u(cc.Node)],e.prototype,"flameParent",void 0),r([u(cc.Node)],e.prototype,"streak",void 0),r([u(cc.Animation)],e.prototype,"bullerAni",void 0),r([h],e)}(s.default);i.default=p,cc._RF.pop()},{"./FISHKingCrab_GameBulletBase":"FISHKingCrab_GameBulletBase","./FISHKingCrab_GameDefine":"FISHKingCrab_GameDefine","./FISHKingCrab_PoolManager":"FISHKingCrab_PoolManager"}],FISHKingCrab_GameBulletHit:[function(t,e,i){"use strict";cc._RF.push(e,"a1ba9CmmbAQ/CTlRvK7dggH","FISHKingCrab_GameBulletHit");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./FISHKingCrab_GameBulletBase"),c=t("./FISHKingCrab_GameDefine"),l=cc._decorator,h=l.ccclass,u=l.menu,p=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bulletManager=null,e.ani=null,e.isCollider=!1,e.isCheckCollide=!1,e.bulletIndex=0,e.drillCallbaer=null,e.currType=-1,e.catchCount=0,e.catchFishMap=new Map,e.playerId=0,e.currSpeed=1,e}return n(e,t),e.prototype.onLoad=function(){this.collider=this.node.getComponent(cc.Collider),this.ani=this.node.getComponent(cc.Animation)},e.prototype.getCatchfishCount=function(t){switch(t){case c.bombType.drill:return c.FunctionCatchCount.drill;case c.bombType.superBomb:return c.FunctionCatchCount.superBomb;case c.bombType.mermaid:return c.FunctionCatchCount.mermaid}},e.prototype.playHit=function(t,e,i,o,n){if(void 0===e&&(e=c.HitType.normalHit),this.bulletIndex=t,this.drillCallbaer=i,this.isCollider=e==c.HitType.bigBang,this.currType=o,this.catchFishMap.clear(),this.playerId=n,this.isCollider){this.game.iAudioPlayer.play_sound("bombHit"),this.node.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.CUSTOM;var r=o==c.bombType.mermaid?5:7;this.node.setContentSize(185*r,197*r),this.catchCount=this.getCatchfishCount(o),this.ani.play(c.HitType[e]),this.collider.enabled=!0,this.isCheckCollide=!0}else this.node.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.TRIMMED,this.isCheckCollide=!1,this.collider.enabled=!1,this.ani.play(c.HitType[e])},e.prototype.onHitFinish=function(){var t,e;if(this.bulletManager)this.bulletManager.onHitFinish(this);else{if(this.isCollider&&this.game.gameId==this.playerId){for(var i=[],o=0;o<this.catchCount;o++)i[o]=0;var n=0;try{for(var r=s(this.catchFishMap.keys()),a=r.next();!a.done;a=r.next()){var l=a.value;i[n]=l,n++}}catch(h){t={error:h}}finally{try{a&&!a.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.game.iGameBase.EmitEvent(c.EventCode.FunctionCatchFishs,{wChairID:this.game.iGameBase.UserManager_getChairID(),dwBulletIndex:this.bulletIndex,dwFishIndex:i,cbFishCount:n})}this.drillCallbaer&&this.drillCallbaer.exec(),this.node.destroy()}},e.prototype.lateUpdate=function(){if(this.isCheckCollide){var t=this.game.quadCollision.check(this.game.fishMgr.getGameFish,this.collider),e=t.length;if(e>0)for(var i=0;i<e;i++){var o=t[i];o.isCanCatch&&!this.catchFishMap.has(o.fishInfo.dwFishIndex)&&this.catchFishMap.size<this.catchCount&&(o.fishInfo.nFishKindID<301||o.fishInfo.nFishKindID>307)&&o.checkInScreenRegion()&&(this.catchFishMap.set(o.fishInfo.dwFishIndex,o),this.catchFishMap.size>=this.catchCount&&(this.isCheckCollide=!1))}}},r([h,u("FISHKingCrab/GameBulletHit")],e)}(a.default));i.default=p,cc._RF.pop()},{"./FISHKingCrab_GameBulletBase":"FISHKingCrab_GameBulletBase","./FISHKingCrab_GameDefine":"FISHKingCrab_GameDefine"}],FISHKingCrab_GameBullet:[function(t,e,i){"use strict";cc._RF.push(e,"2f81cwcFrrZlc7KA4c0itd/","FISHKingCrab_GameBullet");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("./FISHKingCrab_GameBulletBase"),a=t("./FISHKingCrab_GameDefine"),c=cc._decorator,l=c.ccclass,h=c.menu,u=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currSpeed=a.BulletGridSpeed,e}return n(e,t),e.prototype.setGame=function(t){this.game=t},e.prototype.init=function(e,i){t.prototype.init.call(this,e,i),this.updateSpeed()},e.prototype.updateSpeed=function(){t.prototype.updateSpeed.call(this)},e.prototype.updateMove=function(e){return t.prototype.updateMove.call(this,e)&&(this.collider.enabled=!1,this.bulletMgr.recycleBullet(this),this.bulletMgr.playHit({pos:this.node.getPosition(),hitType:a.HitType.normalHit})),!1},r([l,h("FISHKingCrab/GameBullet")],e)}(s.default));i.default=u,cc._RF.pop()},{"./FISHKingCrab_GameBulletBase":"FISHKingCrab_GameBulletBase","./FISHKingCrab_GameDefine":"FISHKingCrab_GameDefine"}],FISHKingCrab_GameDefine:[function(t,e,i){"use strict";var o,n,r;cc._RF.push(e,"85f605YnaJxtdvWEmAZ530I","FISHKingCrab_GameDefine"),Object.defineProperty(i,"__esModule",{value:!0}),i.DisableFireFunction=i.getFunctionUITypeByFunctionType=i.getWeightByType=i.ResetType=i.FishDieType=i.HitType=i.bombType=i.FunctionWeight=i.FunctionCatchCount=i.FunctionType=i.FunctionUIType=i.EventCode=i.FishAnimType=i.FishType=i.BulletGridSpeed=i.fireTime=i.FrameTime=void 0,i.FrameTime=.03,i.fireTime=.3,i.BulletGridSpeed=.7,function(t){t[t.normal=1]="normal",t[t.boss=2]="boss",t[t.gold=3]="gold",t[t.bomb=4]="bomb",t[t.wang=5]="wang",t[t.bomb_effect=6]="bomb_effect",t[t.combination_1=100]="combination_1",t[t.combination_2=101]="combination_2",t[t.combination_3=102]="combination_3",t[t.combination_4=103]="combination_4"}(i.FishType||(i.FishType={})),function(t){t[t.none=-1]="none",t[t.frameAnim=0]="frameAnim",t[t.goldBomb=1]="goldBomb",t[t.no_ani=2]="no_ani",t[t.combination=3]="combination",t[t.bomb=4]="bomb"}(i.FishAnimType||(i.FishAnimType={})),function(t){t.ShowGamePlaza="ShowGamePlaza",t.SendCatchFish="SendCatchFish",t.DrillCatchFishs="DrillCatchFishs",t.FunctionCatchFishs="FunctionCatchFishs",t.MyFire="MyFire",t.sendEnterGame="sendEnterGame",t.changeGun="changeGun",t.autoScendlockFish="autoScendlockFish",t.converProperty="converProperty",t.treasurBox="treasurBox",t.ingot="ingot"}(i.EventCode||(i.EventCode={})),function(t){t[t.none=0]="none",t[t.bombShark=1]="bombShark",t[t.drill=2]="drill",t[t.laser=3]="laser",t[t.turnplate=4]="turnplate",t[t.common=5]="common",t[t.treasureBox=6]="treasureBox",t[t.silvercrab=7]="silvercrab",t[t.goldencrab=8]="goldencrab",t[t.localBomb=9]="localBomb"}(o=i.FunctionUIType||(i.FunctionUIType={})),function(t){t[t.normal=0]="normal",t[t.bombShark=1]="bombShark",t[t.drill=2]="drill",t[t.laser=3]="laser",t[t.rocket=4]="rocket",t[t.localBomb=5]="localBomb",t[t.vortex=6]="vortex",t[t.treasureBox=7]="treasureBox",t[t.lighting=8]="lighting",t[t.thunderDragon=9]="thunderDragon",t[t.ingot=10]="ingot"}(n=i.FunctionType||(i.FunctionType={})),function(t){t[t.drill=10]="drill",t[t.superBomb=20]="superBomb",t[t.bombShark=20]="bombShark",t[t.rocket=15]="rocket",t[t.mermaid=40]="mermaid",t[t.cowMin=15]="cowMin",t[t.cowMax=30]="cowMax",t[t.dragon=40]="dragon",t[t.flash=20]="flash",t[t.laser=20]="laser",t[t.greenpeopleMin=2]="greenpeopleMin",t[t.greenpeopleMax=35]="greenpeopleMax",t[t.vortex=40]="vortex"}(i.FunctionCatchCount||(i.FunctionCatchCount={})),function(t){t[t.none=0]="none",t[t.drill=1]="drill",t[t.laser=2]="laser",t[t.bombShark=4]="bombShark",t[t.rocket=8]="rocket",t[t.localBomb=16]="localBomb",t[t.vortex=32]="vortex",t[t.treasureBox=64]="treasureBox",t[t.lighting=128]="lighting",t[t.ingot=256]="ingot",t[t.goldBomb=512]="goldBomb"}(r=i.FunctionWeight||(i.FunctionWeight={})),function(t){t[t.drill=0]="drill",t[t.superBomb=1]="superBomb",t[t.mermaid=2]="mermaid"}(i.bombType||(i.bombType={})),function(t){t[t.normalHit=0]="normalHit",t[t.drillHit=1]="drillHit",t[t.bigBang=2]="bigBang"}(i.HitType||(i.HitType={})),function(t){t[t.normal=0]="normal",t[t.vortex=1]="vortex",t[t.shandian=2]="shandian"}(i.FishDieType||(i.FishDieType={})),function(t){t[t.gameBg=0]="gameBg",t[t.changeBg=1]="changeBg"}(i.ResetType||(i.ResetType={})),i.getWeightByType=function(t){return r[n[t]]?r[n[t]]:(cc.error("\u4e0d\u5b58\u5728\u5bf9\u5e94\u7684\u6743\u4f4d\uff1a",n[t]),r.none)},i.getFunctionUITypeByFunctionType=function(t){switch(t){case n.bombShark:return o.bombShark;case n.lighting:return o.common;default:return o.turnplate}},i.DisableFireFunction=[r.drill,r.laser,r.treasureBox,r.localBomb,r.bombShark,r.ingot,r.vortex],cc._RF.pop()},{}],FISHKingCrab_GameFishShadow:[function(t,e,i){"use strict";cc._RF.push(e,"d8b23tQDMg3MJMIcqs29lLA","FISHKingCrab_GameFishShadow");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("./FISHKingCrab_PoolManager"),a=cc._decorator,c=a.ccclass,l=a.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isAnim=!1,e.skele=null,e.type=s.NodeType.none,e.sp=null,e}return n(e,t),e.prototype.setGame=function(t){this.game=t},e.prototype.init=function(t,e,i,o){void 0===o&&(o=!1),this.isAnim?this.sp=this.node.getComponent(cc.Sprite):(o?(this.node.position=t.parent.position,this.skele.node.setPosition(t.position)):this.skele.node.setPosition(cc.v2()),this.node.angle=t.angle,this.node.scale=t.scale,this.skele.node.angle=0,this.skele.node.scale=t.scale,this.skele.skeletonData=i,this.skele.setAnimation(0,e||"Sprite",!o),this.skele.paused=!1,this.skele.setMaterial(0,this.game.fishMgr.shadowMaterial))},e.prototype.set=function(t,e,i,o,n){this.node.setPosition(t),this.node.scale=e,this.node.angle=o,this.node.opacity=i,this.isAnim&&(this.sp.spriteFrame=n)},e.prototype.stop=function(){this.isAnim||(this.skele.paused=!0)},e.prototype.recycle=function(){this.isAnim||(this.skele.setMaterial(0,null),this.skele.paused=!0,this.skele.skeletonData=null),this.game.poolMgr.Enqueue(this.node,this.type)},r([l],e.prototype,"isAnim",void 0),r([l({type:sp.Skeleton,visible:function(){return!this.isAnim}})],e.prototype,"skele",void 0),r([l({type:cc.Enum(s.NodeType)})],e.prototype,"type",void 0),r([c],e)}(cc.Component);i.default=h,cc._RF.pop()},{"./FISHKingCrab_PoolManager":"FISHKingCrab_PoolManager"}],FISHKingCrab_GameFish:[function(t,e,i){"use strict";cc._RF.push(e,"1079frJ578BgWDt8sMxN54y","FISHKingCrab_GameFish");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./FISHKingCrab_FishKindMap"),c=t("./FISHKingCrab_GameDefine"),l=cc._decorator,h=l.ccclass,u=l.menu,p=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isShake=!1,e.goldBombPointArray=[],e.isSpecial=!1,e._fishs=null,e.fishContainers=[],e.isMuchPoint=!1,e.lockNode=[],e.isAnim=!1,e.anim=null,e.fishSkeleton=null,e.collider=null,e.fishSprite=null,e.shadow=null,e.functionCircle=null,e.UpSideDown=!1,e.FishPath=null,e.FishPathCrashSteps=null,e.FishCrashExtend=null,e.CenterGrid=cc.v2(),e.CrashGrid=[],e.CurrentStep=0,e.NextModelStep=-1,e.NextModelStepIndex=-1,e.fishInfo=null,e.fishKind=null,e.Caught=!0,e.isCanCatch=!1,e.Locked=!1,e._recycleHandle=null,e.fish=null,e.cowMoveSoundId=-1,e.phoenixSoundIndex=1,e.isplaying=!1,e.frameSpeed=0,e}return n(e,t),e.prototype.setGame=function(t){this.game=t},e.prototype.onLoad=function(){this.node.group="fish",this.fish=this.node.children[0],this.isAnim?(this.anim=this.fish.getComponent(cc.Animation),this.collider=this.fish.getComponent(cc.Collider),this.fishSprite=this.fish.getComponent(cc.Sprite)):this.fishSkeleton=this.fish.getComponent(sp.Skeleton),this.isMuchPoint||(this.lockNode[0]=this.fish.getChildByName("center"))},e.prototype.playMoveAni=function(){this.isAnim&&(this.anim.play("move").wrapMode=cc.WrapMode.Loop)},e.prototype.playSound=function(){401==this.fishKind.id?this.game.iAudioPlayer.play_sound("mermaid"):601==this.fishKind.id&&this.game.iAudioPlayer.play_sound("phoenixWing"+this.phoenixSoundIndex,!1,.7)},e.prototype.stopSound=function(){this.unschedule(this.playSound),this.cowMoveSoundId>-1&&(this.game.iAudioPlayer.stop_sound(this.cowMoveSoundId),this.cowMoveSoundId=-1)},e.prototype.enterChangeSceneState=function(){this.Caught||(this.isCanCatch=!1,this.activeCollider(!1),this._recycleHandle&&this._recycleHandle.exec(this,!1))},e.prototype.enterDie=function(){this.isCanCatch=!1,this.Caught=!0,this.stopSound(),this.isAnim?this.anim.stop("move"):(this.fishSkeleton.paused=!0,this.shadow&&this.shadow.stop()),this.activeCollider(!1),this.game.mCrashGrid.removeCrashItem(this,this.fishInfo.dwFishIndex)},Object.defineProperty(e.prototype,"goldCount",{get:function(){return this.fishKind.goldCount},enumerable:!1,configurable:!0}),e.prototype.getCurrWorldPos=function(){return this.node.convertToWorldSpaceAR(cc.v2())},e.prototype.playDieAni=function(t,e,i){var o,n;void 0===i&&(i=!1),this.stopShake(),this.enterDie();var r=a.FishKindMap[this.fishInfo.nFishKindID].animType,s=this.node.angle;this.functionCircle&&(this.functionCircle.destroy(),this.functionCircle=null);var l=this;if(this.isSpecial){if(this._fishs&&this._fishs.length>0){for(var h=0,u=this._fishs.length;h<u;h++){var p=this._fishs[h].anim.play("die");p&&(p.wrapMode=cc.WrapMode.Loop,p.repeatCount=1/0)}this.scheduleOnce(function(){var t;null===(t=l._recycleHandle)||void 0===t||t.exec(l,!1)},2)}}else switch(r){case c.FishAnimType.frameAnim:113!=this.fishKind.id&&114!=this.fishKind.id&&115!=this.fishKind.id||this.game.iAudioPlayer.play_sound("xbv00"+this.game.iGameBase.utils_random(1,3));var d=this.anim.play("die");d?(d.wrapMode=cc.WrapMode.Loop,d.repeatCount=1/0,null==e||e.exec(l,i),this.scheduleOnce(function(){var t;d.stop(),null===(t=l._recycleHandle)||void 0===t||t.exec(l,!1)},1.5)):null===(o=l._recycleHandle)||void 0===o||o.exec(l,!1);break;case c.FishAnimType.goldBomb:this.game.iAudioPlayer.play_sound("medium");var f=t.node.convertToWorldSpaceAR(cc.v2()),g=this.node.parent.convertToNodeSpaceAR(f),y=cc.v3(g.x,t.IsOnTop?g.y-150:g.y+150),m=cc.tween(this.node).by(7,{angle:-540}).call(function(){var t;null===(t=l._recycleHandle)||void 0===t||t.exec(l,!1)}),b=cc.tween(this.node).to(4,{position:y});cc.tween(this.node).parallel(m,b).start();break;case c.FishAnimType.no_ani:null==e||e.exec(this,i),cc.tween(this.node).sequence(this.playFadeOut(.2,1.2),cc.callFunc(function(){var t;null===(t=l._recycleHandle)||void 0===t||t.exec(l,!1)})).start();break;case c.FishAnimType.combination:e&&e.exec(this,i),cc.tween(this.node).sequence(cc.spawn(cc.rotateTo(2.5,s+720),cc.scaleTo(2.5,0),cc.fadeOut(2.5)),cc.callFunc(function(){var t;null===(t=l._recycleHandle)||void 0===t||t.exec(l,!1)})).start();break;case c.FishAnimType.bomb:this.node.setPosition(this.node.parent.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.Vec2.ZERO)));var _=cc.tween().to(.15,{scale:1.5}),v=cc.tween().to(.13,{scale:1.2}),C=cc.tween().repeat(4,cc.tween().sequence(_,v));cc.tween(this.node).then(C).to(.15,{scale:1.8}).call(function(){var t;null==e||e.exec(),null===(t=l._recycleHandle)||void 0===t||t.exec(l,!1)}).start();break;default:e&&e.exec(this,i),null===(n=l._recycleHandle)||void 0===n||n.exec(l,!1)}},e.prototype.playVortex=function(t,e,i){void 0===i&&(i=!1),this.enterDie(),this.functionCircle&&(this.functionCircle.destroy(),this.functionCircle=null);var o=this;t=this.node.parent.convertToNodeSpaceAR(t),cc.tween(this.node).repeatForever(cc.rotateBy(.25,-20)).start(),cc.tween(this.node).parallel(cc.moveTo(3,t),cc.scaleTo(5,0)).call(function(){e&&e.exec(o),o._recycleHandle&&o._recycleHandle.exec(o,!1)}).start()},e.prototype.playFadeOut=function(t,e){return cc.sequence(cc.delayTime(t),cc.fadeOut(e))},e.prototype.playByHit=function(){var t=this;if(!this.isplaying){this.isplaying=!0;var e=cc.tween().to(.2,{color:cc.Color.RED}),i=cc.tween().to(.1,{color:cc.Color.WHITE});cc.tween(this.fish).sequence(e,i).call(function(){t.isplaying=!1}).start()}},e.prototype.updateCrashGrid=function(){this.Caught||(this.FishPathCrashSteps&&this.CurrentStep==this.NextModelStep?this.updateCrashGridByStep():this.updateGrashGridByPath())},e.prototype.updateGrashGridByPath=function(){var t=Math.floor(this.CenterGrid.x),e=Math.floor(this.CenterGrid.y);if(this.game.mCrashGrid.removeCrashItem(this,this.fishInfo.dwFishIndex),this.game.mCrashGrid.isCrashGrid(t,e)){var i=this.node.angle;i<0&&(i+=360),i>360&&(i-=360),i>90&&i<=180?i=180-i:i>180&&i<=270?i-=180:i>270&&i<=360&&(i=360-i),this.CrashGrid=[],this.CrashGrid.push(cc.v2(t,e)),this.game.mCrashGrid.insertCrashItem(this,this.fishInfo.dwFishIndex)}else this.CrashGrid=[]},e.prototype.updateCrashGridByStep=function(){var t,e;this.game.mCrashGrid.removeCrashItem(this,this.fishInfo.dwFishIndex),this.CrashGrid=[];try{for(var i=s(this.FishPathCrashSteps.crashSteps[this.NextModelStepIndex].crash),o=i.next();!o.done;o=i.next()){var n=o.value;this.CrashGrid.push(cc.v2(n.row,n.col))}}catch(r){t={error:r}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}this.game.mCrashGrid.insertCrashItem(this,this.fishInfo.dwFishIndex),this.updateNextModelStep(this.CurrentStep)},e.prototype.activeCollider=function(t){this.collider.enabled=t},e.prototype.initWithFishInfo=function(t,e,i,o,n){this.node.scale=1,this.Locked=!1,this.UpSideDown=e,this.fishInfo=t,this.fishKind=a.FishKindMap[t.nFishKindID],this.originaSpeed=this.fishKind.moveSpeed?this.fishKind.moveSpeed:c.FrameTime,this.moveSpeed=this.originaSpeed,this.CurrentStep=t.wPath_Index,this.NextModelStep=-1,this.NextModelStepIndex=-1,this.shadow=i,this._fishs=n,this.activeCollider(!0),this.FishPath=this.game.fishPathMgr.FishPath[t.wPathID],this.FishPath||cc.error("\u6ca1\u6709\u83b7\u53d6\u5230\u8fd9\u4e2a\u8def\u5f84\uff1a"+t.wPathID),this.node.opacity=255,this.fish.color=cc.Color.WHITE,this._recycleHandle=o,this.Caught=!1,this.isCanCatch=!0,this.isplaying=!1,this.playMoveAni()},e.prototype.setPosition=function(){this.CenterGrid.x=this.FishPath.row[this.CurrentStep],this.CenterGrid.y=this.FishPath.col[this.CurrentStep];var t=this.game.mCrashGrid.getGridPos(this.CenterGrid.x,this.CenterGrid.y);if(t){this.UpSideDown&&(t.y=cc.visibleRect.height-t.y);var e=this.FishPath.angle[this.CurrentStep];this.node.setPosition(t),602!=this.fishKind.id&&(this.UpSideDown?this.node.angle=-e:this.node.angle=e),this.updateCrashGrid()}else cc.error("updateMove",this.CenterGrid.x,this.CenterGrid.y,this.fishInfo)},e.prototype.updateMove=function(t,e){return this.customUpdate(t,e),!this.Caught&&(this.FishPath?!(this.CurrentStep>=this.FishPath.len||this.CurrentStep>=this.FishPath.row.length||this.CurrentStep>=this.FishPath.col.length)&&(this.CurrentStep=Math.floor((t-this.fishInfo.dwCreteTicket)/1e3/this.moveSpeed),this.CurrentStep>=this.FishPath.len||this.CurrentStep>=this.FishPath.row.length||this.CurrentStep>=this.FishPath.col.length||(this.setPosition(),!1)):(cc.error("\u8def\u5f84ID:"+this.fishInfo.wPathID,"fishId:",this.fishInfo.nFishKindID),!1))},e.prototype.updateNextModelStep=function(t){if(this.FishPathCrashSteps){for(var e=0;e<this.FishPathCrashSteps.crashSteps.length;e++)if(t<this.FishPathCrashSteps.crashSteps[e].id)return this.NextModelStep=this.FishPathCrashSteps.crashSteps[e].id,void(this.NextModelStepIndex=e);this.NextModelStep=this.FishPathCrashSteps.e+1,this.NextModelStepIndex=-1}},e.prototype.shake=function(t){var e=this,i=this.node.getPosition();cc.tween(this.node).sequence(cc.moveTo(.1,cc.v2(i.x+3,i.y+3)),cc.moveTo(.1,cc.v2(i.x-3,i.y-3)),cc.moveTo(.1,cc.v2(i.x+3,i.y+3)),cc.moveTo(.1,cc.v2(i.x-3,i.y-3)),cc.moveTo(.1,cc.v2(i.x+3,i.y+3)),cc.moveTo(.1,cc.v2(i.x-3,i.y-3)),cc.moveTo(.1,cc.v2(i.x+3,i.y+3)),cc.moveTo(.1,cc.v2(i.x-3,i.y-3)),cc.moveTo(.1,i)).call(function(){e.node.opacity=0,t&&t.exec()}).start()},e.prototype.checkLock=function(t){return!(this.Caught||!this.isCanCatch||!this.fishInfo||this.fishInfo.dwFishIndex!=t)},e.prototype.checkInCrashGrid=function(){return!!this.game.mCrashGrid.isCrashGrid(this.CenterGrid.x,this.CenterGrid.y)},e.prototype.checkInScreenRegion=function(){for(var t=0;t<this.lockNode.length;t++)if(this.lockNode[t]){var e=this.lockNode[t].convertToWorldSpaceAR(cc.v2());if(e.x>=0&&e.x<=cc.winSize.width&&e.y>=0&&e.y<=cc.winSize.height)return this.lockNode[t]}return null},e.prototype.stopShake=function(){},e.prototype.recycle=function(){if(this.stopShake(),this.isCanCatch=!1,this.Caught=!0,this.isAnim?(this.anim.stop(),this.anim.node.angle=0):(this.fishSkeleton.setCompleteListener(null),this.fishSkeleton.paused=!0,this.fishSkeleton.node.angle=0),this.functionCircle&&(this.functionCircle.destroy(),this.functionCircle=null),this.isSpecial&&this._fishs){for(;this._fishs.length;){var t=this._fishs.pop();t.anim.stop(),t.node.destroy()}this._fishs=null}return this.node.removeFromParent(!0),this.game.mCrashGrid.removeCrashItem(this,this.fishInfo.dwFishIndex),this.node.angle=0,this.FishPath=null,this.FishCrashExtend=null,this.FishPathCrashSteps=null,this.CenterGrid.x=0,this.CenterGrid.y=0,this.CrashGrid=[],this.shadow&&(this.shadow.recycle(),this.shadow=null),this.CurrentStep=0,this},e.prototype.customUpdate=function(){if(this.shadow){var t=this.isAnim?this.fishSprite.spriteFrame:null;this.shadow.set(this.node.getPosition(),this.node.scale,this.node.opacity,this.node.angle,t)}this.functionCircle&&this.functionCircle.setPosition(this.node.position)},e.prototype.onDestroy=function(){cc.error("onDestroy Fish=="),this.unscheduleAllCallbacks()},r([p({tooltip:"\u662f\u5426\u9707\u52a8"})],e.prototype,"isShake",void 0),r([p({type:[cc.Node],tooltip:"\u7206\u70b8\u91d1\u5e01\u70b9",visible:function(){return this.isShake}})],e.prototype,"goldBombPointArray",void 0),r([p],e.prototype,"isSpecial",void 0),r([p({type:[cc.Node],tooltip:"\u7279\u6b8a\u9c7c\u6302\u70b9",visible:function(){return this.isSpecial}})],e.prototype,"fishContainers",void 0),r([p({tooltip:"\u591a\u4e2a\u9501\u5b9a\u70b9"})],e.prototype,"isMuchPoint",void 0),r([p({type:[cc.Node],tooltip:"\u9501\u5b9a\u70b9",visible:function(){return this.isMuchPoint}})],e.prototype,"lockNode",void 0),r([p],e.prototype,"isAnim",void 0),r([h,u("FISHKingCrab/GameFish")],e)}(cc.Component);i.default=d,cc._RF.pop()},{"./FISHKingCrab_FishKindMap":"FISHKingCrab_FishKindMap","./FISHKingCrab_GameDefine":"FISHKingCrab_GameDefine"}],FISHKingCrab_GameFortGunAni:[function(t,e,i){"use strict";cc._RF.push(e,"1ef89SOwc7Lv39yYhE+e6/8","FISHKingCrab_GameFortGunAni");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("./FISHKingCrab_GameFort"),a=cc._decorator,c=a.ccclass,l=a.menu,h=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onFireEnd=function(){var t=this.node.getParent().getParent().getParent();if(t){var e=t.getComponent(s.default);e&&e.playFree()}},r([c,l("FISHKingCrab/GameFortGunAni")],e)}(cc.Component));i.default=h,cc._RF.pop()},{"./FISHKingCrab_GameFort":"FISHKingCrab_GameFort"}],FISHKingCrab_GameFort:[function(t,e,i){"use strict";cc._RF.push(e,"0054daadzacO2N6Mq94mdBS","FISHKingCrab_GameFort");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s};Object.defineProperty(i,"__esModule",{value:!0});var c=t("../FISHCRABKING_GameLogic"),l=t("./effectFunction/FISHKingCrab_Laser"),h=t("./effectFunction/FISHKingCrab_LaserEffect"),u=t("./FISHKingCrab_FunctionFort"),p=t("./FISHKingCrab_GameDefine"),d=cc._decorator,f=d.ccclass,g=d.menu,y=(d.inspector,d.property),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.siteIndex=0,e.gunbarrel=null,e.bottom=null,e.labelMultiple=null,e.btnAddMultple=null,e.btnSubMultple=null,e.drillLightEffect=null,e.bulletPoint=null,e.countdown=null,e.lblcountdown=null,e.functionFort=null,e.container=null,e.normalGun=null,e.electricityGun=null,e.drillGun=null,e.laserGun=null,e.functionObj=null,e.lightningNode=null,e.fireLightFish=null,e.currentPaoIndex=1,e.laserEffect=null,e.UpSideDown=!1,e._isOnTop=!1,e._UserItem=null,e.LockFishIndex=c.INVALID_DWORD,e.lockFish=null,e.AutoFire=!1,e.fireTime=0,e.aimPos=cc.v2(),e.firePos=null,e.bulletIndex=0,e.drillPos=cc.v2(),e.isPress=!1,e.isCanstop=!1,e.isCanFire=!0,e.isWaitfire=!1,e.currFunctionType=p.FunctionType.normal,e._isActive=!1,e._currEffectWeight=0,e.effectMap=null,e._effectMultipleMap=null,e._currAngle=0,e.isChangeing=!1,e.timer=9,e.isPlayRaigun=!1,e.playPastTime=0,e.raigunSoundId=-1,e}return n(e,t),Object.defineProperty(e.prototype,"IsOnTop",{get:function(){return this._isOnTop},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chairId",{get:function(){return this._UserItem.getChairID()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gameId",{get:function(){return this._UserItem.getGameID()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"effectMultipleMap",{get:function(){return this._effectMultipleMap},enumerable:!1,configurable:!0}),e.prototype.setGame=function(t){this.game=t},e.prototype.start=function(){this.functionFort.fort=this,this._isOnTop=180==this.node.angle,this.drillPos=this.drillGun.node.getPosition();var t=cc.v2();this.bulletPoint.convertToWorldSpaceAR(cc.v2(),t),this.firePos=this.game.fishMgr.node.convertToNodeSpaceAR(t),this.lightningNode=this.electricityGun.getChildByName("lightNode"),this.effectMap=new Map,this._effectMultipleMap=new Map},e.prototype.onEnable=function(){this.raigunSoundId=-1},e.prototype.onDisable=function(){this._UserItem&&this._UserItem.getGameID()==this.game.gameId&&(this.normalGun.node.off("click",this.clickGun,this),this.electricityGun.off("click",this.clickGun,this),this.normalGun.node.removeComponent(cc.Button),this.electricityGun.removeComponent(cc.Button)),this._isActive=!1},e.prototype.initInfo=function(t,e,i){this.currMultiple=t,this.currScore=e,this.labelMultiple.string=this.game.iGameBase.getNum(this.currMultiple,!0),this.currentPaoIndex=i},e.prototype.init=function(t,e){void 0===e&&(e=1),this._isActive||(this._currAngle=0,this._currEffectWeight=0,this._isActive=!0,this.bulletIndex=0,this._UserItem=t,this.currMultiple=e,this.currentPaoIndex=1,this.reset(!0),this._UserItem.getGameID()==this.game.gameId?(this.btnAddMultple.active=!0,this.btnSubMultple.active=!0):(this.btnAddMultple.active=!1,this.btnSubMultple.active=!1))},e.prototype.reset=function(t){void 0===t&&(t=!1),this._currEffectWeight=0,this.gunbarrel.angle=0,this.laserGun.node.active=!1,this.normalGun.node.active=!0,this.electricityGun.active=!1,this.hideCountdown(),this.hideDrillGun(),this.functionFort.hideTotalScore(null),t?(this.isWaitfire=!1,this.isCanFire=!0,this.node.opacity=255):(this.stopRaigunAutoFire(),this.node.opacity=130,this._isActive=!1,this.destroyEffect(!0),this.bottom.active=!0,this.gunbarrel.active=!0,this.functionObj=null,this.laserEffect=null,this.currMultiple=0),this.labelMultiple.string=this.game.iGameBase.getNum(this.currMultiple,!0)},e.prototype.clickGun=function(){this.isCanFire&&!this.isWaitfire&&(this._UserItem?this._UserItem.getGameID()==this.game.gameId&&(this.isCanFire=!1,this.game.iGameBase.EmitEvent(p.EventCode.changeGun,{chairId:this.chairId,gunIndex:1==this.currentPaoIndex?2:1})):cc.error("\u73a9\u5bb6\u4fe1\u606f\u4e0d\u5b58\u5728"))},e.prototype.showFunctionUI=function(t,e,i,o,n,r,s){void 0===o&&(o=0),void 0===s&&(s=!0),this.functionFort.showFunctionUI(t,e,i,o,s,n,r)},e.prototype.showFunctionCatchScroe=function(t,e,i){void 0===e&&(e=0),this.functionFort.showDrillCatchScroe(t,e,i)},e.prototype.showDial=function(){this.bottom.active=!1,this.gunbarrel.active=!1},e.prototype.hideDial=function(){this.bottom.active=!0,this.gunbarrel.active=!0,1==this.currentPaoIndex?(this.electricityGun.active=!1,this.normalGun.node.active=!0,this.playFree()):(this.normalGun.node.active=!1,this.electricityGun.active=!0),this.isCanFire=!0},e.prototype.hidefunctionUI=function(t){this.functionFort.hidefunctionUI(t)},e.prototype.launchFunctionGunCountdown=function(){this.lblcountdown.string=this.timer.toString(),this.timer<=0?this.currFunctionType==p.FunctionType.drill?this._UserItem.getGameID()==this.game.gameId&&(this.fire(p.FunctionType.drill),this.fireFunctionGun()):this.currFunctionType==p.FunctionType.laser&&this._UserItem.getGameID()==this.game.gameId&&(this.fire(p.FunctionType.laser),this.isCanFire=!1):(this.timer--,12==this.timer&&(this.isCanFire=!0))},e.prototype.hideCountdown=function(){this.unschedule(this.launchFunctionGunCountdown),this.countdown.active=!1},e.prototype.fireFunctionGun=function(){this.hideCountdown(),this.hideDrillGun(),this.isCanFire=!1},e.prototype.hideCurrGun=function(){this.gunbarrel.angle=0,this.normalGun.node.active=!1,this.electricityGun.active=!1},e.prototype.showDrillGun=function(){var t=this;this.drillGun&&(this.hideCurrGun(),this.drillGun.stop(),this.drillGun.node.angle=0,this.drillGun.node.active=!0,this.gunbarrel.setSiblingIndex(0),cc.tween(this.drillGun.node).sequence(cc.moveTo(.5,cc.v2(this.drillPos.x,78)),cc.delayTime(.5),cc.moveTo(.5,cc.v2(0,0)),cc.callFunc(function(){t.gunbarrel.setSiblingIndex(2),t.drillGun.play(),t.showFunctionUI(p.FunctionType.drill,p.FunctionUIType.drill,t.container),t.functionFort.showDrillCatchScroe(p.FunctionWeight.drill),t.drillLightEffect.active=!0,t.drillGun.node.setScale(cc.v2(1.8,1.5)),t.drillGun.node.setPosition(0,55)}),cc.scaleTo(.5,1),cc.callFunc(function(){t.timer=15,t.lblcountdown.string=t.timer.toString(),t.countdown.active=!0,t.schedule(t.launchFunctionGunCountdown,1,15),t.isWaitfire=!0,t.isCanFire=!0})).start())},e.prototype.showLaserGun=function(t){var e=this;this.hideCurrGun();var i=this.laserGun.node.getPosition();this.gunbarrel.setSiblingIndex(0),this.laserGun.node.setPosition(cc.v2(i.x+100,i.y+200)),this.laserGun.node.scale=1.5,this.laserGun.node.active=!0;var o=this;this.game.iAudioPlayer.play_sound("showdianci"),cc.tween(this.laserGun.node).sequence(cc.moveTo(.5,cc.v2(i.x,i.y)),cc.delayTime(.25),cc.scaleTo(.2,0),cc.delayTime(.25),cc.callFunc(function(){o.gunbarrel.setSiblingIndex(2),o.laserGun.node.scale=1.5,null==t||t.exec(o),e.game.iAudioPlayer.play_sound("show2")}),cc.scaleTo(.5,1),cc.callFunc(function(){o.showFunctionUI(p.FunctionType.laser,p.FunctionUIType.laser,e.container),o.timer=15,o.lblcountdown.string=o.timer.toString(),o.countdown.active=!0,o.schedule(o.launchFunctionGunCountdown,1,15),e.isWaitfire=!0,e.isCanFire=!0})).start()},e.prototype.hideDrillGun=function(){this.drillLightEffect.active=!1,this.drillGun.node.active=!1,this.drillGun.node.setScale(cc.v2(1.8,1.5)),this.drillGun.node.setPosition(this.drillPos)},e.prototype.showGunbarrel=function(){this.drillGun.node.active=!1,this.laserGun.node.active=!1,this.currFunctionType!=p.FunctionType.laser&&this.currFunctionType!=p.FunctionType.drill||(this.gunbarrel.angle=0),1==this.currentPaoIndex?(this.normalGun.stop("fire"),this.electricityGun.active=!1,this.normalGun.node.active=!0,this.playFree()):(this.normalGun.node.active=!1,this.electricityGun.active=!0)},e.prototype.playFree=function(){this.normalGun.play("free")},e.prototype.playFire=function(){this.normalGun.play("fire")},e.prototype.setAngle=function(t){return this._isOnTop?this.gunbarrel.angle=-t:this.gunbarrel.angle=t,this.functionFort.gunbarrel.angle=this.gunbarrel.angle,this},e.prototype.getFireAngle=function(){return this._isOnTop?180-this._currAngle:this._currAngle},e.prototype.getWorldAngle=function(){return this._isOnTop?this.gunbarrel.angle-90:this.gunbarrel.angle+90},e.prototype.aimAt=function(t,e){void 0===e&&(e=!1),this.node.getParent().convertToNodeSpaceAR(t,this.aimPos);var i=this.node.getPosition(),o=this.aimPos.sub(i),n=new cc.Vec2(0,1),r=-180*o.signAngle(n)/Math.PI;return r=cc.misc.clampf(r,-85,85),this._isOnTop?this._currAngle=270+r:this._currAngle=r,e&&(this.gunbarrel.angle=this._currAngle,this.functionFort.gunbarrel.angle=this._currAngle),this},e.prototype.checkScoreCanFire=function(t){return void 0===t&&(t=!1),this.currScore>=this.currMultiple||(t&&this.game.iGameBase.PopMessage_ShowMessage(1),!1)},e.prototype.fire=function(t){if(this._UserItem){if(this._UserItem.getGameID()!=this.game.gameId)return-1;var e=this.bulletIndex++;return e=100*this._UserItem.getChairID()+e%100,this.game.iGameBase.EmitEvent(p.EventCode.MyFire,{dwBulletIndex:e,dBulletAngle:this.getFireAngle(),dwFishIndex:0,cbUserDefine:t||this.currFunctionType}),this.isWaitfire&&(this.isCanFire=!1),e}cc.error("\u8fd9\u4e2a\u73a9\u5bb6\u7684\u4fe1\u606f\u4e3anull")},e.prototype.lightUpdata=function(){if(this.fireLightFish&&this.fireLightFish.isCanCatch){var t=this.fireLightFish.checkInScreenRegion();if(t){this.lightningNode.angle=90;var e=t.convertToWorldSpaceAR(cc.v2(0,0));e=this.lightningNode.convertToNodeSpaceAR(e);var i=180*Math.atan2(e.y,e.x)/Math.PI;this.lightningNode.angle=i+90;var o=t.convertToWorldSpaceAR(cc.v2(0,0)),n=(o=this.lightningNode.convertToNodeSpaceAR(o)).mag();this.lightningNode.width=n,this.lightningNode.getChildByName("light").setPosition(o),this.lightningNode.active=!0,this.fireLightFish.playByHit(),this.playRaigunFireSound()}else this.stopRaigunAutoFire()}else this.stopRaigunAutoFire()},e.prototype.playRaigunFire=function(t,e){this.playRaigunFireAuto(t,e)},e.prototype.playRaigunFireSound=function(){this.raigunSoundId>-1||(this.raigunSoundId=this.game.iAudioPlayer.play_sound("electromagnetism",!0,1))},e.prototype.stopRaigunFireSound=function(){this.raigunSoundId>-1&&(this.game.iAudioPlayer.stop_sound(this.raigunSoundId),this.raigunSoundId=-1)},e.prototype.playRaigunFireAuto=function(t,e){this._UserItem.getGameID()==this.game.gameId&&this.game.iGameBase.EmitEvent(p.EventCode.SendCatchFish,{wChairID:this.chairId,dwBulletIndex:e,dBulletRow:0,dBulletCol:0,dwFishIndex:t,wPathIndex:this.fireLightFish?this.fireLightFish.CurrentStep:0,bFreeBullet:!1})},e.prototype.raigunFire=function(t){if(this._UserItem&&this._UserItem.getGameID()==this.game.gameId){var e=this.game.fishMgr.getFishByIndex(t);if(e&&e.isCanCatch&&e.checkInScreenRegion()){var i=this.bulletIndex++;i=100*this._UserItem.getChairID()+i%100,this.game.iGameBase.EmitEvent(p.EventCode.MyFire,{dwBulletIndex:i,dBulletAngle:this.getFireAngle(),dwFishIndex:t,bFreeBullet:!1})}}},e.prototype.setLockFish=function(t,e){void 0===e&&(e=!1),2==this.currentPaoIndex&&this.isCanFire&&(this.LockFishIndex!=t&&(this.fireTime=0),this.LockFishIndex=t,this.lockFish=this.game.fishMgr.getFishByIndex(t),this.isCanstop=!1,this.lockFish?(this.unschedule(this.lightUpdata),this.fireLightFish=this.lockFish,this.startRaigunAutoFire()):(this.LockFishIndex=c.INVALID_DWORD,this.stopRaigunAutoFire(),this._UserItem.getGameID()==this.game.gameId&&(this.AutoFire||e)&&2==this.currentPaoIndex&&this.game.iGameBase.EmitEvent(p.EventCode.autoScendlockFish,e)))},e.prototype.onFire=function(t){return this.setAngle(t),this.playFire(),this.game.iAudioPlayer.play_sound("normalFire"),this.getBulletInitPos()},e.prototype.getBulletInitPos=function(){var t=cc.v2();return this.bulletPoint.convertToWorldSpaceAR(cc.v2(),t),this.firePos=this.game.fishMgr.node.convertToNodeSpaceAR(t),this.firePos},e.prototype.setLaserEffect=function(t){this._currAngle=0,this.functionObj=t,this.laserEffect=t.addComponent(h.default),this.laserEffect.setGame(this.game),this.laserEffect.laserIdle=cc.find("laser",t).getComponent(cc.Animation),this.laserEffect.granule=cc.find("granule",t).getComponent(cc.Animation),this.laserEffect.laserFire=cc.find("laserFire",t).addComponent(l.default),this.laserEffect.laserFire.setGame(this.game),this.laserEffect.initFunction(this),this.functionFort.setLaserEffect(t)},e.prototype.fireLaser=function(t,e){var i=this.getEffect(p.FunctionWeight.laser);i?(i.setGame(this.game),i.playFire(t,e)):cc.error("\u6fc0\u5149\u7279\u6548\u4e0d\u5b58\u5728")},e.prototype.setNormalAutoFire=function(){this.AutoFire||(this.isPress=!0)},e.prototype.checkFireing=function(){return!(!this.isPlayRaigun&&!this.isPress)},e.prototype.changeScene=function(t){this.isChangeing=t,t&&(this.isPress=!1,this.stopRaigunAutoFire())},e.prototype.autoFire=function(t){if(!this.isChangeing&&this.isCanFire&&this.currFunctionType==p.FunctionType.normal&&(this.AutoFire||this.checkFireing())&&(this.gameId!=this.game.gameId||this.checkScoreCanFire()))return!this.isCanstop||this.AutoFire||this.gameId!=this.game.gameId||this.isPress?void(this.fireTime>this._currFireTime?(2==this.currentPaoIndex?this.LockFishIndex!=c.INVALID_DWORD?(this.isCanstop=!0,this.lockFish&&this.lockFish.isCanCatch&&this.lockFish.checkInScreenRegion()&&this.lockFish.checkLock(this.LockFishIndex)?this.raigunFire(this.lockFish.fishInfo.dwFishIndex):this.setLockFish(c.INVALID_DWORD)):this.setLockFish(c.INVALID_DWORD):this.fire(),this.fireTime=0):this.fireTime+=t):(this.setLockFish(c.INVALID_DWORD,!0),void(this.isCanstop=!1))},e.prototype.changePaoTypeTween=function(t){var e=this;this.currentPaoIndex=t,this.normalGun.node.stopAllActions(),this.electricityGun.stopAllActions();var i=cc.sequence(cc.scaleTo(.5,1),cc.callFunc(function(){e.isCanFire=!0}));1==t?(this.playFree(),this.normalGun.node.scale=1.8,this.setPaoType(t),cc.tween(this.normalGun.node).then(i).start(),this.game.iAudioPlayer.play_sound("changeNormalgun")):(this.electricityGun.scale=1.8,this.setPaoType(t),cc.tween(this.electricityGun).then(i).start(),this.game.iAudioPlayer.play_sound("changeElectricityGun"))},e.prototype.setPaoType=function(t){1==t?(this.stopRaigunAutoFire(),this.normalGun.node.active=!0,this.electricityGun.active=!1,this._currFireTime=.23):(this.gunbarrel.angle=0,this.normalGun.node.active=!1,this.electricityGun.active=!0,this._currFireTime=.3)},e.prototype.startRaigunAutoFire=function(){this.unschedule(this.lightUpdata),this.playPastTime=0,this.isPlayRaigun=!0,this.lightUpdata(),this.schedule(this.lightUpdata,.05)},e.prototype.checkCanAutoFire=function(){return!(this.checkScoreCanFire()||2!=this.currentPaoIndex||!this.AutoFire&&!this.checkFireing()||(cc.error("\u5206\u6570\u4e0d\u591f\uff0c\u53d6\u6d88\u81ea\u52a8\u5f00\u70ae"),this.setLockFish(c.INVALID_DWORD,!0),0))},e.prototype.stopRaigunAutoFire=function(){this.isPlayRaigun=!1,this.unschedule(this.lightUpdata),this.lightningNode&&(this.lightningNode.active=!1),this.LockFishIndex=c.INVALID_DWORD,this.fireLightFish=null,this.stopRaigunFireSound()},e.prototype.getMountPoint=function(t){return this.functionFort.getMountPoint(t)},e.prototype.setEffect=function(t){this.effectMap.set(t.currWeight,t)},e.prototype.getEffect=function(t){return this.effectMap.has(t)?this.effectMap.get(t):null},e.prototype.addEffectWeight=function(t){this._currEffectWeight|=t},e.prototype.subEffectWeight=function(t){this.node&&(this.existWeight(t)&&(this._currEffectWeight-=t),this.effectMap.has(t)&&this.effectMap.delete(t),this.deleteWeightMultiple(t))},e.prototype.existWeight=function(t){return(this._currEffectWeight&t)>0},e.prototype.setWeightMultiple=function(t,e){this._effectMultipleMap.set(t,e)},e.prototype.deleteWeightMultiple=function(t){this._effectMultipleMap.has(t)&&this._effectMultipleMap.delete(t)},e.prototype.destroyEffect=function(t){var e,i,o=this;if(void 0===t&&(t=!1),this.functionFort.destoryFunctionUI(t),t){if(this.effectMap)try{for(var n=s(this.effectMap.entries()),r=n.next();!r.done;r=n.next()){var c=a(r.value,2),l=c[0],h=c[1];null!=h&&(h.ImmediatelyDestroy(),this.effectMap.delete(l))}}catch(d){e={error:d}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}}else{var u=[p.FunctionWeight.drill,p.FunctionWeight.localBomb];u.forEach(function(t){o.effectMap.has(t)&&o.effectMap.get(t).ImmediatelyDestroy()}),u=null}},e.prototype.getMultiple=function(t){return this.effectMultipleMap.has(t)?this.effectMultipleMap.get(t):(cc.error("\u4e0d\u5b58\u5728\u8fd9\u4e2a\u6743\u4f4d\u5bf9\u5e94\u7684\u500d\u6570\uff1a",p.FunctionWeight[t]),-1)},e.prototype.checkMultiple=function(t,e,i){if(void 0===e&&(e=1),void 0===i&&(i=0),this.effectMultipleMap.has(t)){if(i>=this.effectMultipleMap.get(t)-10*e)return!0}else cc.error("\u8fd9\u4e2a\u73a9\u5bb6\u6ca1\u6709\u8fd9\u4e2a\u7279\u6548\u500d\u7387\uff1a",t);return!1},e.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},r([y],e.prototype,"siteIndex",void 0),r([y({type:cc.Node,tooltip:"\u70ae\u7ba1"})],e.prototype,"gunbarrel",void 0),r([y({type:cc.Node,tooltip:"\u5e95\u5ea7"})],e.prototype,"bottom",void 0),r([y(cc.Label)],e.prototype,"labelMultiple",void 0),r([y(cc.Node)],e.prototype,"btnAddMultple",void 0),r([y(cc.Node)],e.prototype,"btnSubMultple",void 0),r([y(cc.Node)],e.prototype,"drillLightEffect",void 0),r([y({type:cc.Node,tooltip:"\u5b50\u5f39\u53d1\u5c04\u70b9"})],e.prototype,"bulletPoint",void 0),r([y({type:cc.Node,tooltip:"\u94bb\u5934\u70ae\u53d1\u5c04\u5012\u8ba1\u65f6"})],e.prototype,"countdown",void 0),r([y({type:cc.Label,tooltip:"\u94bb\u5934\u70ae\u53d1\u5c04\u5012\u8ba1\u65f6\u6587\u5b57"})],e.prototype,"lblcountdown",void 0),r([y(u.default)],e.prototype,"functionFort",void 0),r([y(cc.Node)],e.prototype,"container",void 0),r([f,g("FISHKingCrab/GameFort")],e)}(cc.Component);i.default=m,cc._RF.pop()},{"../FISHCRABKING_GameLogic":"FISHCRABKING_GameLogic","./FISHKingCrab_FunctionFort":"FISHKingCrab_FunctionFort","./FISHKingCrab_GameDefine":"FISHKingCrab_GameDefine","./effectFunction/FISHKingCrab_Laser":"FISHKingCrab_Laser","./effectFunction/FISHKingCrab_LaserEffect":"FISHKingCrab_LaserEffect"}],FISHKingCrab_GameRewardTip:[function(t,e,i){"use strict";cc._RF.push(e,"4e6a8oLkNxkxB/CorpLwTxS","FISHKingCrab_GameRewardTip");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.menu,l=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rewardTip=null,e.showTipBtn=null,e.hideTipBtn=null,e.fishCountLabel=null,e.timeEndLabel=null,e.fishType=null,e.rewardType=null,e.fishTypeFrames=[],e.rewardTypeFrame=[],e.rewardInfoPanel=null,e.rewardInfoList=[],e.currentPage=0,e}return n(e,t),e.prototype.onLoad=function(){this.currentPage=0,this.rewardInfoList.push({fishType:0,rewardType:0,rewardTip:"CATCH ANY FISH",maxFishCount:20,currentFishCount:10,endTime:"20:12:20"}),this.rewardInfoList.push({fishType:1,rewardType:1,rewardTip:"CATCH ANY FISH",maxFishCount:20,currentFishCount:15,endTime:"21:12:20"})},e.prototype.start=function(){},e.prototype.onShowRewardTipBtnClick=function(){this.rewardTip.active=!0,this.showTipBtn.active=!1,this.hideTipBtn.active=!0},e.prototype.onHideRewardTipBtnClick=function(){this.rewardTip.active=!1,this.showTipBtn.active=!0,this.hideTipBtn.active=!1},e.prototype.showCurrentReward=function(){if(this.currentPage>=0&&this.currentPage<this.rewardInfoList.length){var t=this.rewardInfoList[this.currentPage];this.fishType.spriteFrame=this.fishTypeFrames[t.fishType],this.rewardType.spriteFrame=this.rewardTypeFrame[t.rewardType],this.fishCountLabel.string=t.currentFishCount+" / "+t.maxFishCount}},e.prototype.onLeftPageBtnClick=function(){this.currentPage>0?this.currentPage-=1:this.currentPage=this.rewardInfoList.length-1,this.showCurrentReward()},e.prototype.onRightPageBtnClick=function(){this.currentPage<this.rewardInfoList.length-1?this.currentPage+=1:this.currentPage=0,this.showCurrentReward()},e.prototype.onShowTipInfo=function(){this.rewardInfoPanel.active=!0},e.prototype.onHideTipInfo=function(){this.rewardInfoPanel.active=!1},r([l(cc.Node)],e.prototype,"rewardTip",void 0),r([l(cc.Node)],e.prototype,"showTipBtn",void 0),r([l(cc.Node)],e.prototype,"hideTipBtn",void 0),r([l(cc.Label)],e.prototype,"fishCountLabel",void 0),r([l(cc.Label)],e.prototype,"timeEndLabel",void 0),r([l(cc.Sprite)],e.prototype,"fishType",void 0),r([l(cc.Sprite)],e.prototype,"rewardType",void 0),r([l([cc.SpriteFrame])],e.prototype,"fishTypeFrames",void 0),r([l([cc.SpriteFrame])],e.prototype,"rewardTypeFrame",void 0),r([l(cc.Node)],e.prototype,"rewardInfoPanel",void 0),r([a,c("FISHKingCrab/GameRewardTip")],e)}(cc.Component);i.default=h,cc._RF.pop()},{}],FISHKingCrab_GameSceneMgr:[function(t,e,i){"use strict";cc._RF.push(e,"21e66nFo5NgDKULGq/iRrgF","FISHKingCrab_GameSceneMgr");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("./FISHKingCrab_ResourceMgr"),a=cc._decorator,c=a.ccclass,l=a.menu,h=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.water=null,e.gameBgArray=[],e.mainBgContainer=null,e.maskBgContainer=null,e.isChange=!1,e.bguv_x=1,e.expedTime=0,e.mainBg=null,e.currBgIndex=0,e.fillStart=1,e._currSceneId=0,e.completeCB=null,e.bgWidth=0,e}return n(e,t),Object.defineProperty(e.prototype,"currSceneId",{get:function(){return this._currSceneId},enumerable:!1,configurable:!0}),e.prototype.setGame=function(t){this.game=t},e.prototype.start=function(){this.rate=1/4.5,this.bg1Sprite=this.gameBgArray[0].getComponent(cc.Sprite),this.bg2Sprite=this.gameBgArray[1].getComponent(cc.Sprite)},e.prototype.setCurrSceneBg=function(t){this._currSceneId=t,this.playMusicBg(),this.currBgIndex=0,this.mainBg=this.gameBgArray[0],this.mainBg.getComponent(cc.Sprite).spriteFrame=this.game.resourMgr.getRes("map_"+t,s.ResourceType.map,cc.SpriteFrame)},e.prototype.playMusicBg=function(){this.game.iAudioPlayer.play_music("bg"+this.currSceneId)},e.prototype.init=function(){var t=this,e=cc.view.getVisibleSize();this.bgWidth=e.width+50,this.gameBgArray.forEach(function(i){i.width=t.bgWidth,i.height=e.height+60})},e.prototype.changeScene=function(t,e){this.game.iAudioPlayer.play_music("changescene",!1),this.completeCB=e,this.currBgIndex=(this.currBgIndex+1)%2,this._currSceneId=t,this.gameBgArray[this.currBgIndex].getComponent(cc.Sprite).spriteFrame=this.game.resourMgr.getRes("map_"+t,s.ResourceType.map,cc.SpriteFrame),this.expedTime=0,this.bguv_x=1,this.water.x=.5*cc.visibleRect.width-.25*this.water.width,this.water.active=!0,this.isChange=!0,this.fillStart=1,this.playWater()},e.prototype.playWater=function(){var t=this,e=.5*cc.visibleRect.width+this.water.width;cc.tween(this.water).to(5.5,{x:-e}).call(function(){var e;t.water.active=!1,null===(e=t.completeCB)||void 0===e||e.call(t),t.reset()}).start()},e.prototype.reset=function(){this.gameBgArray[this.currBgIndex].setParent(this.mainBgContainer),this.gameBgArray[this.currBgIndex].setSiblingIndex(0),this.mainBg.setParent(this.maskBgContainer),this.mainBg.setSiblingIndex(0),this.bg1Sprite=this.gameBgArray[this.currBgIndex].getComponent(cc.Sprite),this.bg2Sprite=this.mainBg.getComponent(cc.Sprite),this.bg1Sprite.fillStart=0,this.bg2Sprite.fillStart=1,this.mainBg=this.gameBgArray[this.currBgIndex]},e.prototype.update=function(t){this.isChange&&(this.expedTime+=t,this.bguv_x-=t*this.rate,this.fillStart-=t*this.rate,this.bg2Sprite.fillStart=this.bguv_x,this.expedTime>=4.5&&(this.isChange=!1,this.game.iAudioPlayer.play_music("bg"+this.currSceneId)))},r([h(cc.Node)],e.prototype,"water",void 0),r([h([cc.Node])],e.prototype,"gameBgArray",void 0),r([h(cc.Node)],e.prototype,"mainBgContainer",void 0),r([h(cc.Node)],e.prototype,"maskBgContainer",void 0),r([c,l("FISHKingCrab/GameSceneMgr")],e)}(cc.Component);i.default=u,cc._RF.pop()},{"./FISHKingCrab_ResourceMgr":"FISHKingCrab_ResourceMgr"}],FISHKingCrab_GoldBombEffect:[function(t,e,i){"use strict";cc._RF.push(e,"9430fGIlSNM3IeimhW7VYTM","FISHKingCrab_GoldBombEffect");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("../FISHKingCrab_GameDefine"),a=cc._decorator,c=a.ccclass,l=a.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.light=null,e.lblScore=null,e.gold=null,e.fish=null,e.isAddScore=!0,e.currWeight=s.FunctionWeight.goldBomb,e.isNext=!1,e}return n(e,t),e.prototype.setGame=function(t){this.game=t},e.prototype.initFunction=function(t,e,i,o,n){var r=this;cc.error("\u8783\u87f9 gold Bomb"),this.targetFort=t,this.targetFort.setEffect(this),this.game.iAudioPlayer.play_sound("mediumdie1",!1,1,this.game.iGameBase.utils_gen_handler(this.playSound,this,2)),this.gold.getComponent(cc.Animation).on(cc.Animation.EventType.FINISHED,function(){r.gold.active=!1}),this.playGameId=e,this.score=i,this.fish=o,this.isAddScore=n;var s=o.getCurrWorldPos(),a=this.node.convertToNodeSpaceAR(s);this.light.setPosition(a),this.lblScore.string="0",this.game.iGameBase.updatenNumberAnim(this.lblScore,this.score,3.5,this.lblAnim.bind(this)),this.gold.setPosition(a),this.gold.active=!0,cc.tween(this.gold).to(1.92,{scale:1.5}).start(),this.schedule(this.followFish,.015,cc.macro.REPEAT_FOREVER),this.scheduleOnce(this.hide,7)},e.prototype.playSound=function(t){var e="";switch(t){case 2:e="mediumdie2_"+this.game.iGameBase.utils_random(1,2),this.game.iAudioPlayer.play_sound(e,!1,1,this.game.iGameBase.utils_gen_handler(this.playSound,this,3));break;case 3:e="mediumdie3_"+this.game.iGameBase.utils_random(1,2),this.game.iAudioPlayer.play_sound(e,!1,1,this.game.iGameBase.utils_gen_handler(this.playSound,this,4));break;case 4:e="effect"+this.game.iGameBase.utils_random(2311,2320),this.game.iAudioPlayer.play_sound(e)}},e.prototype.lblAnim=function(){cc.tween(this.lblScore.node).to(.2,{scale:1.5}).to(.2,{scale:1}).start()},e.prototype.followFish=function(){var t=this.fish.getCurrWorldPos(),e=this.node.convertToNodeSpaceAR(t);this.light.setPosition(e)},e.prototype.hide=function(){this.isAddScore&&this.game.GameLogic.setWinScore(this.playGameId,this.score),this.unschedule(this.followFish),this.node.destroy()},e.prototype.SetTotalScore=function(){},e.prototype.nextStep=function(){},e.prototype.lastStep=function(){},e.prototype.beforDestroy=function(){cc.error("beforDestroy"),this.node&&this.node.isValid&&(cc.error("beforDestroy gold boom"),this.node.stopAllActions(),this.node.destroy())},e.prototype.ImmediatelyDestroy=function(){cc.error("ImmediatelyDestroy"),this.unscheduleAllCallbacks(),this.beforDestroy()},e.prototype.onDestroy=function(){this.targetFort.subEffectWeight(this.currWeight)},r([l(cc.Node)],e.prototype,"light",void 0),r([l(cc.Label)],e.prototype,"lblScore",void 0),r([l(cc.Node)],e.prototype,"gold",void 0),r([c],e)}(cc.Component);i.default=h,cc._RF.pop()},{"../FISHKingCrab_GameDefine":"FISHKingCrab_GameDefine"}],FISHKingCrab_GoldRoutine:[function(t,e,i){"use strict";cc._RF.push(e,"90762sBaif6WRtJyIXHH25G","FISHKingCrab_GoldRoutine"),Object.defineProperty(i,"__esModule",{value:!0});var o,n=t("./FISHKingCrab_PoolManager"),r=t("./FISHKingCrab_ResourceMgr"),s=cc._decorator;s.ccclass,s.menu,s.property,function(t){t[t.busy=0]="busy",t[t.idle=1]="idle"}(o||(o={}));var a=function(){function t(t,e,i){this.completeCount=0,this.startPos=null,this.endPos=null,this.createCount=0,this.goldArray=null,this.score=0,this.state=o.idle,this.complete=null,this.caller=null,this.updownInterval=.25,this.moveInterval=.1,this.isupwown=!1,this.isMoveFort=!1,this.currMoveFortTime=0,this.currUpDownTime=0,this.scoreAndGoldParent=null,this.scoreTween=null,this._isAddScore=!1,this.currCount=0,this.completeCount=0,this.state=o.busy,this.complete=i,this.caller=e,this.scoreAndGoldParent=t}return t.prototype.setGame=function(t){this.game=t},t.prototype.init=function(t,e,i,n){this.state=o.busy;var r=t.getCurrWorldPos();r=this.game.GameLogic.node.convertToNodeSpaceAR(r),this.startPos=r,this.endPos=e.node.getPosition(),this.score=i,this.currCount=0,this.createCount=t.goldCount,this._isAddScore=n,this.playGameId=e.gameId,this.completeCount=0,this.currUpDownTime=0,this.currMoveFortTime=0,this.goldArray=[],this.isupwown=!1,this.playScoreAnimation(this.scoreAndGoldParent)},t.prototype.playScoreAnimation=function(t){var e=this,i=this.game.poolMgr.Dequeue(n.NodeType.score),o=i.getComponent(cc.Label);t.addChild(i),i.setPosition(this.startPos),o.spacingX=-5,o.fontSize=50,o.font=this.game.resourMgr.getRes("Common/font/bf_number1",r.ResourceType.imgs,cc.Font),o.string=this.game.iGameBase.getNum(this.score,!0);var s=this.game.iGameBase.utils_random(i.x-10,i.x+10);this.startPos=cc.v2(s,i.y+20),cc.tween(i).sequence(cc.scaleTo(.2,1.5),cc.scaleTo(.2,1),cc.moveTo(1.5,this.startPos),cc.callFunc(function(){for(var t=0;t<i.children.length;t++)i.children[t].active=!1;e.game.poolMgr.Enqueue(i,n.NodeType.score),e.isupwown=!0})).start()},t.prototype.moveToFortAnimation=function(t){var e=this,i=(t.getPosition().sub(this.endPos).mag(),this);cc.tween(t).sequence(cc.moveTo(.4,this.endPos),cc.callFunc(function(){i.destroyGold(t),0==i.goldArray.length&&i.isMoveFort&&(i.isMoveFort=!1,i.state=o.idle,i._isAddScore&&e.game.GameLogic.setWinScore(i.playGameId,i.score),i.complete&&i.complete.call(i.caller,i))})).start()},t.prototype.destroyGold=function(t){this.game.poolMgr.Enqueue(t,n.NodeType.gold)},Object.defineProperty(t.prototype,"getStateIsIdle",{get:function(){return this.state==o.idle},enumerable:!1,configurable:!0}),t.prototype.bounceAnimation=function(t,e,i){return cc.repeat(cc.sequence(cc.moveTo(.06,cc.v2(t,e+i)),cc.callFunc(function(){i-=5}),cc.moveTo(.06,cc.v2(t,e))),3)},t.prototype.onUpdate=function(){var t=this;if(this.isupwown)if(this.currUpDownTime>=this.updownInterval||0==this.goldArray.length){this.currCount++,this.currCount==this.createCount&&(this.isupwown=!1);var e=this.game.poolMgr.Dequeue(n.NodeType.gold);this.scoreAndGoldParent.addChild(e);var i=this.createCount>1?this.game.iGameBase.utils_random(this.startPos.x-50,this.startPos.x+50):this.startPos.x;e.setPosition(cc.v2(i,this.startPos.y));var o=this.game.iGameBase.utils_random(this.startPos.y+100,this.startPos.y+200),r=this.game.iGameBase.utils_random(this.startPos.y,this.startPos.y-50);this.goldArray.push(e),cc.tween(e).sequence(cc.sequence(cc.moveTo(.35,cc.v2(i,o)),cc.moveTo(.35,cc.v2(i,r))),this.bounceAnimation(i,r,20),cc.delayTime(.2),cc.callFunc(function(){t.completeCount++,t.completeCount==t.createCount&&(t.isMoveFort=!0)})).start(),this.currUpDownTime=0}else this.currUpDownTime+=.1;if(this.isMoveFort&&this.goldArray.length>0)if(this.currMoveFortTime>=this.moveInterval||this.goldArray.length==this.createCount){var s=this.goldArray.pop();this.moveToFortAnimation(s),this.currMoveFortTime=0}else this.currMoveFortTime+=.1},t.prototype.release=function(){this.scoreTween&&this.scoreTween.stop(),this.scoreTween=null},t}();i.default=a,cc._RF.pop()},{"./FISHKingCrab_PoolManager":"FISHKingCrab_PoolManager","./FISHKingCrab_ResourceMgr":"FISHKingCrab_ResourceMgr"}],FISHKingCrab_GrapComp:[function(t,e,i){"use strict";cc._RF.push(e,"5e70a2FagKgE8ZJe2kPDGdy","FISHKingCrab_GrapComp");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.menu,l=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.graphicsComp=null,e}var i;return n(e,t),i=e,e.prototype.onLoad=function(){i.Instance=this},e.prototype.start=function(){},e.Instance=null,r([l(cc.Graphics)],e.prototype,"graphicsComp",void 0),i=r([a,c("FISHKingCrab/GrapComp")],e)}(cc.Component);i.default=h,cc._RF.pop()},{}],FISHKingCrab_IngotEffect:[function(t,e,i){"use strict";cc._RF.push(e,"fd5c3AmiAVJ74u5xyw0Am0B","FISHKingCrab_IngotEffect");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s,a=t("../FISHKingCrab_GameDefine"),c=t("../FISHKingCrab_Jackpot"),l=cc._decorator,h=l.ccclass,u=l.property;(function(t){t[t.Idle=0]="Idle",t[t.transfiguration=1]="transfiguration",t[t.up=2]="up",t[t.longattack=3]="longattack",t[t.attack=4]="attack"})(s||(s={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fish=null,e.bomb=null,e.dbomb=null,e.jackpots=[],e.currWeight=a.FunctionWeight.ingot,e.fishAnima=null,e.longattackCount=0,e.currTotalScore=0,e}return n(e,t),e.prototype.setGame=function(t){this.game=t},e.prototype.initFunction=function(t,e,i,o,n,r,s){this.playerId=e,this.targetFort=t,this.targetFort.setEffect(this),this.multiple=i,this.jpIndex=o+1,this.fishAnima=this.node.getComponent(cc.Animation),this.fish.setPosition(this.node.convertToNodeSpaceAR(r)),this.fish.angle=s,this.fish.active=!0,this.stopFirst(),this.currJp=this.jackpots[o],this.currJp.setGame(this.game),this.currJp.node.setPosition(n.getPosition()),this.currJp.node.angle=n.angle,this.currJp.node.active=!0,this.currJp.play(),this.longattackCount=1,this.play(),this.game.iAudioPlayer.play_music("ingotBg")},e.prototype.stopFirst=function(){var t=s[s.transfiguration]+this.jpIndex;this.fishAnima.play(t,0),this.fishAnima.sample(t),this.fishAnima.stop()},e.prototype.play=function(){var t=this;this.fishAnima.on(cc.Animation.EventType.FINISHED,this.animaComplete,this);var e=new cc.Vec3(0,.5*cc.visibleRect.height-this.fish.height),i=0;this.fish.angle>=0?i=this.fish.angle%360:this.fish.angle<=-0&&(i=this.fish.angle%-360);var o=cc.tween().by(.45,{angle:360}).delay(.05).by(.45,{angle:360-i}),n=cc.tween().to(1,{position:e});cc.tween(this.fish).parallel(o,n).delay(1.2).call(function(){t.fish.setSiblingIndex(1),t.fishAnima.play(s[s.transfiguration]+t.jpIndex)}).start()},e.prototype.animaComplete=function(){this.fishAnima.currentClip.name==s[s.transfiguration]+this.jpIndex?this.fishAnima.play(s[s.attack]+this.jpIndex):this.fishAnima.currentClip.name==s[s.up]+this.jpIndex?this.fishAnima.play(s[s.attack]+this.jpIndex):this.fishAnima.currentClip.name==s[s.attack]+this.jpIndex?this.fishAnima.play(s[s.longattack]+this.jpIndex).repeatCount=this.longattackCount:this.fishAnima.currentClip.name==s[s.longattack]+this.jpIndex&&(this.playerId==this.game.gameId&&this.game.iGameBase.EmitEvent(a.EventCode.ingot,null),this.fish.setSiblingIndex(0),this.fishAnima.play(s[s.Idle]+this.jpIndex))},e.prototype.nextStep=function(t){var e=t;this.currTotalScore+=e;var i=this.game.iGameBase.utils_gen_handler(this.attack,this),o=.25*(Math.floor(t/(10*this.multiple))+1)+.8;this.targetFort.showFunctionCatchScroe(this.currWeight,this.currTotalScore,o);var n=this.targetFort.getMountPoint(a.FunctionWeight.ingot);this.currJp.playIngotAnim(t,this.multiple,n,i,o)},e.prototype.attack=function(){this.longattackCount++,this.fish.setSiblingIndex(1),this.fishAnima.play(s[s.up]+this.jpIndex,0)},e.prototype.onHit=function(){var t=cc.instantiate(this.bomb);t.setParent(this.node);var e=t.getComponent(cc.Animation);e.on(cc.Animation.EventType.FINISHED,function(){t.destroy()}),t.active=!0,e.play(),this.game.iAudioPlayer.play_sound("ingotHit")},e.prototype.onDestroy=function(){this.targetFort.subEffectWeight(this.currWeight),this.game.gameScene.playMusicBg()},e.prototype.beforDestroy=function(){var t=this;this.currJp.node.active=!1,this.fish.active=!1;var e=this.dbomb.getComponent(cc.Animation);e.on(cc.Animation.EventType.FINISHED,function(){t.node.destroy()}),this.dbomb.active=!0,e.play()},e.prototype.ImmediatelyDestroy=function(){this.node.destroy()},r([u(cc.Node)],e.prototype,"fish",void 0),r([u(cc.Node)],e.prototype,"bomb",void 0),r([u(cc.Node)],e.prototype,"dbomb",void 0),r([u([c.default])],e.prototype,"jackpots",void 0),r([h],e)}(cc.Component);i.default=p,cc._RF.pop()},{"../FISHKingCrab_GameDefine":"FISHKingCrab_GameDefine","../FISHKingCrab_Jackpot":"FISHKingCrab_Jackpot"}],FISHKingCrab_Jackpot:[function(t,e,i){"use strict";cc._RF.push(e,"03541V2YMdCuqRC48Doiq/7","FISHKingCrab_Jackpot");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s,a=cc._decorator,c=a.ccclass,l=(a.inspector,a.property);(function(t){t[t.silve=0]="silve",t[t.golden=1]="golden"})(s||(s={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ingot=null,e.lblJp=null,e.light=null,e.highlight=null,e.font=null,e.lblMultiple=null,e.container=null,e.type=s.silve,e.ingotPool=[],e.cb=null,e.soundId=-1,e.ingotComplete=0,e}return n(e,t),e.prototype.setGame=function(t){this.game=t},e.prototype.play=function(){var t=this;this.currJackpot=this.type==s.silve?400:600,this.lblJp.string=this.game.iGameBase.getNum(this.currJackpot,!1),this.node.setSiblingIndex(2);var e=cc.tween().to(.5,{scale:2}),i=cc.tween().by(.5,{angle:this.type==s.silve?-90:90});cc.tween(this.node).to(.5,{x:0}).parallel(e,i).to(.5,{scale:1}).delay(.25).call(function(){t.light.active=!0,t.highlight.active=!0}).start()},e.prototype.playIngotAnim=function(t,e,i,o,n){this.currJackpot-=t/e;var r=Math.floor(t/(10*e))-1;r=r<=0?1:r,this.ingotComplete=0,this.lblMultiple.string="x10",this.lblMultiple.node.active=!0,this.cb=o,this.container.scale=1.35,cc.tween(this.container).to(3,{scale:1}).start(),this.game.iGameBase.updatenNumberAnim(this.lblJp,this.currJackpot,n,null),this.schedule(this.ingotAnim.bind(this,i,r),.25,r),this.soundId=this.game.iAudioPlayer.play_sound("ingotscore",!0)},e.prototype.ingotAnim=function(t,e){var i=this.ingotPool.length>0?this.ingotPool.shift():cc.instantiate(this.ingot);i.setParent(this.node),i.active=!0,t=this.node.convertToNodeSpaceAR(t),cc.tween(i).to(.8,{position:cc.v3(t)}).call(this.ingotAnimComplete.bind(this,i,e)).start()},e.prototype.ingotAnimComplete=function(t,e){var i;t.destroy(),this.ingotComplete++,this.ingotComplete>=e&&(null===(i=this.cb)||void 0===i||i.exec(),this.cb=null,-1!=this.soundId&&(this.game.iAudioPlayer.stop_sound(this.soundId),this.soundId=-1))},r([l(cc.Node)],e.prototype,"ingot",void 0),r([l(cc.Label)],e.prototype,"lblJp",void 0),r([l(cc.Node)],e.prototype,"light",void 0),r([l(cc.Node)],e.prototype,"highlight",void 0),r([l(cc.Font)],e.prototype,"font",void 0),r([l(cc.Label)],e.prototype,"lblMultiple",void 0),r([l(cc.Node)],e.prototype,"container",void 0),r([l({type:cc.Enum(s)})],e.prototype,"type",void 0),r([c],e)}(cc.Component);i.default=h,cc._RF.pop()},{}],FISHKingCrab_LaserEffect:[function(t,e,i){"use strict";cc._RF.push(e,"faa04/gkbBC5AvYMCvSQm19","FISHKingCrab_LaserEffect");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("../FISHKingCrab_GameDefine"),a=t("./FISHKingCrab_Laser"),c=cc._decorator,l=c.ccclass,h=c.menu,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.laserIdle=null,e.granule=null,e.laserFire=null,e.currWeight=s.FunctionWeight.laser,e.isNext=!1,e}return n(e,t),e.prototype.setGame=function(t){this.game=t},e.prototype.start=function(){this.laserIdle.play("laserIdle"),this.granule.play("laserGranule")},e.prototype.initFunction=function(t){this.targetFort=t,this.targetFort.setEffect(this)},e.prototype.playFire=function(t,e){this.laserIdle.node.active=!1,this.granule.node.active=!1,this.laserFire.node.active=!0,this.laserFire.palyLaserFire(t,e,this.playComplete.bind(this))},e.prototype.playComplete=function(){this.scheduleOnce(this.beforDestroy,.2)},e.prototype.onDestroy=function(){this.targetFort.subEffectWeight(this.currWeight)},e.prototype.nextStep=function(){},e.prototype.beforDestroy=function(){this.node.destroy()},e.prototype.ImmediatelyDestroy=function(){this.unschedule(this.beforDestroy),this.beforDestroy()},r([u(cc.Animation)],e.prototype,"laserIdle",void 0),r([u(cc.Animation)],e.prototype,"granule",void 0),r([u(a.default)],e.prototype,"laserFire",void 0),r([l,h("FISHKingCrab/LaserEffect")],e)}(cc.Component);i.default=p,cc._RF.pop()},{"../FISHKingCrab_GameDefine":"FISHKingCrab_GameDefine","./FISHKingCrab_Laser":"FISHKingCrab_Laser"}],FISHKingCrab_Laser:[function(t,e,i){"use strict";cc._RF.push(e,"35367K33PhIuMdYlE3RSThb","FISHKingCrab_Laser");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../FISHKingCrab_GameDefine"),c=cc._decorator,l=c.ccclass,h=c.menu,u=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.catchFish=new Map,e.laserFire=null,e.bulletIndex=0,e.playerId=0,e.collider=null,e.isCheckCollider=!1,e._complete=null,e}return n(e,t),e.prototype.setGame=function(t){this.game=t},e.prototype.onLoad=function(){this.laserFire=this.node.getComponent(cc.Animation),this.collider=this.node.getComponent(cc.Collider)},e.prototype.start=function(){},e.prototype.onDisable=function(){},e.prototype.laserPlayComplete=function(){var t,e;if(this.game.gameId==this.playerId){for(var i=[],o=0;o<a.FunctionCatchCount.laser;o++)i[o]=0;var n=0;try{for(var r=s(this.catchFish.keys()),c=r.next();!c.done;c=r.next()){var l=c.value;i[n]=l,n++}}catch(h){t={error:h}}finally{try{c&&!c.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.game.iGameBase.EmitEvent(a.EventCode.FunctionCatchFishs,{wChairID:this.game.iGameBase.UserManager_getChairID(),dwBulletIndex:this.bulletIndex,dwFishIndex:i,cbFishCount:this.catchFish.size})}this._complete&&this._complete()},e.prototype.checkStart=function(){this.isCheckCollider=!0},e.prototype.checkEnd=function(){this.isCheckCollider=!1},e.prototype.palyLaserFire=function(t,e,i){this._complete=i,this.bulletIndex=t,this.playerId=e,this.laserFire.play(),this.game.iAudioPlayer.play_sound("diancifire")},e.prototype.lateUpdate=function(){if(this.isCheckCollider){var t=this.game.quadCollision.check(this.game.fishMgr.getGameFish,this.collider);if(t.length>0)for(var e=t.length,i=0;i<e;i++){var o=t[i];if(o&&o.isCanCatch&&this.catchFish.size<a.FunctionCatchCount.laser&&!this.catchFish.has(o.fishInfo.dwFishIndex)&&(o.fishInfo.nFishKindID<301||o.fishInfo.nFishKindID>307)&&o.checkInScreenRegion()&&(this.catchFish.set(o.fishInfo.dwFishIndex,o),this.catchFish.size>=a.FunctionCatchCount.laser)){this.isCheckCollider=!1;break}}}},e.prototype.onDestroy=function(){this.catchFish.clear()},r([l,h("FISHKingCrab/Laser")],e)}(cc.Component));i.default=u,cc._RF.pop()},{"../FISHKingCrab_GameDefine":"FISHKingCrab_GameDefine"}],FISHKingCrab_LightingEffect:[function(t,e,i){"use strict";cc._RF.push(e,"288a3Mlg57BeLRFLzkSAdVC","FISHKingCrab_LightingEffect");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("../FISHKingCrab_GameDefine"),a=cc._decorator,c=a.ccclass,l=a.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lightCircle=null,e.lightning=null,e.currWeight=s.FunctionWeight.lighting,e.isNext=!1,e}return n(e,t),e.prototype.setGame=function(t){this.game=t},e.prototype.initFunction=function(t,e){this.targetFort=t,this.targetFort.setEffect(this);var i=e.getCurrWorldPos(),o=this.node.convertToNodeSpaceAR(i);this.node.setPosition(o)},e.prototype.getAngle=function(t){var e=cc.v2(t.x,t.y).signAngle(cc.v2(0,1))/Math.PI*180;return 360-e},e.prototype.play=function(t){var e=this;this.game.iAudioPlayer.play_sound("mediumdie3_1",!1,1);for(var i=0,o=t.length;i<o;i++){var n=cc.instantiate(this.lightning);n.setParent(this.node),n.setPosition(0,0);var r=t[i],s=this.node.convertToNodeSpaceAR(r).sub(n.getPosition()),a=this.getAngle(s);n.angle=a,n.height=s.mag(),n.active=!0,n.getComponent(cc.Animation).play("New AnimationClip")}var c=this.lightCircle.getComponent(cc.Animation);c.on(cc.Animation.EventType.FINISHED,function(){e.lightCircle.active=!1}),this.lightCircle.active=!0,c.play("New AnimationClip"),this.scheduleOnce(function(){e.playSoun()},1),this.scheduleOnce(function(){e.beforDestroy()},2)},e.prototype.playSoun=function(){this.game.iAudioPlayer.play_sound("effect"+this.game.iGameBase.utils_random(2311,2320))},e.prototype.onDestroy=function(){this.targetFort.subEffectWeight(this.currWeight)},e.prototype.beforDestroy=function(){this.node.destroy()},e.prototype.ImmediatelyDestroy=function(){this.beforDestroy()},r([l(cc.Node)],e.prototype,"lightCircle",void 0),r([l(cc.Node)],e.prototype,"lightning",void 0),r([c],e)}(cc.Component);i.default=h,cc._RF.pop()},{"../FISHKingCrab_GameDefine":"FISHKingCrab_GameDefine"}],FISHKingCrab_LocalBombEffect:[function(t,e,i){"use strict";cc._RF.push(e,"e4d6a+h7yxOtaw88Do3kNd6","FISHKingCrab_LocalBombEffect");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("../FISHKingCrab_GameDefine"),a=t("../FISHKingCrab_ResourceMgr"),c=cc._decorator,l=c.ccclass,h=c.menu,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bomb=null,e.lblIndex=null,e.haloAni=null,e.currIndex=0,e.bulletIndex=0,e.targetFort=null,e.currWeight=s.FunctionWeight.localBomb,e.isNext=!0,e.bombRotateSoundId=-1,e}return n(e,t),e.prototype.setGame=function(t){this.game=t,this.lblIndex.font=this.game.resourMgr.getRes("Cannon/Font/blodBM",a.ResourceType.imgs,cc.Font)},e.prototype.initFunction=function(t,e){var i=this;this.targetFort=t,this.currIndex=0,this.playId=t.gameId,this.bulletIndex=e,this.targetFort.setEffect(this),this.haloAni.on(cc.Animation.EventType.FINISHED,function(){i.haloAni.node.active=!1}),this.rotateSuperBomb(this.bomb),this.showSuperBomb(this.game.GameLogic.functionLayer.points[this.currIndex])},e.prototype.rotateSuperBomb=function(t){var e=cc.repeatForever(cc.sequence(cc.rotateBy(.6,-180),cc.delayTime(.015)));cc.tween(t).then(e).start()},e.prototype.showSuperBomb=function(t){var e=this,i=this,o=0==this.currIndex?3.5:2;this.lblIndex.string=(this.currIndex+1).toString(),cc.tween(this.bomb).sequence(cc.delayTime(.25),cc.scaleTo(.8,1.5),cc.scaleTo(.8,1)).start();var n=cc.sequence(cc.moveTo(1.5,t),cc.callFunc(function(){i.haloAni.node.active=!0,i.bombRotateSoundId=e.game.iAudioPlayer.play_sound("bombrotate"),i.haloAni.play().repeatCount=0==i.currIndex?2:1}),cc.delayTime(o),cc.callFunc(function(){var t=i.node.convertToWorldSpaceAR(cc.v2());t=e.game.bulletMgr.node.convertToNodeSpaceAR(t),i.bombRotateSoundId>-1&&e.game.iAudioPlayer.stop_sound(i.bombRotateSoundId),e.game.bulletMgr.playHit({pos:t,hitType:s.HitType.bigBang,bulletIndex:i.bulletIndex,bomb:s.bombType.superBomb,playerId:i.playId})}));cc.tween(this.node).then(n).start()},e.prototype.nextStep=function(){this.currIndex++,this.currIndex>=this.game.GameLogic.functionLayer.points.length&&(this.currIndex=0),this.showSuperBomb(this.game.GameLogic.functionLayer.points[this.currIndex])},e.prototype.onDestroy=function(){this.targetFort.subEffectWeight(this.currWeight)},e.prototype.beforDestroy=function(){this.node&&this.node.isValid&&(this.node.stopAllActions(),this.node.destroy())},e.prototype.ImmediatelyDestroy=function(){this.beforDestroy()},r([u(cc.Node)],e.prototype,"bomb",void 0),r([u(cc.Label)],e.prototype,"lblIndex",void 0),r([u(cc.Animation)],e.prototype,"haloAni",void 0),r([l,h("FISHKingCrab/LocalBombEffect")],e)}(cc.Component);i.default=p,cc._RF.pop()},{"../FISHKingCrab_GameDefine":"FISHKingCrab_GameDefine","../FISHKingCrab_ResourceMgr":"FISHKingCrab_ResourceMgr"}],FISHKingCrab_LockFishButton:[function(t,e,i){"use strict";cc._RF.push(e,"ec097r5jN21ah7W7WQpim60","FISHKingCrab_LockFishButton");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.menu,l=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lockOn=null,e}return n(e,t),e.prototype.setLock=function(t){this.lockOn.node.active=t},e.prototype.update=function(t){this.lockOn.node.angle-=360*t,this.lockOn.node.angle<0&&(this.lockOn.node.angle+=360)},r([l(cc.Sprite)],e.prototype,"lockOn",void 0),r([a,c("FISHKingCrab/LockFishButton")],e)}(cc.Component);i.default=h,cc._RF.pop()},{}],FISHKingCrab_MyFishSetting:[function(t,e,i){"use strict";cc._RF.push(e,"6cb57A+JdBGVZqCzOhhd4uI","FISHKingCrab_MyFishSetting");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.setBtn=null,e.setPanel=null,e.setPanelMask=null,e.isPlaying=!1,e.setbtnWidget=null,e.setPanelWidget=null,e.scriptName="MySetting",e.iGameBase=null,e.mCaller=null,e.InfoEvn=null,e}return n(e,t),e.prototype.Init=function(t,e,i,o){this.iGameBase=t,cc.error("script===>",e),this.scriptName=e,this.mCaller=i,this.InfoEvn=o;var n=this.node,r=cc.find("Setting",n),s=cc.find("layout/Sound/Switch",r);cc.error("==m_Panel_Setting===",s);var a=cc.find("soundOn",s),c=cc.find("soundOff",s);this.iGameBase.AddSetSystem(r,a,c)},e.prototype.start=function(){var t;t=this.node,this.setBtn=cc.find("SetBtn",t),this.SetBtnEvent(this.setBtn.getComponent(cc.Button),!0,!0),this.setPanel=cc.find("Setting",t),this.setPanelWidget=this.setPanel.getComponent(cc.Widget),this.setbtnWidget=this.setBtn.getComponent(cc.Widget),cc.error("\u8bbe\u7f6e>>>",this.setbtnWidget),this.setPanelMask=cc.find("Mask",this.setPanel),this.SetBtnEvent(this.setPanelMask.getComponent(cc.Button),!1,!0);var e=cc.find("layout",this.setPanel),i=cc.find("Sound",e),o=cc.find("Switch/soundOn",i),n=cc.find("Switch/soundOff",i);this.iGameBase.AddSetSystem(this.setPanel,o,n),this.SetBtnEvent(i.getComponent(cc.Button),!0,!0);var r=cc.find("Info",e);this.SetBtnEvent(r.getComponent(cc.Button),!0,!0);var s=cc.find("ToLgin",e);this.SetBtnEvent(s.getComponent(cc.Button),!0,!0)},e.prototype.SetBtnEvent=function(t,e,i){if(void 0===e&&(e=!0),void 0===i&&(i=!0),null!=t){var o=new cc.Component.EventHandler;o.target=this.node,o.component=this.scriptName,o.handler="BtnEventCallback",t.clickEvents.push(o),t.node.active=e,t.interactable=i}},e.prototype.BtnEventCallback=function(t){var e=t.target;this.OnClickBtn(e)},e.prototype.OnClickBtn=function(t){switch(cc.log("===============>>\u6240\u6709\u6309\u94ae\u70b9\u51fb\u4e8b\u4ef6\uff1a"+t.name),t.name){case"ToLgin":this.iGameBase.onBtnLeaveGame();break;case"Info":this.onMaskClick(),this.showGamInfoPanel();break;case"Sound":this.iGameBase.SettingClick();break;case"Mask":this.onMaskClick();break;case"SetBtn":this.onSetClick()}},e.prototype.onSetClick=function(){var t=this;this.isPlaying||(this.setBtnPos=this.setBtn.getPosition(),this.setbtnWidth=this.setBtn.getContentSize().width,this.setPanelPos=this.setPanel.getPosition(),this.setPanelWidth=this.setPanel.getContentSize().width,this.isPlaying=!0,cc.tween(this.setBtn).to(.25,{position:cc.v3(this.setBtnPos.x+this.setbtnWidth,this.setBtnPos.y,0)}).call(function(){t.setbtnWidget.right=-t.setbtnWidth,cc.tween(t.setPanel).to(.25,{position:cc.v3(t.setPanelPos.x-t.setPanelWidth,t.setPanelPos.y,0)}).call(function(){t.setPanelWidget.right=0,t.setPanelMask.active=!0,t.isPlaying=!1}).start()}).start())},e.prototype.onMaskClick=function(){var t=this;this.isPlaying||(this.setBtnPos=this.setBtn.getPosition(),this.setbtnWidth=this.setBtn.getContentSize().width,this.setPanelPos=this.setPanel.getPosition(),this.setPanelWidth=this.setPanel.getContentSize().width,this.isPlaying=!0,cc.tween(this.setPanel).to(.25,{position:cc.v3(this.setPanelPos.x+this.setPanelWidth,this.setPanelPos.y,0)}).call(function(){t.setPanelMask.active=!1,t.setPanelWidget.right=-t.setPanelWidth,cc.tween(t.setBtn).to(.25,{position:cc.v3(t.setBtnPos.x-t.setbtnWidth,t.setBtnPos.y,0)}).call(function(){t.setbtnWidget.right=0,t.isPlaying=!1}).start()}).start())},e.prototype.showGamInfoPanel=function(){null!=this.InfoEvn&&this.InfoEvn.call(this.mCaller,!0)},r([c(cc.Node)],e.prototype,"setBtn",void 0),r([c(cc.Node)],e.prototype,"setPanel",void 0),r([c(cc.Node)],e.prototype,"setPanelMask",void 0),r([a],e)}(cc.Component);i.default=l,cc._RF.pop()},{}],FISHKingCrab_MyProperty:[function(t,e,i){"use strict";cc._RF.push(e,"58090VkxTFv4GfNVXYP5ceX","FISHKingCrab_MyProperty");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("./FISHKingCrab_GameDefine"),a=cc._decorator,c=a.ccclass,l=a.menu,h=a.property,u=[1,5,10,20,100],p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnScoreArray=[],e}return n(e,t),e.prototype.setGame=function(t){this.game=t},e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},e.prototype.touchEnd=function(){this.OnCloseBtnClick()},e.prototype.show=function(t){var e=this.btnScoreArray.length;if(t>100){for(var i=0;i<e;i++)this.btnScoreArray[i].interactable=t>=100*u[i];this.btnScoreArray[e-1].interactable=!0}else for(i=0;i<e;i++)this.btnScoreArray[i].interactable=!1;this.currWinScore=t,this.node.active=!0},e.prototype.OnCloseBtnClick=function(){this.node.active=!1},e.prototype.OnScoreBtnClick=function(t,e){var i=e<6?100*u[e-1]:this.currWinScore;this.game.iGameBase.EmitEvent(s.EventCode.converProperty,i),this.OnCloseBtnClick()},r([h([cc.Button])],e.prototype,"btnScoreArray",void 0),r([c,l("FISHKingCrab/MyProperty")],e)}(cc.Component);i.default=p,cc._RF.pop()},{"./FISHKingCrab_GameDefine":"FISHKingCrab_GameDefine"}],FISHKingCrab_PoolManager:[function(t,e,i){"use strict";cc._RF.push(e,"16403Tci47TcGW4eNYW29LA","FISHKingCrab_PoolManager");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0}),i.FISHKingCrab_Pool=i.NodeType=void 0;var a,c=t("./FISHKingCrab_ResourceMgr"),l=cc._decorator,h=l.ccclass,u=l.property,p=l.menu,d=(l.executeInEditMode,l.executionOrder);(function(t){t[t.none=0]="none",t[t.bullet=1]="bullet",t[t.bulletEffect=2]="bulletEffect",t[t.gold=3]="gold",t[t.score=4]="score",t[t.fishShadow=5]="fishShadow",t[t.fishSkeletonShadow=6]="fishSkeletonShadow",t[t.flame=7]="flame",t[t.goldBomb=8]="goldBomb",t[t.love=9]="love",t[t.flower=10]="flower"})(a=i.NodeType||(i.NodeType={}));var f=function(){function t(){this.isInitRes=!0,this.nodeType=a.none,this.prefab=null,this.resname="none",this.initCount=0,this.pool=null,this.pool=new cc.NodePool}return t.prototype.setGame=function(t){this.game=t},t.prototype.Init=function(){if(this.isInitRes)for(var t=0;t<this.initCount;t++){var e=cc.instantiate(this.prefab);this.pool.put(e)}else{var i=this.game.resourMgr.getRes(this.resname,c.ResourceType.initPrefab,cc.Prefab);this.prefab=i,e=cc.instantiate(i),this.pool.put(e)}},t.prototype.Dequeue=function(){return this.pool.size()>0?this.pool.get():this.isInitRes?cc.instantiate(this.prefab):void cc.error("\u5f53\u524d\u8d44\u6e90\u4e0d\u662f\u521d\u59cb\u8d44\u6e90\uff0c\u9700\u8981\u4f7f\u7528\u5f02\u6b65\u52a0\u8f7d")},t.prototype.AsyncDequeue=function(t){if(this.pool.size()>0)t&&t(this.pool.get());else if(this.isInitRes)t&&t(cc.instantiate(this.prefab));else{var e=cc.instantiate(this.prefab);t&&t(e)}},t.prototype.Enqueue=function(t){t.stopAllActions(),this.pool.put(t)},t.prototype.clear=function(){this.pool.clear()},r([u({tooltip:"\u662f\u5426\u662f\u521d\u59cb\u8d44\u6e90"})],t.prototype,"isInitRes",void 0),r([u({type:cc.Enum(a),tooltip:"1:\u5b50\u5f39 2:\u5b50\u5f39\u7279\u6548 3:\u91d1\u5e01 4:\u5206\u6570 5:\u9c7c\u9634\u5f71 6:\u94bb\u5934\u5c3e\u7130"})],t.prototype,"nodeType",void 0),r([u({type:cc.Prefab,visible:function(){return this.isInitRes}})],t.prototype,"prefab",void 0),r([u({tooltip:"\u8d44\u6e90\u540d\u79f0",visible:function(){return!this.isInitRes}})],t.prototype,"resname",void 0),r([u({type:cc.Integer,tooltip:"\u6c60\u4e2d\u7684\u521d\u59cb\u6570\u91cf"})],t.prototype,"initCount",void 0),r([h("FISHKingCrab_Pool")],t)}();i.FISHKingCrab_Pool=f;var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.poolArray=[],e.poolMap=null,e}return n(e,t),e.prototype.setGame=function(t){this.game=t},e.prototype.init=function(){this.poolMap=new Map;for(var t=0;t<this.poolArray.length;t++){var e=this.poolArray[t];e.Init(),this.poolMap.set(e.nodeType,e)}},e.prototype.Dequeue=function(t){if(this.poolMap.has(t))return this.poolMap.get(t).Dequeue();cc.error("\u6ca1\u6709\u8fd9\u4e2a\u7c7b\u578b\u7684\u6c60\uff1a"+a[t])},e.prototype.AsyncDequeue=function(t,e){this.poolMap.has(t)?this.poolMap.get(t).AsyncDequeue(e):cc.error("\u6ca1\u6709\u8fd9\u4e2a\u7c7b\u578b\u7684\u6c60\uff1a"+a[t])},e.prototype.Enqueue=function(t,e,i){var o;this.poolMap.has(e)?(o=this.poolMap.get(e)).Enqueue(t):((o=new f).nodeType=e,o.isInitRes=!1,o.resname=i,o.Enqueue(t),this.poolMap.set(e,o))},e.prototype.onDestroy=function(){var t,e;try{for(var i=s(this.poolMap.keys()),o=i.next();!o.done;o=i.next()){var n=o.value;this.poolMap.delete(n)}}catch(r){t={error:r}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}this.poolArray.length},r([u([f])],e.prototype,"poolArray",void 0),r([h,p("FISHKingCrab/PoolManager"),d(-1)],e)}(cc.Component);i.default=g,cc._RF.pop()},{"./FISHKingCrab_ResourceMgr":"FISHKingCrab_ResourceMgr"}],FISHKingCrab_QuadtreeCollision:[function(t,e,i){"use strict";cc._RF.push(e,"09706U7J5bwWTU2+iQzSEK9","FISHKingCrab_QuadtreeCollision"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t){this._isCanCollider=!1,this._isCanCollider=!0,this._tree=new r(t)}return t.prototype.setCollider=function(t){this._isCanCollider=t},t.prototype.check=function(t,e){var i=[];if(this._isCanCollider&&this._tree){this._tree.clear();var o=cc.director.getCollisionManager();o.updateCollider(e);for(var r=0,s=t.length;r<s;r++){var a=t[r],c=t[r].collider;o.updateCollider(c);var l=c.world.aabb,h={x:l.x,y:l.y,height:l.height,width:l.width,collider:c,fish:a};this._tree.insert(h)}this._tree.retrieve(e.world.aabb).forEach(function(t){n(t.collider,e)&&-1==i.indexOf(t.fish)&&i.push(t.fish)})}return i},t}();function n(t,e){if(!cc.director.getCollisionManager().shouldCollide(t,e))return!1;var i=t.world,o=e.world;if(!i.aabb.intersects(o.aabb))return!1;var n=t instanceof cc.BoxCollider||t instanceof cc.PolygonCollider,r=e instanceof cc.BoxCollider||e instanceof cc.PolygonCollider,s=t instanceof cc.CircleCollider,a=e instanceof cc.CircleCollider;return n&&r?cc.Intersection.polygonPolygon(i.points,o.points):s&&a?cc.Intersection.circleCircle(i,o):n&&a?cc.Intersection.polygonCircle(i.points,o):!(!s||!r)&&cc.Intersection.polygonCircle(o.points,i)}i.default=o;var r=function(){function t(t,e,i,o){this.max_objects=null,this.max_levels=null,this.level=null,this.bounds=null,this.objects=null,this.nodes=null,this.max_objects=e||10,this.max_levels=i||4,this.level=o||0,this.bounds=t,this.objects=[],this.nodes=[]}return t.prototype.split=function(){var e=this.level+1,i=this.bounds.width/4,o=this.bounds.height/4,n=this.bounds.width/2,r=this.bounds.height/2;this.bounds.x,this.bounds.y,this.nodes[0]=new t({x:3*i,y:3*o,width:n,height:r},this.max_objects,this.max_levels,e),this.nodes[1]=new t({x:i,y:3*o,width:n,height:r},this.max_objects,this.max_levels,e),this.nodes[2]=new t({x:i,y:o,width:n,height:r},this.max_objects,this.max_levels,e),this.nodes[3]=new t({x:3*i,y:o,width:n,height:r},this.max_objects,this.max_levels,e)},t.prototype.getIndex=function(t){var e=[],i=this.bounds.x+this.bounds.width/2,o=this.bounds.y+this.bounds.height/2,n=t.y+t.height>o,r=t.x<i,s=t.x+t.width>i,a=t.y<o;return n&&s&&e.push(0),r&&n&&e.push(1),r&&a&&e.push(2),s&&a&&e.push(3),e},t.prototype.insert=function(t){var e,i=0;if(this.nodes.length)for(e=this.getIndex(t),i=0;i<e.length;i++)this.nodes[e[i]].insert(t);else if(this.objects.push(t),this.objects.length>this.max_objects&&this.level<this.max_levels){for(this.nodes.length||this.split(),i=0;i<this.objects.length;i++){e=this.getIndex(this.objects[i]);for(var o=0;o<e.length;o++)this.nodes[e[o]].insert(this.objects[i])}this.objects=[]}},t.prototype.retrieve=function(t){var e=this.getIndex(t),i=this.objects;if(this.nodes.length)for(var o=0;o<e.length;o++)i=i.concat(this.nodes[e[o]].retrieve(t));return i=i.filter(function(t,e){return i.indexOf(t)>=e})},t.prototype.clear=function(){this.objects=[];for(var t=0;t<this.nodes.length;t++)this.nodes.length&&this.nodes[t].clear();this.nodes=[]},t}();cc._RF.pop()},{}],FISHKingCrab_ResourceMgr:[function(t,e,i){"use strict";cc._RF.push(e,"f306daE0M9d5GJOQXtA12PJ","FISHKingCrab_ResourceMgr");var o=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0}),i.ResourceType=i.CommonResType=void 0;var n,r,s=cc._decorator,a=s.ccclass;s.menu,s.property,function(t){t[t.fishPath=0]="fishPath",t[t.font=1]="font",t[t.fishIcon=2]="fishIcon",t[t.fishSkeleton=3]="fishSkeleton",t[t.fishPrefab=4]="fishPrefab",t[t.Prefab=5]="Prefab",t[t.font_Cannon=6]="font_Cannon",t[t.font_function=7]="font_function",t[t.DragonDie=8]="DragonDie",t[t.imgs=9]="imgs",t[t.function=10]="function"}(i.CommonResType||(i.CommonResType={})),function(t){t[t.none=0]="none",t[t.fishPath=1]="fishPath",t[t.fishPrefab=2]="fishPrefab",t[t.initPrefab=3]="initPrefab",t[t.fishKind=4]="fishKind",t[t.music=5]="music",t[t.sound=6]="sound",t[t.common=7]="common",t[t.font=8]="font",t[t.map=9]="map",t[t.functionUI=10]="functionUI",t[t.imgs=11]="imgs",t[t.function=12]="function"}(n=i.ResourceType||(i.ResourceType={})),function(t){t.fishPath="Res/fishPath/",t.initPrefab="Res/Prefab/",t.fishPrefab="Res/fishPrefab/",t.fishKind="Res/fishselect/",t.sound="Res/Sounds/sound/",t.music="Res/Sounds/music/",t.common="Res/Common/",t.font="Res/Cannon/Font/",t.map="Res/Map/",t.functionUI="Res/functionUI/",t.imgs="Res/imgs/",t.function="Res/function/"}(r||(r={}));var c=function(){function t(){this.KindID=0,this.preloadResArray=null,this.currBundle=null,this.iMrgBase=null,this.currBundle=cc.assetManager.getBundle("FISHCRABKING"),this.preloadResArray=this.currBundle.getDirWithPath("PreloadRes",cc.Prefab)}return t.prototype.setIMrgBase=function(t){this.iMrgBase=t,this.iMrgBase.setGameBundle(this.currBundle),this.iMrgBase.setPreloadArray(this.preloadResArray),this.iMrgBase.preloadRes()},t.prototype._getResPath=function(t,e){return r[n[t]]+e},t.prototype.getRes=function(t,e,i){var o=this._getResPath(e,t);return this.currBundle.get(o,i)},t.prototype.loadOther=function(t,e,i,o,n){void 0===n&&(n=!1);var r=this._getResPath(e,t);this.iMrgBase.load(r,i,o,n)},o([a],t)}();i.default=c,cc._RF.pop()},{}],FISHKingCrab_RocketEffect:[function(t,e,i){"use strict";cc._RF.push(e,"5a82d7t7YhHbK6nzgjP2No7","FISHKingCrab_RocketEffect");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../FISHKingCrab_GameDefine"),c=cc._decorator,l=c.ccclass,h=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rocket=null,e.fire=null,e.bomb=null,e.rocketContainer=null,e.collider=null,e.currWeight=a.FunctionWeight.rocket,e.isNext=!1,e.rocketArray=null,e.catchFishMap=new Map,e.isCheckCollide=!1,e}return n(e,t),e.prototype.setGame=function(t){this.game=t},e.prototype.initFunction=function(t,e,i,o){this.targetFort=t,this.targetFort.setEffect(this),this._bulletIndex=i,this.playerId=o,this.node.setPosition(this.node.convertToNodeSpaceAR(e.getCurrWorldPos())),this.giveAngle=30,this.game.iAudioPlayer.play_sound("mediumdie1",!1,1,this.game.iGameBase.utils_gen_handler(this.playSound,this)),this.play()},e.prototype.playSound=function(){var t="effect"+this.game.iGameBase.utils_random(2311,2320);this.game.iAudioPlayer.play_sound(t)},e.prototype.play=function(){var t=this,e=this.node.getComponent(cc.Animation);e.on(cc.Animation.EventType.FINISHED,function(){var e,i;if(t.bomb.active=!1,t.isCheckCollide=!1,t.game.gameId==t.playerId){for(var o=[],n=0;n<a.FunctionCatchCount.rocket;n++)o[n]=0;var r=0;try{for(var c=s(t.catchFishMap.keys()),l=c.next();!l.done;l=c.next()){var h=l.value;o[r]=h,r++}}catch(u){e={error:u}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(e)throw e.error}}t.game.iGameBase.EmitEvent(a.EventCode.FunctionCatchFishs,{wChairID:t.game.iGameBase.UserManager_getChairID(),dwBulletIndex:t._bulletIndex,dwFishIndex:o,cbFishCount:r})}}),this.bomb.active=!0,e.play(),this.scheduleOnce(function(){t.rocketArray=[];for(var e=0;e<12;e++){var i=cc.instantiate(t.rocket);i.setParent(t.rocketContainer),i.angle=e*t.giveAngle,i.active=!0,t.rocketArray[e]=i}},.2),this.scheduleOnce(this.moveRocket,.5)},e.prototype.moveRocket=function(){for(var t=0;t<12;t++){var e=this.rocketArray[t],i=Math.PI/180*this.giveAngle*t+Math.PI/180*90,o=new cc.Vec3(250*Math.cos(i),250*Math.sin(i));cc.tween(e).to(.5,{position:o}).call(this.playRocketBomb.bind(this,e,o)).start()}},e.prototype.playRocketBomb=function(t,e){this.game.iAudioPlayer.play_sound("vortexbomb1"),this.game.iAudioPlayer.play_sound("vortexbomb2"),t.destroy();var i=cc.instantiate(this.fire);i.setParent(this.node),i.setPosition(e),i.active=!0;var o=i.getComponent(cc.Animation);o.on(cc.Animation.EventType.FINISHED,function(){i.destroy()}),o.play()},e.prototype.startCatchFish=function(){this.isCheckCollide=!0},e.prototype.lateUpdate=function(){if(this.isCheckCollide){var t=this.game.quadCollision.check(this.game.fishMgr.getGameFish,this.collider),e=t.length;if(e>0)for(var i=0;i<e;i++){var o=t[i];o.isCanCatch&&!this.catchFishMap.has(o.fishInfo.dwFishIndex)&&this.catchFishMap.size<a.FunctionCatchCount.rocket&&!o.fishKind.isDontCanfunctionCatch&&o.checkInScreenRegion()&&(this.catchFishMap.set(o.fishInfo.dwFishIndex,o),this.catchFishMap.size>=a.FunctionCatchCount.rocket&&(this.isCheckCollide=!1))}}},e.prototype.nextStep=function(){},e.prototype.onDestroy=function(){this.targetFort.subEffectWeight(this.currWeight)},e.prototype.beforDestroy=function(){this.node.destroy()},e.prototype.ImmediatelyDestroy=function(){this.node.destroy()},r([h(cc.Node)],e.prototype,"rocket",void 0),r([h(cc.Node)],e.prototype,"fire",void 0),r([h(cc.Node)],e.prototype,"bomb",void 0),r([h(cc.Node)],e.prototype,"rocketContainer",void 0),r([h(cc.CircleCollider)],e.prototype,"collider",void 0),r([l],e)}(cc.Component);i.default=u,cc._RF.pop()},{"../FISHKingCrab_GameDefine":"FISHKingCrab_GameDefine"}],FISHKingCrab_RotateAround:[function(t,e,i){"use strict";cc._RF.push(e,"058e9cU15B1wgE/i51XZZIE","FISHKingCrab_RotateAround");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.menu,l=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._targetPos=null,e.clockwise=!0,e.timePerRound=.5,e.angle=0,e.radius=0,e.isRotating=!1,e.expendTime=0,e}return n(e,t),e.prototype.onLoad=function(){this.originPos=this.node.getPosition()},e.prototype.onDisable=function(){},e.prototype.run=function(t){this.angle=0;var e=t.convertToWorldSpaceAR(cc.v2());this._targetPos=this.node.parent.convertToNodeSpaceAR(e),this.radius=this.getDistance(this._targetPos,this.node.getPosition()),this.expendTime=0,this.isRotating=!0},e.prototype.getDistance=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},e.prototype.update=function(t){if(this.isRotating&&this._targetPos){if(this.expendTime>=2*this.timePerRound)return this.isRotating=!1,this.node.setPosition(this.originPos),void(this.node.angle=0);var e=Math.PI/180*this.angle,i=cc.v2(0,1).mul(this.radius).rotate(e).sub(cc.v2(0,this.radius));this.node.setPosition(i),this.node.angle=this.angle;var o=t*(360/this.timePerRound);this.angle+=o,this.angle>=360?this.angle%=360:this.angle<=-360&&(this.angle%=-360),this.expendTime+=t}},r([l({tooltip:"\u987a\u65f6\u9488\u65cb\u8f6c"})],e.prototype,"clockwise",void 0),r([a,c("FISHKingCrab/RotateAround")],e)}(cc.Component);i.default=h,cc._RF.pop()},{}],FISHKingCrab_RuleDetails:[function(t,e,i){"use strict";cc._RF.push(e,"be60cQ6CAeBME0yjMG9TH9o","FISHKingCrab_RuleDetails");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sv=null,e}return n(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},e.prototype.touchEnd=function(){this.node.active=!1},e.prototype.show=function(){this.node.setSiblingIndex(this.node.parent.childrenCount-1),this.sv.setContentPosition(cc.v2()),this.node.active=!0},r([c(cc.ScrollView)],e.prototype,"sv",void 0),r([a],e)}(cc.Component);i.default=l,cc._RF.pop()},{}],FISHKingCrab_SelectFishItem:[function(t,e,i){"use strict";cc._RF.push(e,"868fdcoObwzvPWWlzjNp/4G","FISHKingCrab_SelectFishItem");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectSign=null,e.fishSprite=null,e.lblMultiple=null,e.infoBg=null,e.id=-1,e.isSelect=!1,e}return n(e,t),e.prototype.setUI=function(t,e){this.lblMultiple.string="",this.fishSprite.spriteFrame=e,this.id=t.id,this.node.name=String(t.id),this.node.active=!0},e.prototype.setStatu=function(t){void 0===t&&(t=!1),this.isSelect=t,this.selectSign.active=this.isSelect},e.prototype.onFishSettingSelect=function(){this.isSelect=!this.isSelect,this.selectSign.active=this.isSelect},r([c(cc.Node)],e.prototype,"selectSign",void 0),r([c(cc.Sprite)],e.prototype,"fishSprite",void 0),r([c(cc.Label)],e.prototype,"lblMultiple",void 0),r([c(cc.Node)],e.prototype,"infoBg",void 0),r([a],e)}(cc.Component);i.default=l,cc._RF.pop()},{}],FISHKingCrab_SharkEatEvent:[function(t,e,i){"use strict";cc._RF.push(e,"accadlewFJCZZdJnuHmAFjn","FISHKingCrab_SharkEatEvent");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.eventCB=null,e}return n(e,t),e.prototype.onEatEnter=function(){var t;null===(t=this.eventCB)||void 0===t||t.call(this)},e.prototype.onComplete=function(){this.node.active=!1},r([a],e)}(cc.Component));i.default=c,cc._RF.pop()},{}],FISHKingCrab_ShootSelectSetting:[function(t,e,i){"use strict";cc._RF.push(e,"3d4172HDfIkHuU9sZ+KijXl","FISHKingCrab_ShootSelectSetting");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./FISHKingCrab_FishKindMap"),c=t("./FISHKingCrab_ResourceMgr"),l=t("./FISHKingCrab_SelectFishItem"),h=cc._decorator,u=h.ccclass,p=h.menu,d=h.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab=null,e.contentNode=null,e.onOk=null,e.currSelectFishMap=new Map,e.fishNodes=[],e.scriptName="FISHKingCrab_ShootSelectSetting",e}return n(e,t),e.prototype.setGame=function(t){this.game=t},e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},e.prototype.touchEnd=function(){this.node.active=!1},e.prototype.start=function(){var t=this;this.game.resourMgr.loadOther("fishSelect",c.ResourceType.fishKind,cc.SpriteAtlas,function(e){for(var i in a.FishKindMap)t.setUI(a.FishKindMap[i],e)})},e.prototype.setUI=function(t,e){var i=cc.instantiate(this.prefab),o=i.getComponent(l.default);o=i.addComponent(l.default),this.SetBtnEvent(i.getComponent(cc.Button),!0,!0),o.selectSign=cc.find("selecLlight",i),o.fishSprite=i.getComponent(cc.Sprite),o.lblMultiple=cc.find("Label",i).getComponent(cc.Label),o.infoBg=cc.find("info",i),o.infoBg.active=!1,o.setUI(t,e.getSpriteFrame(String(t.id))),this.fishNodes.push(o),this.fishNodes.push(o),this.contentNode.addChild(i)},e.prototype.onEnable=function(){for(var t=0,e=this.fishNodes.length;t<e;t++){var i=this.fishNodes[t],o=this.currSelectFishMap.has(i.id);i.setStatu(o)}},e.prototype.IsSelectFish=function(){return this.currSelectFishMap.size>0},e.prototype.onCloseBtnClick=function(){this.node.active=!1},e.prototype.onCancelBtnClick=function(){for(var t=0,e=this.fishNodes.length;t<e;t++)this.fishNodes[t].setStatu()},e.prototype.onOKBtnClick=function(){this.node.active=!1,this.currSelectFishMap.clear();for(var t=0,e=this.fishNodes.length;t<e;t++){var i=this.fishNodes[t];i.isSelect&&this.currSelectFishMap.set(i.id,!0)}this.onOk&&this.onOk()},e.prototype.getCurrentSelectFishID=function(){var t,e,i=[];try{for(var o=s(this.currSelectFishMap.keys()),n=o.next();!n.done;n=o.next()){var r=n.value;i.push(r)}}catch(a){t={error:a}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return i},e.prototype.SetBtnEvent=function(t,e,i){if(void 0===e&&(e=!0),void 0===i&&(i=!0),null!=t){var o=new cc.Component.EventHandler;o.target=this.node,o.component=this.scriptName,o.handler="BtnEventCallback",t.clickEvents.push(o),t.node.active=e,t.interactable=i}},e.prototype.BtnEventCallback=function(t){var e=t.target;this.OnClickBtn(e)},e.prototype.OnClickBtn=function(t){switch(cc.log("===============>>\u6240\u6709\u6309\u94ae\u70b9\u51fb\u4e8b\u4ef6\uff1a"+t.name),t.name){case"closebtn":this.onCloseBtnClick();break;case"OKBtn":this.onOKBtnClick();break;case"ClearBtn":this.onCancelBtnClick();break;default:t.getComponent(l.default).onFishSettingSelect()}},r([d(cc.Node)],e.prototype,"prefab",void 0),r([d(cc.Node)],e.prototype,"contentNode",void 0),r([u,p("FISHKingCrab/ShootSelectSetting")],e)}(cc.Component);i.default=f,cc._RF.pop()},{"./FISHKingCrab_FishKindMap":"FISHKingCrab_FishKindMap","./FISHKingCrab_ResourceMgr":"FISHKingCrab_ResourceMgr","./FISHKingCrab_SelectFishItem":"FISHKingCrab_SelectFishItem"}],FISHKingCrab_TreasureBoxEffect:[function(t,e,i){"use strict";cc._RF.push(e,"68edagVYjpKv5AxhEpzHaAQ","FISHKingCrab_TreasureBoxEffect");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("../FISHKingCrab_GameDefine"),a=cc._decorator,c=a.ccclass,l=a.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dragon=null,e.currWeight=s.FunctionWeight.treasureBox,e.isNext=!1,e}return n(e,t),e.prototype.setGame=function(t){this.game=t},e.prototype.initFunction=function(t,e){var i=this;this.targetFort=t,this.targetFort.setEffect(this),e==this.game.gameId&&this.dragon.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.game.iAudioPlayer.play_sound("treasureDie1"),this.game.iAudioPlayer.play_sound("treasureDie2"),this.schedule(this.playDragon,1.5),this.scheduleOnce(function(){i.game.iAudioPlayer.play_sound("treasure1",!1,1,i.game.iGameBase.utils_gen_handler(i.playSound,i,2))},1.8)},e.prototype.playSound=function(t){2==t?this.game.iAudioPlayer.play_sound("treasure2",!1,1,this.game.iGameBase.utils_gen_handler(this.playSound,this,3)):this.game.iAudioPlayer.play_sound("treasure3")},e.prototype.touchStart=function(){var t=this.dragon.defaultClip.name;this.dragon.play(t,0),this.game.iGameBase.EmitEvent(s.EventCode.treasurBox,null)},e.prototype.playDragon=function(){this.dragon.play()},e.prototype.onDestroy=function(){this.targetFort.subEffectWeight(this.currWeight)},e.prototype.beforDestroy=function(t){var e=this;this.dragon.node.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.scheduleOnce(function(){e.unschedule(e.playDragon),e.targetFort.showFunctionUI(s.FunctionType.treasureBox,s.FunctionUIType.turnplate,null,t);var i=cc.tween().to(1.2,{scale:0}),o=cc.tween().to(1.2,{position:e.targetFort.node.position});cc.tween(e.node).parallel(i,o).call(function(){e.node.destroy()}).start()},1.5)},e.prototype.ImmediatelyDestroy=function(){this.node.destroy()},r([l(cc.Animation)],e.prototype,"dragon",void 0),r([c],e)}(cc.Component);i.default=h,cc._RF.pop()},{"../FISHKingCrab_GameDefine":"FISHKingCrab_GameDefine"}],FISHKingCrab_TreasureBoxUI:[function(t,e,i){"use strict";cc._RF.push(e,"8b11dF4Hw5CvYFp1AEROQtc","FISHKingCrab_TreasureBoxUI");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("./FISHKingCrab_ResourceMgr"),a=cc._decorator,c=a.ccclass,l=a.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fireworks=null,e.lblTime=null,e.circle1=null,e.circle2=null,e.lblScore=null,e.container=null,e.countdownTime=16,e._cb=null,e}return n(e,t),e.prototype.setGame=function(t){this.game=t,this.lblScore.font=this.game.resourMgr.getRes("font/LabelAtlasNumber4",s.ResourceType.function,cc.Font)},e.prototype.fadeIn=function(){return cc.tween().to(1,{opacity:255})},e.prototype.resetPos=function(){return cc.tween().to(1,{x:0})},e.prototype.show=function(t,e,i){var o=this;this.weight=t,this._cb=i,this.circle1.x=50,this.circle2.x=-50;var n=cc.tween().to(.5,{scale:3}),r=cc.tween().to(.5,{opacity:0}),s=cc.tween(this.circle1).by(.25,{angle:-15}),a=cc.tween(this.circle1).repeatForever(s);cc.tween(this.circle2).parallel(this.fadeIn(),this.resetPos()).parallel(n,r).call(function(){a.start(),o.schedule(o.magnify,3,cc.macro.REPEAT_FOREVER)}).start(),cc.tween(this.circle1).parallel(this.fadeIn(),this.resetPos()).start(),this.schedule(this.playFire,.8),this.schedule(this.countdown,1,15)},e.prototype.countdown=function(){this.countdownTime--,this.lblTime.string=""+this.countdownTime},e.prototype.playFire=function(){var t=null;(t=cc.instantiate(this.fireworks)).setParent(this.node);var e=new cc.Vec2(this.game.iGameBase.utils_random(-70,70),this.game.iGameBase.utils_random(-15,15));t.setPosition(e);var i=t.getComponent(cc.Animation);i.on(cc.Animation.EventType.FINISHED,function(){t.destroy()}),t.active=!0,i.play()},e.prototype.magnify=function(){cc.tween(this.node).to(.2,{scale:1.2},{easing:"backOut"}).to(.2,{scale:1}).start()},e.prototype.destoryFunction=function(){this.node&&this.node.isValid&&this.node.destroy()},e.prototype.hide=function(){var t,e=this;this.unscheduleAllCallbacks(),null===(t=this._cb)||void 0===t||t.call(this,this.weight,0),cc.tween(this.container).to(1,{scale:0}).call(function(){e.destoryFunction()}).start()},e.prototype.showCatchScore=function(t,e){this.game.iGameBase.updatenNumberAnim(this.lblScore,t,1.5,e?this.hide.bind(this):null)},r([l({type:cc.Node})],e.prototype,"fireworks",void 0),r([l({type:cc.Label})],e.prototype,"lblTime",void 0),r([l(cc.Node)],e.prototype,"circle1",void 0),r([l(cc.Node)],e.prototype,"circle2",void 0),r([l(cc.Label)],e.prototype,"lblScore",void 0),r([l(cc.Node)],e.prototype,"container",void 0),r([c],e)}(cc.Component);i.default=h,cc._RF.pop()},{"./FISHKingCrab_ResourceMgr":"FISHKingCrab_ResourceMgr"}],FISHKingCrab_TurnplateUI:[function(t,e,i){"use strict";cc._RF.push(e,"c4923HTnBNOtrRLfkUEPKzt","FISHKingCrab_TurnplateUI");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("./FISHKingCrab_ResourceMgr"),a=cc._decorator,c=a.ccclass,l=a.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lblTotalScore=null,e.bg=null,e}return n(e,t),e.prototype.setGame=function(t){this.game=t,this.lblTotalScore.font=this.game.resourMgr.getRes("font/LabelAtlasNumber4",s.ResourceType.function,cc.Font)},e.prototype.show=function(t,e,i,o){this.weight=t,this.lblTotalScore.string=this.game.iGameBase.getNum(e,!0),this.playTurnplateAnima(e,i,o)},e.prototype.playTurnplateAnima=function(t,e,i){var o=this;this.node.setPosition(0,-150),cc.tween(this.node).to(.25,{y:0},{easing:"backOut"}).start(),cc.tween(this.bg).to(5,{angle:-1440}).start();var n=cc.tween().to(.8,{angle:-30}),r=cc.tween().to(.8,{angle:30}),s=cc.tween().sequence(n,r);cc.tween(this.lblTotalScore.node).repeatForever(s).start(),this.scheduleOnce(function(){o.fadeOutHide(e,t,i)},4)},e.prototype.fadeOutHide=function(t,e,i){var o=this;cc.tween(this.node).to(1.5,{opacity:0}).call(function(){o.destoryFunction(),null==t||t(o.weight,e),i&&i.exec()}).start()},e.prototype.destoryFunction=function(){this.node&&this.node.isValid&&this.node.destroy()},r([l(cc.Label)],e.prototype,"lblTotalScore",void 0),r([l(cc.Node)],e.prototype,"bg",void 0),r([c],e)}(cc.Component);i.default=h,cc._RF.pop()},{"./FISHKingCrab_ResourceMgr":"FISHKingCrab_ResourceMgr"}],FISHKingCrab_VortexEffect:[function(t,e,i){"use strict";cc._RF.push(e,"c1741k2mxFGmJgSWJBHX7VG","FISHKingCrab_VortexEffect");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("../FISHKingCrab_GameDefine"),a=cc._decorator,c=a.ccclass,l=a.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lighting=null,e.vortex=null,e.dbomb=null,e.currWeight=s.FunctionWeight.vortex,e.isNext=!1,e.rotateSoundId=-1,e}return n(e,t),e.prototype.setGame=function(t){this.game=t},e.prototype.initFunction=function(t,e){var i=this;this.targetFort=t,this.targetFort.setEffect(this),this._bulletIndex=e;var o=this.lighting.getComponent(cc.Animation);o.on(cc.Animation.EventType.FINISHED,function(){i.vortex.active=!0,i.sendCatchFish(),i.schedule(i.sendCatchFish,2,cc.macro.REPEAT_FOREVER),i.rotateSoundId=i.game.iAudioPlayer.play_sound("vortexrotate",!0)}),this.lighting.active=!0,o.play(),this.game.iAudioPlayer.play_sound("vortexdie")},e.prototype.sendCatchFish=function(){if(-1!=this._bulletIndex){var t=this.game.fishMgr.getFunctionCatchFishs(s.FunctionCatchCount.vortex);this.game.iGameBase.EmitEvent(s.EventCode.FunctionCatchFishs,{wChairID:this.game.iGameBase.UserManager_getChairID(),dwBulletIndex:this._bulletIndex,dwFishIndex:t,cbFishCount:t.length})}},e.prototype.onDestroy=function(){this.targetFort.subEffectWeight(this.currWeight)},e.prototype.beforDestroy=function(t){var e=this;this.unschedule(this.sendCatchFish),this.scheduleOnce(function(){e.targetFort.showFunctionUI(s.FunctionType.vortex,s.FunctionUIType.turnplate,null,t),-1!=e.rotateSoundId&&e.game.iAudioPlayer.stop_sound(e.rotateSoundId),e.vortex.active=!1,e.dbomb.node.active=!0,e.dbomb.on(cc.Animation.EventType.FINISHED,function(){e.node.destroy()}),e.dbomb.play(),e.game.iAudioPlayer.play_sound("vortexbomb1"),e.game.iAudioPlayer.play_sound("vortexbomb2")},4)},e.prototype.ImmediatelyDestroy=function(){this.node.destroy()},r([l(cc.Node)],e.prototype,"lighting",void 0),r([l(cc.Node)],e.prototype,"vortex",void 0),r([l(cc.Animation)],e.prototype,"dbomb",void 0),r([c],e)}(cc.Component);i.default=h,cc._RF.pop()},{"../FISHKingCrab_GameDefine":"FISHKingCrab_GameDefine"}],FISHKingCrab_fishPathTool:[function(t,e,i){"use strict";cc._RF.push(e,"73c9cVfQBYMVO5J49dfJvtJ","FISHKingCrab_fishPathTool");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.menu,l=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.is_debug=!1,e.anim_com=null,e.graphics=null,e.road_data_set=[],e}return n(e,t),e.prototype.onLoad=function(){this.anim_com=this.node.getComponent(cc.Animation);var t=this.anim_com.getClips()[0];this.graphics=this.node.getComponent(cc.Graphics),this.graphics||(this.graphics=this.node.addComponent(cc.Graphics),this.graphics.fillColor=cc.color(255,0,0,255));var e,i=t.curveData.paths;for(e in this.road_data_set=[],i){var o=i[e].props.position;this.gen_path_data(o)}},e.prototype.get_road_set=function(){return this.road_data_set},e.prototype.gen_path_data=function(t){for(var e=null,i=null,o=null,n=null,r=[],s=0;s<t.length;s++){var a=t[s];null!==e&&r.push([i,e,e,cc.v2(a.value[0],a.value[1])]),i=cc.v2(a.value[0],a.value[1]);for(var c=0;c<a.motionPath.length;c++)o=cc.v2(a.motionPath[c][0],a.motionPath[c][1]),n=cc.v2(a.motionPath[c][2],a.motionPath[c][3]),null===e&&(e=n),r.push([i,e,n,o]),e=cc.v2(a.motionPath[c][4],a.motionPath[c][5]),i=o}for(var l=[r[0][0]],h=0;h<r.length;h++){i=r[h][0],e=r[h][1],n=r[h][2],o=r[h][3];var u=this.bezier_length(i,e,n,o)/20,p=1/(u=Math.floor(u)),d=p;for(s=0;s<u;s++){var f=i.x*(1-d)*(1-d)*(1-d)+3*e.x*d*(1-d)*(1-d)+3*n.x*d*d*(1-d)+o.x*d*d*d,g=i.y*(1-d)*(1-d)*(1-d)+3*e.y*d*(1-d)*(1-d)+3*n.y*d*d*(1-d)+o.y*d*d*d;l.push(cc.v2(f,g)),d+=p}}if(this.is_debug){for(s=0;s<l.length;s++)this.graphics.moveTo(l[s].x,l[s].y),this.graphics.lineTo(l[s].x+2,l[s].y+2),this.graphics.lineTo(l[s].x-2,l[s].y-2),this.graphics.lineTo(l[s].x-2,l[s].y-2),this.graphics.lineTo(l[s].x+2,l[s].y+2),this.graphics.stroke(),this.graphics.close();this.graphics.fill()}this.road_data_set.push(l);var y=JSON.stringify(this.road_data_set,null,4);new Blob([y])},e.prototype.bezier_length=function(t,e,i,o){for(var n=t,r=0,s=.05,a=0;a<20;a++){var c=t.x*(1-s)*(1-s)*(1-s)+3*e.x*s*(1-s)*(1-s)+3*i.x*s*s*(1-s)+o.x*s*s*s,l=t.y*(1-s)*(1-s)*(1-s)+3*e.y*s*(1-s)*(1-s)+3*i.y*s*s*(1-s)+o.y*s*s*s,h=cc.v2(c,l),u=h.sub(n);n=h,r+=u.mag(),s+=.05}return r},r([l],e.prototype,"is_debug",void 0),r([a,c("FISHKingCrab/fishPathTool")],e)}(cc.Component);i.default=h,cc._RF.pop()},{}],FISHKingCrab_functionUI:[function(t,e,i){"use strict";cc._RF.push(e,"7e04a9uvYHiNgvkZPMCZWEF","FISHKingCrab_functionUI");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("./FISHKingCrab_GameDefine"),a=t("./FISHKingCrab_ResourceMgr"),c=cc._decorator,l=c.ccclass,h=c.menu,u=(c.inspector,c.property),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=s.FunctionUIType.none,e.bg=null,e.catchScore=null,e.lblCatchScore=null,e.totalScore=null,e.lblTotalScore=null,e.currTotalScore=0,e}return n(e,t),e.prototype.setGame=function(t){this.game=t,this.lblTotalScore.font=this.game.resourMgr.getRes("font/LabelAtlasNumber4",a.ResourceType.function,cc.Font),this.lblCatchScore&&(this.lblCatchScore.font=this.game.resourMgr.getRes("font/LabelAtlasNumber2",a.ResourceType.function,cc.Font))},e.prototype.showCatchScore=function(t,e){void 0===e&&(e=1),this.lblCatchScore&&this.game.iGameBase.updatenNumberAnim(this.lblCatchScore,t,e),this.weight==s.FunctionWeight.lighting?(this.lblTotalScore.string=this.game.iGameBase.getNum(t,!0),this.currTotalScore=t):this.weight==s.FunctionWeight.ingot&&this.game.iGameBase.updatenNumberAnim(this.lblTotalScore,t,e)},e.prototype.show=function(t,e,i,o){var n=this;if(this.weight=t,this.lblTotalScore.string="0",this.currTotalScore=e,this.type==s.FunctionUIType.bombShark)this.lblTotalScore.string=this.game.iGameBase.getNum(e,!0),this.scheduleOnce(function(){cc.tween(n.lblTotalScore.node).to(.25,{scale:1.5},{easing:"backOut"}).to(.25,{scale:1}).start()},2),this.scheduleOnce(function(){n.hide(i)},3.5);else if(this.type==s.FunctionUIType.common){if(o){var r=this.node.parent.convertToNodeSpaceAR(o);this.node.setPosition(r),cc.tween(this.node).to(2.5,{position:cc.Vec3.ZERO}).start(),this.game.iGameBase.updatenNumberAnim(this.lblTotalScore,e,3,this.lblAnim.bind(this))}else this.lblTotalScore.string=this.game.iGameBase.getNum(e,!0),this.node.setPosition(cc.Vec2.ZERO),this.scheduleOnce(this.lblAnim,4);this.scheduleOnce(function(){n.hide(i)},6)}},e.prototype.lblAnim=function(){cc.tween(this.lblTotalScore.node).to(.2,{scale:1.5}).to(.2,{scale:1}).start()},e.prototype.getMountPoint=function(){return this.lblTotalScore.node.convertToWorldSpaceAR(cc.Vec2.ZERO)},e.prototype.hide=function(t){this.destoryFunction(),null==t||t(this.weight,this.currTotalScore)},e.prototype.destoryFunction=function(){this.node&&this.node.isValid&&this.node.destroy()},r([u({type:cc.Enum(s.FunctionUIType)})],e.prototype,"type",void 0),r([u({type:cc.Node,visible:function(){return this.type==s.FunctionUIType.common}})],e.prototype,"bg",void 0),r([u({type:cc.Node,visible:function(){return this.type==s.FunctionUIType.drill}})],e.prototype,"catchScore",void 0),r([u({type:cc.Label,visible:function(){return this.type==s.FunctionType.drill}})],e.prototype,"lblCatchScore",void 0),r([u(cc.Node)],e.prototype,"totalScore",void 0),r([u(cc.Label)],e.prototype,"lblTotalScore",void 0),r([l,h("FISHKingCrab/FunctionFort")],e)}(cc.Component);i.default=p,cc._RF.pop()},{"./FISHKingCrab_GameDefine":"FISHKingCrab_GameDefine","./FISHKingCrab_ResourceMgr":"FISHKingCrab_ResourceMgr"}],KingCrabTest:[function(t,e,i){"use strict";cc._RF.push(e,"26e580kHU1JfIimCeV7gylh","KingCrabTest");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.water=null,e.gameBgArray=[],e.mainBgContainer=null,e.maskBgContainer=null,e.maps=[],e.bg1Material=null,e.bg2Material=null,e.isChange=!1,e.bguv_x=1,e.expedTime=0,e.mainBg=null,e.currBgIndex=0,e._currSceneId=0,e}return n(e,t),Object.defineProperty(e.prototype,"currSceneId",{get:function(){return this._currSceneId},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.keyUp,this)},e.prototype.keyUp=function(t){switch(t.keyCode){case cc.macro.KEY.a:if(this.isChange)return;for(;-1==this._currSceneId;);this.changeScene(-1);break;case cc.macro.KEY.b:}},e.prototype.start=function(){this.bg1Material=this.gameBgArray[0].getComponent(cc.Sprite).getMaterial(0),this.bg2Material=this.gameBgArray[1].getComponent(cc.Sprite).getMaterial(0)},e.prototype.setCurrSceneBg=function(t){this.currBgIndex=0,this.mainBg=this.gameBgArray[0],this.mainBg.getComponent(cc.Sprite).spriteFrame=this.maps[t]},e.prototype.changeScene=function(t){this.currBgIndex=(this.currBgIndex+1)%2,this._currSceneId=t,this.gameBgArray[this.currBgIndex].getComponent(cc.Sprite).spriteFrame=this.maps[t],this.expedTime=0,this.bguv_x=1,this.water.x=.5*cc.visibleRect.width-.25*this.water.width,this.isChange=!0,this.playWater()},e.prototype.playWater=function(){var t=this,e=.5*cc.visibleRect.width+this.water.width;cc.tween(this.water).to(5.5,{x:-e}).call(function(){t.reset()}).start()},e.prototype.reset=function(){this.gameBgArray[this.currBgIndex].setParent(this.mainBgContainer),this.gameBgArray[this.currBgIndex].setSiblingIndex(0),this.mainBg.setParent(this.maskBgContainer),this.mainBg.setSiblingIndex(0),this.bg1Material=this.gameBgArray[this.currBgIndex].getComponent(cc.Sprite).getMaterial(0),this.bg2Material=this.mainBg.getComponent(cc.Sprite).getMaterial(0),this.bg1Material.setProperty("uv_x",1),this.bg1Material.setProperty("dir",1),this.bg2Material.setProperty("uv_x",1),this.bg2Material.setProperty("dir",0),this.mainBg=this.gameBgArray[this.currBgIndex]},e.prototype.update=function(t){this.isChange&&(this.expedTime+=t,this.bguv_x-=1*t/4.5,this.bg1Material.setProperty("uv_x",this.bguv_x),this.bg2Material.setProperty("uv_x",this.bguv_x),this.expedTime>=4.5&&(this.isChange=!1))},r([c(cc.Node)],e.prototype,"water",void 0),r([c([cc.Node])],e.prototype,"gameBgArray",void 0),r([c(cc.Node)],e.prototype,"mainBgContainer",void 0),r([c(cc.Node)],e.prototype,"maskBgContainer",void 0),r([c([cc.SpriteFrame])],e.prototype,"maps",void 0),r([a],e)}(cc.Component);i.default=l,cc._RF.pop()},{}],TestEffect:[function(t,e,i){"use strict";cc._RF.push(e,"10911jC4CZK/YWJ/gcbYAgL","TestEffect");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lblScore=null,e.getGameFish=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56],e}return n(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.keyUp,this),cc.error(cc.winSize.width,cc.winSize.height)},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.keyUp,this)},e.prototype.touchEnd=function(t){var e=t.getLocation();e=this.node.convertToNodeSpaceAR(e),this.lblScore.node.setPosition(e);var i=this.lblScore.node.convertToWorldSpaceAR(cc.Vec2.ZERO);cc.log(i.x,i.y)},e.prototype.keyUp=function(t){var e=this;switch(this.lblScore.string="0",t.keyCode){case cc.macro.KEY.a:var i={num:0};i.num=Number(this.lblScore.string),cc.tween(i).to(3,{num:15.683},{progress:function(t,i,o,n){if(e.lblScore.isValid){var r=Math.ceil(t+(i-t)*n),s=String(r);return e.lblScore.string=s,t+(i-t)*n}}}).call(function(){}).start();break;case cc.macro.KEY.b:cc.error(this.getFunctionCatchFishs(50))}},e.prototype.getFunctionCatchFishs=function(){var t=[];new Map,cc.error("\u9c7c\u7684\u6570\u91cf:",this.getGameFish.length);for(var e=this.getGameFish.length-1;e>=0;e--);return cc.error("\u53d1\u9001\u7684\u9c7c\u6570\u91cf:",t.length),t},r([c(cc.Label)],e.prototype,"lblScore",void 0),r([a],e)}(cc.Component);i.default=l,cc._RF.pop()},{}]},{},["FISHCRABKING_Game","FISHCRABKING_GameLogic","FISHKingCrab_CMD","FISHKingCrab_AutoFireButton","FISHKingCrab_BulletManager","FISHKingCrab_CrashGrid","FISHKingCrab_FishKindMap","FISHKingCrab_FishManager","FISHKingCrab_FishPathCrash","FISHKingCrab_FunctionFort","FISHKingCrab_FunctionLayer","FISHKingCrab_GameBullet","FISHKingCrab_GameBulletBase","FISHKingCrab_GameBulletDrill","FISHKingCrab_GameBulletHit","FISHKingCrab_GameDefine","FISHKingCrab_GameFish","FISHKingCrab_GameFishShadow","FISHKingCrab_GameFort","FISHKingCrab_GameFortGunAni","FISHKingCrab_GameRewardTip","FISHKingCrab_GameSceneMgr","FISHKingCrab_GoldRoutine","FISHKingCrab_GrapComp","FISHKingCrab_Jackpot","FISHKingCrab_LockFishButton","FISHKingCrab_MyFishSetting","FISHKingCrab_MyProperty","FISHKingCrab_PoolManager","FISHKingCrab_QuadtreeCollision","FISHKingCrab_ResourceMgr","FISHKingCrab_RotateAround","FISHKingCrab_RuleDetails","FISHKingCrab_SelectFishItem","FISHKingCrab_ShootSelectSetting","FISHKingCrab_TreasureBoxUI","FISHKingCrab_TurnplateUI","FISHKingCrab_fishPathTool","FISHKingCrab_functionUI","FISHKingCrab_BombSharkEffect","FISHKingCrab_GoldBombEffect","FISHKingCrab_IngotEffect","FISHKingCrab_Laser","FISHKingCrab_LaserEffect","FISHKingCrab_LightingEffect","FISHKingCrab_LocalBombEffect","FISHKingCrab_RocketEffect","FISHKingCrab_SharkEatEvent","FISHKingCrab_TreasureBoxEffect","FISHKingCrab_VortexEffect","KingCrabTest","TestEffect"]);