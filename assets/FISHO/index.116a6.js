window.__require=function e(t,o,i){function n(s,c){if(!o[s]){if(!t[s]){var a=s.split("/");if(a=a[a.length-1],!t[a]){var h="function"==typeof __require&&__require;if(!c&&h)return h(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var l=o[s]={exports:{}};t[s][0].call(l.exports,function(e){return n(t[s][1][e]||e)},l,l.exports,e,t,o,i)}return o[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<i.length;s++)n(i[s]);return n}({ConverFishPath:[function(e,t,o){"use strict";cc._RF.push(t,"b762dF4rEZDB54/3vbLLZDr","ConverFishPath"),Object.defineProperty(o,"__esModule",{value:!0}),o.ConverFishPath=void 0,o.ConverFishPath=[30001,30002,30003,30004,30005,30006],cc._RF.pop()},{}],ConverPosToGrid:[function(e,t,o){"use strict";cc._RF.push(t,"85a76tzh5tN5IFWN0jxqp10","ConverPosToGrid");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./ConverFishPath"),c=cc._decorator,a=c.ccclass,h=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isload=!1,t.index=0,t.nextLoadTime=0,t.loadIntervalTime=3,t}return n(t,e),t.prototype.start=function(){},t.prototype.inputEnter=function(e){var t=e.string;this.loadJson(t)},t.prototype.startConveAllJson=function(){this.nextLoadTime=this.loadIntervalTime,this.isload=!0},t.prototype.loadJson=function(e){var t=this;cc.resources.load("FishConver/"+e,cc.JsonAsset,function(o,i){if(o)cc.error(o.message);else{var n=i.json;t.converJsonData(e,n)}})},t.prototype.converJsonData=function(e){var t={x:0,y:0,len:0,col:[],row:[],angle:[]};t.len=0,this.saveBezierPathToJson(e,t)},t.prototype.saveBezierPathToJson=function(e,t){if(cc.sys.isBrowser){if(!t)return;var o=JSON.stringify(t,null,4),i=new Blob([o],{type:"application/json"}),n=document.createElement("a");n.download=e,n.innerHTML="Download File",null!=window.webkitURL?n.href=window.webkitURL.createObjectURL(i):(n.href=window.URL.createObjectURL(i),n.onclick=this.destroyClickedElement,n.style.display="none",document.body.appendChild(n)),n.click()}},t.prototype.destroyClickedElement=function(){},t.prototype.update=function(e){this.isload&&(this.nextLoadTime>=this.loadIntervalTime?(this.nextLoadTime=0,this.loadJson(s.ConverFishPath[this.index].toString()),this.index++,this.index>=s.ConverFishPath.length&&(this.isload=!1)):this.nextLoadTime+=e)},r([a],t)}(cc.Component));o.default=h,cc._RF.pop()},{"./ConverFishPath":"ConverFishPath"}],FISHO_AutoFireButton:[function(e,t,o){"use strict";cc._RF.push(t,"58224WrLJhKT40FbdRshwNm","FISHO_AutoFireButton");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.menu,h=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autoFireOn=null,t.autoFireLight=null,t.rotateTween=null,t}return n(t,e),t.prototype.start=function(){this.autoFireOn.node.active=!1,this.rotateTween=cc.tween(this.autoFireLight).repeatForever(cc.rotateBy(.8,360))},t.prototype.changeAutoFire=function(){return this.autoFireOn.node.active=!this.autoFireOn.node.active,this.autoFireOn.node.active?this.rotateTween.start():this.rotateTween.stop(),this.autoFireOn.node.active},t.prototype.setAutoFire=function(){return this.rotateTween.start(),this.autoFireOn.node.active=!0,!0},t.prototype.cancelAutoFire=function(){return this.rotateTween.stop(),this.autoFireOn.node.active=!1,!1},r([h(cc.Sprite)],t.prototype,"autoFireOn",void 0),r([h(cc.Node)],t.prototype,"autoFireLight",void 0),r([c,a("FISHO/FISHO_AutoFireButton")],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],FISHO_BulletManager:[function(e,t,o){"use strict";cc._RF.push(t,"317d7aysw9Kw4EZ2f/NEGgb","FISHO_BulletManager");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,o=t&&e[t],i=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./FISHO_GameBulletDrill"),a=e("./FISHO_GameBulletHit"),h=e("./FISHO_GameDefine"),l=e("./FISHO_GameBullet"),u=cc._decorator,p=u.ccclass,d=u.menu,f=u.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefab=null,t.bulletDrillPrefab=null,t.bulletHitPrefab=null,t.bulletHitNode=null,t.bulletsInfo=[],t.gameBullets=[],t.bulletCache=[],t.hitCache=[],t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.clearBullets=function(){this.bulletsInfo=[];for(var e=this.gameBullets.length-1;e>=0;e--)this.recycleBullet(this.gameBullets[e]);this.gameBullets=[],this.bulletCache=[],this.hitCache=[]},t.prototype.fire=function(e,t,o,i,n,r,s,c,a){this.bulletsInfo.push({chairID:e,gameID:t,bulletIndex:o,crashGridPos:i,angle:n,lockFishIndex:r,multiple:s,createTick:c,isDrillGun:1==a})},t.prototype.recycleBullet=function(e){var t=this.gameBullets.indexOf(e);-1!=t&&this.gameBullets.splice(t,1),e.bulletInfo.isDrillGun?e.node.destroy():this.bulletCache.push(e.recycle())},t.prototype.bulletDrillBomb=function(e,t,o){var i,n;try{for(var r=s(this.gameBullets),c=r.next();!c.done;c=r.next()){var a=c.value;if(a.bulletInfo.bulletIndex==e){null!=a&&a.playBomb(t,o);break}}}catch(h){i={error:h}}finally{try{c&&!c.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}},t.prototype.getOutBullet=function(e){var t=null;if(e){var o=(i=cc.instantiate(this.bulletDrillPrefab)).addComponent(c.default);o.flameParent=cc.find("flameParent",i),o.streak=cc.find("New Particle",i),o.bullerAni=i.getComponent(cc.Animation),t=o}else{var i;t=this.bulletCache.length>0?this.bulletCache.shift():(i=cc.instantiate(this.bulletPrefab)).addComponent(l.default)}return t},t.prototype.updateBulletOut=function(){this.game.iGameBase.GetServerTick();for(var e=0;e<this.bulletsInfo.length;e++)if(this.bulletsInfo[e]){var t=this.bulletsInfo.splice(e,1)[0],o=null,i=t.isDrillGun;if((o=this.getOutBullet(i)).setGame(this.game),this.node.addChild(o.node),i){var n=this.game.GameLogic.getFortByGamId(t.gameID);n?(o.init(t,this,n),this.gameBullets.push(o)):cc.error("\u627e\u4e0d\u5230\u8fd9\u4e2a\u73a9\u5bb6\uff1a",t.gameID)}else o.init(t,this),this.gameBullets.push(o);e--}},t.prototype.bulletSync=function(e,t,o,i){this.onrestorescene(e,t,o,i)},t.prototype.onrestorescene=function(e,t,o,i){var n,r;if(!this.game||this.game.iGameBase.getExectUpdate()){var c=this.game.GameLogic.getFortByGamId(t);if(c){var a=c.getBulletInitPos(),h=this.game.mCrashGrid.getCrashGridByPos(a).clone(),u=this.get_restore_bullet_context(h.x,h.y,o,this.game.iGameBase.GetServerTick()-i);if(u){var p=0;try{for(var d=s(this.game.GameLogic.gameFort),f=d.next();!f.done;f=d.next()){var y=f.value;y.isActive&&y.gameId==t&&(p=y.chairId)}}catch(_){n={error:_}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}var m=null;(m=this.bulletCache.length>0?this.bulletCache.shift():cc.instantiate(this.bulletPrefab).addComponent(l.default)).setGame(this.game);var g={chairID:p,gameID:t,bulletIndex:e,crashGridPos:u.pos,angle:u.rotation,lockFishIndex:0,multiple:0,createTick:i,isDrillGun:!1};this.node.addChild(m.node),m.init(g,this),console.log("\u751f\u6210\u540c\u6b65\u5b50\u5f39"),this.gameBullets.push(m)}else console.error("lnhewbfwefewfbyewfewfwe")}else console.error("\u8fd9\u4e2a\u73a9\u5bb6\u4e0d\u5b58\u5728")}},t.prototype.get_restore_bullet_context=function(e,t,o,i){var n=this.build_bullet_born_info(e,t,o);if(!n)return console.log("sjewvfwefwefwwe"),null;var r=i/1e3,s=Math.floor(r/h.FrameTime);if(s>120/h.FrameTime)return console.log("\u6240\u9700\u65f6\u95f4\u592a\u5927"),null;if(s<=0)return n;var c=n.born_row,a=n.born_col,l=n.speed_row,u=n.speed_col,p=this.caculate_bullet_in_row_in_col_speed_row_speed_col(c,a,l,u,s);return n.born_row=p.in_row,n},t.prototype.build_bullet_born_info=function(e,t,o){var i=this.game.mCrashGrid.getGridPos(e,t);if(!i)return console.error("\u5f53\u524d\u4f4d\u7f6e\u4e0d\u5728\u5c4f\u5e55\u4e2d"),null;var n=.5*Math.sin(o*Math.PI/180),r=.5*Math.cos(o*Math.PI/180),s=this.caculate_bullet_speed_x_y(n,r);return{born_row:e,born_col:t,speed_row:n,speed_col:r,pos:i,rotation:this.caculate_bullet_rotation(n,r),speed_x:s[0],speed_y:s[1]}},t.prototype.caculate_bullet_in_row_in_col_speed_row_speed_col=function(e,t,o,i,n){var r=this.game.mCrashGrid.CrashRowMin,s=this.game.mCrashGrid.CrashRowMax,c=this.game.mCrashGrid.CrashColMin,a=this.game.mCrashGrid.CrashColMax;return e<=(r+=.5)?o<0&&(o=-o):e>=(s+=.5)&&o>0&&(o=-o),t<=(c+=.5)?i<0&&(i=-i):t>=(a+=.5)&&i>0&&(i=-i),e+=o,t+=i,(n-=1)>0&&this.caculate_bullet_in_row_in_col_speed_row_speed_col(e,t,o,i,n),{in_row:e,in_col:t}},t.prototype.caculate_bullet_rotation=function(e,t){return 180*Math.atan2(e,t)/Math.PI},t.prototype.caculate_bullet_speed_x_y=function(e,t){return[t*this.game.mCrashGrid.GridWidth,e*this.game.mCrashGrid.GridHeight]},t.prototype.updateBulletMove=function(){for(var e=this.game.iGameBase.GetServerTick(),t=0;t<this.gameBullets.length;t++)this.gameBullets[t].updateMove(e)},t.prototype.playHit=function(e){var t=null;if(this.hitCache.length>0)t=this.hitCache.shift();else{var o=cc.instantiate(this.bulletHitPrefab);o&&(t=o.addComponent(a.default))}t.setGame(this.game),e.angle&&(t.node.angle=e.angle+90),this.bulletHitNode.addChild(t.node),t.node.setPosition(e.pos),t.playHit(e.bulletIndex,e.hitType,e.catchCount,e.cb,e.bomb,e.playerId)},t.prototype.onHitFinish=function(e){this.hitCache.length<30?(e.node.removeFromParent(!0),this.hitCache.push(e)):e.node.destroy()},t.prototype.onUpdate=function(e){this.updateBulletOut(),this.updateBulletMove(e)},t.prototype.onDisable=function(){console.log("BulletManager_DEMO \u7981\u7528\u72b6\u6001")},r([f(cc.Prefab)],t.prototype,"bulletPrefab",void 0),r([f(cc.Prefab)],t.prototype,"bulletDrillPrefab",void 0),r([f(cc.Prefab)],t.prototype,"bulletHitPrefab",void 0),r([f(cc.Node)],t.prototype,"bulletHitNode",void 0),r([p,d("FISHO/FISHO_BulletManager")],t)}(cc.Component);o.default=y,cc._RF.pop()},{"./FISHO_GameBullet":"FISHO_GameBullet","./FISHO_GameBulletDrill":"FISHO_GameBulletDrill","./FISHO_GameBulletHit":"FISHO_GameBulletHit","./FISHO_GameDefine":"FISHO_GameDefine"}],FISHO_CMD:[function(e,t,o){"use strict";cc._RF.push(t,"bc70a4okitNII9Kz2NtIJoN","FISHO_CMD"),Object.defineProperty(o,"__esModule",{value:!0}),o.SceneStatus_DEMO=o.FishKind_DEMO=void 0,function(e){e[e.FISH_DAYANYU=0]="FISH_DAYANYU",e[e.FISH_XIAOLVYU=1]="FISH_XIAOLVYU",e[e.FISH_XIAOHONGYU=2]="FISH_XIAOHONGYU",e[e.FISH_XIAOHUANGYU=3]="FISH_XIAOHUANGYU",e[e.FISH_XIAOLANYU=4]="FISH_XIAOLANYU",e[e.FISH_XIAOKEDOU=5]="FISH_XIAOKEDOU",e[e.FISH_LVHETUN=6]="FISH_LVHETUN",e[e.FISH_SHUIMU=7]="FISH_SHUIMU",e[e.FISH_XIAOHAIGUI=8]="FISH_XIAOHAIGUI",e[e.FISH_HUDIEYU=9]="FISH_HUDIEYU",e[e.FISH_QUNDAIYU=10]="FISH_QUNDAIYU",e[e.FISH_PANGHONGYU=11]="FISH_PANGHONGYU",e[e.FISH_DENGLONGYU=12]="FISH_DENGLONGYU",e[e.FISH_JIANYU=13]="FISH_JIANYU",e[e.FISH_PANGXIE=14]="FISH_PANGXIE",e[e.FISH_MOGUIYU=15]="FISH_MOGUIYU",e[e.FISH_LANBIANFU=16]="FISH_LANBIANFU",e[e.FISH_LANCHUISHA=17]="FISH_LANCHUISHA",e[e.FISH_LANSHA=18]="FISH_LANSHA",e[e.FISH_50ZUHE=19]="FISH_50ZUHE",e[e.FISH_60ZUHE=20]="FISH_60ZUHE",e[e.FISH_JINCHUISHA=21]="FISH_JINCHUISHA",e[e.FISH_70ZUHE=22]="FISH_70ZUHE",e[e.FISH_JINSHA=23]="FISH_JINSHA",e[e.FISH_80ZUHE=24]="FISH_80ZUHE",e[e.FISH_JINBIANFU=25]="FISH_JINBIANFU",e[e.FISH_JINWUGUI=26]="FISH_JINWUGUI",e[e.FISH_JINHAMA=27]="FISH_JINHAMA",e[e.FISH_MEIRENYU=28]="FISH_MEIRENYU",e[e.FISH_ZHANGYU=29]="FISH_ZHANGYU",e[e.FISH_JINLONG=30]="FISH_JINLONG",e[e.FISH_YIWANG1=31]="FISH_YIWANG1",e[e.FISH_YIWANG2=32]="FISH_YIWANG2",e[e.FISH_YIWANG3=33]="FISH_YIWANG3",e[e.FISH_YIWANG4=34]="FISH_YIWANG4",e[e.FISH_YIWANG5=35]="FISH_YIWANG5",e[e.FISH_KIND_COUNT=36]="FISH_KIND_COUNT"}(o.FishKind_DEMO||(o.FishKind_DEMO={})),function(e){e[e.SCENE_NONE=0]="SCENE_NONE",e[e.SCENE_WAIT_TIDE=1]="SCENE_WAIT_TIDE",e[e.SCENE_RUNNING=2]="SCENE_RUNNING"}(o.SceneStatus_DEMO||(o.SceneStatus_DEMO={}));var i=function(){function e(){}return e.GAME_PLAYER=4,e.SUB_S_ANDROID_BANKOPERATOR=511,e.SUB_S_FISH=2002,e.SUB_S_USER_FIRE=2003,e.SUB_S_EXCHANGE_BULLET=2004,e.SUB_S_SWITCH_SCENE=2005,e.SUB_S_CATCH_CHAIN=2006,e.SUB_S_TIMER_SYNC=2007,e.SUB_S_LOCK_FISH=2008,e.SUB_S_PLAYER_SYNC=2010,e.SUB_S_FISH_SYNC=2011,e.SUB_S_BULLET_SYNC=2012,e.SUB_S_REPLACE_CATCH=2013,e.SUB_S_SWITCH_CANNON=2009,e.SUB_S_BULLET_OVER=2014,e.SUB_S_THUNDER_CATCH_CHAIN=2015,e.SUB_S_TRANSITION_SCORE=2016,e.SUB_S_ZUAN_TOU=2017,e.SUB_S_BACKSTAGE=2018,e.CMD_S_GameScene=[{k:"nSceneID",t:"int"},{k:"lBaseScore",t:"score"},{k:"nStyleID",t:"int"},{k:"wPlayerCount",t:"word"},{k:"wFishCount",t:"word"},{k:"wBulletCount",t:"word"},{k:"dwServerTicket",t:"dword"}],e.CMD_S_PlayerInfo=[{k:"nPlayerID",t:"int"},{k:"wChairID",t:"word"},{k:"lPlayerScore",t:"score"},{k:"dwPlayerMultiple",t:"dword"},{k:"dwLockFishIndex",t:"dword"},{k:"cbCannonType",t:"byte"},{k:"fWinScore",t:"score"}],e.CMD_S_FishInfo=[{k:"dwFishIndex",t:"dword"},{k:"nFishKindID",t:"int"},{k:"wPathID",t:"word"},{k:"wPath_Index",t:"word"},{k:"dwCreteTicket",t:"dword"},{k:"nSpecialFishKindID",t:"int"}],e.CMD_S_BulletInfo=[{k:"dwBulletIndex",t:"dword"},{k:"nPlayerID",t:"int"},{k:"dBulletAngle",t:"double"},{k:"dwBulletTicket",t:"dword"},{k:"cbBulletDefine",t:"byte"}],e.CMD_S_UserFire=[{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"},{k:"nBulletMultiple",t:"int"},{k:"dBulletAngle",t:"double"},{k:"lPlayerScore",t:"score"},{k:"dwCreateTicket",t:"dword"},{k:"dwFishIndex",t:"dword"},{k:"cbBulletDefine",t:"byte"}],e.CMD_S_PlayerExchangeBullet=[{k:"nPlayerID",t:"int"},{k:"nPlayerMultiple",t:"int"}],e.CMD_S_PlayerCatchFish=[{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"},{k:"cbBulletDefine",t:"byte"},{k:"dwFishIndex",t:"dword"},{k:"lFishScore",t:"score"},{k:"lGongNengScore",t:"score"},{k:"fWinScore",t:"score"},{k:"iBulletMultiple",t:"int"},{k:"cbMeiRenYu",t:"byte"}],e.CMD_S_CatchMuchFish=[{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"},{k:"cbBulletDefine",t:"byte"},{k:"dwFishIndex",t:"dword",l:[40,0]},{k:"lFishScore",t:"score",l:[40,0]},{k:"lGongNengScore",t:"score"},{k:"fWinScore",t:"score"},{k:"fFirePower",t:"double"}],e.CMD_S_BulletInfoSyn=[{k:"dwBulletIndex",t:"dword"},{k:"dCol",t:"double"},{k:"dRow",t:"double"}],e.CMD_S_CHANGE_SCENE=[{k:"nSceneID",t:"int"}],e.CMD_S_LockFish=[{k:"nPlayerID",t:"int"},{k:"dwLockFishIndex",t:"dword"}],e.CMD_S_SynTime=[{k:"dwServerTicket",t:"dword"}],e.CMD_S_Replace_Catch=[{k:"dwMaxReplaceGameID",t:"dword",l:[3,0]}],e.CMD_S_SwitchCannon=[{k:"wChairID",t:"word"},{k:"cbCannonType",t:"byte"}],e.CMD_S_GongNengBulletOver=[{k:"wChairID",t:"word"},{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"},{k:"cbBulletDefine",t:"byte"},{k:"lGongNengScore",t:"score"}],e.CMD_S_Transition_Score=[{k:"bTransition",t:"bool"},{k:"fScore",t:"double"},{k:"fTransitionScore",t:"double"}],e.CMD_S_ZuanTouBulletOver=[{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"}],e.CMD_S_BackStage=[{k:"nPlayerID",t:"int"}],e.SUB_C_USER_FIRE=1,e.SUB_C_EXCHANGE_BULLET=2,e.SUB_C_CATCH_FISH=3,e.SUB_C_TIMER_SYNC=4,e.SUB_C_LOCK_FISH=5,e.SUB_C_SWITCH_CANNON=6,e.SUB_C_SHAN_DIAN_CATCH_FISH=7,e.SUB_C_ZUAN_TOU_CATCH_FISH=9,e.SUB_C_TRANSITION_SCORE=15,e.SUB_C_BACKSTAGE_START=16,e.SUB_C_BACKSTAGE_END=17,e.SUB_C_GONG_NENG_CATCH_FISH=19,e.CMD_C_UserFire=[{k:"dwBulletIndex",t:"dword"},{k:"dBulletAngle",t:"double"},{k:"dwFishIndex",t:"dword"},{k:"cbUserDefine",t:"byte"}],e.CMD_C_Transition_Score=[{k:"fScore",t:"double"}],e.CMD_C_PlayerExchangeBullet=[{k:"bMultiple",t:"bool"}],e.CMD_C_PlayerCatchFish=[{k:"wChairID",t:"word"},{k:"dwBulletIndex",t:"dword"},{k:"dwFishIndex",t:"dword"}],e.CMD_C_PlayerShanDianCatchFish=[{k:"wChairID",t:"word"},{k:"dwBulletIndex",t:"dword"},{k:"dwFishIndex",t:"dword"}],e.CMD_C_PlayerGongNengCatchFish=[{k:"wChairID",t:"word"},{k:"dwBulletIndex",t:"dword"},{k:"cbFishCount",t:"byte"},{k:"dwFishIndex",t:"dword",l:[40,0]}],e.CMD_C_PlayerZuanTouCatchFish=[{k:"wChairID",t:"word"},{k:"dwBulletIndex",t:"dword"},{k:"dwFishIndex",t:"dword"}],e.CMD_C_LockFish=[{k:"dwLockFishIndex",t:"dword"}],e.CMD_C_SwitchCannon=[{k:"wChairID",t:"word"},{k:"cbCannonType",t:"byte"}],e}();o.default=i,cc._RF.pop()},{}],FISHO_CowEffect:[function(e,t,o){"use strict";cc._RF.push(t,"33556HjwH9D2Ia/5rn/a+hc","FISHO_CowEffect");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../FISHO_GameDefine"),c=e("../FISHO_ResourceMgr"),a=e("./FISHO_Cow"),h=cc._decorator,l=h.ccclass,u=h.menu,p=h.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cowArray=[],t.buffalos=null,t.rope=null,t.cow=null,t.smash=null,t.smashLable=null,t.ropeCircle=null,t.targetFort=null,t.currWeight=s.FunctionWeight.bullSmash,t.isNext=!0,t.currStage=0,t.currStageplayCount=0,t.currCowObj=null,t.currSkele=null,t.target=null,t._bulletIndex=-1,t.isNextStep=!1,t.isDestroy=!1,t.isPlayComplete=!1,t.totalCatchScore=0,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.initFunction=function(e,t,o,i){this.targetFort=e,this.targetFort.setEffect(this),this._score=i,this.smashLable.font=this.game.resourMgr.iMrgBase.getCommonRes("LabelAtlas",c.CommonResType.font,cc.Font),this._bulletIndex=o,this.targetFort=e,this.playRopeCircle(t)},t.prototype.playRopeCircle=function(e){var t=this,o=e.node.angle,i=e.getCurrWorldPos(),n=this.node.convertToNodeSpaceAR(i);this.ropeCircle.setPosition(n),this.ropeCircle.active=!0;var r=this.ropeCircle.getComponent(cc.Animation);r.on(cc.Animation.EventType.FINISHED,function(){e.playDieAni(null),t.ropeCircle.active=!1,t.enterNextStage(!0,!0,!0,n,o),t.showRope()}),r.play(),this.game.iAudioPlayer.play_sound("catchCow")},t.prototype.enterNextStage=function(e,t,o,i,n){var r=this;void 0===t&&(t=!1),void 0===o&&(o=!1),this.currStageplayCount=0,this.currStage++,0==e&&5!=this.currStage&&this.currCowObj.destroy();var s=cc.instantiate(this.cowArray[this.currStage-1]);this.currCowObj=s,this.cow.addChild(this.currCowObj),e&&(this.game.iAudioPlayer.play_music("cowBg1",!0,.4),this.cow.setPosition(i),this.cow.angle=n),this.target=this.currCowObj.getComponent(a.default).neck,this.currSkele=this.currCowObj.getComponentInChildren(sp.Skeleton);var c=this;this.isNextStep=!1,this.currSkele.setStartListener(function(){r.isPlayComplete=!1,r.isNextStep=!1}),this.currSkele.setCompleteListener(function(){if(c.currStageplayCount++,1==c.currStage){if(c.currStageplayCount<3)return;c.enterNextStage(!1),r.game.iAudioPlayer.play_sound("cowSmash"),c.playTween()}else if(2==c.currStage){if(c.isDestroy)return void c.exectDestroyAnim();if(2==c.currStageplayCount)c.cow.scaleX=-1;else if(3==c.currStageplayCount)c.cow.scaleX=1;else if(c.currStageplayCount>=5)return c.enterNextStage(!1,!1,!0),c.playTransitAnim(),void r.game.iAudioPlayer.play_music("cowBg2",!0,.4);r.game.iAudioPlayer.play_sound("cowSmash"),c.isNextStep?c.playTween():r.isPlayComplete=!0}else 3==c.currStage?c.playTween():4==c.currStage&&(c.isDestroy?c.exectDestroyAnim():c.isNextStep?c.playTween():r.isPlayComplete=!0)}),this.currSkele.setAnimation(0,"newAnimation",t),this.currSkele.timeScale=o?1:0},t.prototype.exectDestroyAnim=function(){var e=this;if(4==this.currStage){var t=this.cow.y;cc.tween(this.cow).to(.2,{y:t+300}).call(function(){e.playAllComplete()}).start()}else this.unschedule(this.setRopePosAndHeight),this.currCowObj.destroy(),this.node.destroy(),this.targetFort.playCowCompleteUI(this.totalCatchScore)},t.prototype.playTransitAnim=function(){this.buffalos.active=!0,this.buffalos.scale=12,this.buffalos.opacity=30;var e=cc.tween().to(.25,{opacity:255}),t=cc.tween().to(.25,{scale:1}),o=cc.tween().to(.25,{scale:1.2}),i=cc.tween().to(.25,{scale:1}),n=cc.tween(this.buffalos).parallel(cc.tween().to(.25,{scale:15}),cc.tween().to(.25,{opacity:0})),r=cc.tween(this.buffalos).repeat(6,cc.tween().sequence(o,i)).call(function(){n.start()});cc.tween(this.buffalos).parallel(e,t).call(function(){r.start()}).start(),this.game.iAudioPlayer.play_sound("Buffalo Madness")},t.prototype.playTween=function(){var e,t=this;e=this.currStage>=3?cc.v3(0,50):-1==this.cow.scaleX?cc.v2(this.game.iGameBase.utils_random(-250,-100),this.game.iGameBase.utils_random(-30,150)):cc.v2(this.game.iGameBase.utils_random(100,250),this.game.iGameBase.utils_random(-30,150)),this.cow.angle=0;var o=cc.tween().to(.2,{position:cc.v3(e.x,e.y+600)}).call(function(){3==t.currStage?t.enterNextStage(!1,!1,!0):(t.currSkele.timeScale=1,t.currSkele.setAnimation(0,"newAnimation",!1))}),i=cc.tween().to(.2,{y:e.y}).call(function(){if(4==t.currStage&&(t.game.iAudioPlayer.play_sound("cowSmash2",!1,.6),t.playSmashTween()),t.targetFort.gameId==t.game.gameId){var e=t._score>550?s.FunctionCatchCount.cowMin:7,o=t._score>550?s.FunctionCatchCount.cowMax:10,i=t.game.fishMgr.getFunctionCatchFishs(2==t.currStage?e:o);cc.error("\u725b\u6b7b====\u300b",i),t.game.iGameBase.EmitEvent(s.EventCode.FunctionCatchFishs,{wChairID:t.targetFort.chairId,dwBulletIndex:t._bulletIndex,dwFishIndex:i,cbFishCount:i.length})}t.game.gameScene.shakeEffect(.8,!0)});cc.tween(this.cow).sequence(o,i).start()},t.prototype.playSmashTween=function(){cc.error("playSmashTween===",this.currStageplayCount),this.smashLable.string=String(this.currStageplayCount+1),this.smash.active=!0;var e=cc.tween().to(.15,{scale:3}),t=cc.tween().to(.15,{scale:1});cc.tween(this.smash).sequence(e,t).start()},t.prototype.playAllComplete=function(){var e=this,t=this.currCowObj;this.enterNextStage(!1,!1,!0),this.currCowObj.opacity=30;var o=this.cow.y,i=cc.tween(this.cow).to(1,{position:this.targetFort.node.position}).call(function(){e.unschedule(e.setRopePosAndHeight),e.rope.destroy(),e.targetFort.playCowCompleteUI(e.totalCatchScore)}),n=cc.tween().to(.2,{y:o-300}),r=cc.tween(this.cow).sequence(n,i,cc.delayTime(1.5),cc.fadeOut(.25),cc.callFunc(function(){e.currCowObj.destroy(),e.node.destroy()}));cc.tween(this.currCowObj).to(.15,{opacity:255}).call(function(){r.start()}).start(),cc.tween(t).to(.15,{opacity:0}).call(function(){t.destroy()}).start()},t.prototype.showRope=function(){this.rope.setPosition(cc.v2(this.targetFort.node.x,this.targetFort.node.y-30)),this.schedule(this.setRopePosAndHeight,.07,cc.macro.REPEAT_FOREVER)},t.prototype.setRopePosAndHeight=function(){var e=this.target.convertToWorldSpaceAR(cc.v2()),t=this.node.convertToNodeSpaceAR(e).sub(this.rope.getPosition()),o=180*Math.atan2(t.y,t.x)/Math.PI;this.rope.angle=o-90,this.rope.height=t.mag()},t.prototype.nextStep=function(e){this.isNextStep=!0,this.totalCatchScore=e,this.isPlayComplete&&this.playTween()},t.prototype.onDestroy=function(){this.game.iGameBase.getExectUpdate()&&this.game.gameScene.playSceneBg()},t.prototype.beforDestroy=function(e){this.isDestroy=!0,this.targetFort.subEffectWeight(this.currWeight),e&&(this.totalCatchScore=e),this.isPlayComplete&&this.exectDestroyAnim()},t.prototype.ImmediatelyDestroy=function(){this.unscheduleAllCallbacks(),this.node.isValid&&(this.currCowObj.destroy(),this.node.destroy(),this.beforDestroy())},r([p([cc.Prefab])],t.prototype,"cowArray",void 0),r([p(cc.Node)],t.prototype,"buffalos",void 0),r([p(cc.Node)],t.prototype,"rope",void 0),r([p(cc.Node)],t.prototype,"cow",void 0),r([p(cc.Node)],t.prototype,"smash",void 0),r([p(cc.Label)],t.prototype,"smashLable",void 0),r([p(cc.Node)],t.prototype,"ropeCircle",void 0),r([l,u("FISHO/CowEffect")],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../FISHO_GameDefine":"FISHO_GameDefine","../FISHO_ResourceMgr":"FISHO_ResourceMgr","./FISHO_Cow":"FISHO_Cow"}],FISHO_CowUI:[function(e,t,o){"use strict";cc._RF.push(t,"96b23x0DEtB8L9i4dItlQJ1","FISHO_CowUI");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./FISHO_GameDefine"),c=e("./FISHO_ResourceMgr"),a=cc._decorator,h=a.ccclass,l=a.menu,u=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fall=null,t.stand=null,t.shadow=null,t.bigWin=null,t.scoreBg=null,t.scoreLabel=null,t.multipleObj=null,t.lblMultiple=null,t.colorArray=[],t._fort=null,t._isDestroy=!1,t.lightCirclePrefab=null,t}return n(t,e),t.prototype.setMultiple=function(e){this.lblMultiple.string=e},t.prototype.setGame=function(e){this.game=e},t.prototype.start=function(){this.lightCirclePrefab=this.game.resourMgr.iMrgBase.getCommonRes("lightCircle",c.CommonResType.Prefab,cc.Prefab),this.scoreLabel.font=this.game.resourMgr.iMrgBase.getCommonRes("LabelAtlas",c.CommonResType.font,cc.Font)},t.prototype.show=function(e){var t=this;this._isDestroy=!1,this._fort=e;var o=cc.tween(this.multipleObj).to(.25,{opacity:255});this.scoreBg.scale=0,this.scoreLabel.string="0",this.scoreBg.active=!0;var i=this.scoreBg.getPosition();this.scoreBg.setPosition(i.x,i.y+60),cc.tween(this.scoreBg).parallel(cc.tween().to(.25,{y:i.y}),cc.tween().to(.25,{scale:1},{easing:"backIn"})).call(function(){t.multipleObj.opacity=0,t.multipleObj.active=!0,o.start()}).start()},t.prototype.playCowCompleteUI=function(e){var t=this;this.game.iAudioPlayer.play_sound("cowEnd");var o=this,i=cc.tween(o.node).to(.5,{opacity:0}).call(function(){cc.error("playCowCompleteUI===",e),t.game.GameLogic.setWinScore(o._fort.gameId,e),o.node.destroy()}),n=cc.tween(o.bigWin).to(.5,{scale:1}),r=cc.tween(o.shadow).parallel(cc.tween().to(.5,{opacity:0}),cc.tween().to(.5,{scale:1.5})).call(function(){o.bigWin.active=!0,o.shadow.active=!0,n.start()}),s=cc.tween(o.stand).to(.5,{height:98}).call(function(){o.shadow.opacity=160,o.shadow.active=!0,r.start(),t.scheduleOnce(function(){o.unschedule(o.createCircle),i.start()},3.5)});o.fall.active=!0,cc.tween(o.fall).to(1,{height:45}).call(function(){o.stand.active=!0,o.schedule(o.createCircle,.15,25),s.start()}).start()},t.prototype.createCircle=function(){var e=cc.instantiate(this.lightCirclePrefab);e.scale=.5,e.setParent(this.game.GameLogic.functionLayer.node);var t=this._fort.IsOnTop?this.game.iGameBase.utils_random(this._fort.node.y,this._fort.node.y-250):this.game.iGameBase.utils_random(this._fort.node.y,this._fort.node.y+250),o=cc.v2(this.game.iGameBase.utils_random(this._fort.node.x-150,this._fort.node.x+150),t);e.setPosition(o);var i=this.game.iGameBase.utils_random(0,this.colorArray.length-1);e.color=this.colorArray[i],this.playCircleAnim(e)},t.prototype.playCircleAnim=function(e){cc.tween(e).parallel(cc.tween().to(2.5,{angle:-360}),cc.tween().to(.8,{scale:1.2}),cc.tween().to(1.2,{opacity:0})).call(function(){e.destroy()}).start()},t.prototype.getMountPoint=function(){},t.prototype.destoryFunction=function(){this._isDestroy=!0,this.node&&this.node.isValid&&this.node.destroy()},t.prototype.onDestroy=function(){this.game.iGameBase.getExectUpdate()&&(this._fort.functionFort.checkCanFire(s.FunctionWeight.bullSmash),this._fort=null)},t.prototype.showCatchScore=function(e){this.game.iGameBase.updatenNumberAnim(this.scoreLabel,e,1)},t.prototype.showTotalScore=function(){},r([u(cc.Node)],t.prototype,"fall",void 0),r([u(cc.Node)],t.prototype,"stand",void 0),r([u(cc.Node)],t.prototype,"shadow",void 0),r([u(cc.Node)],t.prototype,"bigWin",void 0),r([u(cc.Node)],t.prototype,"scoreBg",void 0),r([u(cc.Label)],t.prototype,"scoreLabel",void 0),r([u(cc.Node)],t.prototype,"multipleObj",void 0),r([u(cc.Label)],t.prototype,"lblMultiple",void 0),r([u([cc.Color])],t.prototype,"colorArray",void 0),r([h,l("FISHO/CowUI")],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./FISHO_GameDefine":"FISHO_GameDefine","./FISHO_ResourceMgr":"FISHO_ResourceMgr"}],FISHO_Cow:[function(e,t,o){"use strict";cc._RF.push(t,"91589pVuoJNNb4Yi4QTqKAV","FISHO_Cow");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.menu,h=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.neck=null,t}return n(t,e),r([h(cc.Node)],t.prototype,"neck",void 0),r([c,a("FISHO/Cow")],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],FISHO_CrashGrid:[function(e,t,o){"use strict";cc._RF.push(t,"9ee33xATOZEAr68zHZr1UTN","FISHO_CrashGrid");var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,o=t&&e[t],i=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.CrashGrid_DEMO=o.GridItem=o.GridConfig=void 0,o.GridConfig={row:21,col:38};var n=function(e,t,o,i){this.rect=null,this.center=null,this.fishList=null,this.rect=cc.rect(e,t,o,i),this.center=cc.v2(e+o/2,t+i/2),this.fishList=[]};o.GridItem=n;var r=function(){function e(e,t){this.NetColCount=0,this.NetRowCount=0,this.CrashRowMin=0,this.CrashRowMax=0,this.CrashColMin=0,this.CrashColMax=0,this.BeginRow=0,this.BeginCol=0,this.GridWidth=0,this.GridHeight=0,this.CrashMinX=0,this.CrashMaxX=0,this.CrashMinY=0,this.CrashMaxY=0,this.beginPos=null,this.Device_WIDTH=0,this.Device_HEIGHT=0,this.gridItems={},this.Device_WIDTH=e,this.Device_HEIGHT=t,this.CrashMaxX=e,this.CrashMaxY=t,this.initGrid(),this.generateNetGrid()}return e.prototype.release=function(){this.gridItems={}},e.prototype.clear=function(){for(var e in this.gridItems)for(var t in this.gridItems[e])this.gridItems[e][t].fishList=[]},e.prototype.initGrid=function(){var e=Math.max(o.GridConfig.row,o.GridConfig.col);this.NetColCount=3*(e+o.GridConfig.col),this.NetRowCount=3*(e+o.GridConfig.row),this.GridWidth=cc.visibleRect.width/o.GridConfig.col,this.GridHeight=cc.visibleRect.height/o.GridConfig.row,this.CrashColMax=o.GridConfig.col-1,this.CrashRowMax=o.GridConfig.row-1,this.beginPos=cc.visibleRect.bottomLeft;var t=cc.winSize.width/(cc.winSize.height*this.Device_WIDTH/this.Device_HEIGHT);if(t>1){var i=Math.ceil((t-1)*o.GridConfig.col/2);this.CrashColMin=-i,this.CrashColMax+=i,this.CrashMinX-=i*this.GridWidth,this.CrashMaxX+=i*this.GridWidth}this.BeginCol=-e,this.BeginRow=-e},e.prototype.generateNetGrid=function(){for(var e=this.BeginRow;e<this.BeginRow+this.NetRowCount;e++){this.gridItems[e]={};for(var t=this.BeginCol;t<this.BeginCol+this.NetColCount;t++){var o=this.beginPos.x+this.GridWidth*t,i=this.beginPos.y+this.GridHeight*e,r=new n(o,i,this.GridWidth,this.GridHeight);this.gridItems[e][t]=r,e==this.CrashRowMin&&t==this.CrashColMin&&cc.log("GenerateCrashGrid",r)}}},e.prototype.getGridItem=function(e,t){return this.gridItems[e]?this.gridItems[e][t]:null},e.prototype.getGridItemCenter=function(e,t){var o=this.getGridItem(e,t);return o?o.center:cc.v2(-999,-999)},e.prototype.getGridPos=function(e,t){var o=Math.floor(e),i=Math.floor(t),n=this.getGridItem(o,i);return n?cc.v2(n.rect.x+(t-i)*this.GridWidth,n.rect.y+(e-o)*this.GridHeight):(cc.error("getGridPos row",o,"col",i),null)},e.prototype.isCrashGrid=function(e,t){return e>=this.CrashRowMin&&e<=this.CrashRowMax&&t>=this.CrashColMin&&t<=this.CrashColMax},e.prototype.getCrashGridByPos=function(e,t){void 0===t&&(t=!0);var o=e.sub(this.beginPos),i=o.x/this.GridWidth,n=o.y/this.GridHeight;return!t||this.isCrashGrid(n,i)?cc.v2(n,i):(cc.log("\u4e0d\u5728\u7f51\u683c\u5185   "+e),null)},e.prototype.insertCrashItem=function(e,t){var o,n;try{for(var r=i(e.CrashGrid),s=r.next();!s.done;s=r.next()){var c=s.value,a=this.getGridItem(c.x,c.y);a&&a.fishList.push(t)}}catch(h){o={error:h}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}},e.prototype.removeCrashItem=function(e,t){var o,n;if(e.CrashGrid)try{for(var r=i(e.CrashGrid),s=r.next();!s.done;s=r.next()){var c=s.value,a=this.getGridItem(c.x,c.y);if(a){var h=a.fishList.indexOf(t);h>=0&&a.fishList.splice(h,1)}}}catch(l){o={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}},e.prototype.getFishInGrid=function(e,t){var o=this.getGridItem(Math.floor(e),Math.floor(t));return o?o.fishList:[]},e}();o.CrashGrid_DEMO=r,cc._RF.pop()},{}],FISHO_DialFunction:[function(e,t,o){"use strict";cc._RF.push(t,"82a85sHr6pCaYOoC1neWDuB","FISHO_DialFunction");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../FISHO_GameDefine"),c=cc._decorator,a=c.ccclass,h=c.menu,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.drialNodes=[],t.multiples=[[30,0,70,0,20,0,40,0],[0,80,120,0,80,120],[90,250,0]],t.selectItems=[[],[],[]],t.otherArray=[],t.angleArray=[],t.rotateTime=.6,t.isStartRotate=!1,t.isStop=!1,t.rotateAngle=-5,t.roataSustaintime=0,t.rotateExpendTime=0,t.isStartStop=!1,t.stopNeedTime=0,t.stopExpendTime=0,t.lastTween=null,t.t=0,t.scoreLable=null,t.drial=null,t.currCircleNum=0,t.currStopIndex=0,t.finalCirleNum=0,t.currMultip=0,t.isStoping=!1,t.targetAngle=0,t._gunMultiple=1,t.targetFort=null,t.currWeight=s.FunctionWeight.dial,t.isNext=!1,t.rorateEffectId=-1,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.onLoad=function(){for(var e=0;e<3;e++){var t=this.node.getChildByName((e+1).toString());this.drialNodes[e]=t;var o=t.getChildByName("other");this.otherArray[e]=o;for(var i=this.multiples[e].length,n=0;n<i;n++)this.selectItems[e][n]=t.getChildByName("select"+(n+1))}var r=0,s=360/(i=this.multiples[0].length);for(this.angleArray[0]=[],e=0;e<i;e++){var c=r+(e+1)*s;this.angleArray[0][e]=c}for(r=-(s=360/(i=this.multiples[1].length))/2,this.angleArray[1]=[],e=0;e<i;e++)c=r+(e+1)*s,this.angleArray[1][e]=c;for(r=-(s=360/(i=this.multiples[2].length))/2,this.angleArray[2]=[],e=0;e<i;e++)c=r+(e+1)*s,this.angleArray[2][e]=c},t.prototype.initFunction=function(e){this.targetFort=e,this.targetFort.setEffect(this)},t.prototype.rotateDrila=function(){var e=this;this.isStoping||cc.tween(this.drial).by(this.rotateTime,{angle:this.rotateAngle}).call(function(){if(e.isStop&&!e.isStoping){var t=360/e.multiples[e.currCircleNum].length,o=e.drial.angle%360;e.drial.angle<0&&(o=360-Math.abs(o));var i=!1;o>e.angleArray[e.currCircleNum][e.currStopIndex]-t+2&&o<e.angleArray[e.currCircleNum][e.currStopIndex]-2&&(e.selectItems[e.currCircleNum][e.currStopIndex].active=!0,i=!0),i&&(e.isStoping=!0,e.rorateEffectId>-1&&(e.unschedule(e.playRotateSound),e.game.iAudioPlayer.stop_sound(e.rorateEffectId),e.rorateEffectId=-1),e.drial.stopAllActions(),e.currCircleNum!=e.finalCirleNum?(e.currCircleNum++,e.unschedule(e.rotateDrila),e.startRotate()):(e.unschedule(e.rotateDrila),e.showScore(e.multiples[e.currCircleNum][e.currStopIndex])))}}).start()},t.prototype.showScore=function(e){var t=this,o=this;e*=this._gunMultiple,this.game.iGameBase.updatenNumberAnim(this.scoreLable,e,1),this.node.runAction(cc.sequence(cc.delayTime(1.5),cc.fadeOut(1.5),cc.callFunc(function(){t.game.GameLogic.setWinScore(o.targetFort.gameId,e),o.targetFort.hideDial(),o.node.destroy()})))},t.prototype.randomIndex=function(){for(var e=[],t=this.multiples[this.currCircleNum].length,o=0;o<t;o++)0==this.multiples[this.currCircleNum][o]&&e.push(o);return e[this.game.iGameBase.utils_random(0,e.length-1)]},t.prototype.playRotateSound=function(){this.rorateEffectId>-1&&(this.game.iAudioPlayer.stop_sound(this.rorateEffectId),this.rorateEffectId=-1),this.rorateEffectId=this.game.iAudioPlayer.play_sound("dialRotate",!1,1)},t.prototype.startRotate=function(){this.currCircleNum==this.finalCirleNum?this.currStopIndex=this.multiples[this.currCircleNum].indexOf(this.currMultip):this.currStopIndex=this.randomIndex(),this.isStoping=!1,this.drial=this.drialNodes[this.currCircleNum],this.t=1.2,this.isStartStop=!1,this.rotateExpendTime=0,this.stopExpendTime=0,this.rotateAngle=-5,this.roataSustaintime=this.targetFort.gameId==this.game.gameId?6:4,this.isStop=!1,this.isStartRotate=!0,this.schedule(this.rotateDrila,.2),this.playRotateSound(),this.schedule(this.playRotateSound,2)},t.prototype.showChildNode=function(e,t){var o=this;this._gunMultiple=t;for(var i=e/t,n=0;n<this.multiples.length;n++)if(-1!=this.multiples[n].indexOf(i)){this.finalCirleNum=n;break}this.currCircleNum=0,this.currMultip=i;var r=this.node.getChildByName("adorn"),s=this.node.getChildByName("maxMultiple");this.scheduleOnce(function(){o.otherArray.forEach(function(e){cc.tween(e).to(.25,{opacity:255}).start()}),cc.tween(r).to(.25,{opacity:255}).start(),o.scheduleOnce(function(){o.game.iAudioPlayer.play_sound("dialshowMax",!1,1),cc.tween(s).to(.5,{scale:1},{easing:"backOut"}).start(),o.scheduleOnce(function(){cc.tween(s).to(.5,{scale:0},{easing:"backIn"}).start(),o.scheduleOnce(o.startRotate,1.2)},1.2)},.5)},.5)},t.prototype.update=function(e){if(this.isStartRotate&&(this.rotateAngle>=-540&&(this.rotateAngle-=1*this.t),this.rotateExpendTime+=e,this.rotateExpendTime>=this.roataSustaintime&&(this.stopNeedTime=this.targetFort.gameId==this.game.gameId?5:3,this.isStartRotate=!1,this.t=1.2,this.isStartStop=!0),this.t+=e),this.isStartStop){if(this.rotateAngle<-30){var t=1.5*this.t;this.rotateAngle+t>=-30?this.rotateAngle=-30:this.rotateAngle+=t}this.stopExpendTime+=e,this.stopExpendTime>=this.stopNeedTime&&(this.isStartStop=!1,this.isStop=!0),this.t+=e}},t.prototype.onDestroy=function(){this.game.iGameBase.getExectUpdate()&&(this.targetFort.subEffectWeight(this.currWeight),this.drialNodes=null,this.multiples=null,this.selectItems=null,this.otherArray=null,this.angleArray=null,this.targetFort=null)},t.prototype.nextStep=function(){},t.prototype.beforDestroy=function(){},t.prototype.ImmediatelyDestroy=function(){this.unscheduleAllCallbacks(),this.rorateEffectId>-1&&(this.game.iAudioPlayer.stop_sound(this.rorateEffectId),this.rorateEffectId=-1),this.node&&this.node.isValid&&this.node.destroy()},r([l(cc.Label)],t.prototype,"scoreLable",void 0),r([a,h("FISHO/DialFunction")],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../FISHO_GameDefine":"FISHO_GameDefine"}],FISHO_DragonEffect:[function(e,t,o){"use strict";cc._RF.push(t,"d3f38gmJS5E3YTQAF6APiUC","FISHO_DragonEffect");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../FISHO_GameDefine"),c=cc._decorator,a=c.ccclass,h=c.menu,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dragonPointArray=null,t.dragonBall=null,t.centerNode=null,t.animOneArray=[],t.animTwoArray=[],t.multiple=null,t.lableMultiple=null,t.targetMultiple=0,t.currMultiple=0,t.fish=null,t.dragonPrefab=null,t.targetFort=null,t.currWeight=s.FunctionWeight.thunderDragon,t.isNext=!1,t.createNum=0,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.onLoad=function(){this.dragonPointArray=[];for(var e=0;e<5;e++){var t=this.node.getChildByName("309_"+(e+1).toString());this.dragonPointArray[e]=[];for(var o=t.childrenCount,i=0;i<o;i++)this.dragonPointArray[e][i]=t.children[i]}},t.prototype.initFunction=function(e,t,o,i){this.fish=t,this.targetFort=e,this._bulletIndex=i,this._multiple=o,this.targetFort.setEffect(this),this.scheduleOnce(this.exectPlay,.8),this.game.iAudioPlayer.play_music("dragonBg")},t.prototype.startPlay=function(e,t,o,i){this.fish=e,this.targetFort=t,this._bulletIndex=i,this._multiple=o,this.scheduleOnce(this.exectPlay,.8)},t.prototype.exectPlay=function(){var e=this.fish.goldBombPointArray[this.fish.goldBombPointArray.length-1].convertToWorldSpaceAR(cc.v2());e=this.node.convertToNodeSpaceAR(e),this.moveDragoball(e)},t.prototype.startPlayLighting=function(){this.game.iAudioPlayer.play_sound("dragonBall"),this.game.gameScene.shakeEffect(.5),this.targetFort.showFunctionUI(s.functionType.thunderDragon),this.scheduleOnce(this.exectAnim1,1)},t.prototype.exectAnim1=function(){this.createNum=0,this.executeCreate(0),this.scheduleOnce(this.exectAnim2,1.2*(this.dragonPointArray.length-1)+.3)},t.prototype.exectAnim2=function(){if(this.hideDragonBall(),this.scheduleOnce(this.moveMultiple,2),this._bulletIndex>=0){var e=this.game.fishMgr.getFunctionCatchFishs(s.FunctionCatchCount.dragon);this.game.iGameBase.EmitEvent(s.EventCode.FunctionCatchFishs,{wChairID:this.game.iGameBase.UserManager_getChairID(),dwBulletIndex:this._bulletIndex,dwFishIndex:e,cbFishCount:e.length})}},t.prototype.executeCreate=function(e){var t=this;if(!(e>=this.dragonPointArray.length)){for(var o=this.dragonPointArray[e].length,i=0;i<o;i++)this.createDragon(e,i);this.scheduleOnce(function(){t.playCircleBlowUp(),t.game.gameScene.shakeEffect(.5)},e<this.dragonPointArray.length-2?.5:.2),e<this.dragonPointArray.length-1?this.scheduleOnce(function(){t.game.iAudioPlayer.play_sound("dragonCrash")},.7):this.schedule(function(){t.game.iAudioPlayer.play_sound("dragonCrash")},.3,2);var n=++e<this.dragonPointArray.length-1?1200:500;this.scheduleOnce(function(){t.executeCreate(e)},n/1e3)}},t.prototype.createDragon=function(e,t){var o=cc.instantiate(this.dragonPrefab);o.name=this.createNum.toString();var i=o.children[0].getComponent(sp.Skeleton);this.node.addChild(o),o.setSiblingIndex(this.node.childrenCount-2),o.setPosition(this.dragonPointArray[e][t].position),o.angle=this.dragonPointArray[e][t].angle,i.setCompleteListener(function(){o.destroy()}),i.timeScale=3.5,this.createNum++},t.prototype.play=function(e){var t=this;this.centerNode.opacity=255,e&&(this.targetMultiple=e),cc.tween(this.centerNode).parallel(cc.rotateTo(.8,1080),cc.fadeOut(.8)).start(),this.playCircleBlowUp();for(var o=this.animOneArray.length,i=0;i<o;i++)this.playAnimation(this.animOneArray[i]);this.scheduleOnce(function(){o=t.animTwoArray.length;for(var e=0;e<o;e++)t.playAnimation(t.animTwoArray[e])},.3)},t.prototype.playCircleBlowUp=function(){this.currMultiple<this.targetMultiple&&(this.currMultiple+=1);var e=cc.tween().to(.18,{scale:2.5}),t=cc.tween().to(.18,{scale:1});this.lableMultiple.string=this.currMultiple.toString(),cc.tween(this.dragonBall).sequence(e,t).start(),cc.tween(this.multiple).sequence(e,t).start()},t.prototype.moveDragoball=function(e){var t=this;this.dragonBall.parent.setPosition(e),this.dragonBall.active=!0;var o=this;cc.tween(this.dragonBall.parent).sequence(cc.moveTo(1.25,cc.v2()),cc.delayTime(.5),cc.callFunc(function(){t.play(o._multiple),o.startPlayLighting()})).start()},t.prototype.playAnimation=function(e){e.on(cc.Animation.EventType.FINISHED,function(){e.node.active=!1}),e.node.active=!0,e.play()},t.prototype.hideDragonBall=function(){this.dragonBall.active=!1,this.play()},t.prototype.moveMultiple=function(){var e=this,t=this.targetFort.node.getPosition();cc.tween(this.multiple).to(1,{position:cc.v3(t)}).call(function(){e.game.iAudioPlayer.play_music("dragonEnd"),e.scheduleOnce(function(){e.node.destroy()},2.5)}).start()},t.prototype.onDestroy=function(){this.game.iGameBase.getExectUpdate()&&(this.targetFort.subEffectWeight(this.currWeight),this.game.gameScene.playSceneBg())},t.prototype.nextStep=function(){},t.prototype.beforDestroy=function(){},t.prototype.ImmediatelyDestroy=function(){this.unscheduleAllCallbacks(),this.node&&this.node.isValid&&this.node.destroy()},r([l(cc.Node)],t.prototype,"dragonBall",void 0),r([l(cc.Node)],t.prototype,"centerNode",void 0),r([l([cc.Animation])],t.prototype,"animOneArray",void 0),r([l([cc.Animation])],t.prototype,"animTwoArray",void 0),r([l(cc.Node)],t.prototype,"multiple",void 0),r([l(cc.Label)],t.prototype,"lableMultiple",void 0),r([a,h("FISHO/DragonEffect")],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../FISHO_GameDefine":"FISHO_GameDefine"}],FISHO_FishKindMap:[function(e,t,o){"use strict";cc._RF.push(t,"2ff9esoAABH2Kk3dZQQmXHb","FISHO_FishKindMap"),Object.defineProperty(o,"__esModule",{value:!0}),o.FishKindMap=void 0;var i=e("./FISHO_GameDefine");o.FishKindMap={101:{id:101,name:"\u98de\u9c7c",packet:"101",model:1,shadowSize:50,multipleMin:2,multipleMax:2,type:6,zorder:1,animType:i.FishAnimType_DEMO.combination,copyNum:20,moveSpeed:.012,lightSize:100,vortexSize:130,goldCount:1},102:{id:102,name:"\u5c0f\u9ec4\u9c7c",packet:"102",model:1,multipleMin:2,multipleMax:2,type:6,zorder:2,animType:i.FishAnimType_DEMO.combination,copyNum:20,moveSpeed:.012,lightSize:100,vortexSize:130,goldCount:1},103:{id:103,name:"\u5c0f\u65d7\u9c7c",packet:"103",model:1,multipleMin:3,multipleMax:3,type:6,zorder:3,animType:i.FishAnimType_DEMO.combination,copyNum:20,moveSpeed:.02,lightSize:100,vortexSize:130,goldCount:1},104:{id:104,name:"\u5c0f\u6cb3\u8c5a",packet:"104",model:1004,multipleMin:15,multipleMax:15,type:1,zorder:12,animType:i.FishAnimType_DEMO.no_ani,copyNum:20,moveSpeed:.02,lightSize:100,vortexSize:130,goldCount:1},105:{id:105,name:"\u8774\u8776\u9c7c",packet:"105",model:1003,multipleMin:10,multipleMax:10,type:6,zorder:10,animType:i.FishAnimType_DEMO.combination,copyNum:4,moveSpeed:.02,lightSize:150,vortexSize:200,goldCount:3},106:{id:106,name:"\u5c0f\u4e11\u9c7c",packet:"106",model:1,multipleMin:6,multipleMax:6,type:6,zorder:6,animType:i.FishAnimType_DEMO.no_ani,copyNum:20,lightSize:180,vortexSize:250,goldCount:3},107:{id:107,name:"\u9f99\u867e",packet:"107",model:1015,multipleMin:8,multipleMax:8,type:6,zorder:8,animType:i.FishAnimType_DEMO.combination,copyNum:20,lightSize:150,vortexSize:200,isNoneShadow:!0,goldCount:3},108:{id:108,name:"\u5251\u9c7c",packet:"108",model:1005,multipleMin:5,multipleMax:5,type:6,zorder:5,animType:i.FishAnimType_DEMO.no_ani,copyNum:20,lightSize:180,vortexSize:250,goldCount:5},109:{id:109,name:"\u7ae0\u9c7c",packet:"109",model:16,multipleMin:300,multipleMax:300,type:2,zorder:30,dieSound:"fish33_1",animType:i.FishAnimType_DEMO.absolute,idx:[0,1,2,3],copyNum:4,lightSize:180,vortexSize:250,goldCount:5},110:{id:110,name:"\u706f\u7b3c\u9c7c",packet:"110",model:7,multipleMin:18,multipleMax:18,type:1,zorder:13,animType:i.FishAnimType_DEMO.no_ani,copyNum:4,lightSize:180,vortexSize:250,goldCount:5},201:{id:201,name:"\u5c0f\u6d77\u9f9f",packet:"201",model:4,multipleMin:9,multipleMax:9,type:6,zorder:9,animType:i.FishAnimType_DEMO.combination,copyNum:20,lightSize:220,vortexSize:300,goldCount:6},202:{id:202,name:"\u9e2d\u5634\u9c7c",packet:"202",model:1010,multipleMin:40,multipleMax:40,type:1,zorder:18,dieSound:"fish22_1",animType:i.FishAnimType_DEMO.no_ani,copyNum:4,lightSize:220,vortexSize:300,goldCount:6},203:{id:203,name:"\u84dd\u8759\u8760\u9c7c",packet:"203",model:1001,multipleMin:35,multipleMax:35,type:1,zorder:17,dieSound:"fish20_1",animType:i.FishAnimType_DEMO.no_ani,idx:[0,1],copyNum:4,lightSize:250,vortexSize:340,goldCount:6},204:{id:204,name:"\u5927\u9ec4\u9c7c",packet:"204",model:1008,multipleMin:50,multipleMax:50,type:3,zorder:22,dieSound:"fish23_1",animType:i.FishAnimType_DEMO.spine,idx:[0,1],copyNum:4,moveSpeed:.02,lightSize:300,vortexSize:400,goldCount:8},205:{id:205,name:"\u5927\u65d7\u9c7c",packet:"205",model:1007,multipleMin:20,multipleMax:20,type:1,zorder:14,animType:i.FishAnimType_DEMO.spine,copyNum:4,moveSpeed:.02,lightSize:300,vortexSize:400,goldCount:8},206:{id:206,name:"\u5927\u6cb3\u8c5a",packet:"206",model:1006,multipleMin:7,multipleMax:7,type:6,zorder:7,animType:i.FishAnimType_DEMO.spine,copyNum:20,moveSpeed:.02,lightSize:300,vortexSize:400,goldCount:8},207:{id:207,name:"\u84dd\u9ca8",packet:"207",model:1009,multipleMin:45,multipleMax:45,type:1,zorder:19,dieSound:"fish9_1",animType:i.FishAnimType_DEMO.spine,idx:[0,1],copyNum:4,moveSpeed:.02,goldCount:8},208:{id:208,name:"\u9cb8\u9c7c",packet:"208",model:1013,multipleMin:30,multipleMax:30,type:1,zorder:16,dieSound:"fish19_1",animType:i.FishAnimType_DEMO.spine,copyNum:4,moveSpeed:.02,goldCount:10},209:{id:209,name:"\u91d1\u8272\u9cb8\u9c7c",packet:"209",model:1013,multipleMin:30,multipleMax:30,type:1,zorder:16,dieSound:"fish19_1",animType:i.FishAnimType_DEMO.no_ani,copyNum:4,isUsedSpine:!0,goldCount:10},301:{id:301,name:"\u540c\u7c7b\u9c7c\u738b",packet:"301",model:100,multipleMin:50,multipleMax:50,type:100,zorder:20,dieSound:"fish12_1",animType:i.FishAnimType_DEMO.vortex,copyNum:4,goldCount:1},302:{id:302,name:"\u95ea\u7535\u9c7c",packet:"302",model:101,multipleMin:60,multipleMax:60,type:101,zorder:21,dieSound:"fish14_1",animType:i.FishAnimType_DEMO.combination,copyNum:4,goldCount:1},303:{id:303,name:"\u5bc4\u5c45\u87f94",packet:"303",model:1016,multipleMin:50,multipleMax:50,type:3,zorder:22,dieSound:"fish23_1",animType:i.FishAnimType_DEMO.no_ani,idx:[0,1],copyNum:4,moveSpeed:.02,isNoneShadow:!0,goldCount:0},304:{id:304,name:"\u5bc4\u5c45\u87f91",packet:"304",model:102,multipleMin:70,multipleMax:70,type:102,zorder:23,dieSound:"fish15_1",animType:i.FishAnimType_DEMO.no_ani,copyNum:4,moveSpeed:.02,isNoneShadow:!0,goldCount:0},305:{id:305,name:"\u94bb\u5934\u87f9",packet:"305",model:11,multipleMin:60,multipleMax:60,type:3,zorder:24,dieSound:"fish16_1",animType:i.FishAnimType_DEMO.no_ani,idx:[0,1,2],copyNum:-1,moveSpeed:.02,isNoneShadow:!0,goldCount:0},306:{id:306,name:"\u8fde\u73af\u70b8\u5f39\u87f9",packet:"306",model:103,multipleMin:80,multipleMax:80,type:103,zorder:25,dieSound:"fish26_1",animType:-1,copyNum:4,moveSpeed:.02,isNoneShadow:!0,goldCount:0},307:{id:307,name:"\u5bc4\u5c45\u87f93",packet:"307",model:10,multipleMin:80,multipleMax:80,type:3,zorder:26,dieSound:"fish28_1",animType:i.FishAnimType_DEMO.combination,idx:[0,1],copyNum:4,moveSpeed:.02,isNoneShadow:!0,goldCount:0},308:{id:308,name:"\u725b",packet:"308",model:13,multipleMin:100,multipleMax:100,type:3,zorder:27,dieSound:"fish29_1",animType:i.FishAnimType_DEMO.none,copyNum:4,moveSpeed:.015,isUsedSpine:!0,goldCount:0},309:{id:309,name:"\u9f99",packet:"309",model:14,multipleMin:120,multipleMax:120,type:3,zorder:28,dieSound:"fish30_1",animType:i.FishAnimType_DEMO.none,idx:[0,1,2],copyNum:4,moveSpeed:.02,isUsedSpine:!0,goldCount:0},401:{id:401,name:"\u7f8e\u4eba\u9c7c",packet:"401",model:20,multipleMin:200,multipleMax:200,type:2,zorder:29,dieSound:"fish33_1",animType:i.FishAnimType_DEMO.no_ani,idx:[0,1,2,3,4,5,6,7,8,9,10,11],copyNum:4,moveSpeed:.015,isUsedSpine:!0,goldCount:13},402:{id:402,name:"\u8783\u87f9",packet:"402",model:18,multipleMin:25,multipleMax:25,type:1,zorder:15,animType:5,copyNum:4,moveSpeed:.02,goldCount:0},501:{id:501,name:"\u9cc4\u9c7c",packet:"501",model:15,multipleMin:100,multipleMax:140,type:4,zorder:31,dieSound:"fish33_1",animType:i.FishAnimType_DEMO.no_ani,idx:[0,1,2],copyNum:4,moveSpeed:.02,isUsedSpine:!0,goldCount:15},601:{id:601,name:"\u51e4\u51f0",packet:"601",model:3,multipleMin:7,multipleMax:7,type:5,zorder:13,dieSound:"fish6_1",animType:i.FishAnimType_DEMO.none,copyNum:4,isUsedSpine:!0,goldCount:15},602:{id:602,name:"\u4e00\u7f51\u6253\u5c3d",packet:"602",model:4,multipleMin:9,multipleMax:9,type:5,zorder:13,dieSound:"fish6_1",animType:i.FishAnimType_DEMO.bai_zheng,copyNum:4,goldCount:0},603:{id:603,name:"\u4e00\u7f51\u6253\u5c3d",packet:"yu10_buyu",model:6,multipleMin:10,multipleMax:10,type:5,zorder:13,dieSound:"fish6_1",animType:i.FishAnimType_DEMO.bai_zheng,copyNum:4,goldCount:0},604:{id:604,name:"\u4e00\u7f51\u6253\u5c3d",packet:"yu27_buyu",model:7,multipleMin:15,multipleMax:15,type:5,zorder:13,dieSound:"fish6_1",animType:i.FishAnimType_DEMO.bai_zheng,copyNum:4,goldCount:0},605:{id:605,name:"\u4e00\u7f51\u6253\u5c3d",packet:"yu28_buyu",model:7,multipleMin:18,multipleMax:18,type:5,zorder:13,dieSound:"fish6_1",animType:i.FishAnimType_DEMO.bai_zheng,copyNum:4,goldCount:0}},cc._RF.pop()},{"./FISHO_GameDefine":"FISHO_GameDefine"}],FISHO_FishManager:[function(e,t,o){"use strict";cc._RF.push(t,"d5c96GE2blC44MYkmr+1iHu","FISHO_FishManager");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,o=t&&e[t],i=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,h=c.menu,l=c.property,u=e("./FISHO_FishKindMap"),p=e("./FISHO_PoolManager"),d=e("./FISHO_GameFish"),f=e("./FISHO_ResourceMgr"),y=e("./FISHO_GameFishShadow"),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shadowMaterial=null,t.fishCircleLayer=null,t.handlerPriority=8,t.fishfunctionCirclePrefab=null,t.UpSideDown=!1,t.fishInfo=[],t.gameFish=[],t.fishCache={},t.fishNodes={},t.fishShadowNodes={},t.loadingFish={},t.loadCompletes=new Map,t.isChangeSceneing=!1,t}return n(t,e),Object.defineProperty(t.prototype,"getGameFish",{get:function(){return this.gameFish},enumerable:!1,configurable:!0}),t.prototype.setGame=function(e){this.game=e,this.fishfunctionCirclePrefab=this.game.resourMgr.iMrgBase.getCommonRes("FishCircle",f.CommonResType.Prefab,cc.Prefab)},t.prototype.onLoad=function(){var e=new cc.Node("FishShadows");for(var t in this.node.addChild(e),u.FishKindMap)u.FishKindMap[t],this.fishShadowNodes[t]=new cc.Node,e.addChild(this.fishShadowNodes[t]),this.fishNodes[t]=new cc.Node,this.node.addChild(this.fishNodes[t]);this.fishNodes[301].setSiblingIndex(this.node.childrenCount-1),this.fishNodes[302].setSiblingIndex(this.node.childrenCount-1)},t.prototype.onDestroy=function(){this.fishInfo=[],this.gameFish=[],this.fishCache={},this.fishNodes={},this.fishShadowNodes={}},t.prototype.getFishByIndex=function(e){var t,o;try{for(var i=s(this.gameFish),n=i.next();!n.done;n=i.next()){var r=n.value;if(r.fishInfo.dwFishIndex==e)return r}}catch(c){t={error:c}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(t)throw t.error}}return null},t.prototype.getFishByKindID=function(e){var t,o,i=[];try{for(var n=s(this.gameFish),r=n.next();!r.done;r=n.next()){var c=r.value;c.fishInfo.nFishKindID==e&&null!=c&&c.isCanCatch&&c.checkInScreenRegion()&&i.push(c)}}catch(a){t={error:a}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}return i},t.prototype.clearFish=function(){var e,t;this.fishInfo=[];try{for(var o=s(this.gameFish),i=o.next();!i.done;i=o.next()){var n=i.value;this.recycleFish(n)}}catch(r){e={error:r}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}this.gameFish=[]},t.prototype.onFishInfo=function(e){this.fishInfo=this.fishInfo.concat(e)},t.prototype.changeScene=function(){this.fishInfo=[];for(var e=this.gameFish.length,t=0;t<e;t++)this.gameFish[t].enterChangeSceneState()},t.prototype.updateFishOut=function(e){void 0===e&&(e=10);for(var t=this.game.iGameBase.GetServerTick(),o=0,i=0;i<this.fishInfo.length;i++){if(this.fishInfo[i]&&this.fishInfo[i].dwCreteTicket<=t){var n=this.fishInfo.splice(i,1)[0],r=n.nFishKindID,s=!1;if(301!=n.nFishKindID&&302!=n.nFishKindID||(r=n.nSpecialFishKindID,s=!0),this.fishCache[r]&&this.fishCache[r].length>0){var c=this.fishCache[r].shift();this.createFish(r,n,s,c,!1)}else this.createFish(r,n,s,null,!0);++o,i--}if(o>=e)break}},t.prototype.createFish=function(e,t,o,i,n){void 0===n&&(n=!1);var r=this.game.resourMgr.iMrgBase.getCommonRes(e,f.CommonResType.fishPrefab,cc.Prefab);if(r)if(null!=(i=cc.instantiate(r).addComponent(d.default))){i.setGame(this.game),this.fishNodes[t.nFishKindID].addChild(i.node),i.node.setPosition(-5e4,0);var s=null;if(!u.FishKindMap[e].isNoneShadow){var c=i.isAnim?p.NodeType.fishShadow:p.NodeType.fishSkeletonShadow,a=this.game.poolMgr.Dequeue(c);s=a.addComponent(y.default),null!=a&&(1==a.childrenCount?(s.type=p.NodeType.fishSkeletonShadow,s.skele=cc.find("New Node",a).getComponent(sp.Skeleton)):(s.type=p.NodeType.fishShadow,s.isAnim=!0)),s.setGame(this.game),this.fishShadowNodes[e].addChild(a),a.setPosition(-5e4,0)}var h=this.game.iGameBase.utils_gen_handler(this.recycleFish,this);i.initWithFishInfo(t,this.UpSideDown,s,h),o&&this.setSpecialFish(i,t.nFishKindID),this.gameFish.push(i)}else cc.error("\u5b9e\u4f8b\u5316\u7684\u9c7c\u4e3a\u7a7a\uff1a",e,n);else cc.error("\u6ca1\u6709\u8fd9\u4e2a\u9c7c\u7684\u9884\u5236\u4f53,fishKind\uff1a"+e)},t.prototype.getFunctionCatchFishs=function(e){for(var t=[],o=new Map,i=this.getGameFish.length-1;i>=0;i--){var n=this.game.iGameBase.utils_random(0,this.getGameFish.length-1),r=this.getGameFish[n];if(r.isCanCatch&&(r.fishInfo.nFishKindID<301||r.fishInfo.nFishKindID>307)&&r.checkInScreenRegion())if(o.has(r.fishInfo.dwFishIndex))i++;else if(t.push(r.fishInfo.dwFishIndex),o.set(r.fishInfo.dwFishIndex,!0),t.length>=e)break}return t},t.prototype.setSpecialFish=function(e,t){var o=cc.instantiate(this.fishfunctionCirclePrefab);this.fishCircleLayer.addChild(o),o.setPosition(-5e4,0),e.initSpecialFish(o,t)},t.prototype.updateFishMove=function(e){for(var t=this.game.iGameBase.GetServerTick(),o=0;o<this.gameFish.length;o++)if(this.gameFish[o].updateMove(t,e)){var i=this.gameFish.splice(o,1)[0];this.recycleFish(i),o--}},t.prototype.recycleFish=function(e,t){if(void 0===t&&(t=!0),!t)for(var o=0;o<this.gameFish.length;o++)if(this.gameFish[o].fishInfo.dwFishIndex==e.fishInfo.dwFishIndex){this.gameFish.splice(o,1)[0];break}null==this.fishCache[e.fishKind.id]&&(this.fishCache[e.fishKind.id]=[]),null!=e&&this.fishCache[e.fishKind.id].push(e.recycle())},t.prototype.onUpdate=function(e){this.updateFishOut(),this.updateFishMove(e)},r([l(cc.Material)],t.prototype,"shadowMaterial",void 0),r([l(cc.Node)],t.prototype,"fishCircleLayer",void 0),r([a,h("FISHO/FISHO_FishManager")],t)}(cc.Component);o.default=m,cc._RF.pop()},{"./FISHO_FishKindMap":"FISHO_FishKindMap","./FISHO_GameFish":"FISHO_GameFish","./FISHO_GameFishShadow":"FISHO_GameFishShadow","./FISHO_PoolManager":"FISHO_PoolManager","./FISHO_ResourceMgr":"FISHO_ResourceMgr"}],FISHO_FishPathCrash:[function(e,t,o){"use strict";cc._RF.push(t,"86d9cx44A5KCYKltdCxUB+o","FISHO_FishPathCrash"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./FISHO_ResourceMgr"),n=function(){function e(){this.FishPath={}}return e.prototype.setGame=function(e){this.game=e},e.prototype.release=function(){this.releaseMem()},e.prototype.releaseMem=function(){this.FishPath={}},e.prototype.loadFishPath=function(){var e=this.game.resourMgr.iMrgBase.getCommonRes("Path",i.CommonResType.fishPath,cc.JsonAsset).json;for(var t in e)this.FishPath[t]=e[t],this.FishPath[t].len==this.FishPath[t].row.length&&this.FishPath[t].len==this.FishPath[t].col.length||cc.error("wPathID",t,this.FishPath[t].len,this.FishPath[t].row.length,this.FishPath[t].col.length)},e}();o.default=n,cc._RF.pop()},{"./FISHO_ResourceMgr":"FISHO_ResourceMgr"}],FISHO_FlashEffect:[function(e,t,o){"use strict";cc._RF.push(t,"577dcPTqxpGQrTlE3LiFJcI","FISHO_FlashEffect");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../FISHO_GameDefine"),c=cc._decorator,a=c.ccclass,h=c.menu,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.slopeFlash=[],t.hammer=null,t.flash=null,t.fissus=null,t.moveTween=null,t.bulletIndex=-1,t.playerId=0,t.hammerAnimaState=null,t.targetFort=null,t.currWeight=s.FunctionWeight.flash,t.isNext=!1,t.playSlopCount=0,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.onLoad=function(){},t.prototype.onDisable=function(){this.hammer.off(cc.Animation.EventType.FINISHED,this.hammerPlayComplete,this)},t.prototype.initFunction=function(e,t,o){this.targetFort=e,this.bulletIndex=t,this.playerId=o,this.targetFort.setEffect(this)},t.prototype.hammerPlayComplete=function(){var e=this;if("hammer1"==this.hammerAnimaState.name)this.flash.active=!0,this.hammerAnimaState=this.hammer.play("hammer2"),this.hammerAnimaState.wrapMode=cc.WrapMode.Loop,this.hammerAnimaState.repeatCount=8,this.moveTween=cc.tween(this.hammer.node).repeatForever(cc.sequence(cc.moveTo(1,cc.v2(0,20)),cc.moveTo(1,cc.v2(0,0)))).start(),this.playSlopFlash();else if("hammer2"==this.hammerAnimaState.name)this.moveTween.stop(),this.game.iAudioPlayer.play_sound("hammer2"),this.hammerAnimaState=this.hammer.play("hammer3"),this.flash.active=!1;else if("hammer3"==this.hammerAnimaState.name){if(this.hammer.node.runAction(cc.fadeOut(1.5)),this.game.gameId==this.playerId){var t=this.game.fishMgr.getFunctionCatchFishs(s.FunctionCatchCount.flash);this.game.iGameBase.EmitEvent(s.EventCode.FunctionCatchFishs,{wChairID:this.game.iGameBase.UserManager_getChairID(),dwBulletIndex:this.bulletIndex,dwFishIndex:t,cbFishCount:t.length})}var o=cc.tween().sequence(cc.delayTime(1),cc.fadeOut(1.5),cc.callFunc(function(){e.node.destroy()}));this.fissus.active=!0,cc.tween(this.fissus).then(o).start()}},t.prototype.start=function(){this.hammer.on(cc.Animation.EventType.FINISHED,this.hammerPlayComplete,this),this.hammerAnimaState=this.hammer.play("hammer1"),this.game.iAudioPlayer.play_sound("hammer1")},t.prototype.playSlopFlash=function(){var e=this;this.playSlopCount++;for(var t=[];;){var o=this.game.iGameBase.utils_random(0,3);if(-1==t.indexOf(o)&&(t[t.length]=o,t.length>=this.slopeFlash.length))break}this.schedule(function(){e.playSlopHandle(t)},.4,t.length-1)},t.prototype.playSlopHandle=function(e){var t=this,o=e.shift();this.slopeFlash[o].active=!0,e.length<=0&&this.scheduleOnce(function(){for(var e=0;e<t.slopeFlash.length;e++)t.slopeFlash[e].active=!1;t.scheduleOnce(function(){t.playSlopCount<2&&t.playSlopFlash()},1)},1)},t.prototype.onDestroy=function(){this.game.iGameBase.getExectUpdate()&&this.targetFort.subEffectWeight(this.currWeight)},t.prototype.beforDestroy=function(){},t.prototype.nextStep=function(){},t.prototype.ImmediatelyDestroy=function(){this.unscheduleAllCallbacks(),this.node&&this.node.isValid&&this.node.destroy()},r([l([cc.Node])],t.prototype,"slopeFlash",void 0),r([l(cc.Animation)],t.prototype,"hammer",void 0),r([l(cc.Node)],t.prototype,"flash",void 0),r([l(cc.Node)],t.prototype,"fissus",void 0),r([a,h("FISHO/FlashEffect")],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../FISHO_GameDefine":"FISHO_GameDefine"}],FISHO_FunctionFort:[function(e,t,o){"use strict";cc._RF.push(t,"d1d04giK2ZL+KpLq6DVvy9i","FISHO_FunctionFort");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,o=t&&e[t],i=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var i,n,r=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(c){n={error:c}}finally{try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}return s};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./FISHO_CowUI"),h=e("./FISHO_functionUI"),l=e("./FISHO_GameDefine"),u=e("./FISHO_ResourceMgr"),p=e("./FISHO_RotateAround"),d=cc._decorator,f=d.ccclass,y=d.menu,m=(d.inspector,d.property),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.laserPoint=null,t.gunbarrel=null,t.container=null,t.functionUIOriginPos=null,t.drillTotalScoreNodePos=null,t.fort=null,t.functionUIMap=null,t.whalekingArray=null,t.isDestroy=!1,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.onLoad=function(){this.functionUIMap=new Map,this.whalekingArray=[]},t.prototype.showFunctionUI=function(e,t){var o=null,i=null,n=l.functionType[e]+"FunctionUI",r=l.getWeightByType(e);if(cc.error("\u663e\u793a\u529f\u80fdUI==",e),e==l.functionType.bullSmash){var s=this.game.resourMgr.getRes(n,u.ResourceType.initPrefab,cc.Prefab);o=cc.instantiate(s),this.fort.node.addChild(o),(i=o.getComponent(a.default)).setGame(this.game),o.setSiblingIndex(2)}else{var c=this.game.resourMgr.iMrgBase.getCommonRes(n,u.CommonResType.Prefab,cc.Prefab);o=cc.instantiate(c),this.container.addChild(o);var d=o.addComponent(h.default);d.type=e,d.title=cc.find("title",o),d.multiple=cc.find("multiple",d.title),d.lblMultiple=cc.find("lblMultiple",d.multiple).getComponent(cc.Label),e!=l.functionType.drill&&e!=l.functionType.superBomb&&e!=l.functionType.mermaid||(d.catchScore=cc.find("catchScore",o),d.lblCatchScore=cc.find("lblCatchScore",d.catchScore).getComponent(cc.Label)),d.totalScore=cc.find("totalScore",o),d.lblTotalScore=cc.find("lblTotalScore",d.totalScore).getComponent(cc.Label),e!=l.functionType.mermaid&&e!=l.functionType.phoenix||(d.mountPoint=cc.find("mountPoint",d.title)),e==l.functionType.lighting&&(o.addComponent(p.default).clockwise=!0),i=d,d.setGame(this.game),o.setSiblingIndex(this.container.childrenCount-1)}i.show(this.fort,e==l.functionType.lighting?this.gunbarrel:t),e==l.functionType.whaleking?this.whalekingArray.push(i):(this.functionUIMap.set(r,i),i.setMultiple(this.fort.labelMultiple.string))},t.prototype.showFunctionTotalScore=function(e,t){var o=this.functionUIMap.get(t);o&&o.showTotalScore(e,this.showTotalScoreComplete.bind(this))},t.prototype.checkCanFire=function(e){var t,o,i=!0;if(this.functionUIMap){try{for(var n=s(this.functionUIMap.keys()),r=n.next();!r.done;r=n.next()){var c=r.value;if(-1!=l.DisableFireFunction.indexOf(c)){i=!1;break}}}catch(a){t={error:a}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}e!=l.FunctionWeight.drill&&e!=l.FunctionWeight.laser||(this.fort.showGunbarrel(),this.fort.isWaitfire=!1),i&&(this.fort.isCanFire=!0,this.fort.currFunctionType=l.functionType.normal)}},t.prototype.showTotalScoreComplete=function(e,t){this.functionUIMap.delete(e),this.checkCanFire(e),this.game.GameLogic.setWinScore(this.fort.gameId,t)},t.prototype.showDrillCatchScroe=function(e,t){void 0===t&&(t=0),this.functionUIMap.has(e)&&this.functionUIMap.get(e).showCatchScore(t)},t.prototype.hideTotalScore=function(e){var t,o;if(null!=e)this.hidefunctionUI(e);else try{for(var i=s(this.functionUIMap),n=i.next();!n.done;n=i.next()){var r=c(n.value,2),a=r[0];r[1].destoryFunction(),this.functionUIMap.delete(a)}}catch(h){t={error:h}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(t)throw t.error}}},t.prototype.hidefunctionUI=function(e){var t;e==l.FunctionWeight.whaleking?(t=this.whalekingArray.shift())&&t.destoryFunction():((t=this.functionUIMap.get(e))&&t.destoryFunction(),this.functionUIMap.delete(e))},t.prototype.setLaserEffect=function(e){this.laserPoint.addChild(e),e.setPosition(cc.v2()),e.angle=0,this.gunbarrel.angle=0},t.prototype.getMountPoint=function(e){return e==l.FunctionWeight.whaleking?this.whalekingArray.length>0?this.whalekingArray[0].getMountPoint():null:this.functionUIMap.has(e)?this.functionUIMap.get(e).getMountPoint():null},t.prototype.playCowCompleteUI=function(e){this.functionUIMap.has(l.FunctionWeight.bullSmash)&&(this.functionUIMap.get(l.FunctionWeight.bullSmash).playCowCompleteUI(e),this.functionUIMap.delete(l.FunctionWeight.bullSmash))},t.prototype.destoryFunctionUI=function(e){var t,o,i=this;if(void 0===e&&(e=!1),this.isDestroy=!0,e){try{for(var n=s(this.functionUIMap.entries()),r=n.next();!r.done;r=n.next()){var a=c(r.value,2),h=a[0];a[1].destoryFunction(),this.functionUIMap.delete(h)}}catch(f){t={error:f}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}for(var u=0,p=this.whalekingArray.length;u<p;u++)this.whalekingArray[u].destoryFunction(),u--;this.whalekingArray=[]}else{var d=[l.FunctionWeight.superBomb,l.FunctionWeight.drill,l.FunctionWeight.bullSmash,l.FunctionWeight.mermaid];d.forEach(function(e){i.functionUIMap.has(e)&&(i.functionUIMap.get(e).destoryFunction(),i.functionUIMap.delete(e))}),d=null}},r([m(cc.Node)],t.prototype,"laserPoint",void 0),r([m(cc.Node)],t.prototype,"gunbarrel",void 0),r([m(cc.Node)],t.prototype,"container",void 0),r([f,y("FISHO/FunctionFort")],t)}(cc.Component);o.default=g,cc._RF.pop()},{"./FISHO_CowUI":"FISHO_CowUI","./FISHO_GameDefine":"FISHO_GameDefine","./FISHO_ResourceMgr":"FISHO_ResourceMgr","./FISHO_RotateAround":"FISHO_RotateAround","./FISHO_functionUI":"FISHO_functionUI"}],FISHO_FunctionLayer:[function(e,t,o){"use strict";cc._RF.push(t,"a8e90AKbTNNQI+TD+nAMuX8","FISHO_FunctionLayer");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./effectFunction/FISHO_CowEffect"),c=e("./effectFunction/FISHO_DialFunction"),a=e("./FISHO_GameDefine"),h=e("./FISHO_PoolManager"),l=e("./FISHO_ResourceMgr"),u=e("./effectFunction/FISHO_SuperbombEffect"),p=e("./effectFunction/FISHO_FlashEffect"),d=e("./effectFunction/FISHO_LightingEffect"),f=e("./effectFunction/FISHO_PhoenixEffect"),y=e("./effectFunction/FISHO_DragonEffect"),m=e("./effectFunction/FISHO_MermaidEffect"),g=cc._decorator,_=g.ccclass,v=g.menu,S=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._points=null,t.vortexSoundId=-1,t}return n(t,e),Object.defineProperty(t.prototype,"points",{get:function(){return this._points},enumerable:!1,configurable:!0}),t.prototype.setGame=function(e){this.game=e},t.prototype.start=function(){this._points=[];var e=cc.winSize.width/4,t=cc.winSize.height/4,o=cc.v2(),i=cc.v2(e,-t),n=cc.v2(-e,-t),r=cc.v2(-e,t),s=cc.v2(e,t);this._points.push(o),this._points.push(i),this._points.push(n),this._points.push(r),this._points.push(s)},t.prototype.playSuperBombEffect=function(e,t,o,i){this.game.iAudioPlayer.play_sound("showBomb");var n=this.game.resourMgr.iMrgBase.getCommonRes("bomb",l.CommonResType.Prefab,cc.Prefab),r=cc.instantiate(n);this.node.addChild(r),r.setPosition(e);var s=r.addComponent(u.default);cc.error("===\u70b8\u5f39====",s),s.bomb=cc.find("bombSp",r),s.lblIndex=cc.find("index/lableIndex",r),s.haloAni=cc.find("halo",r).getComponent(cc.Animation),s.setGame(this.game),s.initFunction(o,t,i)},t.prototype.playLaserEffect=function(e){var t=this.game.resourMgr.iMrgBase.getCommonRes("laserEffect",l.CommonResType.Prefab,cc.Prefab),o=cc.instantiate(t);e.setLaserEffect(o)},t.prototype.playFlashEffect=function(e,t,o){var i=this.game.resourMgr.iMrgBase.getCommonRes("FlashEffect",l.CommonResType.Prefab,cc.Prefab),n=cc.instantiate(i);this.node.addChild(n);for(var r=n.addComponent(p.default),s=0;s<4;s++){var c=cc.find("slop/slope"+(s+1),n);r.slopeFlash.push(c)}r.hammer=n.getChildByName("hammer").getComponent(cc.Animation),r.fissus=n.getChildByName("fissus"),r.flash=n.getChildByName("flash"),r.setGame(this.game),r.initFunction(o,e,t)},t.prototype.playDial=function(e,t,o,i){var n=i.node.getPosition(),r=this.game.resourMgr.iMrgBase.getCommonRes("Dial",l.CommonResType.Prefab,cc.Prefab),s=cc.instantiate(r);this.node.addChild(s);var a=s.addComponent(c.default);a.scoreLable=s.getChildByName("score").getComponent(cc.Label),a&&(a.setGame(this.game),a.initFunction(i),s.scale=0,s.setPosition(e),this.playGoldEffect(e),i.IsOnTop?(s.angle=180,n.y-=100):(s.angle=0,n.y+=100),this.game.iAudioPlayer.play_sound("show2",!1,1),cc.tween(s).sequence(cc.spawn(cc.scaleTo(.2,1),cc.moveTo(.5,cc.v2(e.x,e.y+80))),cc.moveTo(.5,e),cc.moveTo(.5,n),cc.callFunc(function(){a.showChildNode(t,o)})).start())},t.prototype.playGoldEffect=function(e){var t=this;this.game.poolMgr.AsyncDequeue(h.NodeType.goldBomb,function(o){var i=o;t.node.addChild(i),i.setPosition(e);var n=i.getComponent(sp.Skeleton);n.clearTracks(),n.setAnimation(0,"Sprite",!1),n.setCompleteListener(function(){n.timeScale=0,n.setCompleteListener(null),t.game.poolMgr.Enqueue(i,h.NodeType.goldBomb)}),n.paused=!1,n.timeScale=1})},t.prototype.playVortex=function(e){var t=this,o=this.game.resourMgr.iMrgBase.getCommonRes("vortex",l.CommonResType.Prefab,cc.Prefab),i=cc.instantiate(o);i.scale=0,this.node.addChild(i),i.setPosition(e);var n=cc.tween(i).sequence(cc.scaleTo(.5,1.5),cc.repeat(cc.rotateBy(.35,-360),1e4)).start();this.vortexSoundId=this.game.iAudioPlayer.play_sound("vortex"),this.scheduleOnce(function(){cc.tween(i).then(cc.scaleTo(.5,0)).call(function(){n.stop(),i.destroy()}).start(),-1!=t.vortexSoundId&&t.game.iAudioPlayer.stop_sound(t.vortexSoundId)},3)},t.prototype.playLightingEffect=function(e,t){var o=this.game.resourMgr.iMrgBase.getCommonRes("LightingEffect",l.CommonResType.Prefab,cc.Prefab),i=cc.instantiate(o);this.node.addChild(i);var n=i.addComponent(d.default);n.setGame(this.game),n.initFunction(e),n.addFishInfo(t),n.playShandianEffect(t.fish.node,e.node,0,!0)},t.prototype.playMushGoldBomb=function(e,t,o,i){if(void 0===i&&(i=!1),!e.isShake||e.goldBombPointArray.length<=0)cc.error("\u8bf7\u68c0\u67e5\u5f53\u524d\u9c7c\u7684\u9884\u5236\u4f53:"+e.fishKind.id);else{for(var n=e.goldBombPointArray.length,r=0;r<n;r++){var s=e.goldBombPointArray[r].convertToWorldSpaceAR(cc.v2());s=this.node.convertToNodeSpaceAR(s),this.playGoldEffect(s)}e.playDieAni(t,o,i)}},t.prototype.playFengHuangBomb=function(e,t,o,i){this.playMushGoldBomb(e);var n=this.game.resourMgr.iMrgBase.getCommonRes("phoenixEffect",l.CommonResType.Prefab,cc.Prefab),r=cc.instantiate(n);this.node.addChild(r);var s=r.addComponent(f.default);s.setGame(this.game),s.initFunction(t,e,o,i)},t.prototype.playDragonEffect=function(e,t,o,i){this.playMushGoldBomb(e);var n=this.game.resourMgr.iMrgBase.getCommonRes("dragonEffect",l.CommonResType.Prefab,cc.Prefab),r=cc.instantiate(n);this.node.addChild(r);var s=r.addComponent(y.default);s.dragonBall=cc.find("empty/dragonBall",r),s.centerNode=cc.find("empty/center",r),s.animOneArray=new Array(8);for(var c=0;c<s.animOneArray.length;c++)s.animOneArray[c]=cc.find("Anim1/"+(c+1),r).getComponent(cc.Animation);for(s.animTwoArray=new Array(8),c=0;c<s.animTwoArray.length;c++)s.animTwoArray[c]=cc.find("Anim2/"+(9+c),r).getComponent(cc.Animation);s.multiple=cc.find("empty/multile",r),s.lableMultiple=cc.find("lableMultile",s.multiple),s.setGame(this.game),s.dragonPrefab=this.game.resourMgr.iMrgBase.getCommonRes("dragon",l.CommonResType.Prefab,cc.Prefab),s.initFunction(i,e,o,t)},t.prototype.playCowEffect=function(e,t,o,i){var n=this;this.game.resourMgr.loadOther("CowEffect",l.ResourceType.other,cc.Prefab,function(r){var c=r,a=cc.instantiate(c);n.node.addChild(a);var h=a.getComponent(s.default);h.setGame(n.game),h.initFunction(e,t,o,i)})},t.prototype.playMermaidFishEffect=function(e,t,o,i,n,r){var s=this;this.playMushGoldBomb(e);var c=e.getCurrWorldPos();this.scheduleOnce(function(){var h=s.game.resourMgr.iMrgBase.getCommonRes("featherFlame",l.CommonResType.Prefab,cc.Prefab),u=cc.instantiate(h);s.node.addChild(u);var p=s.node.convertToNodeSpaceAR(c);u.setPosition(p);var d=u.getComponent(cc.Animation);d.play(),d.on(cc.Animation.EventType.FINISHED,function(){u.destroy(),t.showFunctionUI(a.functionType.mermaid,i);var c=s.game.resourMgr.iMrgBase.getCommonRes("mermaidEffect",l.CommonResType.Prefab,cc.Prefab),h=cc.instantiate(c);s.node.addChild(h);for(var p=h.addComponent(m.default),d=0;d<5;d++){var f=cc.find(String(d+1)+"/1",h).getComponent(sp.Skeleton);p.mermaidhArray.push(f)}for(d=0;d<9;d++){var y=cc.find("RedLove copy"+(d+1),h);p.redLoveAdorns.push(y)}p.light=h.getChildByName("light").getComponent(cc.Animation),p.lovePrefab=s.game.resourMgr.iMrgBase.getCommonRes("love",l.CommonResType.fishPrefab,cc.Prefab),p.setGame(s.game);var g=t.getMountPoint(a.FunctionWeight.mermaid);p.initFunction(t,i,n,e,o,g,r)})})},t.prototype.playOtherFishDieEffect=function(e,t,o,i){return void 0===i&&(i=!1),!!e.isSpecialAnim()&&(this.playMushGoldBomb(e,t,o,i),this.game.gameScene.shakeEffect(.5),!0)},t.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},r([_,v("FISHO/FunctionLayer")],t)}(cc.Component));o.default=S,cc._RF.pop()},{"./FISHO_GameDefine":"FISHO_GameDefine","./FISHO_PoolManager":"FISHO_PoolManager","./FISHO_ResourceMgr":"FISHO_ResourceMgr","./effectFunction/FISHO_CowEffect":"FISHO_CowEffect","./effectFunction/FISHO_DialFunction":"FISHO_DialFunction","./effectFunction/FISHO_DragonEffect":"FISHO_DragonEffect","./effectFunction/FISHO_FlashEffect":"FISHO_FlashEffect","./effectFunction/FISHO_LightingEffect":"FISHO_LightingEffect","./effectFunction/FISHO_MermaidEffect":"FISHO_MermaidEffect","./effectFunction/FISHO_PhoenixEffect":"FISHO_PhoenixEffect","./effectFunction/FISHO_SuperbombEffect":"FISHO_SuperbombEffect"}],FISHO_GameBulletBase:[function(e,t,o){"use strict";cc._RF.push(t,"90000HbzwdE4qsorUoRFqoW","FISHO_GameBulletBase");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./FISHO_GameDefine"),c=cc._decorator,a=c.ccclass,h=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletInfo=null,t.currentAngel=0,t.startGrid=null,t.currentGrid=null,t.speedRow=0,t.speedCol=0,t.speedX=0,t.speedY=0,t.bulletMgr=null,t.collider=null,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.onLoad=function(){this.collider=this.node.getComponent(cc.Collider)},t.prototype.init=function(e,t){this.bulletInfo=e,this.currentAngel=e.angle,this.startGrid=this.game.mCrashGrid.getCrashGridByPos(this.bulletInfo.crashGridPos),this.startGrid?(this.currentGrid=this.startGrid.clone(),this.bulletMgr=t,this.collider.enabled=!0,this.node.setPosition(e.crashGridPos)):cc.error("startGrid \u4e3anull")},t.prototype.updateSpeed=function(){this.speedRow=Math.sin(this.currentAngel*Math.PI/180)*this.currSpeed,this.speedCol=Math.cos(this.currentAngel*Math.PI/180)*this.currSpeed,this.speedX=this.speedCol*this.game.mCrashGrid.GridWidth,this.speedY=this.speedRow*this.game.mCrashGrid.GridHeight},t.prototype.caculate_bullet_rotation=function(e,t){return 180*Math.atan2(e,t)/Math.PI},t.prototype.updateMove=function(){if(null!=this.currentGrid){var e=!1,t=this.currentGrid.x,o=this.currentGrid.y;t+=this.speedRow,o+=this.speedCol;var i=this.game.mCrashGrid.CrashRowMin,n=this.game.mCrashGrid.CrashRowMax,r=this.game.mCrashGrid.CrashColMin,s=this.game.mCrashGrid.CrashColMax;return t<=i?this.speedRow<0&&(this.speedRow=-this.speedRow,e=!0):t>=n+1?this.speedRow>0&&(this.speedRow=-this.speedRow,e=!0):o<=r?this.speedCol<0&&(this.speedCol=-this.speedCol,e=!0):o>=s+1&&this.speedCol>0&&(this.speedCol=-this.speedCol,e=!0),e&&(this.speedX=this.speedCol*this.game.mCrashGrid.GridWidth,this.speedY=this.speedRow*this.game.mCrashGrid.GridHeight,this.currentAngel=this.caculate_bullet_rotation(this.speedRow,this.speedCol)),this.node.angle=this.currentAngel,this.update_bullet_pos(),this.checkCollider()}},t.prototype.update_bullet_pos=function(){var e=this.currentGrid.x,t=this.currentGrid.y;e+=this.speedRow,t+=this.speedCol;var o=this.check_bullet_row_col(e,t);if(0==o){this.currentGrid.x=e,this.currentGrid.y=t;var i=cc.v2(this.node.x+this.speedX,this.node.y+this.speedY);this.node.setPosition(i)}else console.log("check_bullet_row_col: r = "+o)},t.prototype.check_bullet_row_col=function(e,t){var o=this.game.mCrashGrid.CrashRowMin,i=this.game.mCrashGrid.CrashRowMax,n=this.game.mCrashGrid.CrashColMin,r=this.game.mCrashGrid.CrashColMax;return e<o?1:e>i+1?2:t<n?3:t>r+1?4:0},t.prototype.checkCollider=function(){var e=this.game._quadCollision.check(this.game.fishMgr.getGameFish,this.collider);if(e.length>0){for(var t=null,o=0;o<e.length&&(!(t=e[o])||!t.isCanCatch);o++)t=null;if(t)return t.playByHit(),this.bulletInfo.gameID==this.game.gameId&&(this.bulletInfo.isDrillGun?this.game.iGameBase.EmitEvent(s.EventCode.DrillCatchFishs,{wChairID:this.bulletInfo.chairID,dwBulletIndex:this.bulletInfo.bulletIndex,dwFishIndex:t.fishInfo.dwFishIndex}):this.game.iGameBase.EmitEvent(s.EventCode.SendCatchFish,{wChairID:this.bulletInfo.chairID,dwBulletIndex:this.bulletInfo.bulletIndex,dBulletRow:this.currentGrid.x,dBulletCol:this.currentGrid.y,dwFishIndex:t.fishInfo.dwFishIndex,wPathIndex:t?t.CurrentStep:0,bFreeBullet:this.bulletInfo.isDrillGun})),!0}return!1},t.prototype.recycle=function(){return this.node.removeFromParent(!0),this},r([a],t)}(cc.Component));o.default=h,cc._RF.pop()},{"./FISHO_GameDefine":"FISHO_GameDefine"}],FISHO_GameBulletDrill:[function(e,t,o){"use strict";cc._RF.push(t,"a617eo4HPZDhZRNABmhAzUD","FISHO_GameBulletDrill");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./FISHO_GameBulletBase"),c=e("./FISHO_GameDefine"),a=e("./FISHO_PoolManager"),h=cc._decorator,l=h.ccclass,u=h.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currWeight=c.FunctionWeight.drill,t.isNext=!1,t.currSpeed=1,t.flameParent=null,t.streak=null,t.bullerAni=null,t}return n(t,e),t.prototype.initFunction=function(e){this.targetFort=e,this.targetFort.setEffect(this)},t.prototype.init=function(t,o,i){e.prototype.init.call(this,t,o),this.initFunction(i),this.bullerAni.play("drillBulletRotate"),this.streak.active=!0,this.updateSpeed()},t.prototype.updateSpeed=function(){e.prototype.updateSpeed.call(this)},t.prototype.updateMove=function(t){if(e.prototype.updateMove.call(this,t)){var o=c.FunctionCatchCount.drill;this.bulletMgr.playHit({pos:this.node.getPosition(),hitType:c.HitType.drillHit,catchCount:o,angle:this.node.angle})}return!1},t.prototype.strackEffect=function(){var e=this;this.game.poolMgr.AsyncDequeue(a.NodeType.flame,function(t){var o=t,i=o.getComponent(cc.Animation);i.on(cc.Animation.EventType.FINISHED,function(){o.off(cc.Animation.EventType.FINISHED),e.game.poolMgr.Enqueue(o,a.NodeType.flame)});var n=e.flameParent.convertToWorldSpaceAR(cc.v2());e.bulletMgr.node.addChild(o),n=e.bulletMgr.node.convertToNodeSpaceAR(n),o.setPosition(n),o.angle=e.node.angle,i.play()})},t.prototype.playBomb=function(e,t){this.streak.active=!1,this.unschedule(this.strackEffect);var o=c.FunctionCatchCount.drill;this.bulletMgr.playHit({pos:this.node.getPosition(),hitType:c.HitType.bigBang,catchCount:o,cb:t,bulletIndex:this.bulletInfo.bulletIndex,bomb:c.bombType.drill,playerId:e}),this.bulletMgr.recycleBullet(this)},t.prototype.nextStep=function(){},t.prototype.beforDestroy=function(){},t.prototype.ImmediatelyDestroy=function(){this.bulletMgr.recycleBullet(this)},t.prototype.onDestroy=function(){cc.error("onDestroy GameBulletDrill=="),this.unscheduleAllCallbacks()},r([u(cc.Node)],t.prototype,"flameParent",void 0),r([u(cc.Node)],t.prototype,"streak",void 0),r([u(cc.Animation)],t.prototype,"bullerAni",void 0),r([l],t)}(s.default);o.default=p,cc._RF.pop()},{"./FISHO_GameBulletBase":"FISHO_GameBulletBase","./FISHO_GameDefine":"FISHO_GameDefine","./FISHO_PoolManager":"FISHO_PoolManager"}],FISHO_GameBulletHit:[function(e,t,o){"use strict";cc._RF.push(t,"47626Bo31ZKfYIKUCLcCc60","FISHO_GameBulletHit");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,o=t&&e[t],i=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./FISHO_GameDefine"),a=cc._decorator,h=a.ccclass,l=a.menu,u=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletManager=null,t.ani=null,t.isCollider=!1,t.collider=null,t.isCheckCollide=!1,t.bulletIndex=0,t.drillCallbaer=null,t.currType=-1,t.catchCount=0,t.catchFishMap=new Map,t.playerId=0,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.onLoad=function(){this.collider=this.node.getComponent(cc.Collider),this.ani=this.node.getComponent(cc.Animation)},t.prototype.getCatchfishCount=function(e){switch(e){case c.bombType.drill:return c.FunctionCatchCount.drill;case c.bombType.superBomb:return c.FunctionCatchCount.superBomb;case c.bombType.mermaid:return c.FunctionCatchCount.mermaid}},t.prototype.playHit=function(e,t,o,i,n,r){if(void 0===t&&(t=c.HitType.normalHit),this.bulletIndex=e,this.drillCallbaer=i,this.isCollider=t==c.HitType.bigBang,this.currType=n,this.catchFishMap.clear(),this.playerId=r,this.isCollider){this.game.iAudioPlayer.play_sound("bombHit"),this.node.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.CUSTOM;var s=n==c.bombType.mermaid?5:7;this.node.setContentSize(185*s,197*s),this.catchCount=o,this.ani.play(c.HitType[t]),this.collider.enabled=!0,this.isCheckCollide=!0,this.game.gameScene.shakeEffect(.5)}else this.node.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.TRIMMED,this.isCheckCollide=!1,this.collider.enabled=!1,this.ani.play(c.HitType[t])},t.prototype.onHitFinish=function(){var e,t;if(this.bulletManager)this.bulletManager.onHitFinish(this);else{if(this.isCollider&&this.game.gameId==this.playerId){for(var o=[],i=0;i<this.catchCount;i++)o[i]=0;var n=0;try{for(var r=s(this.catchFishMap.keys()),a=r.next();!a.done;a=r.next()){var h=a.value;o[n]=h,n++}}catch(l){e={error:l}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this.game.iGameBase.EmitEvent(c.EventCode.FunctionCatchFishs,{wChairID:this.game.iGameBase.UserManager_getChairID(),dwBulletIndex:this.bulletIndex,dwFishIndex:o,cbFishCount:n})}this.drillCallbaer&&this.drillCallbaer.exec(),this.node.destroy()}},t.prototype.lateUpdate=function(){if(this.isCheckCollide){var e=this.game._quadCollision.check(this.game.fishMgr.getGameFish,this.collider),t=e.length;if(t>0)for(var o=0;o<t;o++){var i=e[o];i.isCanCatch&&!this.catchFishMap.has(i.fishInfo.dwFishIndex)&&this.catchFishMap.size<this.catchCount&&(i.fishInfo.nFishKindID<301||i.fishInfo.nFishKindID>307)&&i.checkInScreenRegion()&&(this.catchFishMap.set(i.fishInfo.dwFishIndex,i),this.catchFishMap.size>=this.catchCount&&(this.isCheckCollide=!1))}}},r([h,l("FISHO/GameBulletHit_DEMO")],t)}(cc.Component));o.default=u,cc._RF.pop()},{"./FISHO_GameDefine":"FISHO_GameDefine"}],FISHO_GameBullet:[function(e,t,o){"use strict";cc._RF.push(t,"dc49fz0nNxFRokMXKciK8sT","FISHO_GameBullet");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./FISHO_GameBulletBase"),c=e("./FISHO_GameDefine"),a=cc._decorator,h=a.ccclass,l=a.menu,u=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currSpeed=c.BulletGridSpeed,t}return n(t,e),t.prototype.init=function(t,o){e.prototype.init.call(this,t,o),this.updateSpeed()},t.prototype.updateSpeed=function(){e.prototype.updateSpeed.call(this)},t.prototype.updateMove=function(t){return e.prototype.updateMove.call(this,t)&&(this.collider.enabled=!1,this.bulletMgr.recycleBullet(this),this.bulletMgr.playHit({pos:this.node.getPosition(),hitType:c.HitType.normalHit,catchCount:0})),!1},r([h,l("FISHO/GameBullet_DEMO")],t)}(s.default));o.default=u,cc._RF.pop()},{"./FISHO_GameBulletBase":"FISHO_GameBulletBase","./FISHO_GameDefine":"FISHO_GameDefine"}],FISHO_GameDefine:[function(e,t,o){"use strict";var i,n;cc._RF.push(t,"0392e/BVYNM77dy0wpLomfY","FISHO_GameDefine"),Object.defineProperty(o,"__esModule",{value:!0}),o.DisableFireFunction=o.getEffectWeightFishId=o.getWeightByType=o.ResetType=o.FishDieType=o.HitType=o.bombType=o.FunctionWeight=o.FunctionCatchCount=o.functionType=o.EventCode=o.FishAnimType_DEMO=o.FishType_DEMO=o.BulletGridSpeed=o.fireTime=o.FrameTime=void 0,o.FrameTime=.03,o.fireTime=.3,o.BulletGridSpeed=.7,function(e){e[e.normal=1]="normal",e[e.boss=2]="boss",e[e.gold=3]="gold",e[e.bomb=4]="bomb",e[e.wang=5]="wang",e[e.bomb_effect=6]="bomb_effect",e[e.combination_1=100]="combination_1",e[e.combination_2=101]="combination_2",e[e.combination_3=102]="combination_3",e[e.combination_4=103]="combination_4"}(o.FishType_DEMO||(o.FishType_DEMO={})),function(e){e[e.none=-1]="none",e[e.spine=0]="spine",e[e.bai_zheng=1]="bai_zheng",e[e.no_ani=2]="no_ani",e[e.combination=3]="combination",e[e.absolute=4]="absolute",e[e.vortex=5]="vortex"}(o.FishAnimType_DEMO||(o.FishAnimType_DEMO={})),function(e){e.ShowGamePlaza="ShowGamePlaza",e.SendCatchFish="SendCatchFish",e.DrillCatchFishs="DrillCatchFishs",e.FunctionCatchFishs="FunctionCatchFishs",e.MyFire="MyFire",e.sendEnterGame="sendEnterGame",e.changeGun="changeGun",e.autoScendlockFish="autoScendlockFish",e.converProperty="converProperty",e.SendAddScore="SendAddScore",e.sendReady="sendReady",e.sendGiveUP="sendGiveUP"}(o.EventCode||(o.EventCode={})),function(e){e[e.normal=0]="normal",e[e.drill=1]="drill",e[e.superBomb=2]="superBomb",e[e.laser=3]="laser",e[e.flash=4]="flash",e[e.vortex=5]="vortex",e[e.lighting=6]="lighting",e[e.thunderDragon=7]="thunderDragon",e[e.bullSmash=8]="bullSmash",e[e.mermaid=9]="mermaid",e[e.phoenix=10]="phoenix",e[e.whaleking=11]="whaleking"}(i=o.functionType||(o.functionType={})),function(e){e[e.drill=10]="drill",e[e.superBomb=20]="superBomb",e[e.mermaid=40]="mermaid",e[e.cowMin=15]="cowMin",e[e.cowMax=30]="cowMax",e[e.dragon=40]="dragon",e[e.flash=20]="flash",e[e.laser=20]="laser"}(o.FunctionCatchCount||(o.FunctionCatchCount={})),function(e){e[e.drill=1]="drill",e[e.superBomb=2]="superBomb",e[e.laser=4]="laser",e[e.dial=8]="dial",e[e.flash=16]="flash",e[e.vortex=32]="vortex",e[e.lighting=64]="lighting",e[e.thunderDragon=128]="thunderDragon",e[e.bullSmash=256]="bullSmash",e[e.mermaid=512]="mermaid",e[e.phoenix=1024]="phoenix",e[e.whaleking=2048]="whaleking"}(n=o.FunctionWeight||(o.FunctionWeight={})),function(e){e[e.drill=0]="drill",e[e.superBomb=1]="superBomb",e[e.mermaid=2]="mermaid"}(o.bombType||(o.bombType={})),function(e){e[e.normalHit=0]="normalHit",e[e.drillHit=1]="drillHit",e[e.bigBang=2]="bigBang"}(o.HitType||(o.HitType={})),function(e){e[e.normal=0]="normal",e[e.vortex=1]="vortex",e[e.shandian=2]="shandian"}(o.FishDieType||(o.FishDieType={})),function(e){e[e.gameBg=0]="gameBg",e[e.changeBg=1]="changeBg"}(o.ResetType||(o.ResetType={})),o.getWeightByType=function(e){return n[i[e]]?n[i[e]]:(cc.error("\u4e0d\u5b58\u5728\u5bf9\u5e94\u7684\u6743\u4f4d\uff1a",i[e]),0)};var r=new Map([[209,n.whaleking],[301,n.vortex],[302,n.lighting],[304,n.laser],[305,n.drill],[306,n.superBomb],[307,n.flash],[308,n.bullSmash],[309,n.thunderDragon],[401,n.mermaid],[601,n.phoenix]]);o.getEffectWeightFishId=function(e){var t=-1;return r.has(e)&&(t=r.get(e)),t},o.DisableFireFunction=[n.drill,n.flash,n.laser,n.bullSmash,n.mermaid,n.lighting,n.superBomb,n.thunderDragon,n.vortex],cc._RF.pop()},{}],FISHO_GameFishShadow:[function(e,t,o){"use strict";cc._RF.push(t,"78fa61CU5RIW79paSx8ppsB","FISHO_GameFishShadow");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./FISHO_PoolManager"),c=cc._decorator,a=c.ccclass,h=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isAnim=!1,t.skele=null,t.type=s.NodeType.none,t.sp=null,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.init=function(e,t,o){void 0===o&&(o=!1),this.isAnim?this.sp=this.node.getComponent(cc.Sprite):(o?(this.node.position=e.parent.position,this.skele.node.setPosition(e.position)):this.skele.node.setPosition(cc.v2()),this.node.angle=e.angle,this.node.scale=e.scale,this.skele.node.angle=0,this.skele.node.scale=e.scale,this.skele.skeletonData=t.skeletonData,this.skele.setAnimation(0,t.animation,!o),this.skele.timeScale=t.timeScale,this.skele.paused=!1,this.skele.setMaterial(0,this.game.fishMgr.shadowMaterial))},t.prototype.set=function(e,t,o,i,n){this.node.setPosition(e),this.node.scale=t,this.node.angle=i,this.node.opacity=o,this.isAnim&&(this.sp.spriteFrame=n)},t.prototype.stop=function(){this.isAnim||(this.skele.paused=!0)},t.prototype.recycle=function(){this.isAnim||(this.skele.setMaterial(0,null),this.skele.paused=!0,this.skele.skeletonData=null),this.game.poolMgr.Enqueue(this.node,this.type)},r([h],t.prototype,"isAnim",void 0),r([h({type:sp.Skeleton,visible:function(){return!this.isAnim}})],t.prototype,"skele",void 0),r([h({type:cc.Enum(s.NodeType)})],t.prototype,"type",void 0),r([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{"./FISHO_PoolManager":"FISHO_PoolManager"}],FISHO_GameFish:[function(e,t,o){"use strict";cc._RF.push(t,"b9ad09sxa1Gk40NeyNg5hcV","FISHO_GameFish");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,o=t&&e[t],i=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./FISHO_FishKindMap"),a=e("./FISHO_GameDefine"),h=e("./FISHO_ResourceMgr"),l=cc._decorator,u=l.ccclass,p=l.menu,d=l.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isShake=!1,t.goldBombPointArray=[],t.isAnimMove=!1,t.IsDragon=!1,t.colliderArray=[],t.isMuchPoint=!1,t.lockNode=[],t.isAnim=!1,t.moveSP=null,t.anim=null,t.fishSkeleton=null,t.collider=null,t.fishSprite=null,t.shadow=null,t.functionCircle=null,t.UpSideDown=!1,t.FishPath=null,t.FishPathCrashSteps=null,t.FishCrashExtend=null,t.CenterGrid=cc.v2(),t.CrashGrid=[],t.CurrentStep=0,t.NextModelStep=-1,t.NextModelStepIndex=-1,t.fishInfo=null,t.fishKind=null,t.Caught=!0,t.isCanCatch=!1,t.Locked=!1,t._isChangeSpeeding=!1,t.targetMoveSpeed=0,t._recycleHandle=null,t.fish=null,t.cowMoveSoundId=-1,t.phoenixSoundIndex=1,t.isplaying=!1,t.speedupTick=0,t.isCanSpeedup=!0,t.isSpeeduping=!1,t.sustainTime=2.5,t.spineSpeed=1,t.currExistTime=0,t.startSpeedupStep=0,t.targetSpineSpedd=2.5,t.frameSpeed=0,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.onLoad=function(){this.node.group="fish",this.fish=this.node.children[0],this.anim=this.fish.getComponent(cc.Animation),this.anim?this.isAnim=!0:this.isAnim=!1,this.isAnim?(this.anim=this.fish.getComponent(cc.Animation),this.collider=this.fish.getComponent(cc.Collider),this.fishSprite=this.fish.getComponent(cc.Sprite)):(this.fishSkeleton=this.fish.getComponent(sp.Skeleton),this.IsDragon||(this.collider=this.node.getComponent(cc.Collider))),this.isMuchPoint||(this.lockNode[0]=this.fish.getChildByName("center"))},t.prototype.playMoveAni=function(){var e=this,t=this;this.isAnim?(this.anim.play("move").wrapMode=cc.WrapMode.Loop,this.fishKind.isNoneShadow||this.shadow.init(this.fish)):(this.isAnimMove&&(this.fishSkeleton.setCompleteListener(function(){t._recycleHandle&&t._recycleHandle.exec(t,!1)}),this.CurrentStep=0,this.setPosition()),208==this.fishKind.id&&(this.fishSkeleton.skeletonData=this.game.resourMgr.iMrgBase.getCommonRes("208/\u9cb8\u9c7c",h.CommonResType.fishSkeleton,sp.SkeletonData),this.fishSkeleton.setAnimation(0,"Sprite",!0)),308==this.fishKind.id?(this.cowMoveSoundId=this.game.iAudioPlayer.play_sound("cowMove",!0),this.game.gameScene.playCowShake()):401==this.fishKind.id?(this.scheduleOnce(this.playSound,.8),this.fishSkeleton.setCompleteListener(function(){e.scheduleOnce(e.playSound,.8)})):601==this.fishKind.id&&(this.phoenixSoundIndex=1,this.scheduleOnce(this.playSound,.6),this.fishSkeleton.setCompleteListener(function(){e.phoenixSoundIndex++,e.phoenixSoundIndex>2&&(e.phoenixSoundIndex=1),e.scheduleOnce(e.playSound,.6)})),this.fishSkeleton.timeScale=this.IsDragon?.5:1,this.fishSkeleton.paused=!1,this.fishKind.isNoneShadow||this.shadow.init(this.fish,this.fishSkeleton,this.isAnimMove))},t.prototype.playSound=function(){401==this.fishKind.id?this.game.iAudioPlayer.play_sound("mermaid"):601==this.fishKind.id&&this.game.iAudioPlayer.play_sound("phoenixWing"+this.phoenixSoundIndex,!1,.7)},t.prototype.stopSound=function(){this.unschedule(this.playSound),this.cowMoveSoundId>-1&&(this.game.iAudioPlayer.stop_sound(this.cowMoveSoundId),this.cowMoveSoundId=-1)},t.prototype.enterChangeSceneState=function(){if(!this.Caught){var e=this.FishPath.len-this.CurrentStep;this.targetMoveSpeed=1.5/e,this._isChangeSpeeding=!0,this.isCanCatch=!1,this.activeCollider(!1);var t=this;this.functionCircle&&cc.tween(this.functionCircle).to(1.5,{opacity:0}).start(),cc.tween(this.node).to(1.5,{opacity:0}).call(function(){t._recycleHandle&&t._recycleHandle.exec(t,!1)}).start()}},t.prototype.enterDie=function(){this.isCanCatch=!1,this.Caught=!0,this.stopSound(),this.isAnim?this.anim.stop("move"):(this.fishSkeleton.paused=!0,this.shadow&&this.shadow.stop()),this.activeCollider(!1),this.game.mCrashGrid.removeCrashItem(this,this.fishInfo.dwFishIndex)},Object.defineProperty(t.prototype,"goldCount",{get:function(){return this.fishKind.goldCount},enumerable:!1,configurable:!0}),t.prototype.isSpecialAnim=function(){return this.fishInfo.nSpecialFishKindID<=0&&this.fishKind.id>=204&&this.fishKind.id<=209},t.prototype.getCurrWorldPos=function(){return this.node.convertToWorldSpaceAR(cc.v2())},t.prototype.playDieAni=function(e,t,o){void 0===o&&(o=!1),this.enterDie();var i=c.FishKindMap[this.fishInfo.nFishKindID].animType,n=this.node.angle;this.functionCircle&&(this.functionCircle.destroy(),this.functionCircle=null);var r=this;switch(i){case a.FishAnimType_DEMO.spine:if(this.isAnim){var s=this.anim.play("die");if(s){this.game.iAudioPlayer.play_sound("show2"),s.wrapMode=cc.WrapMode.Loop,s.repeatCount=1/0,t&&t.exec(r,o);var l=cc.tween(this.node).to(.25,{scale:0}).call(function(){s.stop(),r._recycleHandle&&r._recycleHandle.exec(r,!1)});this.scheduleOnce(this.dieFishMoveFort.bind(this,e,l),.35)}else cc.error("\u8fd9\u4e2a\u9c7c\u6ca1\u6709\u6b7b\u4ea1\u52a8\u753b\uff1a",this.fishKind.id),r._recycleHandle&&r._recycleHandle.exec(r,!1)}else this.fishSkeleton.skeletonData=this.game.resourMgr.iMrgBase.getCommonRes(this.fishKind.id+"-die/die",h.CommonResType.fishSkeleton,sp.SkeletonData),this.fishSkeleton.setAnimation(0,"die",!0),this.fishSkeleton.paused=!1,t&&t.exec(r,o),l=cc.tween(this.node).to(.25,{scale:0}).call(function(){r.fishSkeleton.paused=!0,r._recycleHandle&&r._recycleHandle.exec(r,!1)}),this.scheduleOnce(this.dieFishMoveFort.bind(this,e,l),.35);break;case a.FishAnimType_DEMO.bai_zheng:t&&t.exec(this,o),cc.tween(this.node).sequence(cc.scaleTo(.1,1.5),cc.repeat(cc.sequence(cc.rotateTo(.13,n+60),cc.rotateTo(.13,n),cc.rotateTo(.13,n-60),cc.rotateTo(.13,n)),4),cc.scaleTo(.1,1),cc.callFunc(function(){r._recycleHandle&&r._recycleHandle.exec(r,!1)})).start();break;case a.FishAnimType_DEMO.no_ani:t&&t.exec(this,o),cc.tween(this.node).sequence(this.playFadeOut(.2,1.2),cc.callFunc(function(){r._recycleHandle&&r._recycleHandle.exec(r,!1)})).start();break;case a.FishAnimType_DEMO.combination:t&&t.exec(this,o),cc.tween(this.node).sequence(cc.spawn(cc.rotateTo(2.5,n+720),cc.scaleTo(2.5,0),cc.fadeOut(2.5)),cc.callFunc(function(){r._recycleHandle&&r._recycleHandle.exec(r,!1)})).start();break;default:t&&t.exec(this,o),r._recycleHandle&&r._recycleHandle.exec(r,!1)}},t.prototype.playVortex=function(e,t,o){void 0===o&&(o=!1),this.enterDie(),this.functionCircle&&(this.functionCircle.destroy(),this.functionCircle=null),o&&this.game.gameScene.shakeEffect(.5);var i=this;e=this.node.parent.convertToNodeSpaceAR(e),cc.tween(this.node).parallel(cc.moveTo(1.5,e),cc.rotateTo(3.5,-1080)).call(function(){t&&t.exec(i),i._recycleHandle&&i._recycleHandle.exec(i,!1)}).start()},t.prototype.playShandianDie=function(e){this.functionCircle.scale=2,e=this.node.parent.convertToNodeSpaceAR(e);var t=cc.tween(this.node).parallel(cc.moveTo(1.5,e),cc.rotateBy(1.5,-180));cc.tween(this.functionCircle).parallel(cc.scaleTo(.5,.5),cc.tintTo(.5,cc.Color.WHITE.r,cc.Color.WHITE.g,cc.Color.WHITE.b)).call(function(){t.start()}).start()},t.prototype.dieFishMoveFort=function(e,t){var o=this,i=e.gunbarrel.convertToWorldSpaceAR(cc.v2()),n=this.game.fishMgr.node.convertToNodeSpaceAR(i),r=cc.v2(n.x,e.IsOnTop?n.y-150:n.y+150);cc.tween(this.node).sequence(cc.spawn(cc.moveTo(.8,r),cc.rotateTo(1,0)),cc.delayTime(1),cc.callFunc(function(){o.game.iAudioPlayer.play_sound("show"),t.start()})).start()},t.prototype.playFadeOut=function(e,t){return cc.sequence(cc.delayTime(e),cc.fadeOut(t))},t.prototype.playByHit=function(){var e=this;if(!this.isplaying){this.isplaying=!0;var t=cc.tween().to(.2,{color:cc.Color.RED}),o=cc.tween().to(.1,{color:cc.Color.WHITE});cc.tween(this.fish).sequence(t,o).call(function(){e.isplaying=!1}).start()}},t.prototype.updateCrashGrid=function(){this.Caught||(this.FishPathCrashSteps&&this.CurrentStep==this.NextModelStep?this.updateCrashGridByStep():this.updateGrashGridByPath())},t.prototype.updateGrashGridByPath=function(){var e=Math.floor(this.CenterGrid.x),t=Math.floor(this.CenterGrid.y);if(this.game.mCrashGrid.removeCrashItem(this,this.fishInfo.dwFishIndex),this.game.mCrashGrid.isCrashGrid(e,t)){var o=this.node.angle;o<0&&(o+=360),o>360&&(o-=360),o>90&&o<=180?o=180-o:o>180&&o<=270?o-=180:o>270&&o<=360&&(o=360-o),this.CrashGrid=[],this.CrashGrid.push(cc.v2(e,t)),this.game.mCrashGrid.insertCrashItem(this,this.fishInfo.dwFishIndex)}else this.CrashGrid=[]},t.prototype.updateCrashGridByStep=function(){var e,t;this.game.mCrashGrid.removeCrashItem(this,this.fishInfo.dwFishIndex),this.CrashGrid=[];try{for(var o=s(this.FishPathCrashSteps.crashSteps[this.NextModelStepIndex].crash),i=o.next();!i.done;i=o.next()){var n=i.value;this.CrashGrid.push(cc.v2(n.row,n.col))}}catch(r){e={error:r}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}this.game.mCrashGrid.insertCrashItem(this,this.fishInfo.dwFishIndex),this.updateNextModelStep(this.CurrentStep)},t.prototype.initSpecialFish=function(e,t){var o=e.getComponent(cc.Animation);this.functionCircle=e,301==t?(o.play("cyclone"),this.functionCircle.color=cc.Color.WHITE,e.setContentSize(cc.size(this.fishKind.vortexSize,this.fishKind.vortexSize))):302==t&&(o.play("sandian"),this.functionCircle.color=new cc.Color(226,246,106,255),e.setContentSize(cc.size(this.fishKind.lightSize,this.fishKind.lightSize))),this.fishKind.lightSize&&this.fishKind.vortexSize||cc.error("\u8fd9\u4e2aid\uff1a"+this.fishKind.id+"  \u7684\u9c7c\u6ca1\u6709\u8bbe\u7f6e\u5149\u5708\u5927\u5c0f")},t.prototype.activeCollider=function(e){this.IsDragon?this.colliderArray.forEach(function(t){t.enabled=e}):this.collider.enabled=e},t.prototype.initWithFishInfo=function(e,t,o,i){this.node.scale=1,this.Locked=!1,this.UpSideDown=t,this.fishInfo=e,this.fishKind=e.nSpecialFishKindID>0?c.FishKindMap[e.nSpecialFishKindID]:c.FishKindMap[e.nFishKindID],this.originaSpeed=this.fishKind.moveSpeed?this.fishKind.moveSpeed:a.FrameTime,this.moveSpeed=this.originaSpeed,this.CurrentStep=e.wPath_Index,this.NextModelStep=-1,this.NextModelStepIndex=-1,this.shadow=o,this.setNode(e),this.activeCollider(!0),this.FishPath=this.game.fishPathMgr.FishPath[e.wPathID],this.FishPath||cc.error("\u6ca1\u6709\u83b7\u53d6\u5230\u8fd9\u4e2a\u8def\u5f84\uff1a"+e.wPathID),this.node.opacity=255,this.fish.color=cc.Color.WHITE,this._recycleHandle=i,this.Caught=!1,this.isCanCatch=!0,this.isplaying=!1,this.isCanSpeedup=!0,this.playMoveAni()},t.prototype.setPosition=function(){this.CenterGrid.x=this.FishPath.row[this.CurrentStep],this.CenterGrid.y=this.FishPath.col[this.CurrentStep];var e=this.game.mCrashGrid.getGridPos(this.CenterGrid.x,this.CenterGrid.y);if(e){this.UpSideDown&&(e.y=cc.visibleRect.height-e.y);var t=this.FishPath.angle[this.CurrentStep];this.node.setPosition(e),this.UpSideDown?this.node.angle=-t:this.node.angle=t,this.updateCrashGrid()}else cc.error("updateMove",this.CenterGrid.x,this.CenterGrid.y,this.fishInfo)},t.prototype.updateMove=function(e,t){return this.customUpdate(e,t),!(this.isAnimMove||this.Caught||(this.FishPath?this.CurrentStep>=this.FishPath.len||this.CurrentStep>=this.FishPath.row.length||this.CurrentStep>=this.FishPath.col.length||(this.isSpeeduping?this.CurrentStep+=Math.floor((e-this.fishInfo.dwCreteTicket-this.speedupTick)/1e3/this.moveSpeed):this.CurrentStep=Math.floor((e-this.fishInfo.dwCreteTicket)/1e3/this.moveSpeed),!(this.CurrentStep>=this.FishPath.len||this.CurrentStep>=this.FishPath.row.length||this.CurrentStep>=this.FishPath.col.length)&&(this.setPosition(),1)):(cc.error("\u8def\u5f84ID:"+this.fishInfo.wPathID),1)))},t.prototype.updateNextModelStep=function(e){if(this.FishPathCrashSteps){for(var t=0;t<this.FishPathCrashSteps.crashSteps.length;t++)if(e<this.FishPathCrashSteps.crashSteps[t].id)return this.NextModelStep=this.FishPathCrashSteps.crashSteps[t].id,void(this.NextModelStepIndex=t);this.NextModelStep=this.FishPathCrashSteps.e+1,this.NextModelStepIndex=-1}},t.prototype.shake=function(e){var t=this,o=this.node.getPosition();cc.tween(this.node).sequence(cc.moveTo(.1,cc.v2(o.x+3,o.y+3)),cc.moveTo(.1,cc.v2(o.x-3,o.y-3)),cc.moveTo(.1,cc.v2(o.x+3,o.y+3)),cc.moveTo(.1,cc.v2(o.x-3,o.y-3)),cc.moveTo(.1,cc.v2(o.x+3,o.y+3)),cc.moveTo(.1,cc.v2(o.x-3,o.y-3)),cc.moveTo(.1,cc.v2(o.x+3,o.y+3)),cc.moveTo(.1,cc.v2(o.x-3,o.y-3)),cc.moveTo(.1,o)).call(function(){t.node.opacity=0,e&&e.exec()}).start()},t.prototype.checkLock=function(e){return!(this.Caught||!this.isCanCatch||!this.fishInfo||this.fishInfo.dwFishIndex!=e)},t.prototype.checkInCrashGrid=function(){return!!this.game.mCrashGrid.isCrashGrid(this.CenterGrid.x,this.CenterGrid.y)},t.prototype.checkInScreenRegion=function(){for(var e=0;e<this.lockNode.length;e++)if(this.lockNode[e]){var t=this.lockNode[e].convertToWorldSpaceAR(cc.v2());if(t.x>=0&&t.x<=cc.winSize.width&&t.y>=0&&t.y<=cc.winSize.height)return this.lockNode[e]}return null},t.prototype.recycle=function(){return 308==this.fishKind.id&&(this.stopSound(),this.game.gameScene.stopCowShake()),this._isChangeSpeeding=!1,this.isCanCatch=!1,this.Caught=!0,this.isAnim?(this.anim.stop(),this.anim.node.angle=0):(this.fishSkeleton.setCompleteListener(null),this.fishSkeleton.paused=!0,this.fishSkeleton.node.angle=0),this.functionCircle&&(this.functionCircle.destroy(),this.functionCircle=null),this.node.removeFromParent(!0),this.game.mCrashGrid.removeCrashItem(this,this.fishInfo.dwFishIndex),this.node.angle=0,this.FishPath=null,this.FishCrashExtend=null,this.FishPathCrashSteps=null,this.CenterGrid.x=0,this.CenterGrid.y=0,this.CrashGrid=[],this.shadow&&(this.shadow.recycle(),this.shadow=null),this.isCanSpeedup=!0,this.isSpeeduping=!1,this.CurrentStep=0,this},t.prototype.customUpdate=function(e,t){if(this._isChangeSpeeding&&(this.moveSpeed-=this.targetMoveSpeed*t),this.shadow){var o=this.isAnim?this.fishSprite.spriteFrame:null;this.shadow.set(this.node.getPosition(),this.node.scale,this.node.opacity,this.node.angle,o)}this.functionCircle&&this.functionCircle.setPosition(this.node.position)},t.prototype.setNode=function(e){if(204==e.nFishKindID||205==e.nFishKindID||206==e.nFishKindID||207==e.nFishKindID)this.isShake=!0,this.isAnim=!0,this.goldBombPointArray=new Array(1),this.goldBombPointArray[0]=this.fish.getChildByName("center");else if(208==e.nFishKindID)this.isShake=!0,this.goldBombPointArray=new Array(1),this.goldBombPointArray[0]=this.fish.getChildByName("center");else if(209==e.nFishKindID)this.isShake=!0,this.isMuchPoint=!0,this.lockNode=new Array(3),this.lockNode[0]=this.fish.getChildByName("center"),this.lockNode[1]=cc.find("ATTACHED_NODE_TREE/ATTACHED_NODE:root/ATTACHED_NODE:\u4e3b\u4f533/ATTACHED_NODE:\u4e3b\u4f534/ATTACHED_NODE:\u4e3b\u4f537",this.fish),this.lockNode[2]=cc.find("ATTACHED_NODE_TREE/ATTACHED_NODE:root/ATTACHED_NODE:\u4e3b\u4f53/ATTACHED_NODE:\u4e3b\u4f531/ATTACHED_NODE:\u4e3b\u4f532",this.fish),this.goldBombPointArray=new Array(4),this.goldBombPointArray[0]=this.fish.getChildByName("1"),this.goldBombPointArray[1]=this.fish.getChildByName("2"),this.goldBombPointArray[2]=this.fish.getChildByName("3"),this.goldBombPointArray[3]=this.fish.getChildByName("4");else if(308==e.nFishKindID)this.isMuchPoint=!0,this.lockNode=new Array(3),this.lockNode[0]=this.fish.getChildByName("center"),this.lockNode[1]=cc.find("ATTACHED_NODE_TREE/ATTACHED_NODE:root/ATTACHED_NODE:\u8eab\u4f53/ATTACHED_NODE:\u8eab\u4f531/ATTACHED_NODE:\u540e\u817f/ATTACHED_NODE:\u5c3e\u5df4/ATTACHED_NODE:\u5c3e\u5df41/ATTACHED_NODE:\u5c3e\u5df42",this.fish),this.lockNode[2]=cc.find("ATTACHED_NODE_TREE/ATTACHED_NODE:root/ATTACHED_NODE:\u8eab\u4f532/ATTACHED_NODE:\u524d\u817f/ATTACHED_NODE:\u5934",this.fish);else if(401==e.nFishKindID){this.isMuchPoint=!0,this.isShake=!0,this.lockNode=new Array(3),this.lockNode[0]=this.fish.getChildByName("4"),this.lockNode[1]=this.fish.getChildByName("7"),this.lockNode[2]=this.fish.getChildByName("1"),this.goldBombPointArray=new Array(7);for(var t=0;t<this.goldBombPointArray.length;t++)this.goldBombPointArray[t]=this.fish.getChildByName(String(t+1))}else if(309==e.nFishKindID){this.isAnimMove=!0,this.IsDragon=!0,this.isAnim=!1,this.isMuchPoint=!0,this.isShake=!0;var o=cc.find("ATTACHED_NODE_TREE/ATTACHED_NODE:root/ATTACHED_NODE:bone_root/ATTACHED_NODE:bone2",this.fish),i=cc.find("ATTACHED_NODE:head/ATTACHED_NODE:bone22/point1",o),n=cc.find("ATTACHED_NODE:bone3/ATTACHED_NODE:bone4/ATTACHED_NODE:bone5/ATTACHED_NODE:bone6/ATTACHED_NODE:bone7/point2",o),r=cc.find("ATTACHED_NODE:bone3/ATTACHED_NODE:bone4/ATTACHED_NODE:bone5/ATTACHED_NODE:bone6/ATTACHED_NODE:bone7/ATTACHED_NODE:bone8/ATTACHED_NODE:bone9/ATTACHED_NODE:bone10/ATTACHED_NODE:bone11/ATTACHED_NODE:bone12/ATTACHED_NODE:bone13/ATTACHED_NODE:bone40/ATTACHED_NODE:bone41/point3",o),s=cc.find("ATTACHED_NODE:bone3/ATTACHED_NODE:bone4/ATTACHED_NODE:bone5/ATTACHED_NODE:bone6/ATTACHED_NODE:bone7/ATTACHED_NODE:bone8/ATTACHED_NODE:bone9/ATTACHED_NODE:bone10/ATTACHED_NODE:bone11/ATTACHED_NODE:bone12/ATTACHED_NODE:bone13/ATTACHED_NODE:bone14/ATTACHED_NODE:bone15/ATTACHED_NODE:bone16/ATTACHED_NODE:bone17/ATTACHED_NODE:bone18/ATTACHED_NODE:bone19/point4",o);this.lockNode=new Array(4),this.lockNode[0]=i,this.lockNode[1]=n,this.lockNode[2]=r,this.lockNode[3]=s,this.goldBombPointArray=new Array(4),this.goldBombPointArray[0]=i,this.goldBombPointArray[1]=n,this.goldBombPointArray[2]=r,this.goldBombPointArray[3]=s;var c=cc.find("ATTACHED_NODE:bone3",o),a=cc.find("ATTACHED_NODE:bone4/ATTACHED_NODE:bone5/ATTACHED_NODE:bone6",c),h=cc.find("ATTACHED_NODE:bone7/ATTACHED_NODE:bone8",a),l=cc.find("ATTACHED_NODE:bone9/ATTACHED_NODE:bone10/ATTACHED_NODE:bone11",h),u=cc.find("ATTACHED_NODE:bone12",l),p=cc.find("ATTACHED_NODE:bone13/ATTACHED_NODE:bone40/ATTACHED_NODE:001/ATTACHED_NODE:002/collider",u),d=cc.find("ATTACHED_NODE:bone13/ATTACHED_NODE:bone40/ATTACHED_NODE:bone41/collider",u),f=cc.find("ATTACHED_NODE:bone13/ATTACHED_NODE:bone14/ATTACHED_NODE:bone15/ATTACHED_NODE:firerootA6/ATTACHED_NODE:FireA7/collider",u),y=cc.find("ATTACHED_NODE:bone13/ATTACHED_NODE:bone14/ATTACHED_NODE:bone15/ATTACHED_NODE:bone16/ATTACHED_NODE:bone17/ATTACHED_NODE:bone18/ATTACHED_NODE:firerootA8/collider",u),m=cc.find("ATTACHED_NODE:bone13/ATTACHED_NODE:bone14/ATTACHED_NODE:FireBROOT3/ATTACHED_NODE:FireB2/collider",u),g=cc.find("ATTACHED_NODE:firerootA4/collider",l),_=cc.find("ATTACHED_NODE:FireBROOT5/ATTACHED_NODE:FireB4/collider",h),v=cc.find("ATTACHED_NODE:bone64/ATTACHED_NODE:bone65/collider",a),S=cc.find("ATTACHED_NODE:bone4/ATTACHED_NODE:firerootA2/collider",c),F=cc.find("ATTACHED_NODE:head/ATTACHED_NODE:FireBROOT4/collider",o);this.colliderArray=new Array(10),this.colliderArray[0]=p.getComponent(cc.PolygonCollider),this.colliderArray[1]=d.getComponent(cc.PolygonCollider),this.colliderArray[2]=f.getComponent(cc.PolygonCollider),this.colliderArray[3]=y.getComponent(cc.PolygonCollider),this.colliderArray[4]=m.getComponent(cc.PolygonCollider),this.colliderArray[5]=g.getComponent(cc.PolygonCollider),this.colliderArray[6]=_.getComponent(cc.PolygonCollider),this.colliderArray[7]=v.getComponent(cc.PolygonCollider),this.colliderArray[8]=S.getComponent(cc.PolygonCollider),this.colliderArray[9]=F.getComponent(cc.PolygonCollider)}else if(601==e.nFishKindID){this.isShake=!0,this.isMuchPoint=!0;var b=this.fish.parent.getChildByName("GoldPoints");for(this.goldBombPointArray=new Array(4),t=0;t<10;t++)this.goldBombPointArray[t]=b.getChildByName(String(t+1));for(this.lockNode=new Array(4),t=0;t<10;t++)this.lockNode[t]=this.fish.getChildByName("blowPoint"+(t+1))}},t.prototype.onDestroy=function(){cc.error("onDestroy Fish=="),this.unscheduleAllCallbacks()},r([d({tooltip:"\u662f\u5426\u9707\u52a8"})],t.prototype,"isShake",void 0),r([d({type:[cc.Node],tooltip:"\u7206\u70b8\u91d1\u5e01\u70b9",visible:function(){return this.isShake}})],t.prototype,"goldBombPointArray",void 0),r([d({tooltip:"\u662f\u5426\u52a8\u753b\u63a7\u5236\u79fb\u52a8"})],t.prototype,"isAnimMove",void 0),r([d],t.prototype,"IsDragon",void 0),r([d({type:[cc.Collider],visible:function(){return this.IsDragon}})],t.prototype,"colliderArray",void 0),r([d({tooltip:"\u591a\u4e2a\u9501\u5b9a\u70b9"})],t.prototype,"isMuchPoint",void 0),r([d({type:[cc.Node],tooltip:"\u9501\u5b9a\u70b9",visible:function(){return this.isMuchPoint}})],t.prototype,"lockNode",void 0),r([d],t.prototype,"isAnim",void 0),r([d({type:sp.SkeletonData,visible:function(){return 0==this.isAnim}})],t.prototype,"moveSP",void 0),r([u,p("FISHO/GameFish_DEMO")],t)}(cc.Component);o.default=f,cc._RF.pop()},{"./FISHO_FishKindMap":"FISHO_FishKindMap","./FISHO_GameDefine":"FISHO_GameDefine","./FISHO_ResourceMgr":"FISHO_ResourceMgr"}],FISHO_GameFortGunAni:[function(e,t,o){"use strict";cc._RF.push(t,"f8ad9Yb26xGT7zI6EMG/gKG","FISHO_GameFortGunAni");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./FISHO_GameFort"),c=cc._decorator,a=c.ccclass,h=c.menu,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onFireEnd=function(){var e=this.node.getParent().getParent().getParent();if(e){var t=e.getComponent(s.default);t&&t.playFree()}},r([a,h("FISHO/GameFortGunAni_DEMO")],t)}(cc.Component));o.default=l,cc._RF.pop()},{"./FISHO_GameFort":"FISHO_GameFort"}],FISHO_GameFort:[function(e,t,o){"use strict";cc._RF.push(t,"a4009WMb9pHwr4qOJXCpPiE","FISHO_GameFort");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,o=t&&e[t],i=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var i,n,r=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(c){n={error:c}}finally{try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}return s};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../FISHO_GameLogic"),h=e("./FISHO_FunctionFort"),l=e("./FISHO_GameDefine"),u=e("./effectFunction/FISHO_LaserEffect"),p=e("./effectFunction/FISHO_Laser"),d=cc._decorator,f=d.ccclass,y=d.menu,m=(d.inspector,d.property),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.siteIndex=0,t.normalGun=null,t.electricityGun=null,t.drillGun=null,t.laserGun=null,t.gunbarrel=null,t.bottom=null,t.labelMultiple=null,t.btnAddMultple=null,t.btnSubMultple=null,t.drillLightEffect=null,t.bulletPoint=null,t.countdown=null,t.lblcountdown=null,t.functionFort=null,t.functionObj=null,t.lightningNode=null,t.fireLightFish=null,t.currentPaoIndex=1,t.laserEffect=null,t.UpSideDown=!1,t._isOnTop=!1,t._UserItem=null,t.lockFish=null,t.AutoFire=!1,t.fireTime=0,t.aimPos=cc.v2(),t.firePos=null,t.bulletIndex=0,t.drillPos=cc.v2(),t.isPress=!1,t.isCanstop=!1,t.isCanFire=!0,t.isWaitfire=!1,t.currFunctionType=l.functionType.normal,t._isActive=!1,t._currEffectWeight=0,t.effectMap=null,t._effectMultipleMap=null,t._currAngle=0,t.timer=9,t.isPlayRaigun=!1,t.playPastTime=0,t.raigunSoundId=-1,t}return n(t,e),Object.defineProperty(t.prototype,"IsOnTop",{get:function(){return this._isOnTop},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"chairId",{get:function(){return this._UserItem.getChairID()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gameId",{get:function(){return this._UserItem.getGameID()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"effectMultipleMap",{get:function(){return this._effectMultipleMap},enumerable:!1,configurable:!0}),t.prototype.setGame=function(e){this.game=e,this.LockFishIndex=a.INVALID_DWORD},t.prototype.start=function(){cc.error("==start==="),this.functionFort.fort=this,this._isOnTop=180==this.node.angle,this.drillPos=this.drillGun.node.getPosition();var e=cc.v2();this.bulletPoint.convertToWorldSpaceAR(cc.v2(),e),this.firePos=this.game.fishMgr.node.convertToNodeSpaceAR(e),this.lightningNode=this.electricityGun.getChildByName("lightNode"),this.effectMap=new Map,this._effectMultipleMap=new Map},t.prototype.onEnable=function(){this.raigunSoundId=-1},t.prototype.onDisable=function(){this._UserItem&&this._UserItem.getGameID()==this.game.gameId&&(this.normalGun.node.off("click",this.clickGun,this),this.electricityGun.off("click",this.clickGun,this),this.normalGun.node.removeComponent(cc.Button),this.electricityGun.removeComponent(cc.Button)),this._isActive=!1},t.prototype.initInfo=function(e,t,o){this.currMultiple=e,this.currScore=t,this.labelMultiple.string=this.game.iGameBase.getNum(this.currMultiple,!0),this.currentPaoIndex=o},t.prototype.init=function(e,t){void 0===t&&(t=1),this._isActive||(this._currAngle=0,this._currEffectWeight=0,this._isActive=!0,this.bulletIndex=0,this._UserItem=e,this.currMultiple=t,this.currentPaoIndex=1,this.reset(!0),this._UserItem.getGameID()==this.game.gameId?(this.normalGun.node.addComponent(cc.Button),this.electricityGun.addComponent(cc.Button),this.normalGun.node.on("click",this.clickGun,this),this.electricityGun.on("click",this.clickGun,this),this.btnAddMultple.active=!0,this.btnSubMultple.active=!0):(this.btnAddMultple.active=!1,this.btnSubMultple.active=!1))},t.prototype.reset=function(e){void 0===e&&(e=!1),this._currEffectWeight=0,this.gunbarrel.angle=0,this.laserGun.node.active=!1,this.normalGun.node.active=!0,this.electricityGun.active=!1,this.hideCountdown(),this.hideDrillGun(),this.functionFort.hideTotalScore(null),e?(this.isWaitfire=!1,this.isCanFire=!0,this.node.opacity=255):(this.stopRaigunAutoFire(),this.node.opacity=130,this._isActive=!1,this.destroyEffect(!0),this.bottom.active=!0,this.gunbarrel.active=!0,this.functionObj=null,this.laserEffect=null,this.currMultiple=0),this.labelMultiple.string=this.game.iGameBase.getNum(this.currMultiple,!0)},t.prototype.clickGun=function(){this.isCanFire&&!this.isWaitfire&&(this._UserItem?this._UserItem.getGameID()==this.game.gameId&&(this.isCanFire=!1,this.game.iGameBase.EmitEvent(l.EventCode.changeGun,{chairId:this.chairId,gunIndex:1==this.currentPaoIndex?2:1})):cc.error("\u73a9\u5bb6\u4fe1\u606f\u4e0d\u5b58\u5728"))},t.prototype.showFunctionUI=function(e,t){this.functionFort.showFunctionUI(e,t)},t.prototype.showFunctionCatchScroe=function(e,t){void 0===t&&(t=0),this.functionFort.showDrillCatchScroe(e,t)},t.prototype.showDial=function(){this.bottom.active=!1,this.gunbarrel.active=!1},t.prototype.hideDial=function(){this.bottom.active=!0,this.gunbarrel.active=!0,1==this.currentPaoIndex?(this.electricityGun.active=!1,this.normalGun.node.active=!0,this.playFree()):(this.normalGun.node.active=!1,this.electricityGun.active=!0),this.isCanFire=!0},t.prototype.showFunctionTotalScore=function(e,t){this.functionFort.showFunctionTotalScore(e,t)},t.prototype.hidefunctionUI=function(e){this.functionFort.hidefunctionUI(e)},t.prototype.launchFunctionGunCountdown=function(){this.lblcountdown.string=this.timer.toString(),this.timer<=0?this.currFunctionType==l.functionType.drill?this._UserItem.getGameID()==this.game.gameId&&(this.fire(l.functionType.drill),this.fireFunctionGun()):this.currFunctionType==l.functionType.laser&&this._UserItem.getGameID()==this.game.gameId&&(this.fire(l.functionType.laser),this.isCanFire=!1):(this.timer--,12==this.timer&&(this.isCanFire=!0))},t.prototype.hideCountdown=function(){this.unschedule(this.launchFunctionGunCountdown),this.countdown.active=!1},t.prototype.fireFunctionGun=function(){this.hideCountdown(),this.hideDrillGun(),this.isCanFire=!1},t.prototype.hideCurrGun=function(){this.gunbarrel.angle=0,this.normalGun.node.active=!1,this.electricityGun.active=!1},t.prototype.showDrillGun=function(){var e=this;this.drillGun&&(this.hideCurrGun(),this.drillGun.stop(),this.drillGun.node.angle=0,this.drillGun.node.active=!0,this.gunbarrel.setSiblingIndex(0),cc.tween(this.drillGun.node).sequence(cc.moveTo(.5,cc.v2(this.drillPos.x,78)),cc.delayTime(.5),cc.moveTo(.5,cc.v2(0,0)),cc.callFunc(function(){e.gunbarrel.setSiblingIndex(1),e.drillGun.play(),e.showFunctionUI(l.functionType.drill),e.functionFort.showDrillCatchScroe(l.FunctionWeight.drill),e.drillLightEffect.active=!0,e.drillGun.node.setScale(cc.v2(1.8,1.5)),e.drillGun.node.setPosition(0,55)}),cc.scaleTo(.5,1),cc.callFunc(function(){e.timer=15,e.lblcountdown.string=e.timer.toString(),e.countdown.active=!0,e.schedule(e.launchFunctionGunCountdown,1,15),e.isWaitfire=!0,e.isCanFire=!0})).start())},t.prototype.showLaserGun=function(e){var t=this;this.hideCurrGun();var o=this.laserGun.node.getPosition();this.gunbarrel.setSiblingIndex(0),this.laserGun.node.setPosition(cc.v2(o.x+100,o.y+200)),this.laserGun.node.scale=1.5,this.laserGun.node.active=!0;var i=this;this.game.iAudioPlayer.play_sound("showdianci"),cc.tween(this.laserGun.node).sequence(cc.moveTo(.5,cc.v2(o.x,o.y)),cc.delayTime(.25),cc.scaleTo(.2,0),cc.delayTime(.25),cc.callFunc(function(){i.gunbarrel.setSiblingIndex(1),i.laserGun.node.scale=1.5,e&&e.exec(i),t.game.iAudioPlayer.play_sound("show2")}),cc.scaleTo(.5,1),cc.callFunc(function(){i.showFunctionUI(l.functionType.laser),i.timer=15,i.lblcountdown.string=i.timer.toString(),i.countdown.active=!0,i.schedule(i.launchFunctionGunCountdown,1,15),t.isWaitfire=!0,t.isCanFire=!0})).start()},t.prototype.hideDrillGun=function(){this.drillLightEffect.active=!1,this.drillGun.node.active=!1,this.drillGun.node.setScale(cc.v2(1.8,1.5)),this.drillGun.node.setPosition(this.drillPos)},t.prototype.showGunbarrel=function(){this.drillGun.node.active=!1,this.laserGun.node.active=!1,this.currFunctionType!=l.functionType.laser&&this.currFunctionType!=l.functionType.drill||(this.gunbarrel.angle=0),1==this.currentPaoIndex?(this.normalGun.stop("fire"),this.electricityGun.active=!1,this.normalGun.node.active=!0,this.playFree()):(this.normalGun.node.active=!1,this.electricityGun.active=!0)},t.prototype.playCowCompleteUI=function(e){this.functionFort.playCowCompleteUI(e)},t.prototype.playFree=function(){this.normalGun.play("free")},t.prototype.playFire=function(){this.normalGun.play("fire")},t.prototype.setAngle=function(e){return this._isOnTop?this.gunbarrel.angle=-e:this.gunbarrel.angle=e,this.functionFort.gunbarrel.angle=this.gunbarrel.angle,this},t.prototype.getFireAngle=function(){return this._isOnTop?180-this._currAngle:this._currAngle},t.prototype.getWorldAngle=function(){return this._isOnTop?this.gunbarrel.angle-90:this.gunbarrel.angle+90},t.prototype.aimAt=function(e,t){void 0===t&&(t=!1),this.node.getParent().convertToNodeSpaceAR(e,this.aimPos);var o=this.node.getPosition(),i=this.aimPos.sub(o),n=new cc.Vec2(0,1),r=-180*i.signAngle(n)/Math.PI;return r=cc.misc.clampf(r,-85,85),this._isOnTop?this._currAngle=270+r:this._currAngle=r,t&&(this.gunbarrel.angle=this._currAngle,this.functionFort.gunbarrel.angle=this._currAngle),this},t.prototype.checkScoreCanFire=function(e){return void 0===e&&(e=!1),this.currScore>=this.currMultiple||(e&&this.game.iGameBase.PopMessage_ShowMessage(1),cc.error("\u5f53\u524d\u5206\u6570\u4e0d\u6ee1\u8db3\u5f00\u70ae\u6761\u4ef6"),!1)},t.prototype.fire=function(e){if(this._UserItem){if(this._UserItem.getGameID()!=this.game.gameId)return-1;var t=this.bulletIndex++;return t=100*this._UserItem.getChairID()+t%100,this.game.iGameBase.EmitEvent(l.EventCode.MyFire,{dwBulletIndex:t,dBulletAngle:this.getFireAngle(),dwFishIndex:0,cbUserDefine:e||this.currFunctionType}),this.isWaitfire&&(this.isCanFire=!1),t}cc.error("\u8fd9\u4e2a\u73a9\u5bb6\u7684\u4fe1\u606f\u4e3anull")},t.prototype.lightUpdata=function(){if(this.fireLightFish&&this.fireLightFish.isCanCatch){var e=this.fireLightFish.checkInScreenRegion();if(e){this.lightningNode.angle=0;var t=e.convertToWorldSpaceAR(cc.v2(0,0));t=this.lightningNode.convertToNodeSpaceAR(t);var o=180*Math.atan2(t.y,t.x)/Math.PI;this.lightningNode.angle=o-90;var i=e.convertToWorldSpaceAR(cc.v2(0,0)),n=(i=this.lightningNode.convertToNodeSpaceAR(i)).mag();this.lightningNode.height=n,this.lightningNode.getChildByName("light").setPosition(i),this.lightningNode.active=!0,this.fireLightFish.playByHit(),this.playRaigunFireSound()}else this.stopRaigunAutoFire()}else this.stopRaigunAutoFire()},t.prototype.playRaigunFire=function(e,t){this.playRaigunFireAuto(e,t)},t.prototype.playRaigunFireSound=function(){this.raigunSoundId>-1||(this.raigunSoundId=this.game.iAudioPlayer.play_sound("electromagnetism",!0,1))},t.prototype.stopRaigunFireSound=function(){this.raigunSoundId>-1&&(this.game.iAudioPlayer.stop_sound(this.raigunSoundId),this.raigunSoundId=-1)},t.prototype.playRaigunFireAuto=function(e,t){this._UserItem.getGameID()==this.game.gameId&&this.game.iGameBase.EmitEvent(l.EventCode.SendCatchFish,{wChairID:this.chairId,dwBulletIndex:t,dBulletRow:0,dBulletCol:0,dwFishIndex:e,wPathIndex:this.fireLightFish?this.fireLightFish.CurrentStep:0,bFreeBullet:!1})},t.prototype.raigunFire=function(e){if(this._UserItem&&this._UserItem.getGameID()==this.game.gameId){var t=this.game.fishMgr.getFishByIndex(e);if(t&&t.isCanCatch&&t.checkInScreenRegion()){var o=this.bulletIndex++;o=100*this._UserItem.getChairID()+o%100,this.game.iGameBase.EmitEvent(l.EventCode.MyFire,{dwBulletIndex:o,dBulletAngle:this.getFireAngle(),dwFishIndex:e,bFreeBullet:!1})}}},t.prototype.setLockFish=function(e,t){void 0===t&&(t=!1),2==this.currentPaoIndex&&(this.LockFishIndex!=e&&(this.fireTime=0),this.LockFishIndex=e,this.lockFish=this.game.fishMgr.getFishByIndex(e),this.isCanstop=!1,this.lockFish?(this.unschedule(this.lightUpdata),this.fireLightFish=this.lockFish,this.startRaigunAutoFire()):(this.LockFishIndex=a.INVALID_DWORD,this.stopRaigunAutoFire(),this._UserItem.getGameID()==this.game.gameId&&(this.AutoFire||t)&&2==this.currentPaoIndex&&this.game.iGameBase.EmitEvent(l.EventCode.autoScendlockFish,t)))},t.prototype.onFire=function(e){return this.setAngle(e),this.playFire(),this.game.iAudioPlayer.play_sound("normalFire"),this.getBulletInitPos()},t.prototype.getBulletInitPos=function(){var e=cc.v2();return this.bulletPoint.convertToWorldSpaceAR(cc.v2(),e),this.firePos=this.game.fishMgr.node.convertToNodeSpaceAR(e),this.firePos},t.prototype.setLaserEffect=function(e){this._currAngle=0,this.functionObj=e,this.laserEffect=e.addComponent(u.default),this.laserEffect.laserIdle=cc.find("laser",e).getComponent(cc.Animation),this.laserEffect.granule=cc.find("granule",e).getComponent(cc.Animation),this.laserEffect.laserFire=cc.find("laserFire",e).addComponent(p.default),this.laserEffect.setGame(this.game),this.laserEffect.initFunction(this),this.functionFort.setLaserEffect(e)},t.prototype.fireLaser=function(e,t){var o=this.getEffect(l.FunctionWeight.laser);o?(o.setGame(this.game),o.playFire(e,t)):cc.error("\u6fc0\u5149\u7279\u6548\u4e0d\u5b58\u5728")},t.prototype.setNormalAutoFire=function(){this.AutoFire||(this.fireTime=0,this.isPress=!0)},t.prototype.checkFireing=function(){return!(!this.isPlayRaigun&&!this.isPress)},t.prototype.autoFire=function(e){if(this.isCanFire&&this.currFunctionType==l.functionType.normal&&(this.AutoFire||this.checkFireing())&&(this.gameId!=this.game.gameId||this.checkScoreCanFire()))return!this.isCanstop||this.AutoFire||this.gameId!=this.game.gameId||this.isPress?void(this.fireTime>this._currFireTime?(2==this.currentPaoIndex?this.LockFishIndex!=a.INVALID_DWORD?(this.isCanstop=!0,this.lockFish&&this.lockFish.isCanCatch&&this.lockFish.checkInScreenRegion()&&this.lockFish.checkLock(this.LockFishIndex)?this.raigunFire(this.lockFish.fishInfo.dwFishIndex):this.setLockFish(a.INVALID_DWORD)):this.setLockFish(a.INVALID_DWORD):this.fire(),this.fireTime=0):this.fireTime+=e):(this.setLockFish(a.INVALID_DWORD,!0),void(this.isCanstop=!1))},t.prototype.changePaoTypeTween=function(e){var t=this;this.currentPaoIndex=e,this.normalGun.node.stopAllActions(),this.electricityGun.stopAllActions();var o=cc.sequence(cc.scaleTo(.5,1),cc.callFunc(function(){t.isCanFire=!0}));1==e?(this.playFree(),this.normalGun.node.scale=1.8,this.setPaoType(e),cc.tween(this.normalGun.node).then(o).start(),this.game.iAudioPlayer.play_sound("changeNormalgun")):(this.electricityGun.scale=1.8,this.setPaoType(e),cc.tween(this.electricityGun).then(o).start(),this.game.iAudioPlayer.play_sound("changeElectricityGun"))},t.prototype.setPaoType=function(e){1==e?(this.stopRaigunAutoFire(),this.normalGun.node.active=!0,this.electricityGun.active=!1,this._currFireTime=.23):(this.gunbarrel.angle=0,this.normalGun.node.active=!1,this.electricityGun.active=!0,this._currFireTime=.3)},t.prototype.startRaigunAutoFire=function(){this.unschedule(this.lightUpdata),this.playPastTime=0,this.isPlayRaigun=!0,this.lightUpdata(),this.schedule(this.lightUpdata,.05)},t.prototype.checkCanAutoFire=function(){return!(this.checkScoreCanFire()||2!=this.currentPaoIndex||!this.AutoFire&&!this.checkFireing()||(cc.error("\u5206\u6570\u4e0d\u591f\uff0c\u53d6\u6d88\u81ea\u52a8\u5f00\u70ae"),this.setLockFish(a.INVALID_DWORD,!0),0))},t.prototype.stopRaigunAutoFire=function(){this.isPlayRaigun=!1,this.unschedule(this.lightUpdata),this.lightningNode&&(this.lightningNode.active=!1),this.LockFishIndex=a.INVALID_DWORD,this.fireLightFish=null,this.stopRaigunFireSound()},t.prototype.getMountPoint=function(e){return this.functionFort.getMountPoint(e)},t.prototype.setEffect=function(e){this.effectMap.set(e.currWeight,e)},t.prototype.getEffect=function(e){return this.effectMap.has(e)?this.effectMap.get(e):null},t.prototype.addEffectWeight=function(e){this._currEffectWeight|=e},t.prototype.subEffectWeight=function(e){this.existWeight(e)&&(this._currEffectWeight-=e),this.effectMap.has(e)&&this.effectMap.delete(e),this.deleteWeightMultiple(e)},t.prototype.existWeight=function(e){return(this._currEffectWeight&e)>0},t.prototype.setWeightMultiple=function(e,t){this._effectMultipleMap.set(e,t)},t.prototype.deleteWeightMultiple=function(e){this._effectMultipleMap.has(e)&&this._effectMultipleMap.delete(e)},t.prototype.destroyEffect=function(e){var t,o,i=this;if(void 0===e&&(e=!1),this.functionFort.destoryFunctionUI(e),e){if(this.effectMap)try{for(var n=s(this.effectMap.entries()),r=n.next();!r.done;r=n.next()){var a=c(r.value,2),h=a[0],u=a[1];null!=u&&(u.ImmediatelyDestroy(),this.effectMap.delete(h))}}catch(d){t={error:d}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}}else{var p=[l.FunctionWeight.bullSmash,l.FunctionWeight.drill,l.FunctionWeight.superBomb,l.FunctionWeight.mermaid];p.forEach(function(e){i.effectMap.has(e)&&i.effectMap.get(e).ImmediatelyDestroy()}),p=null}},t.prototype.checkMultiple=function(e,t,o){if(void 0===t&&(t=1),void 0===o&&(o=0),this.effectMultipleMap.has(e)){var i=this.effectMultipleMap.get(e);if(cc.error("\u5f53\u524d\u603b\u5206\u6570\uff1a",o,"\u500d\u7387\uff1a",i,"\u70ae\u500d\u6570\uff1a",t),o>=i-10*t)return!0}else cc.error("\u8fd9\u4e2a\u73a9\u5bb6\u6ca1\u6709\u8fd9\u4e2a\u7279\u6548\u500d\u7387\uff1a",e);return!1},t.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},r([m],t.prototype,"siteIndex",void 0),r([m({type:cc.Node,tooltip:"\u70ae\u7ba1"})],t.prototype,"gunbarrel",void 0),r([m({type:cc.Node,tooltip:"\u5e95\u5ea7"})],t.prototype,"bottom",void 0),r([m(cc.Label)],t.prototype,"labelMultiple",void 0),r([m(cc.Node)],t.prototype,"btnAddMultple",void 0),r([m(cc.Node)],t.prototype,"btnSubMultple",void 0),r([m(cc.Node)],t.prototype,"drillLightEffect",void 0),r([m({type:cc.Node,tooltip:"\u5b50\u5f39\u53d1\u5c04\u70b9"})],t.prototype,"bulletPoint",void 0),r([m({type:cc.Node,tooltip:"\u94bb\u5934\u70ae\u53d1\u5c04\u5012\u8ba1\u65f6"})],t.prototype,"countdown",void 0),r([m({type:cc.Label,tooltip:"\u94bb\u5934\u70ae\u53d1\u5c04\u5012\u8ba1\u65f6\u6587\u5b57"})],t.prototype,"lblcountdown",void 0),r([m(h.default)],t.prototype,"functionFort",void 0),r([f,y("FISHO/GameFort_DEMO")],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../FISHO_GameLogic":"FISHO_GameLogic","./FISHO_FunctionFort":"FISHO_FunctionFort","./FISHO_GameDefine":"FISHO_GameDefine","./effectFunction/FISHO_Laser":"FISHO_Laser","./effectFunction/FISHO_LaserEffect":"FISHO_LaserEffect"}],FISHO_GameLogic:[function(e,t,o){"use strict";cc._RF.push(t,"f685ez9/YVAf5LJq+E5Zn19","FISHO_GameLogic");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,o=t&&e[t],i=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.INVALID_DWORD=o.SupportedFish=void 0;var c=e("./GameScripts/FISHO_AutoFireButton"),a=e("./GameScripts/FISHO_FunctionLayer"),h=e("./GameScripts/FISHO_GameDefine"),l=e("./GameScripts/FISHO_GameFort"),u=e("./GameScripts/FISHO_GoldRoutine"),p=e("./GameScripts/FISHO_ResourceMgr"),d=e("./GameScripts/FISHO_ShootSelectSetting"),f=cc._decorator,y=(f.ccclass,f.menu,f.property);o.SupportedFish=[101,102,103,104,105,106,107,108,109,110,201,202,203,204,205,206,207,208,209,301,302,303,304,305,306,307,308,309,401,501,601],o.INVALID_DWORD=4294967295;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ServerTick=0,t.ReplaceCatchAndroids=[],t.gameFort=[],t.functionLayer=null,t.touchNode=null,t.labelGold=null,t.lableWinScore=null,t.autoFireButton=null,t.autoFireSetBtn=null,t.mouseCollider=null,t.changePaoBtn=null,t.lblAccount=null,t.myInfo=null,t.lblVersion=null,t.signal=null,t.shootSelect=null,t.mouseAni=null,t.scoreAndGoldLayer=null,t.fortGameIdMap=new Map,t.fortChairIdMap=new Map,t.UpSideDown=!1,t.mySeat=0,t.myChairID=0,t.myMultiple=1,t.mouseSpriteComp=null,t._currWinScore=0,t.chooseLock=!1,t.showpao1=null,t.showpao2=null,t.game=null,t.isExpedite=!1,t.isEnterForeground=!1,t.goldRoutineArray=[],t.goldRoutineRuningArray=[],t.isPress=!1,t}return n(t,e),t.prototype.userEnter=function(e,t){var o=this.fortChairIdMap.get(e);o.init(t),this.fortGameIdMap.set(t.getGameID(),o);var i=this.switchChairToSeat(e);t.getUserID()==this.game.iGameBase.getUserID()?(this.mySeat=i,this.myChairID=e,cc.log("\u8fdb\u5165\u7684\u662f\u81ea\u5df1")):cc.log("\u8fdb\u5165\u7684\u662f\u5176\u4ed6\u73a9\u5bb6")},t.prototype.userLeave=function(e){var t=this.fortChairIdMap.get(e);t?t.reset():console.error("\u8fd9\u4e2a\u73a9\u5bb6\u4e0d\u5b58\u5728\uff1a"+e)},t.prototype.autoScendLockFish=function(e){var t=this;void 0===e&&(e=!1);var i=this.gameFort[this.mySeat];if(2==i.currentPaoIndex&&i.LockFishIndex==o.INVALID_DWORD){if(e)return void this.game.iGameBase.sendLockFish(o.INVALID_DWORD);if(i.AutoFire){if(!this.shootSelect)return;var n=this.shootSelect.getCurrentSelectFishID(),r=o.INVALID_DWORD;if(n.length>0){for(var s=0;s<n.length;s++){var c=this.game.fishMgr.getFishByKindID(n[s]);if(c.length>0&&(r=c[this.game.iGameBase.utils_random(0,c.length-1)].fishInfo.dwFishIndex),r!=o.INVALID_DWORD)break}r!=o.INVALID_DWORD?this.game.iGameBase.sendLockFish(r):this.scheduleOnce(function(){t.autoScendLockFish()},h.fireTime)}}}},t.prototype.onUpScore=function(e){this.gameFort[this.mySeat].currScore+=e,this.labelGold.string=this.game.iGameBase.getNum(this.gameFort[this.mySeat].currScore,!0)},t.prototype.onLoad=function(){this.scoreAndGoldLayer=this.node.getChildByName("scoreAndGoldLayer")},t.prototype.onChangeBackGround=function(e,t){t!=e&&this.fortGameIdMap.get(t).destroyEffect()},t.prototype.onDrillBomb=function(e,t){this.game.bulletMgr.bulletDrillBomb(e,t),this.fortGameIdMap.get(t).subEffectWeight(h.FunctionWeight.drill)},t.prototype.setProperty=function(e,t){this.game.iGameBase.isNoWin()||(this._currWinScore-=e,this.lableWinScore.string=this.game.iGameBase.getNum(this._currWinScore,!0),this.labelGold.string=this.game.iGameBase.getNum(t,!0),this.gameFort[this.mySeat].currScore=t)},t.prototype.onGameScene=function(e){this.initGameScene(),this.game.gameScene.setCurrSceneBg(e,!0)},t.prototype.onExchangeMultiple=function(e,t,o){var i=this.fortGameIdMap.get(t);i.labelMultiple.string=this.game.iGameBase.getNum(o,!0),i.currMultiple=o,t==e&&(this.myMultiple=o)},t.prototype.changeScene=function(e){var t=this;this.game.fishMgr.changeScene(),this.game.iAudioPlayer.play_music("changeBg"),this.scheduleOnce(function(){t.game.gameScene.changeScene(e)},1.5)},t.prototype.nextExect=function(e,t,o,i){var n=h.getWeightByType(e),r=t.getEffect(n);r?r.isNext&&(t.checkMultiple(n,i,o)?(r&&r.beforDestroy(o),t.deleteWeightMultiple(n)):r&&r.nextStep(o)):cc.error("\u8be5\u6743\u4f4d\u5bf9\u5e94\u7684\u7279\u6548\u4e0d\u5b58\u5728\uff1a",h.FunctionWeight[n])},t.prototype.onCatchMushFish=function(e,t,o,i,n,r){var s=this,c=this.fortGameIdMap.get(e),a=this.getCatchFishLen(t),l=o;if(cc.log("\u547d\u4e2d\u591a\u6761\u9c7c,",o,l),0!=i){var u=h.getWeightByType(i);if(!c.existWeight(u))return void cc.error("\u73a9\u5bb6\u6ca1\u6709\u8fd9\u4e2a\u7279\u6548\uff1a",i);if(c.showFunctionCatchScroe(u,l),i==h.functionType.lighting){var p=c.getEffect(u);if(p){for(var d=0;d<a;d++)if(F=this.game.fishMgr.getFishByIndex(t[d])){var f;f=c.IsOnTop?this.game.iGameBase.utils_random(c.node.position.y-150,c.node.position.y-200):this.game.iGameBase.utils_random(c.node.position.y+150,c.node.position.y+200);var y=cc.v2(this.game.iGameBase.utils_random(c.node.position.x-100,c.node.position.x+100),f);y=this.node.convertToWorldSpaceAR(y);var m=n[d];F.enterDie();var g={fish:F,score:m,cb:_=this.game.iGameBase.utils_gen_handler(this.playGoldAnimation,this,m,c),movePos:y};p.addFishInfo(g)}else cc.error("catchFish not found",t[d]);var _=this.game.iGameBase.utils_gen_handler(this.showFunctionTotalScore,this,e,l,u);p.playAnim(_)}}else if(i==h.functionType.vortex){for(y=cc.v2(c.node.position.x,c.node.position.y+200),y=this.node.convertToWorldSpaceAR(y),d=0;d<a;d++){var v=t[d];if(F=this.game.fishMgr.getFishByIndex(v)){m=n[d];var S=this.game.iGameBase.utils_gen_handler(this.playGoldAnimation,this,m,c);F.playVortex(y,S)}else cc.error("catchFish not found",t[d])}this.scheduleOnce(function(){s.showFunctionTotalScore(e,l,u),c.subEffectWeight(u)},1.5)}else{for(d=0;d<a;d++){var F;v=t[d],(F=this.game.fishMgr.getFishByIndex(v))?(m=n[d],S=this.game.iGameBase.utils_gen_handler(this.playGoldAnimation,this,m,c),this.functionLayer.playOtherFishDieEffect(F,c,S,!1)||F.playDieAni(c,S)):cc.error("catchFish not found",t[d])}this.nextExect(i,c,l,r)}}},t.prototype.onPlayerInfo=function(e,t,o,i,n,r,c){var a,h,l=this.switchChairToSeat(t),u=this.gameFort[l];if(this.fortGameIdMap.set(e,u),cc.error("===\u5f53\u524d\u73a9\u5bb6\u70ae\u500d\u6570\uff1a",o),u){var p=this.game.iGameBase.UserManager_getTableUserItems(),d=null;try{for(var f=s(p),y=f.next();!y.done;y=f.next()){var m=y.value,g=m.getGameID();if(g&&g==e){d=m,cc.log("\u627e\u5230\u8fd9\u4e2a\u73a9\u5bb6\u7684\u4fe1\u606f");break}}}catch(S){a={error:S}}finally{try{y&&!y.done&&(h=f.return)&&h.call(f)}finally{if(a)throw a.error}}if(u.init(d),u.initInfo(o,i,n),u.setPaoType(n),t==this.myChairID){this.myMultiple=o,this.mySeat=l,this.myChairID=t,this.labelGold.string=this.game.iGameBase.getNum(i,!0),this.setWin(r);var _=cc.find("showpao1",this.changePaoBtn),v=cc.find("showpao2",this.changePaoBtn);2==n?(_.active=!0,v.active=!1,this.autoFireSetBtn.active=!0):(_.active=!1,v.active=!0,this.autoFireSetBtn.active=!1)}else cc.error("\u9501\u5b9a\u9c7c\u7684\u7d22\u5f15\uff1a",c),u.setLockFish(c)}},t.prototype.onGongNengBulletOver=function(e,t,o){var i=h.getWeightByType(o);i>0&&this.showFunctionTotalScore(e,t,i)},t.prototype.bulletSync=function(e,t,o,i){this.game.bulletMgr.bulletSync(e,t,o,i)},t.prototype.onFishInfo=function(e){this.game.fishMgr&&this.game.fishMgr.onFishInfo(e)},t.prototype.setGameViewUpSideDown=function(e){var t,o;console.log("GamePlay_DEMO.setGameViewUpSideDown"),this.UpSideDown=e,this.game.fishMgr&&(this.game.fishMgr.UpSideDown=this.UpSideDown);try{for(var i=s(this.gameFort),n=i.next();!n.done;n=i.next())n.value.UpSideDown=e}catch(r){t={error:r}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(t)throw t.error}}},t.prototype.clearData=function(){this.game.mCrashGrid=null},t.prototype.myLeave=function(){this.gameFort&&this.gameFort.forEach(function(e){e.reset(),e.destroyEffect(!0)})},t.prototype.onAndroidBankOperator=function(){},t.prototype.onUserFire=function(e,t,o,i,n,r,s,c,a){var l=this.fortGameIdMap.get(t);if(l){var u=o;if(u>h.functionType.normal){var p=l.onFire(i),d=l.getWorldAngle();l.hideCountdown(),u==h.functionType.laser?l.fireLaser(n,t):u==h.functionType.drill&&(l.hideDrillGun(),this.game.bulletMgr.fire(l.chairId,t,n,p,d,l.LockFishIndex,s,c,u)),l.isCanFire=!1,l.isWaitfire=!1}else 2==l.currentPaoIndex?l.playRaigunFire(a,n):(p=l.onFire(i),d=l.getWorldAngle(),this.game.bulletMgr.fire(l.chairId,t,n,p,d,l.LockFishIndex,s,c,u));this.game.iGameBase.isNoWin()?l.currScore-=r:l.currScore=r}else cc.error("\u627e\u4e0d\u5230\u5f00\u706b\u7684\u73a9\u5bb6");if(t==e&&(this.labelGold.string=this.game.iGameBase.getNum(this.gameFort[this.mySeat].currScore,!0),this.gameFort[this.mySeat].checkCanAutoFire())){if(this.gameFort[this.mySeat].AutoFire){var f=this.autoFireButton.cancelAutoFire();this.gameFort[this.mySeat].AutoFire=f}this.game.iGameBase.PopMessage_ShowMessage(1)}},t.prototype.setWeightCorrelation=function(e,t,o){var i=h.getEffectWeightFishId(t);-1!=i&&(e.setWeightMultiple(i,o),e.addEffectWeight(i))},t.prototype.onCatchFish=function(e,t,o,i,n,r,s,c){var a=this.fortGameIdMap.get(t),l=i,u=null;if(0!=n){var p=h.getWeightByType(n);if(!a.existWeight(p))return void cc.error("\u73a9\u5bb6\u6ca1\u6709\u8fd9\u4e2a\u529f\u80fd\uff1a",n);a.showFunctionCatchScroe(p,o)}var d=this.game.fishMgr.getFishByIndex(r);if(d){var f=!1,y=-1,m=null,g=d.fishInfo.nFishKindID;if(this.setWeightCorrelation(a,g,l),305==g)a.isCanFire=!1,a.currFunctionType=h.functionType.drill,a.showDrillGun();else if(306==g){cc.error("\u8fde\u73af\u70b8\u5f39\u80fd\u6253\u4e2d\u7684\u603b\u5206\u6570\uff1a",l),t==e&&(y=a.fire(h.functionType.superBomb));var _=d.getCurrWorldPos(),v=this.node.convertToNodeSpaceAR(_);a.showFunctionUI(h.functionType.superBomb,_),this.functionLayer.playSuperBombEffect(v,y,a,l),a.isCanFire=!1}else if(304==g)a.isCanFire=!1,a.currFunctionType=h.functionType.laser,a.showLaserGun(this.game.iGameBase.utils_gen_handler(this.functionLayer.playLaserEffect,this.functionLayer));else if(307==g)a.isCanFire=!1,t==e&&(y=a.fire(h.functionType.flash)),a.showFunctionUI(h.functionType.flash),this.functionLayer.playFlashEffect(y,t,a);else if(303==g){a.isCanFire=!1,a.showDial(),_=d.getCurrWorldPos();var S=this.node.convertToNodeSpaceAR(_);this.functionLayer.playDial(S,l,s,a)}else{if(301==g){cc.error("\u6253\u6b7b\u540c\u7c7b\u9c7c\u738b:",a.IsOnTop),a.isCanFire=!1,u=cc.v2(a.node.position.x,a.IsOnTop?a.node.position.y-200:a.node.position.y+200),a.showFunctionUI(h.functionType.vortex),this.functionLayer.playVortex(u),u=cc.v2(this.game.iGameBase.utils_random(u.x-100,u.x+100),this.game.iGameBase.utils_random(u.y-100,u.y+100)),u=this.node.convertToWorldSpaceAR(u);var F=d.getCurrWorldPos();return F=this.functionLayer.node.convertToNodeSpaceAR(F),this.functionLayer.playGoldEffect(F),m=this.game.iGameBase.utils_gen_handler(this.playGoldAnimation,this,l,a),void d.playVortex(u,m,!0)}if(302==g){cc.error("\u6253\u6b7b\u95ea\u7535\u9c7c\uff1a",a.IsOnTop),a.isCanFire=!1,a.showFunctionUI(h.functionType.lighting);var b;b=a.IsOnTop?this.game.iGameBase.utils_random(a.node.position.y-150,a.node.position.y-200):this.game.iGameBase.utils_random(a.node.position.y+150,a.node.position.y+200),u=cc.v2(this.game.iGameBase.utils_random(a.node.position.x-100,a.node.position.x+100),b),u=this.node.convertToWorldSpaceAR(u);var C={score:l,cb:m=this.game.iGameBase.utils_gen_handler(this.playGoldAnimation,this,l,a),movePos:u,fish:d};return this.functionLayer.playLightingEffect(a,C),d.enterDie(),void d.playShandianDie(u)}if(309==g){a.isCanFire=!1;var I=l/s;cc.error("=====309===",l,s,I),I*=.01,d.enterDie(),t==this.game.gameId&&(y=a.fire(h.functionType.thunderDragon));var O=this.game.iGameBase.utils_gen_handler(this.functionLayer.playDragonEffect,this.functionLayer,d,y,I,a);return void d.shake(O)}if(308==g)return a.isCanFire=!1,t==this.game.gameId&&(y=a.fire(h.functionType.bullSmash)),a.showFunctionUI(h.functionType.bullSmash),void this.functionLayer.playCowEffect(a,d,y,l);if(401==g){a.isCanFire=!1,cc.error("\u7f8e\u4eba\u9c7c\u80fd\u6253\u4e2d\u7684\u603b\u5206\u6570\uff1a",l);var A=c>0;return t==this.game.gameId&&A&&(y=a.fire(h.functionType.mermaid)),d.enterDie(),m=this.game.iGameBase.utils_gen_handler(this.playGoldAnimation,this,l,a),O=this.game.iGameBase.utils_gen_handler(this.functionLayer.playMermaidFishEffect,this.functionLayer,d,a,y,A,l,m),d.shake(O),void this.game.iAudioPlayer.play_sound("mermaidDie")}if(601==g)return f=!0,d.enterDie(),m=this.game.iGameBase.utils_gen_handler(this.playGoldAnimation,this,l,a),O=this.game.iGameBase.utils_gen_handler(this.functionLayer.playFengHuangBomb,this.functionLayer,d,a,l,m),d.shake(O),void this.game.iAudioPlayer.play_sound("phoenixDie");if(f=n==h.functionType.normal,m=this.game.iGameBase.utils_gen_handler(this.playGoldAnimation,this,l,a),this.functionLayer.playOtherFishDieEffect(d,a,m,f))return}d.playDieAni(a,m,f)}else cc.error("catchFish not found",r)},t.prototype.onSwitchCannon=function(e,t,o){var i,n;try{for(var r=s(this.gameFort),c=r.next();!c.done;c=r.next()){var a=c.value;if(a.isActive&&a.chairId==t){a.gameId==e&&(2==o?(this.showpao1.active=!0,this.showpao2.active=!1,this.autoFireSetBtn.active=!0):(this.showpao1.active=!1,this.showpao2.active=!0,this.autoFireSetBtn.active=!1)),a.changePaoTypeTween(o);break}}}catch(h){i={error:h}}finally{try{c&&!c.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}},t.prototype.onLockFish=function(e,t){var o=this.fortGameIdMap.get(e);o&&o.isActive&&o.setLockFish(t)},t.prototype.onUpdate=function(e){var t,o;if(this.gameFort[this.mySeat].isActive)try{for(var i=s(this.gameFort),n=i.next();!n.done;n=i.next()){var r=n.value;r.isActive&&r.autoFire(e)}}catch(a){t={error:a}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(t)throw t.error}}if(this.goldRoutineRuningArray.length>0)for(var c=0;c<this.goldRoutineRuningArray.length;c++)this.goldRoutineRuningArray[c].onUpdate(e);return this.ServerTick>0&&(this.ServerTick+=1e3*e,!0)},t.prototype.setPropertyUIPos=function(){var e=cc.find("layout",this.myInfo),t=e.getChildByName("Property"),o=e.getChildByName("Winscore");if(0==this.mySeat){this.myInfo.scaleX=1;for(var i=t.childrenCount,n=0;n<i;n++)t.children[n].scaleX=1;for(i=o.childrenCount,n=0;n<i;n++)o.children[n].scaleX=1;this.lblAccount.node.anchorX=0,this.lblAccount.node.scaleX=1,this.lblVersion.node.anchorX=1,this.lblVersion.node.scaleX=1}else if(1==this.mySeat){for(this.myInfo.scaleX=-1,i=t.childrenCount,n=0;n<i;n++)t.children[n].scaleX=-1;for(i=o.childrenCount,n=0;n<i;n++)o.children[n].scaleX=-1;this.lblAccount.node.anchorX=1,this.lblAccount.node.scaleX=-1,this.lblVersion.node.anchorX=0,this.lblVersion.node.scaleX=-1}this.lblAccount.string=this.game.iGameBase.GlobalUserItem_account(),this.lblVersion.string="v"+this.game.iGameBase.GetClientVersion(),this.lblVersion.getComponent(cc.Widget).updateAlignment(),t.active=!0},t.prototype.initGameScene=function(){this.game.iGameBase.CommonUI_RootNode(this.node),this.game.fishMgr.clearFish(),this.game.bulletMgr.clearBullets(),this.myMultiple=1,this.chooseLock=!1;for(var e=this.game.iGameBase.UserManager_getTableUserItems(),t=0;t<4;t++){var o=this.switchChairToSeat(t),i=this.gameFort[o];this.fortChairIdMap.set(t,this.gameFort[o]),e[t]?(i.init(e[t]),this.fortGameIdMap.set(e[t].getGameID(),i),e[t].getUserID()==this.game.iGameBase.getUserID()&&(this.mySeat=o,this.myChairID=t,cc.error("\u521d\u59cb\u5316\u6e38\u620f\u573a\u666f"),this.setPropertyUIPos())):i.node.opacity=130}this.game.iGameBase.setExectUpdate(!0)},t.prototype.playGoldAnimation=function(e,t,o,i){if(e&&!(e<0)){var n=null;if(this.goldRoutineArray.length>0)for(var r=0;r<this.goldRoutineArray.length;r++)if(this.goldRoutineArray[r].getStateIsIdle){n=this.goldRoutineArray.splice(r,1)[0];break}null==n&&(n=new u.default(this.scoreAndGoldLayer,this,this.goldPlayComplete)).setGame(this.game),n.init(o,t,e,i),this.goldRoutineRuningArray.push(n)}},t.prototype.goldPlayComplete=function(e){var t=this.goldRoutineRuningArray.indexOf(e);-1!=t&&this.goldRoutineRuningArray.splice(t,1),this.goldRoutineArray.push(e)},t.prototype.showFunctionTotalScore=function(e,t,o){this.fortGameIdMap.get(e).showFunctionTotalScore(t,o)},t.prototype.getCatchFishLen=function(e){var t=0;return e.forEach(function(e){if(!(e<4294967295))return t;t++}),t},t.prototype.switchChairToSeat=function(e){var t=e;if(this.UpSideDown)switch(e){case 0:t=3;break;case 1:t=2;break;case 2:t=1;break;case 3:t=0}return t},t.prototype.setWinScore=function(e,t){e==this.game.gameId&&(this.game.iGameBase.isNoWin()?(this.gameFort[this.mySeat].currScore+=t,this.labelGold.string=this.game.iGameBase.getNum(this.gameFort[this.mySeat].currScore,!0)):(this._currWinScore+=t,this.lableWinScore.string=this.game.iGameBase.getNum(this._currWinScore,!0)))},t.prototype.getFortByGamId=function(e){return this.fortGameIdMap.has(e)?this.fortGameIdMap.get(e):null},t.prototype.onClickFish=function(e){var t=this.gameFort[this.mySeat];t.isCanFire&&(t.AutoFire||t.isPress)&&this.game.iGameBase.sendLockFish(e)},t.prototype.onBtnAddMultiple=function(){this.game.iGameBase.sendPlayerExchangeBullet(!0),this.game.iAudioPlayer.play_sound("changeMultiple")},t.prototype.onBtnSubMultiple=function(){this.game.iGameBase.sendPlayerExchangeBullet(!1),this.game.iAudioPlayer.play_sound("changeMultiple")},t.prototype.onChangePaoBtnClick=function(){if(this.gameFort[this.mySeat].isCanFire&&!this.gameFort[this.mySeat].isWaitfire){var e=this.gameFort[this.mySeat];e.isCanFire=!1;var t=1==e.currentPaoIndex?2:1;this.game.iGameBase.sendSwitchCannon(this.myChairID,t)}},t.prototype.onBtnAutoFire=function(){if(this.gameFort[this.mySeat].checkScoreCanFire(!0)){var e=this.autoFireButton.changeAutoFire();this.gameFort[this.mySeat].AutoFire=e,2==this.gameFort[this.mySeat].currentPaoIndex&&e?this.autoScendLockFish():e||2!=this.gameFort[this.mySeat].currentPaoIndex||(this.game.iGameBase.sendLockFish(o.INVALID_DWORD),this.gameFort[this.mySeat].setLockFish(o.INVALID_DWORD))}},t.prototype.setAutoFire=function(){if(this.gameFort[this.mySeat].checkScoreCanFire(!0)){var e=this.autoFireButton.setAutoFire();this.gameFort[this.mySeat].AutoFire=e,2==this.gameFort[this.mySeat].currentPaoIndex&&e&&this.autoScendLockFish()}},t.prototype.onAutoFireSetBtnClick=function(){var e=this;this.shootSelect?(this.shootSelect.node.setSiblingIndex(this.node.childrenCount-1),this.shootSelect.node.active=!0):this.game.resourMgr.iMrgBase.loadCommonRes("ShootSelectPanel",cc.Prefab,p.CommonResType.Prefab,function(t){var o=cc.instantiate(t);e.shootSelect=o.addComponent(d.default),e.shootSelect.contentNode=cc.find("bg/content",o),e.shootSelect.prefab=cc.find("Item",e.shootSelect.contentNode);var i=cc.find("bg/closebtn",o);e.shootSelect.SetBtnEvent(i.getComponent(cc.Button),!0,!0);var n=cc.find("bg/OKBtn",o);e.shootSelect.SetBtnEvent(n.getComponent(cc.Button),!0,!0);var r=cc.find("bg/ClearBtn",o);e.shootSelect.SetBtnEvent(r.getComponent(cc.Button),!0,!0),cc.error("=====\u81ea\u52a8===",e.shootSelect.prefab),e.shootSelect.setGame(e.game),e.shootSelect.onOk=e.setAutoFire.bind(e),e.node.addChild(o)})},t.prototype.onConverPropertyBtnClick=function(){this.game.iGameBase.isNoWin()||this.game.iGameBase.ShowDona()},t.prototype.start=function(){this.mouseSpriteComp=this.mouseCollider.getComponent(cc.Sprite),this.touchNode.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.touchNode.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.touchNode.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.touchNode.on(cc.Node.EventType.MOUSE_MOVE,this.mouseMove,this),this.touchNode.on(cc.Node.EventType.MOUSE_LEAVE,this.mouseLeave,this),this.touchNode.on(cc.Node.EventType.MOUSE_ENTER,this.mouseEnter,this)},t.prototype.onDisable=function(){var e,t;this.touchNode.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.touchNode.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.touchNode.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.touchNode.off(cc.Node.EventType.MOUSE_MOVE,this.mouseMove,this),this.touchNode.off(cc.Node.EventType.MOUSE_LEAVE,this.mouseLeave,this),this.touchNode.off(cc.Node.EventType.MOUSE_ENTER,this.mouseEnter,this);try{for(var o=s(this.gameFort),i=o.next();!i.done;i=o.next())i.value.reset()}catch(r){e={error:r}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}if(this.goldRoutineRuningArray.length>0)for(var n=0;n<this.goldRoutineRuningArray.length;n++)this.goldRoutineRuningArray[n].release()},t.prototype.mouseEnter=function(){if(cc.game.canvas.style.cursor="none",this.mouseSpriteComp.node.opacity=255,this.mouseAni)this.mouseAni.start();else{var e=this.mouseAnimation();this.mouseAni=cc.tween(this.mouseSpriteComp.node).then(e).start()}},t.prototype.mouseLeave=function(){this.mouseAni.stop(),this.mouseSpriteComp.node.opacity=0,cc.game.canvas.style.cursor="url(/web-mobile/mouseIcon.png),auto"},t.prototype.mouseMove=function(e){var t=e.getLocation(),o=cc.v2();this.node.convertToNodeSpaceAR(t,o),this.mouseSpriteComp.node.setPosition(o);var i=this.gameFort[this.mySeat];i.isWaitfire&&i.isCanFire&&this.isPress&&i.aimAt(t,!0)},t.prototype.onTouchStart=function(e){var t=this.gameFort[this.mySeat],o=e.getLocation(),i=cc.v2();if(this.node.convertToNodeSpaceAR(o,i),this.mouseSpriteComp.node.setPosition(i),(t=this.gameFort[this.mySeat]).isWaitfire)this.isPress=!0;else if(t.isCanFire&&t.checkScoreCanFire(!0))if(2==t.currentPaoIndex){var n=this.game._quadCollision.check(this.game.fishMgr.getGameFish,this.mouseCollider),r=n.length;if(r>0){for(var s=n[0],c=1;c<r;c++){var a=n[c];a.node.parent==s.node.parent?a.node.getSiblingIndex()>s.node.getSiblingIndex()&&(s=a):a.node.parent.getSiblingIndex()>s.node.parent.getSiblingIndex()&&(s=a)}t.setNormalAutoFire();var h=s.fishInfo.dwFishIndex;this.onClickFish(h,o)}}else t.AutoFire?t.aimAt(o):(t.aimAt(o).fire(),t.setNormalAutoFire())},t.prototype.onTouchMove=function(e){var t=this.gameFort[this.mySeat];if(t.isWaitfire&&this.isPress){var o=e.getLocation();t.aimAt(o,!0)}t.isPress&&1==t.currentPaoIndex&&(o=e.getLocation(),t.aimAt(o))},t.prototype.onTouchEnd=function(e){this.isPress=!1;var t=this.gameFort[this.mySeat];if(t.isPress=!1,t.isWaitfire&&t.isCanFire){var o=e.getLocation();t.fireFunctionGun(),t.aimAt(o).fire()}},t.prototype.mouseAnimation=function(){var e=cc.tween().by(.5,{angle:-20}),t=cc.tween().to(.5,{scale:1.1}),o=cc.tween().to(.5,{scale:1}),i=cc.tween().parallel(e,t),n=cc.tween().parallel(e,o),r=cc.tween().sequence(i,n);return cc.tween().repeatForever(r)},t.prototype.showWin=function(e,t){this.game.iGameBase.isNoWin()?(t.active=!1,e.active=!1):(t.active=!0,e.active=!0)},t.prototype.setWin=function(e){this.game.iGameBase.isNoWin()||(this.lableWinScore.string=this.game.iGameBase.getNum(e,!0),this._currWinScore=e)},t.prototype.onLastTimeBullet=function(){cc.log("\u6700\u540e\u4e00\u6b21")},t.prototype.onIngot=function(){},t.prototype.onIngotEnd=function(){},t.prototype.onUpdateTreasureBox=function(){},t.prototype.onTreasureBoxEnd=function(){},t.prototype.fullScreenSetcontentSize=function(){this.game.iGameBase&&!this.game.iGameBase.getExectUpdate()||this.game.gameScene.init()},t.prototype.getWinScore=function(){return cc.error("getWinScore"),this._currWinScore},r([y([l.default])],t.prototype,"gameFort",void 0),r([y(a.default)],t.prototype,"functionLayer",void 0),r([y(cc.Node)],t.prototype,"touchNode",void 0),r([y(cc.Label)],t.prototype,"labelGold",void 0),r([y(cc.Label)],t.prototype,"lableWinScore",void 0),r([y(c.default)],t.prototype,"autoFireButton",void 0),r([y(cc.Node)],t.prototype,"autoFireSetBtn",void 0),r([y(cc.CircleCollider)],t.prototype,"mouseCollider",void 0),r([y(cc.Node)],t.prototype,"changePaoBtn",void 0),r([y(cc.Label)],t.prototype,"lblAccount",void 0),r([y(cc.Node)],t.prototype,"myInfo",void 0),r([y(cc.Label)],t.prototype,"lblVersion",void 0),r([y(cc.Node)],t.prototype,"signal",void 0),t}(cc.Component);o.default=m,cc._RF.pop()},{"./GameScripts/FISHO_AutoFireButton":"FISHO_AutoFireButton","./GameScripts/FISHO_FunctionLayer":"FISHO_FunctionLayer","./GameScripts/FISHO_GameDefine":"FISHO_GameDefine","./GameScripts/FISHO_GameFort":"FISHO_GameFort","./GameScripts/FISHO_GoldRoutine":"FISHO_GoldRoutine","./GameScripts/FISHO_ResourceMgr":"FISHO_ResourceMgr","./GameScripts/FISHO_ShootSelectSetting":"FISHO_ShootSelectSetting"}],FISHO_GameRewardTip:[function(e,t,o){"use strict";cc._RF.push(t,"3bd69QyrZVFv5gmjB9Vn74r","FISHO_GameRewardTip");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.menu,h=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rewardTip=null,t.showTipBtn=null,t.hideTipBtn=null,t.fishCountLabel=null,t.timeEndLabel=null,t.fishType=null,t.rewardType=null,t.fishTypeFrames=[],t.rewardTypeFrame=[],t.rewardInfoPanel=null,t.rewardInfoList=[],t.currentPage=0,t}return n(t,e),t.prototype.onLoad=function(){this.currentPage=0,this.rewardInfoList.push({fishType:0,rewardType:0,rewardTip:"CATCH ANY FISH",maxFishCount:20,currentFishCount:10,endTime:"20:12:20"}),this.rewardInfoList.push({fishType:1,rewardType:1,rewardTip:"CATCH ANY FISH",maxFishCount:20,currentFishCount:15,endTime:"21:12:20"})},t.prototype.start=function(){},t.prototype.onShowRewardTipBtnClick=function(){this.rewardTip.active=!0,this.showTipBtn.active=!1,this.hideTipBtn.active=!0},t.prototype.onHideRewardTipBtnClick=function(){this.rewardTip.active=!1,this.showTipBtn.active=!0,this.hideTipBtn.active=!1},t.prototype.showCurrentReward=function(){if(this.currentPage>=0&&this.currentPage<this.rewardInfoList.length){var e=this.rewardInfoList[this.currentPage];this.fishType.spriteFrame=this.fishTypeFrames[e.fishType],this.rewardType.spriteFrame=this.rewardTypeFrame[e.rewardType],this.fishCountLabel.string=e.currentFishCount+" / "+e.maxFishCount}},t.prototype.onLeftPageBtnClick=function(){this.currentPage>0?this.currentPage-=1:this.currentPage=this.rewardInfoList.length-1,this.showCurrentReward()},t.prototype.onRightPageBtnClick=function(){this.currentPage<this.rewardInfoList.length-1?this.currentPage+=1:this.currentPage=0,this.showCurrentReward()},t.prototype.onShowTipInfo=function(){this.rewardInfoPanel.active=!0},t.prototype.onHideTipInfo=function(){this.rewardInfoPanel.active=!1},r([h(cc.Node)],t.prototype,"rewardTip",void 0),r([h(cc.Node)],t.prototype,"showTipBtn",void 0),r([h(cc.Node)],t.prototype,"hideTipBtn",void 0),r([h(cc.Label)],t.prototype,"fishCountLabel",void 0),r([h(cc.Label)],t.prototype,"timeEndLabel",void 0),r([h(cc.Sprite)],t.prototype,"fishType",void 0),r([h(cc.Sprite)],t.prototype,"rewardType",void 0),r([h([cc.SpriteFrame])],t.prototype,"fishTypeFrames",void 0),r([h([cc.SpriteFrame])],t.prototype,"rewardTypeFrame",void 0),r([h(cc.Node)],t.prototype,"rewardInfoPanel",void 0),r([c,a("FISHO/GameRewardTip")],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],FISHO_GameSceneMgr:[function(e,t,o){"use strict";cc._RF.push(t,"363ccsHZEBCBZZtFtWDkA1L","FISHO_GameSceneMgr");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../FISHO_Game"),c=e("./FISHO_GameDefine"),a=cc._decorator,h=a.ccclass,l=a.menu,u=a.property,p={1:{musicVolume:.5,isStatic:!1},2:{musicVolume:1,isStatic:!1},3:{musicVolume:1,isStatic:!0},4:{musicVolume:1,isStatic:!0}},d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameBgNode=null,t.gameBgArray=[],t.gameBgMask=null,t.changeBgArray=[],t.changeSceneBgNode=null,t.changeSceneAdrom=null,t.cowShakeNode=null,t.bundle=null,t._currSceneId=0,t.currBg=null,t.bgWidth=0,t.moveTween=null,t.moveSceneSpeed=.25,t.changeScreenSpeed=.1,t.isChangeSceneing=!1,t.stopShakeHandle=null,t.moveCount=1,t.shakeTween=null,t.lastPos=null,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.onLoad=function(){this.stopShakeHandle=this.stopShake.bind(this);var e=this;cc.view.setResizeCallback(function(){var t=cc.view.getVisibleSize();e.gameBgArray.forEach(function(e){e.height=t.height+60}),e.changeBgArray.forEach(function(e){e.height=t.height+60})})},t.prototype.onDisable=function(){cc.view.setResizeCallback(null)},t.prototype.init=function(){var e=this;if(this.moveTween||this.shakeTween)cc.error("\u6b63\u5728\u79fb\u52a8==");else{var t=cc.view.getVisibleSize();this.bgWidth=t.width+50,this.gameBgNode.setContentSize(t.width,t.height),this.changeSceneBgNode.setContentSize(t.width,t.height),this.gameBgArray.forEach(function(o,i){o.width=e.bgWidth,o.height=t.height+60,o.setPosition(25+i*e.bgWidth,0)}),this.changeBgArray.forEach(function(o,i){o.width=e.bgWidth,o.height=t.height+60,o.setPosition(25+i*e.bgWidth,0)})}},t.prototype.playSceneBg=function(){var e=p[this._currSceneId].musicVolume;this.game.iAudioPlayer.play_music("bg_"+this._currSceneId,!0,e)},t.prototype.startMoveScene=function(e){void 0===e&&(e=!1);var t=this.gameBgNode,o=this.moveSceneSpeed,i=this.cowShakeNode.children[0];e?(t=this.changeSceneBgNode,o=this.changeScreenSpeed,i=this.changeSceneBgNode.children[0]):this.gameBgArray.forEach(function(e){e.active=!0}),this.moveCount=1,this.currBg=i,this.moveScene(t,o,e)},t.prototype.stopMove=function(){this.moveTween&&(this.moveTween.stop(),this.moveTween=null)},t.prototype.moveScene=function(e,t,o){if(void 0===o&&(o=!1),!this.isChangeSceneing||0!=o)if(null!=this.moveCount&&this.moveCount){var i=this,n=cc.v2(-this.bgWidth*this.moveCount,0);e.x<=n.x&&(cc.error(e.x,n.x,this.moveCount),this.moveCount++,n=cc.v2(-this.bgWidth*this.moveCount,0));var r=Math.abs(n.x-e.x)/10*t;this.moveTween=cc.tween(e).sequence(cc.moveTo(r,n),cc.callFunc(function(){i.moveCount++,i.currBg.x=i.moveCount*i.bgWidth+25,i.currBg.setSiblingIndex(1),i.currBg=o?e.children[0]:i.cowShakeNode.children[0],i.moveScene(e,t)})).start()}else cc.error("moveCount\u4e3a\u65e0\u6548\u503c")},t.prototype.resetBg=function(e,t){var o=this;void 0===t&&(t=!0),t&&this.stopMove();var i,n=[];e==c.ResetType.gameBg?(i=this.gameBgNode,n=this.gameBgArray):(i=this.changeSceneBgNode,n=this.changeBgArray),i.setPosition(cc.v2()),n.forEach(function(e,t){e.setSiblingIndex(t),e.setPosition(25+t*o.bgWidth,0)})},t.prototype.setCurrSceneBg=function(e,t){var o=this;void 0===t&&(t=!1),this._currSceneId=e,this.currBg=this.cowShakeNode.children[0],this.gameBgArray.forEach(function(t){t.getComponent(cc.Sprite).spriteFrame=o.game.GetGameAsset("Res/Map/map_"+e,s.AssetType.AT_SpriteFrame)}),this.gameBgMask.active=3==e,t&&(this.game.iAudioPlayer.play_music("bg_"+this._currSceneId,!0,p[this._currSceneId].musicVolume),p[e].isStatic||this.startMoveScene())},t.prototype.changeScene=function(e){cc.error("\u5207\u6362\u573a\u666f:",e),this.lastPos=null,this._currSceneId=e,this.isChangeSceneing=!0,this.changeSceneBgNode.opacity=255,this.changeSceneBgNode.active=!0,this.changeSceneAdrom.active=!0,cc.tween(this.changeSceneAdrom).then(cc.fadeIn(.5)).start(),this.resetBg(c.ResetType.gameBg),this.startMoveScene(!0),this.scheduleOnce(this.changeSceneHandle,2)},t.prototype.changeSceneHandle=function(){var e=this,t=this;t.setCurrSceneBg(t._currSceneId);var o=cc.fadeOut(.5);cc.tween(t.changeSceneBgNode).then(o).start(),cc.tween(t.changeSceneAdrom).then(o).call(function(){t.resetBg(c.ResetType.changeBg),t.changeSceneBgNode.active=!1,t.changeSceneAdrom.active=!1,t.isChangeSceneing=!1,cc.log("\u5207\u6362\u573a\u666f\u5b8c\u6bd5"),p[t._currSceneId].isStatic||t.startMoveScene();var o=p[e._currSceneId].musicVolume;e.game.iAudioPlayer.play_music("bg_"+t._currSceneId,!0,o)}).start()},t.prototype.shakeEffect=function(e,t){this.stopMove(),this.unschedule(this.stopShakeHandle),this.shakeTween&&(this.shakeTween.stop(),this.shakeTween=null),p[this._currSceneId].isStatic?this.gameBgNode.setPosition(0,0):this.lastPos&&this.gameBgNode.setPosition(this.lastPos);var o=this.gameBgNode.getPosition();this.lastPos=cc.v2(o.x,0),this.gameBgNode.setPosition(o.x,0);var i=this;this.shakeTween=t?cc.tween(this.gameBgNode).repeat(6,cc.sequence(cc.moveTo(.02,cc.v2(o.x+15,o.y+17)),cc.moveTo(.02,cc.v2(o.x-16,o.y+17)),cc.moveTo(.02,cc.v2(o.x-13,o.y+13)),cc.moveTo(.02,cc.v2(o.x+13,o.y-16)),cc.moveTo(.02,cc.v2(o.x-15,o.y-15)),cc.moveTo(.02,cc.v2(o.x+12,o.y-18)),cc.moveTo(.02,cc.v2(o.x-18,o.y-20)),cc.moveTo(.02,cc.v2(o.x+13,o.y+20)),cc.moveTo(.02,cc.v2(o.x,0)))):cc.tween(this.gameBgNode).repeat(6,cc.sequence(cc.moveTo(.02,cc.v2(o.x+5,o.y+7)),cc.moveTo(.02,cc.v2(o.x-6,o.y+7)),cc.moveTo(.02,cc.v2(o.x-3,o.y+3)),cc.moveTo(.02,cc.v2(o.x+3,o.y-6)),cc.moveTo(.02,cc.v2(o.x-5,o.y-5)),cc.moveTo(.02,cc.v2(o.x+2,o.y-8)),cc.moveTo(.02,cc.v2(o.x-8,o.y-10)),cc.moveTo(.02,cc.v2(o.x+3,o.y+10)),cc.moveTo(.02,cc.v2(o.x,0)))),this.shakeTween.call(function(){i.unschedule(i.stopShakeHandle),i.lastPos=null,p[i._currSceneId].isStatic||i.moveScene(i.gameBgNode,i.moveSceneSpeed)}).start(),this.scheduleOnce(this.stopShakeHandle,e)},t.prototype.stopShake=function(){this.shakeTween&&(this.shakeTween.stop(),this.shakeTween=null),p[this._currSceneId].isStatic?this.gameBgNode.setPosition(0,0):(this.lastPos?this.gameBgNode.setPosition(this.lastPos):cc.error("\u4e0a\u6b21\u7684\u4f4d\u7f6e\u4e3a\u7a7a"),this.moveScene(this.gameBgNode,this.moveSceneSpeed)),this.lastPos=null},t.prototype.playCowShake=function(){var e=this;setTimeout(function(){e.cowShake(),e.schedule(e.cowShake,1.005,cc.macro.REPEAT_FOREVER)},250)},t.prototype.stopCowShake=function(){this.unschedule(this.cowShake)},t.prototype.cowShake=function(){var e=cc.tween().to(.08,{y:-25},{easing:"backIn"}),t=cc.tween().to(.35,{y:0},{easing:"backOut"});cc.tween(this.cowShakeNode).sequence(e,t).start()},t.prototype.onDestroy=function(){},r([u(cc.Node)],t.prototype,"gameBgNode",void 0),r([u([cc.Node])],t.prototype,"gameBgArray",void 0),r([u(cc.Node)],t.prototype,"gameBgMask",void 0),r([u([cc.Node])],t.prototype,"changeBgArray",void 0),r([u(cc.Node)],t.prototype,"changeSceneBgNode",void 0),r([u(cc.Node)],t.prototype,"changeSceneAdrom",void 0),r([u(cc.Node)],t.prototype,"cowShakeNode",void 0),r([h,l("FISHO/GameSceneMgr")],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../FISHO_Game":"FISHO_Game","./FISHO_GameDefine":"FISHO_GameDefine"}],FISHO_Game:[function(e,t,o){"use strict";cc._RF.push(t,"c95506e+aFIT687XN8kvGTt","FISHO_Game");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.AssetType=void 0;var s,c=e("./GameScripts/FISHO_QuadtreeCollision"),a=e("./GameScripts/FISHO_ResourceMgr"),h=e("./GameScripts/FISHO_GameSceneMgr"),l=e("./GameScripts/FISHO_PoolManager"),u=e("./FISHO_GameLogic"),p=e("./GameScripts/FISHO_AutoFireButton"),d=e("./GameScripts/FISHO_FunctionLayer"),f=e("./GameScripts/FISHO_GameFort"),y=e("./GameScripts/FISHO_FunctionFort"),m=e("./GameScripts/FISHO_RuleDetails"),g=e("./GameScripts/FISHO_PoolManager"),_=e("./GameScripts/FISHO_BulletManager"),v=e("./GameScripts/FISHO_FishManager"),S=e("./FISHO_GameLogic"),F=e("./GameScripts/FISHO_ResourceMgr"),b=e("./GameScripts/FISHO_FishPathCrash"),C=e("./GameScripts/FISHO_CrashGrid"),I=e("./GameScripts/FISHO_GameFortGunAni"),O=cc._decorator,A=O.ccclass,T=O.menu;O.property,function(e){e[e.AT_SpriteFrame=0]="AT_SpriteFrame",e[e.AT_SpriteAtlas=1]="AT_SpriteAtlas",e[e.AT_Prefab=2]="AT_Prefab",e[e.AT_AudioClip=3]="AT_AudioClip",e[e.AT_Material=4]="AT_Material"}(s=o.AssetType||(o.AssetType={}));var w=function(e){function t(){var t=e.call(this)||this;return t.GameLogic=null,t.handlerPriority=2,t.handlerName="FISHO",t.scriptName="FISHO_Game",t.gameScene=null,t.fishMgr=null,t.bulletMgr=null,t.poolMgr=null,t.isAccordStand=!1,t.isPlaying=!1,t.setbtnWidget=null,t.setPanelWidget=null,t.ruleDetails=null,t.fishPathMgr=null,t.UpSideDown=!1,t.resourMgr=null,t.iGameBase=null,t.currTime=0,t}return n(t,e),t.prototype.setIGameBase=function(e){this.iGameBase=e,this.iAudioPlayer=this.iGameBase.getIAudioPlayer(),this.resourMgr=new F.default,this.iGameBase.newFishResMgrBase(),this.resourMgr.setIMrgBase(this.iGameBase.getFishResMgrBase()),this.gameId=this.iGameBase.GlobalUserItem_gameId(),this.mCrashGrid=new C.CrashGrid_DEMO(this.iGameBase.getDeviceWIDTH(),this.iGameBase.getDeviceHEIGHT()),this.fishPathMgr=new b.default,this.fishPathMgr.setGame(this),this.fishPathMgr.loadFishPath(),this.resourMgr.KindID=this.iGameBase.GetKindID(),this.fortPrefab=this.resourMgr.iMrgBase.getCommonRes("fort",a.CommonResType.Prefab,cc.Prefab),this.SetGameObject(),this.poolMgr.init(),this.iGameBase.setMyGameLogic(this.GameLogic,this.iGameBase.GetKindID(),u.SupportedFish),this.enterGame()},t.prototype.onEnable=function(){cc.sys.isBrowser&&(cc.macro.CLEANUP_IMAGE_CACHE=!1,cc.dynamicAtlasManager.enabled=!0,cc.dynamicAtlasManager.maxFrameSize=642),this.isAccordStand=!1},t.prototype.start=function(){this._quadCollision=new c.default(this.node.getBoundingBoxToWorld())},t.prototype.enterGame=function(){this.iGameBase.enterGame()},t.prototype.onDestroy=function(){this.iGameBase.RemoveHandler(),this.fishPathMgr.release(),this.mCrashGrid=null,this.resourMgr.iMrgBase.release(),this.iGameBase.releaseGameRes(this.resourMgr.KindID)},t.prototype.getGameUINode=function(){return this.gameScene.node},t.prototype.update=function(e){if(this.iGameBase){if(!this.iGameBase.onUpdate(e))return;if(!this.iGameBase.getExectUpdate())return;this.GameLogic.onUpdate(e),this.fishMgr.onUpdate(e),this.bulletMgr.onUpdate(e)}},t.prototype.onInfoBtnClick=function(){var e=this;this.ruleDetails?this.ruleDetails.show():this.resourMgr.loadOther("RuleDetails",a.ResourceType.other,cc.Prefab,function(t){var o=cc.instantiate(t);e.ruleDetails=o.getComponent(m.default),e.node.addChild(o)},!0)},t.prototype.GetGameAsset=function(e,t){return this.iGameBase.GetGameAsset(this.handlerName,e,t)},t.prototype.SetGameObject=function(){var e=cc.find("Pool",this.node);this.poolMgr=e.addComponent(g.default),this.poolMgr.setGame(this),this.initPoolManager(e);var t=cc.find("GameScene",this.node);this.gameScene=t.addComponent(h.default),this.gameScene.setGame(this),this.initgameScene(t);var o=cc.find("Playing",this.node);this.initPlaying(o),this.initSetting(o)},t.prototype.initPoolManager=function(){var e=new l.Pool;e.isInitRes=!0,e.nodeType=l.NodeType.gold,e.prefab=this.resourMgr.iMrgBase.getCommonRes("gold",a.CommonResType.Prefab,cc.Prefab),e.initCount=20,e.setGame(this),this.poolMgr.poolArray.push(e);var t=new l.Pool;t.isInitRes=!0,t.nodeType=l.NodeType.score,t.prefab=this.resourMgr.iMrgBase.getCommonRes("Score",a.CommonResType.Prefab,cc.Prefab),t.initCount=30,t.setGame(this),this.poolMgr.poolArray.push(t);var o=new l.Pool;o.isInitRes=!0,o.nodeType=l.NodeType.fishShadow,o.prefab=this.resourMgr.iMrgBase.getCommonRes("FishShadow",a.CommonResType.Prefab,cc.Prefab),o.initCount=50,o.setGame(this),this.poolMgr.poolArray.push(o);var i=new l.Pool;i.isInitRes=!1,i.nodeType=l.NodeType.goldBomb,i.resname="Goldblast",i.initCount=15,i.setGame(this),this.poolMgr.poolArray.push(i);var n=new l.Pool;n.isInitRes=!1,n.nodeType=l.NodeType.love,n.resname="love",n.initCount=20,n.setGame(this),this.poolMgr.poolArray.push(n);var r=new l.Pool;r.isInitRes=!0,r.nodeType=l.NodeType.fishSkeletonShadow,r.prefab=this.resourMgr.iMrgBase.getCommonRes("fishSkeletonShadow",a.CommonResType.Prefab,cc.Prefab),r.initCount=5,r.setGame(this),this.poolMgr.poolArray.push(r);var s=new l.Pool;s.isInitRes=!1,s.nodeType=l.NodeType.flower,s.resname="flower",s.initCount=15,s.setGame(this),this.poolMgr.poolArray.push(s)},t.prototype.initgameScene=function(e){var t=cc.find("BgNode",e),o=cc.find("cowShake",t),i=cc.find("bg1",o),n=cc.find("bg2",o),r=cc.find("adorn",e),s=cc.find("ChangeBgNode",e),c=cc.find("bg1",s),a=cc.find("bg2",s),h=cc.find("changeSceneAdrom",e);this.gameScene.gameBgNode=t,this.gameScene.gameBgArray.push(i),this.gameScene.gameBgArray.push(n),this.gameScene.gameBgMask=r,this.gameScene.changeBgArray.push(c),this.gameScene.changeBgArray.push(a),this.gameScene.changeSceneBgNode=s,this.gameScene.changeSceneAdrom=h,this.gameScene.cowShakeNode=o,this.gameScene.init()},t.prototype.initPlaying=function(e){var t=cc.find("touchNode",e),o=cc.find("fishLayer",e),i=cc.find("fishCircleLayer",e),n=cc.find("bulletLayer",e),r=cc.find("bulletHitLayer",e),c=cc.find("functionLayer",e),h=cc.find("FunctionFort",e),l=cc.find("middlebottomPoint",e),u=this.resourMgr.iMrgBase.getCommonRes("Middlebottom",a.CommonResType.Prefab,cc.Prefab),m=cc.instantiate(u);l.addChild(m);var g=cc.find("AutoFireSetBtn",m);this.SetBtnEvent(g.getComponent(cc.Button),!0,!0);var F=cc.find("ChangePaoBtn",m);this.SetBtnEvent(F.getComponent(cc.Button),!0,!0);var b=cc.find("AutoFireBtn",m),C=b.addComponent(p.default),O=cc.find("autolight",b),A=cc.find("light",O);C.autoFireLight=A,C.autoFireOn=O.getComponent(cc.Sprite),this.SetBtnEvent(b.getComponent(cc.Button),!0,!0);var T=cc.find("MyInfoPoint",e),w=this.resourMgr.iMrgBase.getCommonRes("MyInfo",a.CommonResType.Prefab,cc.Prefab),P=cc.instantiate(w);T.addChild(P);var M=cc.find("lblAccount",P).getComponent(cc.Label),G=cc.find("lblVersion",P).getComponent(cc.Label),D=cc.find("layout",P),H=cc.find("Property/labelGold",D).getComponent(cc.Label),E=D.getChildByName("Winscore"),x=cc.find("labelScore",E).getComponent(cc.Label),N=cc.find("Property/btnConver",D).getComponent(cc.Button);this.SetBtnEvent(N,!this.iGameBase.isNoWin(),!0);var B=this.resourMgr.iMrgBase.getCommonRes("mouse1",a.CommonResType.Prefab,cc.Prefab),R=cc.instantiate(B);R.getComponent(cc.Sprite).spriteFrame=this.resourMgr.iMrgBase.getCommonRes("Common/mouseIcon1",9,cc.SpriteFrame),e.addChild(R);var k=R.getComponent(cc.CircleCollider),L=cc.find("signal",e);this.bulletMgr=n.addComponent(_.default),this.bulletMgr.setGame(this),this.bulletMgr.bulletPrefab=this.resourMgr.iMrgBase.getCommonRes("GameBullet_DEMO",a.CommonResType.Prefab,cc.Prefab),this.bulletMgr.bulletDrillPrefab=this.resourMgr.iMrgBase.getCommonRes("GameBulletDrill_DEMO",a.CommonResType.Prefab,cc.Prefab),this.bulletMgr.bulletHitPrefab=this.resourMgr.iMrgBase.getCommonRes("GameBulletHit_DEMO",a.CommonResType.Prefab,cc.Prefab),this.bulletMgr.bulletHitNode=r,this.fishMgr=o.addComponent(v.default),this.fishMgr.setGame(this),this.fishMgr.fishCircleLayer=i,this.fishMgr.shadowMaterial=this.GetGameAsset("Res/Shader/sprite-shadow",s.AT_Material);var j=c.addComponent(d.default);j.setGame(this),this.GameLogic=e.addComponent(S.default),this.GameLogic.game=this,this.GameLogic.functionLayer=j,this.GameLogic.touchNode=t,this.GameLogic.changePaoBtn=F,this.GameLogic.autoFireSetBtn=g,this.GameLogic.myInfo=P,this.GameLogic.lblAccount=M,this.GameLogic.lblVersion=G,this.GameLogic.autoFireButton=C,this.GameLogic.showpao1=cc.find("showpao1",F),this.GameLogic.showpao2=cc.find("showpao2",F),this.GameLogic.labelGold=H,this.GameLogic.lableWinScore=x,this.GameLogic.showWin(N,E),this.GameLogic.mouseCollider=k,this.GameLogic.signal=L;var U=cc.find("forts",e);cc.error("====fort===>,"+this.fortPrefab);for(var W=0;W<4;W++){var z=cc.find("functionFort"+W,h),K=cc.find("container",z),q=cc.find("gunbarrel",z),Y=cc.find("laserGun/laserPoint",q),V=cc.find("fort"+W,U);cc.error("====\u9884\u5236\u4f53\uff1a",W);var X=cc.instantiate(this.fortPrefab);V.addChild(X);var J=cc.find("gunbarrel",X),Z=cc.find("drillGun/drillLightEffect",J),Q=cc.find("normalGun",J);Q.addComponent(I.default);var $=cc.find("bulletPoint",Q),ee=cc.find("bottom",X),te=cc.find("Option",X),oe=cc.find("MulpitleBg/labelMultiple",te).getComponent(cc.Label),ie=cc.find("btnAddMultple",te);this.SetBtnEvent(ie.getComponent(cc.Button),!0,!0);var ne=cc.find("btnSubMultple",te);this.SetBtnEvent(ne.getComponent(cc.Button),!0,!0);var re=cc.find("countdown",X),se=cc.find("lblcountdown",re).getComponent(cc.Label),ce=V.addComponent(f.default);ce.setGame(this),ce.siteIndex=W,ce.gunbarrel=J,ce.normalGun=J.getChildByName("normalGun").getComponent(cc.Animation),ce.drillGun=J.getChildByName("drillGun").getComponent(cc.Animation),ce.laserGun=J.getChildByName("laserGun").getComponent(cc.Animation),ce.electricityGun=J.getChildByName("electricityGun"),ce.bottom=ee,ce.labelMultiple=oe,ce.btnAddMultple=ie,ce.btnSubMultple=ne,ce.drillLightEffect=Z,ce.bulletPoint=$,ce.countdown=re,ce.lblcountdown=se,cc.error("function====",z,W),ce.functionFort=z.addComponent(y.default),ce.functionFort.setGame(this),ce.functionFort.container=K,ce.functionFort.laserPoint=Y,ce.functionFort.gunbarrel=q,ce.functionFort.fort=ce,this.GameLogic.gameFort.push(ce)}},t.prototype.initSetting=function(e){var t=cc.find("SettingPoint",e),o=this.resourMgr.iMrgBase.getCommonRes("Setting",a.CommonResType.Prefab,cc.Prefab),i=cc.instantiate(o);t.addChild(i),this.iGameBase.AddMySetting(i).Init(this.iGameBase,this,this.onInfoBtnClick.bind(this))},t.prototype.SetBtnEvent=function(e,t,o){if(void 0===t&&(t=!0),void 0===o&&(o=!0),null!=e){var i=new cc.Component.EventHandler;i.target=this.node,i.component=this.scriptName,i.handler="BtnEventCallback",e.clickEvents.push(i),e.node.active=t,e.interactable=o}},t.prototype.BtnEventCallback=function(e){var t=e.target;this.OnClickBtn(t)},t.prototype.OnClickBtn=function(e){if(cc.log("===============>>\u6240\u6709\u6309\u94ae\u70b9\u51fb\u4e8b\u4ef6\uff1a"+e.name),e.name.startsWith("btnScore")){var t=e.name.split("btnScore");this.GameLogic.myProperty.OnScoreBtnClick(null,Number(t[1]))}else switch(e.name){case"btnConver":this.GameLogic.onConverPropertyBtnClick();break;case"AutoFireSetBtn":this.GameLogic.onAutoFireSetBtnClick();break;case"ChangePaoBtn":this.GameLogic.onChangePaoBtnClick();break;case"AutoFireBtn":this.GameLogic.onBtnAutoFire();break;case"btnAddMultple":this.GameLogic.onBtnAddMultiple();break;case"btnSubMultple":this.GameLogic.onBtnSubMultiple();break;case"btnClose":this.GameLogic.myProperty.OnCloseBtnClick()}},r([A,T("FISHO/Game_DEMO")],t)}(cc.Component);o.default=w,cc._RF.pop()},{"./FISHO_GameLogic":"FISHO_GameLogic","./GameScripts/FISHO_AutoFireButton":"FISHO_AutoFireButton","./GameScripts/FISHO_BulletManager":"FISHO_BulletManager","./GameScripts/FISHO_CrashGrid":"FISHO_CrashGrid","./GameScripts/FISHO_FishManager":"FISHO_FishManager","./GameScripts/FISHO_FishPathCrash":"FISHO_FishPathCrash","./GameScripts/FISHO_FunctionFort":"FISHO_FunctionFort","./GameScripts/FISHO_FunctionLayer":"FISHO_FunctionLayer","./GameScripts/FISHO_GameFort":"FISHO_GameFort","./GameScripts/FISHO_GameFortGunAni":"FISHO_GameFortGunAni","./GameScripts/FISHO_GameSceneMgr":"FISHO_GameSceneMgr","./GameScripts/FISHO_PoolManager":"FISHO_PoolManager","./GameScripts/FISHO_QuadtreeCollision":"FISHO_QuadtreeCollision","./GameScripts/FISHO_ResourceMgr":"FISHO_ResourceMgr","./GameScripts/FISHO_RuleDetails":"FISHO_RuleDetails"}],FISHO_GoldRoutine:[function(e,t,o){"use strict";cc._RF.push(t,"ced5eB96hBKu7AKtuMMMrwK","FISHO_GoldRoutine"),Object.defineProperty(o,"__esModule",{value:!0});var i,n=e("./FISHO_PoolManager"),r=e("./FISHO_ResourceMgr"),s=cc._decorator;s.ccclass,s.menu,s.property,function(e){e[e.busy=0]="busy",e[e.idle=1]="idle"}(i||(i={}));var c=function(){function e(e,t,o){this.completeCount=0,this.startPos=null,this.endPos=null,this.createCount=0,this.goldArray=null,this.score=0,this.state=i.idle,this.complete=null,this.caller=null,this.updownInterval=.25,this.moveInterval=.1,this.isupwown=!1,this.isMoveFort=!1,this.currMoveFortTime=0,this.currUpDownTime=0,this.scoreAndGoldParent=null,this.scoreTween=null,this._isAddScore=!1,this.currCount=0,this.completeCount=0,this.state=i.busy,this.complete=o,this.caller=t,this.scoreAndGoldParent=e}return e.prototype.setGame=function(e){this.game=e},e.prototype.init=function(e,t,o,n){this.state=i.busy;var r=e.getCurrWorldPos();r=this.game.GameLogic.node.convertToNodeSpaceAR(r),this.startPos=r,this.endPos=t.node.getPosition(),this.score=o,this.currCount=0,this.createCount=e.goldCount,this._isAddScore=n,this.playGameId=t.gameId,this.completeCount=0,this.currUpDownTime=0,this.currMoveFortTime=0,this.goldArray=[],this.isupwown=!1;var s=null;if(e.isSpecialAnim())s=t.IsOnTop?cc.v2(t.node.x,t.node.y-150):cc.v2(t.node.x,t.node.y+150);else if(601==e.fishKind.id||401==e.fishKind.id)return this.startPos=t.IsOnTop?cc.v2(t.node.x,t.node.y-150):cc.v2(t.node.x,t.node.y+150),void(this.isupwown=!0);this.playScoreAnimation(this.scoreAndGoldParent,e.fishKind.id,t,s)},e.prototype.playScoreAnimation=function(e,t,o,i){var s=this,c=this.game.poolMgr.Dequeue(n.NodeType.score),a=c.getComponent(cc.Label);if(e.addChild(c),c.setPosition(this.startPos),i)this.startPos=i,a.spacingX=-20,a.fontSize=50,a.font=this.game.resourMgr.iMrgBase.getCommonRes("bf_number3",r.CommonResType.font,cc.Font),a.string="0",this.game.iGameBase.updatenNumberAnim(a,this.score,1.5),cc.tween(c).sequence(cc.delayTime(.35),cc.moveTo(.8,i),cc.delayTime(2)).call(function(){s.game.poolMgr.Enqueue(c,n.NodeType.score),s.isupwown=!0}).start();else{a.spacingX=-5,a.fontSize=50,a.font=this.game.resourMgr.iMrgBase.getCommonRes("bf_number1",r.CommonResType.font,cc.Font),a.string=this.game.iGameBase.getNum(this.score,!0);var h=this.game.iGameBase.utils_random(c.x-10,c.x+10);this.startPos=cc.v2(h,c.y+20),cc.tween(c).sequence(cc.scaleTo(.2,1.5),cc.scaleTo(.2,1),cc.moveTo(1.5,this.startPos),cc.callFunc(function(){for(var e=0;e<c.children.length;e++)c.children[e].active=!1;s.game.poolMgr.Enqueue(c,n.NodeType.score),s.isupwown=!0})).start()}},e.prototype.moveToFortAnimation=function(e){var t=this,o=(e.getPosition().sub(this.endPos).mag(),this);cc.tween(e).sequence(cc.moveTo(.4,this.endPos),cc.callFunc(function(){o.destroyGold(e),0==o.goldArray.length&&o.isMoveFort&&(o.isMoveFort=!1,o.state=i.idle,o._isAddScore&&t.game.GameLogic.setWinScore(o.playGameId,o.score),o.complete&&o.complete.call(o.caller,o))})).start()},e.prototype.destroyGold=function(e){this.game.poolMgr.Enqueue(e,n.NodeType.gold)},Object.defineProperty(e.prototype,"getStateIsIdle",{get:function(){return this.state==i.idle},enumerable:!1,configurable:!0}),e.prototype.bounceAnimation=function(e,t,o){return cc.repeat(cc.sequence(cc.moveTo(.06,cc.v2(e,t+o)),cc.callFunc(function(){o-=5}),cc.moveTo(.06,cc.v2(e,t))),3)},e.prototype.onUpdate=function(){var e=this;if(this.isupwown)if(this.currUpDownTime>=this.updownInterval||0==this.goldArray.length){this.currCount++,this.currCount==this.createCount&&(this.isupwown=!1);var t=this.game.poolMgr.Dequeue(n.NodeType.gold);this.scoreAndGoldParent.addChild(t);var o=this.createCount>1?this.game.iGameBase.utils_random(this.startPos.x-50,this.startPos.x+50):this.startPos.x;t.setPosition(cc.v2(o,this.startPos.y));var i=this.game.iGameBase.utils_random(this.startPos.y+100,this.startPos.y+200),r=this.game.iGameBase.utils_random(this.startPos.y,this.startPos.y-50);this.goldArray.push(t),cc.tween(t).sequence(cc.sequence(cc.moveTo(.35,cc.v2(o,i)),cc.moveTo(.35,cc.v2(o,r))),this.bounceAnimation(o,r,20),cc.delayTime(.2),cc.callFunc(function(){e.completeCount++,e.completeCount==e.createCount&&(e.isMoveFort=!0)})).start(),this.currUpDownTime=0}else this.currUpDownTime+=.1;if(this.isMoveFort&&this.goldArray.length>0)if(this.currMoveFortTime>=this.moveInterval||this.goldArray.length==this.createCount){var s=this.goldArray.pop();this.moveToFortAnimation(s),this.currMoveFortTime=0}else this.currMoveFortTime+=.1},e.prototype.release=function(){this.scoreTween&&this.scoreTween.stop(),this.scoreTween=null},e}();o.default=c,cc._RF.pop()},{"./FISHO_PoolManager":"FISHO_PoolManager","./FISHO_ResourceMgr":"FISHO_ResourceMgr"}],FISHO_GrapComp:[function(e,t,o){"use strict";cc._RF.push(t,"69009mslRtCz7nmLbGUYDSL","FISHO_GrapComp");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.menu,h=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.graphicsComp=null,t}var o;return n(t,e),o=t,t.prototype.onLoad=function(){o.Instance=this},t.prototype.start=function(){},t.Instance=null,r([h(cc.Graphics)],t.prototype,"graphicsComp",void 0),o=r([c,a("FISHO/GrapComp")],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],FISHO_LaserEffect:[function(e,t,o){"use strict";cc._RF.push(t,"7d0ddCw+zlMv7J9ahhQZoTW","FISHO_LaserEffect");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../FISHO_GameDefine"),c=e("./FISHO_Laser"),a=cc._decorator,h=a.ccclass,l=a.menu,u=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.laserIdle=null,t.granule=null,t.laserFire=null,t.currWeight=s.FunctionWeight.laser,t.isNext=!1,t}return n(t,e),t.prototype.setGame=function(e){this.game=e,this.laserFire.setGame(e)},t.prototype.start=function(){this.laserIdle.play("laserIdle"),this.granule.play("laserGranule")},t.prototype.initFunction=function(e){this.targetFort=e,this.targetFort.setEffect(this)},t.prototype.playFire=function(e,t){this.laserIdle.node.active=!1,this.granule.node.active=!1,this.laserFire.node.active=!0,this.laserFire.palyLaserFire(e,t,this.playComplete.bind(this))},t.prototype.playComplete=function(){this.scheduleOnce(this.beforDestroy,.5)},t.prototype.onDestroy=function(){this.game.iGameBase.getExectUpdate()&&this.targetFort.subEffectWeight(this.currWeight)},t.prototype.nextStep=function(){},t.prototype.beforDestroy=function(){this.node.destroy()},t.prototype.ImmediatelyDestroy=function(){this.unschedule(this.beforDestroy),this.beforDestroy()},r([u(cc.Animation)],t.prototype,"laserIdle",void 0),r([u(cc.Animation)],t.prototype,"granule",void 0),r([u(c.default)],t.prototype,"laserFire",void 0),r([h,l("FISHO/LaserEffect")],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../FISHO_GameDefine":"FISHO_GameDefine","./FISHO_Laser":"FISHO_Laser"}],FISHO_Laser:[function(e,t,o){"use strict";cc._RF.push(t,"7621fy9pEVHZowEmwCsCp2e","FISHO_Laser");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,o=t&&e[t],i=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../FISHO_GameDefine"),a=cc._decorator,h=a.ccclass,l=a.menu,u=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.catchFish=new Map,t.laserFire=null,t.bulletIndex=0,t.playerId=0,t.collider=null,t.isCheckCollider=!1,t._complete=null,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.onLoad=function(){this.laserFire=this.node.getComponent(cc.Animation),this.collider=this.node.getComponent(cc.Collider)},t.prototype.start=function(){},t.prototype.onDisable=function(){},t.prototype.laserPlayComplete=function(){var e,t;if(this.game.gameId==this.playerId){for(var o=[],i=0;i<c.FunctionCatchCount.laser;i++)o[i]=0;var n=0;try{for(var r=s(this.catchFish.keys()),a=r.next();!a.done;a=r.next()){var h=a.value;o[n]=h,n++}}catch(l){e={error:l}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this.game.iGameBase.EmitEvent(c.EventCode.FunctionCatchFishs,{wChairID:this.game.iGameBase.UserManager_getChairID(),dwBulletIndex:this.bulletIndex,dwFishIndex:o,cbFishCount:this.catchFish.size})}this._complete&&this._complete()},t.prototype.checkStart=function(){this.isCheckCollider=!0},t.prototype.checkEnd=function(){this.isCheckCollider=!1},t.prototype.palyLaserFire=function(e,t,o){this._complete=o,this.bulletIndex=e,this.playerId=t,this.laserFire.play(),this.game.iAudioPlayer.play_sound("diancifire")},t.prototype.lateUpdate=function(){if(this.isCheckCollider){var e=this.game._quadCollision.check(this.game.fishMgr.getGameFish,this.collider);if(e.length>0)for(var t=e.length,o=0;o<t;o++){var i=e[o];if(i&&i.isCanCatch&&this.catchFish.size<c.FunctionCatchCount.laser&&!this.catchFish.has(i.fishInfo.dwFishIndex)&&(i.fishInfo.nFishKindID<301||i.fishInfo.nFishKindID>307)&&i.checkInScreenRegion()&&(this.catchFish.set(i.fishInfo.dwFishIndex,i),this.catchFish.size>=c.FunctionCatchCount.laser)){this.isCheckCollider=!1;break}}}},t.prototype.onDestroy=function(){this.game.iGameBase.getExectUpdate()&&this.catchFish.clear()},r([h,l("FISHO/Laser")],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../FISHO_GameDefine":"FISHO_GameDefine"}],FISHO_LightingEffect:[function(e,t,o){"use strict";cc._RF.push(t,"5a8aaKG569FwbInB28B8COA","FISHO_LightingEffect");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../FISHO_GameDefine"),c=e("../FISHO_ResourceMgr"),a=e("./FISHO_ThunderEffect"),h=cc._decorator,l=h.ccclass,u=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currWeight=s.FunctionWeight.lighting,t.isNext=!1,t.thunderFishInfo=null,t.thunderCompArr=null,t.thunderIndex=0,t.compcb=null,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.initFunction=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this.targetFort=e,this.targetFort.setEffect(this),this.thunderFishInfo=[],this.thunderCompArr=[]},t.prototype.addFishInfo=function(e){this.thunderFishInfo.push(e)},t.prototype.playAnim=function(e){this.compcb=e,this.thunderIndex=1,this.thunderFishInfo.length>1?this.schedule(this.playThunderHandle,1):this.thunderPlayComplete(0)},t.prototype.playThunderHandle=function(){var e=this;if(this.thunderIndex>=this.thunderFishInfo.length)this.unschedule(this.playThunderHandle);else{var t=this.thunderFishInfo[this.thunderIndex],o=this.game.iGameBase.utils_gen_handler(function(t){var o=e.thunderFishInfo[t].fish,i=e.thunderFishInfo[t].movePos;e.game.fishMgr.setSpecialFish(o,302),o.playShandianDie(i)},this,this.thunderIndex),i=this.game.iGameBase.utils_gen_handler(this.thunderPlayComplete,this),n=this.thunderFishInfo[this.thunderIndex-1].fish;this.playShandianEffect(t.fish.node,n.node,this.thunderIndex,!1,o,i),this.thunderIndex++}},t.prototype.thunderPlayComplete=function(e){if(e>=this.thunderIndex-1){for(var t=this.thunderFishInfo[e].fish,o=0;o<this.thunderFishInfo.length;o++){var i=this.thunderFishInfo.splice(o,1)[0];i.fish.node.stopAllActions(),i.fish.playDieAni(this.targetFort,i.cb),o--}var n=t.getCurrWorldPos();this.playThunderBomb(n),this.compcb&&this.compcb.exec()}},t.prototype.playShandianEffect=function(e,t,o,i,n,r){void 0===i&&(i=!1),o>0&&this.thunderCompArr[o-1].hideIndex();var s=this.game.resourMgr.iMrgBase.getCommonRes("thunderEffect",c.CommonResType.Prefab,cc.Prefab),h=cc.instantiate(s),l=h.addComponent(a.default);l.lightPointNode=cc.find("shandian/light",h),l.circleNode=cc.find("circle",h),l.lighting=cc.find("shandian",h),l.currIndexLable=cc.find("circle/indexLable",h).getComponent(cc.Label),l.setGame(this.game),this.node.addChild(h),l.init(t,e,o,r,i,n),this.thunderCompArr[o]=l},t.prototype.playThunderBomb=function(e){e=this.node.convertToNodeSpaceAR(e),this.game.resourMgr.iMrgBase.loadCommonRes("thunderBomb",cc.Prefab,5,this.playThunderBombComp.bind(this,e))},t.prototype.playThunderBombComp=function(e,t){var o=this,i=cc.instantiate(t);this.node.addChild(i),i.setPosition(e);var n=i.getComponent(cc.Animation);n.on(cc.Animation.EventType.FINISHED,function(){i.destroy(),o.beforDestroy()}),this.game.iAudioPlayer.play_sound("shandian2"),n.play("thunderBomb")},t.prototype.onDestroy=function(){this.game.iGameBase.getExectUpdate()&&(this.targetFort.subEffectWeight(this.currWeight),this.thunderFishInfo=null,this.thunderCompArr=null)},t.prototype.nextStep=function(){},t.prototype.beforDestroy=function(){this.node.destroy()},t.prototype.ImmediatelyDestroy=function(){this.unscheduleAllCallbacks(),this.beforDestroy()},r([l],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../FISHO_GameDefine":"FISHO_GameDefine","../FISHO_ResourceMgr":"FISHO_ResourceMgr","./FISHO_ThunderEffect":"FISHO_ThunderEffect"}],FISHO_LockFishButton:[function(e,t,o){"use strict";cc._RF.push(t,"510ba1xJ/5PTKEZZbqbwwbX","FISHO_LockFishButton");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.menu,h=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lockOn=null,t}return n(t,e),t.prototype.setLock=function(e){this.lockOn.node.active=e},t.prototype.update=function(e){this.lockOn.node.angle-=360*e,this.lockOn.node.angle<0&&(this.lockOn.node.angle+=360)},r([h(cc.Sprite)],t.prototype,"lockOn",void 0),r([c,a("FISHO/LockFishButton")],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],FISHO_MermaidEffect:[function(e,t,o){"use strict";cc._RF.push(t,"fea76BONOhAOJ9zAyEJ4i2d","FISHO_MermaidEffect");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../FISHO_GameDefine"),c=e("../FISHO_PoolManager"),a=e("../FISHO_ResourceMgr"),h=cc._decorator,l=h.ccclass,u=h.menu,p=h.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mermaidhArray=[],t.redLoveAdorns=[],t.lovePrefab=null,t.light=null,t.lblScore=null,t.redLove=null,t.compCb=null,t.targetFort=null,t._special=!1,t._fish=null,t.currWeight=s.FunctionWeight.mermaid,t.isNext=!0,t.fishPlayCount=0,t.playCompleteCount=0,t._currAngle=0,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.onLoad=function(){},t.prototype.test=function(e,t){cc.log(e,t)},t.prototype.keyUp=function(e){switch(e.keyCode){case cc.macro.KEY.a:this.moveRedLove(cc.v2(0,-200))}},t.prototype.initFunction=function(e,t,o,i,n,r,s){this._bulletIndex=n,this.targetFort=e,this._fish=i,this.compCb=s,this._special=t,this.targetFort.setEffect(this);var c=i.getCurrWorldPos();this._score=o;var h=this.game.resourMgr.iMrgBase.getCommonRes("RedLove",a.CommonResType.Prefab,cc.Prefab);this.redLove=cc.instantiate(h),this.lblScore=this.redLove.getChildByName("lblScore").getComponent(cc.Label),this.redLove.scale=0,t?this.moveRedLove(c):this.normalRedLoveAnim(c,r)},t.prototype.normalRedLoveAnim=function(e,t){var o=this.targetFort.functionFort.node.convertToNodeSpaceAR(e);this.targetFort.functionFort.node.addChild(this.redLove),this.redLove.setPosition(o),this._targetPos=this.targetFort.functionFort.node.convertToNodeSpaceAR(t);var i=cc.tween().to(.2,{scale:1},{easing:"backOut"});cc.tween(this.redLove).then(i).start(),this.scheduleOnce(this.anim,.5)},t.prototype.anim=function(){var e=this,t=this;cc.tween(this.redLove).to(1.5,{position:cc.v3(t._targetPos)}).call(function(){t.scheduleOnce(t.playComplete,2)}).start(),this.game.iAudioPlayer.play_sound("scoreChange"),cc.tween({num:0}).to(2,{num:this._score},{progress:function(t,o,i,n){return e.lblScore.string=e.game.iGameBase.getNum(Math.ceil(t+(o-t)*n),!0),t+(o-t)*n}}).start()},t.prototype.moveRedLove=function(e){var t=this;e=this.node.convertToNodeSpaceAR(e),this.node.addChild(this.redLove),this.redLove.setPosition(e),this.schedule(this.createLove,.12);var o=cc.tween().to(.2,{scale:1},{easing:"backOut"}),i=cc.tween().to(.5,{position:cc.v3()});cc.tween(this.redLove).sequence(o,i).call(function(){t.playBeautyFishAnim()}).start(),this.game.iAudioPlayer.play_sound("mermaidBg")},t.prototype.playBeautyFishAnim=function(){this.fishPlayCount=0;for(var e=0,t=this.mermaidhArray.length;e<t;e++)this.mermaidhArray[e].node.active=!0,this.beautyFishAnim(e);this.scheduleOnce(this.plaRedLoveMagnify,2.6)},t.prototype.beautyFishAnim=function(e){var t=this,o=this.mermaidhArray[e];o.node.active=!0,o.setAnimation(0,"newAnimation",!1),o.timeScale=1,o.setCompleteListener(function(){o.node.active=!1,o.timeScale=0,t.fishPlayCount++,t.fishPlayCount>=t.mermaidhArray.length&&t.playCompleteCount++})},t.prototype.plaRedLoveMagnify=function(){var e=this,t=cc.tween(this.redLove).to(.5,{scale:1});cc.tween(this.redLove).to(.25,{scale:2.5}).call(function(){e.playRedLoveAdorn(),t.start()}).start(),this.scheduleOnce(this.sendCatchFish,.45)},t.prototype.sendCatchFish=function(){this.playLight();var e=this.node.convertToWorldSpaceAR(cc.v2()),t=this._score>450?s.FunctionCatchCount.mermaid:10;cc.error("\u7f8e\u4eba\u9c7c\u662f\u5426\u64ad\u653e\u7279\u6b8a\u52a8\u753b:",t),e=this.game.bulletMgr.node.convertToNodeSpaceAR(e),this.game.bulletMgr.playHit({pos:e,hitType:s.HitType.bigBang,catchCount:t,bulletIndex:this._bulletIndex,bomb:s.bombType.mermaid,playerId:this.targetFort.gameId})},t.prototype.playLight=function(){var e=this;this.light.node.scale=1,this.light.node.active=!0,this.light.play(),this.light.on(cc.Animation.EventType.FINISHED,function(){cc.tween(e.light.node).to(.25,{scale:0}).start()}),cc.tween(this.light.node).to(.3,{scale:4}).start()},t.prototype.playRedLoveAdorn=function(){for(var e=0,t=this.redLoveAdorns.length;e<t;e++){var o=this.redLoveAdorns[e];o.scale=0,o.active=!0,this.redLoveAdornAnim(o)}},t.prototype.redLoveAdornAnim=function(e){var t=this,o=cc.tween(e).to(.35,{scale:0},{easing:"backIn"});cc.tween(e).to(.35,{scale:1},{easing:"backOut"}).call(function(){t.createAdornLove(e),o.start()}).start()},t.prototype.createAdornLove=function(e){for(var t=0;t<5;t++){var o=72*t;this.createLove(e,o)}},t.prototype.createLove=function(e,t){var o=this;this.game.poolMgr.AsyncDequeue(c.NodeType.love,function(i){var n=i;n.opacity=255,n.scale=0,n.angle=0;var r=null,s=null,a=.2*o.game.iGameBase.utils_random(1,4),h=.5;if("number"==typeof e){o.redLove.addChild(n);var l=o.game.iGameBase.utils_random(150,170),u=Math.PI/180*o._currAngle,p=l*Math.cos(u),d=l*Math.sin(u);s=cc.v3(p,d),r=cc.v3((l+o.game.iGameBase.utils_random(20,30))*Math.cos(u),(l+o.game.iGameBase.utils_random(20,30))*Math.sin(u)),o._currAngle+=o.game.iGameBase.utils_random(15,35),o._currAngle>=360?o._currAngle%=360:o._currAngle<=-360&&(o._currAngle%=-360),h=1.2}else{s=e.position;var f=cc.v3(o.game.iGameBase.utils_random(-50,50),o.game.iGameBase.utils_random(-50,50));s=s.add(f),o.node.addChild(n),n.angle=e.angle,u=Math.PI/180*t,p=100*Math.cos(u),d=100*Math.sin(u),r=s.add(cc.v3(p,d))}n.setPosition(s);var y=cc.tween().to(.15,{scale:a},{easing:"backOut"}),m=cc.tween().to(h,{position:r}),g=cc.tween().to(h,{opacity:0}),_=cc.tween().parallel(m,g);cc.tween(n).sequence(y,_).call(function(){o.game.poolMgr.Enqueue(n,c.NodeType.love)}).start()})},t.prototype.playComplete=function(){this.unschedule(this.createLove);var e=this;if(this._special)cc.tween(e.redLove).to(.5,{opacity:0}).call(function(){e.redLove.destroy(),e.node.destroy()}).start();else{var t=cc.v2(this.targetFort.node.x,this.targetFort.IsOnTop?this.targetFort.node.y-90:this.targetFort.node.y+90);t=this.node.convertToWorldSpaceAR(t),this.compCb&&this.compCb.exec(this._fish,!0),this.targetFort.hidefunctionUI(this.currWeight),this.redLove.destroy(),this.targetFort.functionFort.checkCanFire(this.currWeight),this.node.destroy()}},t.prototype.onDestroy=function(){this.game.iGameBase.getExectUpdate()&&(this.redLove=null,this.compCb=null,this.targetFort.subEffectWeight(this.currWeight),this._special&&this.game.gameScene.playSceneBg())},t.prototype.nextStep=function(){this.playBeautyFishAnim()},t.prototype.beforDestroy=function(){this.playComplete()},t.prototype.ImmediatelyDestroy=function(){this.unscheduleAllCallbacks(),this.beforDestroy()},r([p([sp.Skeleton])],t.prototype,"mermaidhArray",void 0),r([p([cc.Node])],t.prototype,"redLoveAdorns",void 0),r([p(cc.Prefab)],t.prototype,"lovePrefab",void 0),r([p(cc.Animation)],t.prototype,"light",void 0),r([l,u("FISHO/MermaidEffect")],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../FISHO_GameDefine":"FISHO_GameDefine","../FISHO_PoolManager":"FISHO_PoolManager","../FISHO_ResourceMgr":"FISHO_ResourceMgr"}],FISHO_MyProperty:[function(e,t,o){"use strict";cc._RF.push(t,"1c835+s3DhJCZ1YNTP+ha9p","FISHO_MyProperty");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./FISHO_GameDefine"),c=cc._decorator,a=c.ccclass,h=c.menu,l=c.property,u=[1,5,10,20,100],p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnScoreArray=[],t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},t.prototype.touchEnd=function(){this.OnCloseBtnClick()},t.prototype.show=function(e){var t=this.btnScoreArray.length;if(e>100){for(var o=0;o<t;o++)this.btnScoreArray[o].interactable=e>=100*u[o];this.btnScoreArray[t-1].interactable=!0}else for(o=0;o<t;o++)this.btnScoreArray[o].interactable=!1;this.currWinScore=e,this.node.active=!0},t.prototype.OnCloseBtnClick=function(){this.node.active=!1},t.prototype.OnScoreBtnClick=function(e,t){var o=t<6?100*u[t-1]:this.currWinScore;this.game.iGameBase.EmitEvent(s.EventCode.converProperty,o),this.OnCloseBtnClick()},r([l([cc.Button])],t.prototype,"btnScoreArray",void 0),r([a,h("FISHO/MyProperty")],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./FISHO_GameDefine":"FISHO_GameDefine"}],FISHO_OptimizeDrawCall:[function(e,t,o){"use strict";cc._RF.push(t,"85452T4vCNF3auMLaixM6HG","FISHO_OptimizeDrawCall");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.OptimizeDrawCallOptions=void 0;var s=cc._decorator,c=s.ccclass,a=s.property,h=s.menu,l=s.executionOrder,u=s.help,p=function(){function e(){this.enabledOptimize=!0,this.rootNode=null,this.pathToNode=[],this.pathToNode4Hide=[],this.container=null,this.containerZIndex=1}return r([a({displayName:"\u5f00\u542f\u4f18\u5316",tooltip:"\u7528\u4e8e\u5bf9\u6bd4\u4f18\u5316\u6548\u679c"})],e.prototype,"enabledOptimize",void 0),r([a({type:cc.Node,displayName:"\u5f85\u4f18\u5316\u6839\u8282\u70b9",tooltip:"\u4ece\u6b64\u8282\u70b9\u4e0b\u83b7\u53d6\u6307\u5b9a\u8def\u5f84\u6307\u5b9a\u540d\u79f0\u7684\u5b50\u8282\u70b9\u8fdb\u884c\u4f18\u5316"})],e.prototype,"rootNode",void 0),r([a({type:cc.String,displayName:"\u5f85\u4f18\u5316\u8282\u70b9\u8def\u5f84",tooltip:"\u76f8\u5bf9\u4e8e\u5f85\u4f18\u5316\u6839\u8282\u70b9\u8ba1\u7b97\uff0c\u987a\u5e8f\u51b3\u5b9azIndex\uff0c\u7d22\u5f15\u4f4e\u7684\u5728\u5e95\u5c42\u3002\u4f8b\u5982\uff1anodeNameA/nodeNameB/nodeNameC"})],e.prototype,"pathToNode",void 0),r([a({type:cc.String,displayName:"\u5f85\u9690\u85cf\u8282\u70b9\u8def\u5f84",tooltip:"\u76f8\u5bf9\u4e8e\u5f85\u4f18\u5316\u6839\u8282\u70b9\u8ba1\u7b97\uff0c\u7528\u4e8e\u79fb\u9664\u5360\u7528\u9ad8\u5ea6\u7684\u7a7a\u8282\u70b9\uff08\u5b50\u8282\u70b9\u5168\u90e8\u88ab\u4f18\u5316\u7684\u7236\u8282\u70b9\uff09\u3002\u4f8b\u5982\uff1anodeNameA/nodeNameB/nodeNameC"})],e.prototype,"pathToNode4Hide",void 0),r([a({type:cc.Node,displayName:"\u5206\u5c42\u5bb9\u5668",tooltip:"\u6240\u6709\u4f18\u5316\u540e\u7684\u8282\u70b9\u6302\u5230\u6b64\u8282\u70b9\u4e0a"})],e.prototype,"container",void 0),r([a({type:cc.Integer,displayName:"\u5206\u5c42\u8282\u70b9zIndex",tooltip:"\u5982\u5c42\u7ea7\u4e0d\u5bf9\uff0c\u53ef\u81ea\u884c\u8c03\u6574\uff0c\u4e00\u822c\u8282\u70b9\u5c42\u7ea7\u9ed8\u8ba4\u4e3a0"})],e.prototype,"containerZIndex",void 0),r([c("OptimizeDrawCallOptions")],e)}();o.OptimizeDrawCallOptions=p;var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.options=[],t}var o;return n(t,e),o=t,t.Instance=function(){return o.instance},t.prototype.onLoad=function(){o.instance=this},t.prototype.start=function(){this.do()},t.prototype.do=function(){var e=this;this.options.forEach(function(t){if(t.enabledOptimize){var o=t.rootNode.getComponent(cc.Widget);o&&o.updateAlignment();var i=t.rootNode.getComponent(cc.Layout);i&&i.updateLayout(),t.container.width=t.rootNode.width,t.container.height=t.rootNode.height,t.rootNode.on(cc.Node.EventType.SIZE_CHANGED,function(){t.container.width=t.rootNode.width,t.container.height=t.rootNode.height}),t.pathToNode.forEach(function(o,i){e.findTarget(t.rootNode,o).forEach(function(e){var o=t.container.convertToNodeSpaceAR(e.convertToWorldSpaceAR(cc.Vec2.ZERO));e.parent=t.container,e.setPosition(o),e.zIndex=i})}),t.pathToNode4Hide.forEach(function(o){e.findTarget(t.rootNode,o).forEach(function(e){return e.active=!1})}),t.container.zIndex=t.containerZIndex}})},t.prototype.findTarget=function(e,t){var o=this;if(!e)return[];var i=t.split("/").filter(function(e){return e.length>0}),n=i.shift();if(0==i.length)return e.children.filter(function(e){return e.name==n});var r=[];return e.children.forEach(function(e){e.name==n&&(r=r.concat(o.findTarget(e,i.join("/"))))}),r},t.instance=null,r([a({type:p,displayName:"\u4f18\u5316\u9879",tooltip:"\u4e0d\u5171\u4eab\u540c\u4e00\u4e2a\u6839\u8282\u70b9\uff0c\u66f4\u7075\u6d3b"})],t.prototype,"options",void 0),o=r([c,h("\u4f18\u5316\u7ec4\u4ef6/DrawCall"),l(1),u("https://github.com/wclssdn/optimize_draw_call/")],t)}(cc.Component);o.default=d,cc._RF.pop()},{}],FISHO_PhoenixEffect:[function(e,t,o){"use strict";cc._RF.push(t,"35d4bb5MZ1MvYpxpn+PraJF","FISHO_PhoenixEffect");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../FISHO_GameDefine"),c=e("../FISHO_ResourceMgr"),a=cc._decorator,h=a.ccclass,l=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.targetFort=null,t.currWeight=s.FunctionWeight.phoenix,t.isNext=!1,t._fish=null,t._score=0,t._cb=null,t.featherObj=null,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.initFunction=function(e,t,o,i){this.targetFort=e,this.targetFort.setEffect(this),this._score=o,this._fish=t,this._cb=i,this.scheduleOnce(this.anim,.8)},t.prototype.anim=function(){var e=this;this.targetFort.showFunctionUI(s.functionType.phoenix);var t=this._fish.getCurrWorldPos(),o=this.game.resourMgr.iMrgBase.getCommonRes("featherFlame",c.CommonResType.Prefab,cc.Prefab),i=cc.instantiate(o);this.node.addChild(i);var n=this.node.convertToNodeSpaceAR(t);i.setPosition(n);var r=i.getComponent(cc.Animation);this.beginPos=cc.v2(this.targetFort.node.x,this.targetFort.IsOnTop?this.targetFort.node.y-90:this.targetFort.node.y+90);var a=this,h=this.game.resourMgr.iMrgBase.getCommonRes("feather",c.CommonResType.Prefab,cc.Prefab);r.on(cc.Animation.EventType.FINISHED,function(){i.destroy(),e.featherObj=cc.instantiate(h),e.targetFort.node.addChild(e.featherObj);var o=e.targetFort.node.convertToNodeSpaceAR(t);e.featherObj.setPosition(o),e.featherObj.getComponent(cc.Animation).play(),e.lable=e.featherObj.getChildByName("score").getComponent(cc.Label),e.lable.string="0",a.scheduleOnce(a.playComplete1,1.5)}),i.getComponent(cc.Animation).play()},t.prototype.playComplete=function(){this.featherObj&&(this.featherObj.destroy(),this.beginPos=this.node.convertToWorldSpaceAR(this.beginPos),this._cb&&this._cb.exec(this._fish,!0),this.targetFort.hidefunctionUI(this.currWeight),this.node.destroy())},t.prototype.onDestroy=function(){this.targetFort.subEffectWeight(this.currWeight),this.featherObj=null,this.beginPos=null,this._cb=null,this._fish=null,this.targetFort=null},t.prototype.nextStep=function(){},t.prototype.beforDestroy=function(){this.featherObj&&this.featherObj.destroy(),this.node.destroy()},t.prototype.ImmediatelyDestroy=function(){this.unscheduleAllCallbacks(),this.beforDestroy()},t.prototype.playComplete1=function(){var e=this,t=this.targetFort.getMountPoint(this.currWeight);t=this.targetFort.node.convertToNodeSpaceAR(t);var o=this;cc.tween(this.featherObj).sequence(cc.callFunc(function(){o.lable.node.active=!0,o.game.iGameBase.updatenNumberAnim(o.lable,o._score,2,o.playComplete2.bind(e))}),cc.moveTo(1.25,t)).start()},t.prototype.playComplete2=function(){this.scheduleOnce(this.playComplete,2)},r([h],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../FISHO_GameDefine":"FISHO_GameDefine","../FISHO_ResourceMgr":"FISHO_ResourceMgr"}],FISHO_PoolManager:[function(e,t,o){"use strict";cc._RF.push(t,"63486/YybhIl5HRBkqDIZqa","FISHO_PoolManager");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,o=t&&e[t],i=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.Pool=o.NodeType=void 0;var c,a=e("./FISHO_ResourceMgr"),h=cc._decorator,l=h.ccclass,u=h.property,p=h.menu,d=(h.executeInEditMode,h.executionOrder);(function(e){e[e.none=0]="none",e[e.bullet=1]="bullet",e[e.bulletEffect=2]="bulletEffect",e[e.gold=3]="gold",e[e.score=4]="score",e[e.fishShadow=5]="fishShadow",e[e.fishSkeletonShadow=6]="fishSkeletonShadow",e[e.flame=7]="flame",e[e.goldBomb=8]="goldBomb",e[e.love=9]="love",e[e.flower=10]="flower"})(c=o.NodeType||(o.NodeType={}));var f=function(){function e(){this.isInitRes=!0,this.nodeType=c.none,this.prefab=null,this.resname="none",this.initCount=0,this.pool=null,this.pool=new cc.NodePool}return e.prototype.setGame=function(e){this.game=e},e.prototype.Init=function(){if(this.isInitRes)for(var e=0;e<this.initCount;e++){var t=cc.instantiate(this.prefab);this.pool.put(t)}else{cc.error("====\u6c60\u5b50---",this.resname);var o=this.game.resourMgr.iMrgBase.getCommonRes(this.resname,a.CommonResType.Prefab,cc.Prefab);t=cc.instantiate(o),this.pool.put(t)}},e.prototype.Dequeue=function(){return this.pool.size()>0?this.pool.get():this.isInitRes?cc.instantiate(this.prefab):void cc.error("\u5f53\u524d\u8d44\u6e90\u4e0d\u662f\u521d\u59cb\u8d44\u6e90\uff0c\u9700\u8981\u4f7f\u7528\u5f02\u6b65\u52a0\u8f7d")},e.prototype.AsyncDequeue=function(e){if(this.pool.size()>0)e&&e(this.pool.get());else if(this.isInitRes)e&&e(cc.instantiate(this.prefab));else{var t=this.game.resourMgr.iMrgBase.getCommonRes(this.resname,a.CommonResType.Prefab,cc.Prefab),o=cc.instantiate(t);e&&e(o)}},e.prototype.Enqueue=function(e){e.stopAllActions(),this.pool.put(e)},e.prototype.clear=function(){this.pool.clear()},r([u({tooltip:"\u662f\u5426\u662f\u521d\u59cb\u8d44\u6e90"})],e.prototype,"isInitRes",void 0),r([u({type:cc.Enum(c),tooltip:"1:\u5b50\u5f39 2:\u5b50\u5f39\u7279\u6548 3:\u91d1\u5e01 4:\u5206\u6570 5:\u9c7c\u9634\u5f71 6:\u94bb\u5934\u5c3e\u7130"})],e.prototype,"nodeType",void 0),r([u({type:cc.Prefab,visible:function(){return this.isInitRes}})],e.prototype,"prefab",void 0),r([u({tooltip:"\u8d44\u6e90\u540d\u79f0",visible:function(){return!this.isInitRes}})],e.prototype,"resname",void 0),r([u({type:cc.Integer,tooltip:"\u6c60\u4e2d\u7684\u521d\u59cb\u6570\u91cf"})],e.prototype,"initCount",void 0),r([l("Pool")],e)}();o.Pool=f;var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.poolArray=[],t.poolMap=null,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.init=function(){this.poolMap=new Map;for(var e=0;e<this.poolArray.length;e++){var t=this.poolArray[e];t.Init(),this.poolMap.set(t.nodeType,t)}},t.prototype.Dequeue=function(e){if(this.poolMap.has(e))return this.poolMap.get(e).Dequeue();cc.error("\u6ca1\u6709\u8fd9\u4e2a\u7c7b\u578b\u7684\u6c60\uff1a"+c[e])},t.prototype.AsyncDequeue=function(e,t){this.poolMap.has(e)?this.poolMap.get(e).AsyncDequeue(t):cc.error("\u6ca1\u6709\u8fd9\u4e2a\u7c7b\u578b\u7684\u6c60\uff1a"+c[e])},t.prototype.Enqueue=function(e,t,o){var i;this.poolMap.has(t)?(i=this.poolMap.get(t)).Enqueue(e):((i=new f).nodeType=t,i.isInitRes=!1,i.resname=o,i.Enqueue(e),this.poolMap.set(t,i))},t.prototype.onDestroy=function(){var e,t;try{for(var o=s(this.poolMap.keys()),i=o.next();!i.done;i=o.next()){var n=i.value;this.poolMap.delete(n)}}catch(r){e={error:r}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}this.poolArray.length},r([u([f])],t.prototype,"poolArray",void 0),r([l,p("FISHO/PoolManager"),d(-1)],t)}(cc.Component);o.default=y,cc._RF.pop()},{"./FISHO_ResourceMgr":"FISHO_ResourceMgr"}],FISHO_QuadtreeCollision:[function(e,t,o){"use strict";cc._RF.push(t,"c90ceRwXndMVqJ8sT/uiIF+","FISHO_QuadtreeCollision"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function e(e){this._tree=new r(e)}return e.prototype.check=function(e,t){var o=[];if(this._tree){this._tree.clear();var i=cc.director.getCollisionManager();i.updateCollider(t);for(var r=0,s=e.length;r<s;r++){var c,a=e[r];if(e[r].IsDragon)for(var h=a.colliderArray.length,l=0;l<h;l++){var u=a.colliderArray[l];i.updateCollider(u);var p={x:(c=u.world.aabb).x,y:c.y,height:c.height,width:c.width,collider:u,fish:a};this._tree.insert(p)}else u=e[r].collider,i.updateCollider(u),p={x:(c=u.world.aabb).x,y:c.y,height:c.height,width:c.width,collider:u,fish:a},this._tree.insert(p)}this._tree.retrieve(t.world.aabb).forEach(function(e){n(e.collider,t)&&-1==o.indexOf(e.fish)&&o.push(e.fish)})}return o},e}();function n(e,t){if(!cc.director.getCollisionManager().shouldCollide(e,t))return!1;var o=e.world,i=t.world;if(!o.aabb.intersects(i.aabb))return!1;var n=e instanceof cc.BoxCollider||e instanceof cc.PolygonCollider,r=t instanceof cc.BoxCollider||t instanceof cc.PolygonCollider,s=e instanceof cc.CircleCollider,c=t instanceof cc.CircleCollider;return n&&r?cc.Intersection.polygonPolygon(o.points,i.points):s&&c?cc.Intersection.circleCircle(o,i):n&&c?cc.Intersection.polygonCircle(o.points,i):!(!s||!r)&&cc.Intersection.polygonCircle(i.points,o)}o.default=i;var r=function(){function e(e,t,o,i){this.max_objects=null,this.max_levels=null,this.level=null,this.bounds=null,this.objects=null,this.nodes=null,this.max_objects=t||10,this.max_levels=o||4,this.level=i||0,this.bounds=e,this.objects=[],this.nodes=[]}return e.prototype.split=function(){var t=this.level+1,o=this.bounds.width/4,i=this.bounds.height/4,n=this.bounds.width/2,r=this.bounds.height/2;this.bounds.x,this.bounds.y,this.nodes[0]=new e({x:3*o,y:3*i,width:n,height:r},this.max_objects,this.max_levels,t),this.nodes[1]=new e({x:o,y:3*i,width:n,height:r},this.max_objects,this.max_levels,t),this.nodes[2]=new e({x:o,y:i,width:n,height:r},this.max_objects,this.max_levels,t),this.nodes[3]=new e({x:3*o,y:i,width:n,height:r},this.max_objects,this.max_levels,t)},e.prototype.getIndex=function(e){var t=[],o=this.bounds.x+this.bounds.width/2,i=this.bounds.y+this.bounds.height/2,n=e.y+e.height>i,r=e.x<o,s=e.x+e.width>o,c=e.y<i;return n&&s&&t.push(0),r&&n&&t.push(1),r&&c&&t.push(2),s&&c&&t.push(3),t},e.prototype.insert=function(e){var t,o=0;if(this.nodes.length)for(t=this.getIndex(e),o=0;o<t.length;o++)this.nodes[t[o]].insert(e);else if(this.objects.push(e),this.objects.length>this.max_objects&&this.level<this.max_levels){for(this.nodes.length||this.split(),o=0;o<this.objects.length;o++){t=this.getIndex(this.objects[o]);for(var i=0;i<t.length;i++)this.nodes[t[i]].insert(this.objects[o])}this.objects=[]}},e.prototype.retrieve=function(e){var t=this.getIndex(e),o=this.objects;if(this.nodes.length)for(var i=0;i<t.length;i++)o=o.concat(this.nodes[t[i]].retrieve(e));return o=o.filter(function(e,t){return o.indexOf(e)>=t})},e.prototype.clear=function(){this.objects=[];for(var e=0;e<this.nodes.length;e++)this.nodes.length&&this.nodes[e].clear();this.nodes=[]},e}();cc._RF.pop()},{}],FISHO_ResourceMgr:[function(e,t,o){"use strict";cc._RF.push(t,"1cffeb9p4dD15PepQUGm3tV","FISHO_ResourceMgr");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.ResourceType=o.CommonResType=void 0;var s,c,a=cc._decorator,h=a.ccclass;a.menu,a.property,function(e){e[e.fishPath=0]="fishPath",e[e.font=1]="font",e[e.fishIcon=2]="fishIcon",e[e.fishSkeleton=3]="fishSkeleton",e[e.fishPrefab=4]="fishPrefab",e[e.Prefab=5]="Prefab",e[e.font_Cannon=6]="font_Cannon",e[e.font_function=7]="font_function",e[e.DragonDie=8]="DragonDie",e[e.imgs=9]="imgs",e[e.function=10]="function"}(o.CommonResType||(o.CommonResType={})),function(e){e[e.none=0]="none",e[e.fishPrefab=1]="fishPrefab",e[e.initPrefab=2]="initPrefab",e[e.music=3]="music",e[e.sound=4]="sound",e[e.common=5]="common",e[e.font=6]="font",e[e.other=7]="other"}(s=o.ResourceType||(o.ResourceType={})),function(e){e.initPrefab="Res/Prefab/",e.fishPrefab="Res/fishPrefab/",e.sound="Res/Sounds/sound/",e.music="Res/Sounds/music/",e.common="Res/imgs/Common/",e.font="Res/imgs/Common/font/",e.other="PreloadRes/Prefab/"}(c||(c={}));var l=function(e){function t(){var t=e.call(this)||this;return t.KindID=0,t.iMrgBase=null,t.currBundle=null,t.preloadResArray=null,t.currBundle=cc.assetManager.getBundle("FISHO"),t.preloadResArray=t.currBundle.getDirWithPath("PreloadRes",cc.Prefab),t}return n(t,e),t.prototype.setIMrgBase=function(e){this.iMrgBase=e,this.iMrgBase.setGameBundle(this.currBundle),this.iMrgBase.setPreloadArray(this.preloadResArray),this.iMrgBase.preloadRes()},t.prototype._getResPath=function(e,t){return c[s[e]]+t},t.prototype.getRes=function(e,t,o){var i=this._getResPath(t,e);return this.currBundle.get(i,o)},t.prototype.loadOther=function(e,t,o,i,n){void 0===n&&(n=!1);var r=this._getResPath(t,e);this.iMrgBase.load(r,o,i,n)},r([h],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],FISHO_RotateAround:[function(e,t,o){"use strict";cc._RF.push(t,"0640cMXFkBOhL7fPWhpA3jW","FISHO_RotateAround");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.menu,h=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetPos=null,t.clockwise=!0,t.timePerRound=.5,t.angle=0,t.radius=0,t.isRotating=!1,t.expendTime=0,t}return n(t,e),t.prototype.onLoad=function(){this.originPos=this.node.getPosition()},t.prototype.onDisable=function(){},t.prototype.run=function(e){this.angle=0;var t=e.convertToWorldSpaceAR(cc.v2());this._targetPos=this.node.parent.convertToNodeSpaceAR(t),this.radius=this.getDistance(this._targetPos,this.node.getPosition()),this.expendTime=0,this.isRotating=!0},t.prototype.getDistance=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},t.prototype.update=function(e){if(this.isRotating&&this._targetPos){if(this.expendTime>=2*this.timePerRound)return this.isRotating=!1,this.node.setPosition(this.originPos),void(this.node.angle=0);var t=Math.PI/180*this.angle,o=cc.v2(0,1).mul(this.radius).rotate(t).sub(cc.v2(0,this.radius));this.node.setPosition(o),this.node.angle=this.angle;var i=e*(360/this.timePerRound);this.angle+=i,this.angle>=360?this.angle%=360:this.angle<=-360&&(this.angle%=-360),this.expendTime+=e}},r([h({tooltip:"\u987a\u65f6\u9488\u65cb\u8f6c"})],t.prototype,"clockwise",void 0),r([c,a("FISHO/RotateAround")],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],FISHO_RuleDetails:[function(e,t,o){"use strict";cc._RF.push(t,"4e867XKp6JFnbslzeMKLrXy","FISHO_RuleDetails");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sv=null,t}return n(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},t.prototype.touchEnd=function(){this.node.active=!1},t.prototype.show=function(){this.node.setSiblingIndex(this.node.parent.childrenCount-1),this.sv.setContentPosition(cc.v2()),this.node.active=!0},r([a(cc.ScrollView)],t.prototype,"sv",void 0),r([c],t)}(cc.Component);o.default=h,cc._RF.pop()},{}],FISHO_SelectFishItem:[function(e,t,o){"use strict";cc._RF.push(t,"304c2PXRu9F06nKiFFuT8Kz","FISHO_SelectFishItem");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectSign=null,t.fishSprite=null,t.lblMultiple=null,t.infoBg=null,t.id=-1,t.isSelect=!1,t}return n(t,e),t.prototype.setUI=function(e,t){var o="";e.minScore>0?(o="x"+e.minScore,e.maxScore>0&&(o+="~"+e.maxScore),this.infoBg.active=!0):this.infoBg.active=!1,this.lblMultiple.string=o,this.fishSprite.spriteFrame=t,this.id=e.fishId,this.node.name=String(e.fishId),this.node.active=!0},t.prototype.setStatu=function(e){void 0===e&&(e=!1),this.isSelect=e,this.selectSign.active=this.isSelect},t.prototype.onFishSettingSelect=function(){this.isSelect=!this.isSelect,this.selectSign.active=this.isSelect},r([a(cc.Node)],t.prototype,"selectSign",void 0),r([a(cc.Sprite)],t.prototype,"fishSprite",void 0),r([a(cc.Label)],t.prototype,"lblMultiple",void 0),r([a(cc.Node)],t.prototype,"infoBg",void 0),r([c],t)}(cc.Component);o.default=h,cc._RF.pop()},{}],FISHO_ShootSelectSetting:[function(e,t,o){"use strict";cc._RF.push(t,"cd97a1mTK5D3rUIi6Hoqdk+","FISHO_ShootSelectSetting");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,o=t&&e[t],i=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./FISHO_ResourceMgr"),a=e("./FISHO_SelectFishItem"),h=cc._decorator,l=h.ccclass,u=h.menu,p=h.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefab=null,t.contentNode=null,t.onOk=null,t.scriptName="FISHO_ShootSelectSetting",t.fishSelectTypeMap=[{fishId:601,minScore:100,maxScore:1e3},{fishId:401,minScore:100,maxScore:500},{fishId:309,minScore:0,maxScore:0},{fishId:308,minScore:0,maxScore:0},{fishId:307,minScore:0,maxScore:0},{fishId:306,minScore:0,maxScore:0},{fishId:305,minScore:0,maxScore:0},{fishId:304,minScore:0,maxScore:0},{fishId:303,minScore:0,maxScore:0},{fishId:302,minScore:0,maxScore:0},{fishId:301,minScore:0,maxScore:0},{fishId:209,minScore:100,maxScore:0},{fishId:208,minScore:30,maxScore:100},{fishId:207,minScore:20,maxScore:60},{fishId:206,minScore:10,maxScore:30},{fishId:205,minScore:10,maxScore:30},{fishId:204,minScore:10,maxScore:30},{fishId:203,minScore:20,maxScore:0},{fishId:202,minScore:18,maxScore:0},{fishId:201,minScore:15,maxScore:0},{fishId:110,minScore:12,maxScore:0},{fishId:109,minScore:10,maxScore:0},{fishId:108,minScore:9,maxScore:0},{fishId:107,minScore:8,maxScore:0},{fishId:106,minScore:7,maxScore:0},{fishId:105,minScore:6,maxScore:0},{fishId:104,minScore:5,maxScore:0},{fishId:103,minScore:4,maxScore:0},{fishId:102,minScore:3,maxScore:0},{fishId:101,minScore:2,maxScore:0}],t.currSelectFishMap=new Map,t.fishNodes=[],t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},t.prototype.touchEnd=function(){this.node.active=!1},t.prototype.start=function(){for(var e=0,t=this.fishSelectTypeMap.length;e<t;e++)this.setUI(e)},t.prototype.setUI=function(e){var t=this,o=this.fishSelectTypeMap[e],i=cc.instantiate(this.prefab),n=i.addComponent(a.default);this.SetBtnEvent(i.getComponent(cc.Button),!0,!0),n.selectSign=cc.find("selecLlight",i),n.fishSprite=i.getComponent(cc.Sprite),n.lblMultiple=cc.find("Label",i).getComponent(cc.Label),n.infoBg=cc.find("info",i),this.game.resourMgr.iMrgBase.loadCommonRes(String(o.fishId),cc.SpriteFrame,c.CommonResType.fishIcon,function(e){n.setUI(o,e),t.fishNodes.push(n)}),this.contentNode.addChild(i)},t.prototype.onEnable=function(){for(var e=0,t=this.fishNodes.length;e<t;e++){var o=this.fishNodes[e],i=this.currSelectFishMap.has(o.id);o.setStatu(i)}},t.prototype.IsSelectFish=function(){return this.currSelectFishMap.size>0},t.prototype.onCloseBtnClick=function(){this.node.active=!1},t.prototype.onCancelBtnClick=function(){for(var e=0,t=this.fishNodes.length;e<t;e++)this.fishNodes[e].setStatu()},t.prototype.onOKBtnClick=function(){this.node.active=!1,this.currSelectFishMap.clear();for(var e=0,t=this.fishNodes.length;e<t;e++){var o=this.fishNodes[e];o.isSelect&&this.currSelectFishMap.set(o.id,!0)}this.onOk&&this.onOk()},t.prototype.getCurrentSelectFishID=function(){var e,t,o=[];try{for(var i=s(this.currSelectFishMap.keys()),n=i.next();!n.done;n=i.next()){var r=n.value;o.push(r)}}catch(c){e={error:c}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return o},t.prototype.SetBtnEvent=function(e,t,o){if(void 0===t&&(t=!0),void 0===o&&(o=!0),null!=e){var i=new cc.Component.EventHandler;i.target=this.node,i.component=this.scriptName,i.handler="BtnEventCallback",e.clickEvents.push(i),e.node.active=t,e.interactable=o}},t.prototype.BtnEventCallback=function(e){var t=e.target;this.OnClickBtn(t)},t.prototype.OnClickBtn=function(e){switch(cc.log("===============>>\u6240\u6709\u6309\u94ae\u70b9\u51fb\u4e8b\u4ef6\uff1a"+e.name),e.name){case"closebtn":this.onCloseBtnClick();break;case"OKBtn":this.onOKBtnClick();break;case"ClearBtn":this.onCancelBtnClick();break;default:e.getComponent(a.default).onFishSettingSelect()}},r([p(cc.Node)],t.prototype,"prefab",void 0),r([p(cc.Node)],t.prototype,"contentNode",void 0),r([l,u("FISHO/ShootSelectSetting")],t)}(cc.Component);o.default=d,cc._RF.pop()},{"./FISHO_ResourceMgr":"FISHO_ResourceMgr","./FISHO_SelectFishItem":"FISHO_SelectFishItem"}],FISHO_SuperbombEffect:[function(e,t,o){"use strict";cc._RF.push(t,"0735cdw6AhIvqC6k0fqCW1l","FISHO_SuperbombEffect");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../FISHO_GameDefine"),c=cc._decorator,a=c.ccclass,h=c.menu,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bomb=null,t.lblIndex=null,t.haloAni=null,t.currIndex=0,t.bulletIndex=0,t.targetFort=null,t.currWeight=s.FunctionWeight.superBomb,t.isNext=!0,t._score=0,t.bombRotateSoundId=-1,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.initFunction=function(e,t,o){var i=this;this.targetFort=e,this.currIndex=0,this._score=o,this.playId=e.gameId,this.bulletIndex=t,this.targetFort.setEffect(this),this.haloAni.on(cc.Animation.EventType.FINISHED,function(){i.haloAni.node.active=!1}),this.rotateSuperBomb(this.bomb),this.showSuperBomb(this.game.GameLogic.functionLayer.points[this.currIndex])},t.prototype.rotateSuperBomb=function(e){var t=cc.repeatForever(cc.sequence(cc.rotateBy(.6,-180),cc.delayTime(.015)));cc.tween(e).then(t).start()},t.prototype.showSuperBomb=function(e){var t=this,o=this,i=0==this.currIndex?3.5:2;this.lblIndex.string=(this.currIndex+1).toString(),cc.tween(this.bomb).sequence(cc.delayTime(.25),cc.scaleTo(.8,1.5),cc.scaleTo(.8,1)).start();var n=cc.sequence(cc.moveTo(1.5,e),cc.callFunc(function(){o.haloAni.node.active=!0,o.bombRotateSoundId=t.game.iAudioPlayer.play_sound("bombrotate"),o.haloAni.play().repeatCount=0==o.currIndex?2:1}),cc.delayTime(i),cc.callFunc(function(){var e=o.node.convertToWorldSpaceAR(cc.v2());e=t.game.bulletMgr.node.convertToNodeSpaceAR(e),o.bombRotateSoundId>-1&&t.game.iAudioPlayer.stop_sound(o.bombRotateSoundId);var i=t._score>450?s.FunctionCatchCount.superBomb:10;t.game.bulletMgr.playHit({pos:e,hitType:s.HitType.bigBang,catchCount:i,bulletIndex:o.bulletIndex,bomb:s.bombType.superBomb,playerId:o.playId})}));cc.tween(this.node).then(n).start()},t.prototype.nextStep=function(){this.currIndex++,this.currIndex>=this.game.GameLogic.functionLayer.points.length&&(this.currIndex=0),this.showSuperBomb(this.game.GameLogic.functionLayer.points[this.currIndex])},t.prototype.onDestroy=function(){this.game.iGameBase.getExectUpdate()&&this.targetFort.subEffectWeight(this.currWeight)},t.prototype.beforDestroy=function(){this.node&&this.node.isValid&&(this.node.stopAllActions(),this.node.destroy())},t.prototype.ImmediatelyDestroy=function(){this.beforDestroy()},r([l(cc.Node)],t.prototype,"bomb",void 0),r([l(cc.Label)],t.prototype,"lblIndex",void 0),r([l(cc.Animation)],t.prototype,"haloAni",void 0),r([a,h("FISHO/SuperbombEffect")],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../FISHO_GameDefine":"FISHO_GameDefine"}],FISHO_ThunderEffect:[function(e,t,o){"use strict";cc._RF.push(t,"155b4fLm2lFjbiivylApjLD","FISHO_ThunderEffect");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.menu,h=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startObj=null,t.endObj=null,t.isplaying=!1,t.isChangeScaleing=!1,t.lightPointNode=null,t.circleNode=null,t.lighting=null,t.currIndexLable=null,t.isInit=!1,t._complete=null,t._fiexComplete=null,t.consumeTime=0,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.init=function(e,t,o,i,n,r){void 0===n&&(n=!1),this._index=o,this.startObj=e,this.endObj=t,this.lighting.scale=1,this.lighting.height=0,this.lightPointNode.y=0,this._complete=i,this._fiexComplete=r,this.isChangeScaleing=!1,this.isplaying=n,this.scheduleOnce(this.delayHand,.1),this.isInit=!0,this.game.iAudioPlayer.play_sound("shandian1")},t.prototype.delayHand=function(){this.lightPointNode.active=!0,this.showIndex(this._index)},t.prototype.showIndex=function(e){this.circleNode.active=!0,this.currIndexLable.string=(e+1).toString()},t.prototype.hideIndex=function(){this.circleNode.active=!1},t.prototype.converCurrLocalPos=function(e){var t=e.convertToWorldSpaceAR(cc.v2());return this.node.parent.convertToNodeSpaceAR(t)},t.prototype.getAngle=function(e){var t=cc.v2(e.x,e.y).signAngle(cc.v2(0,1))/Math.PI*180;return 360-t},t.prototype.setAngleAndPosition=function(){var e=this.converCurrLocalPos(this.endObj),t=this.converCurrLocalPos(this.startObj),o=e.sub(t),i=o.mag()-.5*this.startObj.width-.5*this.endObj.width;return this.node.angle=this.getAngle(o),this.node.setPosition(t.add(o.normalize().mul(.5*this.startObj.width))),i},t.prototype.changeScale=function(){var e=this;cc.tween(this.lighting).then(cc.scaleTo(1.5,0,1)).call(function(){e.isInit=!1,e._complete&&e._complete.exec(e._index),e.node.destroy()}).start()},t.prototype.update=function(e){if(this.isInit){var t=this.setAngleAndPosition();if(this.isplaying)this.isChangeScaleing||(this.isChangeScaleing=!0,this.changeScale()),this.lighting.height=t;else{this.consumeTime+=e;var o=e*t/.6,i=this.consumeTime/e*o;this.lighting.height=cc.misc.lerp(this.lighting.height,i,1),this.lightPointNode.y=this.lighting.height,this.consumeTime>=.6&&(this.game.iAudioPlayer.play_sound("shandian2"),this._fiexComplete&&this._fiexComplete.exec(),this.isplaying=!0,this.lightPointNode.active=!1)}var n=this.lighting.height;this.circleNode.y=cc.misc.lerp(this.circleNode.y,cc.misc.clampf(n,0,n-100),1)}},r([h(cc.Node)],t.prototype,"lightPointNode",void 0),r([h(cc.Node)],t.prototype,"circleNode",void 0),r([h(cc.Node)],t.prototype,"lighting",void 0),r([h(cc.Label)],t.prototype,"currIndexLable",void 0),r([c,a("FISHO/ThunderEffect")],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],FISHO_fishPathTool:[function(e,t,o){"use strict";cc._RF.push(t,"928a1MqpRhHQbjsrNPC/jjQ","FISHO_fishPathTool");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.menu,h=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.is_debug=!1,t.anim_com=null,t.graphics=null,t.road_data_set=[],t}return n(t,e),t.prototype.onLoad=function(){this.anim_com=this.node.getComponent(cc.Animation);var e=this.anim_com.getClips()[0];this.graphics=this.node.getComponent(cc.Graphics),this.graphics||(this.graphics=this.node.addComponent(cc.Graphics),this.graphics.fillColor=cc.color(255,0,0,255));var t,o=e.curveData.paths;for(t in this.road_data_set=[],o){var i=o[t].props.position;this.gen_path_data(i)}},t.prototype.get_road_set=function(){return this.road_data_set},t.prototype.gen_path_data=function(e){for(var t=null,o=null,i=null,n=null,r=[],s=0;s<e.length;s++){var c=e[s];null!==t&&r.push([o,t,t,cc.v2(c.value[0],c.value[1])]),o=cc.v2(c.value[0],c.value[1]);for(var a=0;a<c.motionPath.length;a++)i=cc.v2(c.motionPath[a][0],c.motionPath[a][1]),n=cc.v2(c.motionPath[a][2],c.motionPath[a][3]),null===t&&(t=n),r.push([o,t,n,i]),t=cc.v2(c.motionPath[a][4],c.motionPath[a][5]),o=i}for(var h=[r[0][0]],l=0;l<r.length;l++){o=r[l][0],t=r[l][1],n=r[l][2],i=r[l][3];var u=this.bezier_length(o,t,n,i)/20,p=1/(u=Math.floor(u)),d=p;for(s=0;s<u;s++){var f=o.x*(1-d)*(1-d)*(1-d)+3*t.x*d*(1-d)*(1-d)+3*n.x*d*d*(1-d)+i.x*d*d*d,y=o.y*(1-d)*(1-d)*(1-d)+3*t.y*d*(1-d)*(1-d)+3*n.y*d*d*(1-d)+i.y*d*d*d;h.push(cc.v2(f,y)),d+=p}}if(this.is_debug){for(s=0;s<h.length;s++)this.graphics.moveTo(h[s].x,h[s].y),this.graphics.lineTo(h[s].x+2,h[s].y+2),this.graphics.lineTo(h[s].x-2,h[s].y-2),this.graphics.lineTo(h[s].x-2,h[s].y-2),this.graphics.lineTo(h[s].x+2,h[s].y+2),this.graphics.stroke(),this.graphics.close();this.graphics.fill()}this.road_data_set.push(h);var m=JSON.stringify(this.road_data_set,null,4);new Blob([m])},t.prototype.bezier_length=function(e,t,o,i){for(var n=e,r=0,s=.05,c=0;c<20;c++){var a=e.x*(1-s)*(1-s)*(1-s)+3*t.x*s*(1-s)*(1-s)+3*o.x*s*s*(1-s)+i.x*s*s*s,h=e.y*(1-s)*(1-s)*(1-s)+3*t.y*s*(1-s)*(1-s)+3*o.y*s*s*(1-s)+i.y*s*s*s,l=cc.v2(a,h),u=l.sub(n);n=l,r+=u.mag(),s+=.05}return r},r([h],t.prototype,"is_debug",void 0),r([c,a("FISHO/fishPathTool")],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],FISHO_functionUI:[function(e,t,o){"use strict";cc._RF.push(t,"d805bV4MUxP+bw9QDZlFTJb","FISHO_functionUI");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./FISHO_GameDefine"),c=e("./FISHO_RotateAround"),a=cc._decorator,h=a.ccclass,l=a.menu,u=(a.inspector,a.property),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=s.functionType.normal,t.title=null,t.multiple=null,t.lblMultiple=null,t.catchScore=null,t.lblCatchScore=null,t.totalScore=null,t.lblTotalScore=null,t.mountPoint=null,t.isDestroy=!1,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.getMountPoint=function(){return this.mountPoint?this.mountPoint.convertToWorldSpaceAR(cc.v2()):null},t.prototype.setMultiple=function(e){this.lblMultiple&&(this.lblMultiple.string=e)},t.prototype.showCatchScore=function(e){cc.error("====",e),this.lblCatchScore&&this.game.iGameBase.updatenNumberAnim(this.lblCatchScore,e,1,null)},t.prototype.showTotalScore=function(e,t){this.lblTotalScore.string="0",this.totalScore.active=!0,this.game.iGameBase.updatenNumberAnim(this.lblTotalScore,e,1,null);var o=this.totalScore.getPosition();cc.tween(this.title).to(.25,{position:cc.v3(o.x,70)}).start();var i=cc.moveTo(.5,cc.v2(o.x,o.y+30)),n=cc.moveTo(.5,o),r=this;cc.tween(this.totalScore).sequence(cc.repeat(cc.sequence(i,n),4),cc.fadeOut(.5)).call(function(){r.hide(t,e)}).start()},t.prototype.show=function(e,t){var o=!0;if(this.isDestroy=!1,this.type==s.functionType.superBomb){this.title.scale=0;var i=cc.v2();this.node.convertToNodeSpaceAR(t,i),this.title.setPosition(i),this.title.active=!0,cc.tween(this.title).sequence(cc.delayTime(.25),cc.scaleTo(.25,1),cc.delayTime(1),cc.moveTo(.8,cc.v2())).start()}else this.type==s.functionType.lighting?(this.title.active=!0,this.node.getComponent(c.default).run(t)):(this.title.scale=.5,this.title.active=!0,cc.tween(this.title).then(cc.scaleTo(.2,1)).start(),this.type==s.functionType.mermaid&&(o=t));this.catchScore&&o&&(this.catchScore.x=e.siteIndex%2==0?231.116:-197.989,this.catchScore.active=!0)},t.prototype.hide=function(e,t){var o=this,i=s.getWeightByType(this.type);cc.tween(this.title).to(.5,{opacity:0}).call(function(){o.destoryFunction(),e(i,t)}).start()},t.prototype.destoryFunction=function(){this.isDestroy=!0,this.node&&this.node.isValid&&this.node.destroy()},r([u({type:cc.Enum(s.functionType)})],t.prototype,"type",void 0),r([u(cc.Node)],t.prototype,"title",void 0),r([u(cc.Node)],t.prototype,"multiple",void 0),r([u(cc.Label)],t.prototype,"lblMultiple",void 0),r([u({type:cc.Node,visible:function(){return this.type==s.functionType.drill||this.type==s.functionType.superBomb||this.type==s.functionType.mermaid}})],t.prototype,"catchScore",void 0),r([u({type:cc.Label,visible:function(){return this.type==s.functionType.drill||this.type==s.functionType.superBomb||this.type==s.functionType.mermaid}})],t.prototype,"lblCatchScore",void 0),r([u(cc.Node)],t.prototype,"totalScore",void 0),r([u(cc.Label)],t.prototype,"lblTotalScore",void 0),r([u({type:cc.Node,visible:function(){return this.type==s.functionType.mermaid||this.type==s.functionType.phoenix}})],t.prototype,"mountPoint",void 0),r([h,l("FISHO/FunctionFort")],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./FISHO_GameDefine":"FISHO_GameDefine","./FISHO_RotateAround":"FISHO_RotateAround"}],FishMove:[function(e,t,o){"use strict";cc._RF.push(t,"f67ddf0gPpDtJV/gYbwzLoM","FishMove");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),r([c],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],FishPathMgr:[function(e,t,o){"use strict";cc._RF.push(t,"4df86E4LqBBr6VM5v+m3lnt","FishPathMgr");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),r([c],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],GraphicsSpriteMesh_rope:[function(e,t,o){"use strict";cc._RF.push(t,"6177ba/KuNEU63lNQge1FwG","GraphicsSpriteMesh_rope");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},s=this&&this.__read||function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var i,n,r=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(c){n={error:c}}finally{try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}return s},c=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,h=a.ccclass,l=a.property,u=a.requireComponent,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprite=null,t.graphics=null,t._vertices={x:[],y:[],nu:[],nv:[],triangles:[]},t}return n(t,e),t.prototype.onLoad=function(){this.graphics=this.node.getComponent(cc.Graphics),this.sprite.type=cc.Sprite.Type.MESH,this.sprite.node.anchorY=1,this.sprite.node.anchorX=0,this.sprite.node.scaleY=-1,this.sprite.node.x=this.node.y=0,this.sprite.spriteFrame.vertices=this._vertices},t.prototype.stroke=function(){if(cc.game.renderType===cc.game.RENDER_TYPE_WEBGL){var e=this._vertices;e.x.length=e.y.length=e.nu.length=e.nv.length=e.triangles.length=0;for(var t=this.graphics._impl,o=this.graphics.lineWidth,i=[],n=cc.v2(),r=0;r<t._paths.length;r++){var s=t._paths[r].points;if(!(s.length<2))for(var a=s.length-1;a>0;a--){var h=[],l=cc.v2(s[a].x,s[a].y),u=cc.v2(s[a-1].x,s[a-1].y),p=l.sub(u),d=(0==p.y?cc.v2(0,1):cc.v2(1,-p.x/p.y).normalize()).mulSelf(o/2),f=l.add(d),y=l.sub(d),m=u.add(d),g=u.sub(d),_=p.len(),v=e.x.length;e.x.push(f.x,y.x,m.x,g.x),e.y.push(f.y,y.y,m.y,g.y),e.nu.push(.02*n.x,.02*n.x,.02*(n.x+_),.02*(n.x+_)),e.nv.push(1,0,1,0),h.push(v+0),h.push(v+1),h.push(v+2),h.push(v+1),h.push(v+2),h.push(v+3);var S=p.signAngle(cc.v2(-1,0));v=e.x.length,e.x.push(l.x),e.y.push(l.y),e.nu.push(.02*n.x),e.nv.push(.5);for(var F=0;F<12;F++){var b=2*Math.PI*F/12,C=cc.v2(o/2*Math.cos(b),o/2*Math.sin(b));e.x.push(C.add(l).x),e.y.push(C.add(l).y),e.nu.push(.02*(C.rotate(S).x+n.x)),e.nv.push(C.rotate(S).y/o+.5),0===F?h.push(v,v+1+F,v+12):h.push(v,v+1+F,v+F)}i.push(h),n.addSelf(cc.v2(_,0))}}i.reverse(),i.forEach(function(t){var o;(o=e.triangles).push.apply(o,c(t))}),this.sprite.setVertsDirty()}else this.graphics.stroke()},t.prototype.clear=function(){if(this.graphics.clear(!0),cc.game.renderType===cc.game.RENDER_TYPE_WEBGL){var e=this._vertices;e.x.length=e.y.length=e.nu.length=e.nv.length=e.triangles.length=0,this.sprite.setVertsDirty()}},r([l(cc.Sprite)],t.prototype,"sprite",void 0),r([h,u(cc.Graphics)],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],PathEditor:[function(e,t,o){"use strict";cc._RF.push(t,"d31ceXL7k1CTZzOo+mNOeYu","PathEditor");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.editorInput=null,t.fishPath=null,t}return n(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.showPath=function(e){var t=this;cc.assetManager.loadBundle("FISH",function(o,i){o||i.load("Res/FishDefine/FishPath/"+e,cc.JsonAsset,function(e,o){e||(t.fishPath=o.json)})})},r([a(cc.EditBox)],t.prototype,"editorInput",void 0),r([c],t)}(cc.Component);o.default=h,cc._RF.pop()},{}],TestFish:[function(e,t,o){"use strict";cc._RF.push(t,"62379Xk0LVL44FdhQyxinqe","TestFish");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.otherNode=null,t.otherNodeTwo=null,t}return n(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchAim,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.keyUp,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this)},t.prototype.start=function(){null.world},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchAim,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.keyUp,this)},t.prototype.keyUp=function(e){switch(e.keyCode){case cc.macro.KEY.m:this.lookAtObject();break;case cc.macro.KEY.s:case cc.macro.KEY.e:break;case cc.macro.KEY.q:this.changeFishAngle()}},t.prototype.playSound=function(){},t.prototype.changeFishAngle=function(){this.otherNodeTwo.angle+=20},t.prototype.touchMove=function(e){var t=e.getLocation(),o=cc.v2();this.node.convertToNodeSpaceAR(t,o)},t.prototype.onTouchAim=function(e){var t=e.getLocation(),o=cc.v2();this.node.convertToNodeSpaceAR(t,o)},t.prototype.lookAtObject=function(){var e=cc.v2(0,1),t=this.otherNodeTwo.x-e.x,o=this.otherNodeTwo.y-e.y,i=cc.v2(t,o).signAngle(cc.v2(0,1))/Math.PI*180;console.log("\u89d2\u5ea6\uff1a"+i+"   \u504f\u79fb\u7684\u89d2\u5ea6\uff1a"+Math.abs(this.otherNodeTwo.angle-i)),this.otherNodeTwo.rotation=i},t.prototype.update=function(){},r([a(cc.Node)],t.prototype,"otherNode",void 0),r([a(cc.Node)],t.prototype,"otherNodeTwo",void 0),r([c],t)}(cc.Component);o.default=h,cc._RF.pop()},{}],loadPath:[function(e,t,o){"use strict";cc._RF.push(t,"faf69b9VtVKkrU/STjP3CMN","loadPath");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.getGMTTime=void 0,o.getGMTTime=function(){var e=new Date;return e.setMinutes(e.getMinutes()+e.getTimezoneOffset()),e.getTime()};var s=cc._decorator,c=s.ccclass,a=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),r([c],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],test1:[function(e,t,o){"use strict";cc._RF.push(t,"e7b25ewFZNPc6/fMJm/9Oyp","test1");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../GameScripts/FISHO_fishPathTool"),c=cc._decorator,a=c.ccclass,h=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fishPathTool=null,t.road_index=0,t.moveSpeed=100,t.road_data=null,t.currStep=0,t.isMoveing=!0,t.movenNeedTime=0,t.passedTime=0,t.speedX=0,t.speedY=0,t}return n(t,e),t.prototype.onLoad=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.keyUp,this)},t.prototype.keyUp=function(){},t.prototype.start=function(){var e=this.fishPathTool.get_road_set();this.road_index<0?this.road_index=0:this.road_index>=e.length&&(this.road_index=e.length-1),this.road_data=e[this.road_index],this.walk_on_road()},t.prototype.walk_on_road=function(){this.road_data.length<2||(this.node.setPosition(this.road_data[0]),this.currStep=1,this.walk_to_next())},t.prototype.walk_to_next=function(){if(this.currStep>=this.road_data.length)this.isMoveing=!1;else{this.isMoveing=!0;var e=this.node.getPosition(),t=this.road_data[this.currStep].sub(e),o=t.mag(),i=180*Math.atan2(t.y,t.x)/Math.PI;i=360-i,this.node.stopAllActions(),this.node.runAction(cc.rotateTo(.1,i)),this.movenNeedTime=o/this.moveSpeed,this.speedX=this.moveSpeed*t.x/o,this.speedY=this.moveSpeed*t.y/o,this.passedTime=0}},t.prototype.update=function(e){if(this.isMoveing){this.passedTime+=e,this.passedTime>this.movenNeedTime&&(e-=this.passedTime-this.movenNeedTime);var t=this.speedX*e,o=this.speedY*e;this.node.x+=t,this.node.y+=o,this.passedTime>=this.movenNeedTime&&(this.currStep++,this.walk_to_next())}},r([h(s.default)],t.prototype,"fishPathTool",void 0),r([h],t.prototype,"road_index",void 0),r([h],t.prototype,"moveSpeed",void 0),r([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../GameScripts/FISHO_fishPathTool":"FISHO_fishPathTool"}],test2:[function(e,t,o){"use strict";cc._RF.push(t,"66bb2hGVLJD9Zq2UBZjMuQR","test2");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../GameScripts/effectFunction/FISHO_ThunderEffect"),c=e("../GameScripts/FISHO_GameFish"),a=cc._decorator,h=a.ccclass,l=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.functionLayer=null,t.fort=null,t.thunderEffect=null,t.fish=null,t.id=-1,t}return n(t,e),t.prototype.onLoad=function(){cc.log(cc.macro.REPEAT_FOREVER),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.keyUp,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.keyUp,this)},t.prototype.keyUp=function(e){switch(e.keyCode){case cc.macro.KEY.a:case cc.macro.KEY.space:}},t.prototype.loadZip=function(){cc.resources.load("config/config",function(e,t){e?cc.error(e.message):(cc.log(t),JSZip.loadAsync(t._buffer).then(function(e){e.file("Path.json").async("text").then(function(e){console.log(e);var t=JSON.parse(e);console.log(t)})}))})},t.prototype.touchEnd=function(){cc.v2()},t.prototype.update=function(){},r([l(cc.Node)],t.prototype,"functionLayer",void 0),r([l(cc.AudioSource)],t.prototype,"fort",void 0),r([l(s.default)],t.prototype,"thunderEffect",void 0),r([l(c.default)],t.prototype,"fish",void 0),r([h],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../GameScripts/FISHO_GameFish":"FISHO_GameFish","../GameScripts/effectFunction/FISHO_ThunderEffect":"FISHO_ThunderEffect"}]},{},["FISHO_CMD","FISHO_Game","FISHO_GameLogic","FISHO_AutoFireButton","FISHO_BulletManager","FISHO_CowUI","FISHO_CrashGrid","FISHO_FishKindMap","FISHO_FishManager","FISHO_FishPathCrash","FISHO_FunctionFort","FISHO_FunctionLayer","FISHO_GameBullet","FISHO_GameBulletBase","FISHO_GameBulletDrill","FISHO_GameBulletHit","FISHO_GameDefine","FISHO_GameFish","FISHO_GameFishShadow","FISHO_GameFort","FISHO_GameFortGunAni","FISHO_GameRewardTip","FISHO_GameSceneMgr","FISHO_GoldRoutine","FISHO_GrapComp","FISHO_LockFishButton","FISHO_MyProperty","FISHO_OptimizeDrawCall","FISHO_PoolManager","FISHO_QuadtreeCollision","FISHO_ResourceMgr","FISHO_RotateAround","FISHO_RuleDetails","FISHO_SelectFishItem","FISHO_ShootSelectSetting","FISHO_fishPathTool","FISHO_functionUI","FISHO_Cow","FISHO_CowEffect","FISHO_DialFunction","FISHO_DragonEffect","FISHO_FlashEffect","FISHO_Laser","FISHO_LaserEffect","FISHO_LightingEffect","FISHO_MermaidEffect","FISHO_PhoenixEffect","FISHO_SuperbombEffect","FISHO_ThunderEffect","ConverFishPath","ConverPosToGrid","FishMove","FishPathMgr","GraphicsSpriteMesh_rope","PathEditor","TestFish","loadPath","test1","test2"]);