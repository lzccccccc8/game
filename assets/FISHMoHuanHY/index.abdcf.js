window.__require=function e(t,i,o){function n(s,c){if(!i[s]){if(!t[s]){var a=s.split("/");if(a=a[a.length-1],!t[a]){var l="function"==typeof __require&&__require;if(!c&&l)return l(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var h=i[s]={exports:{}};t[s][0].call(h.exports,function(e){return n(t[s][1][e]||e)},h,h.exports,e,t,i,o)}return i[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<o.length;s++)n(o[s]);return n}({FISHMoHuanHY_AutoFireButton:[function(e,t,i){"use strict";cc._RF.push(t,"c2994uVTomx7qWDwnIF4gj6","FISHMoHuanHY_AutoFireButton");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.menu,l=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autoFireOn=null,t.autoFireLight=null,t.rotateTween=null,t}return n(t,e),t.prototype.start=function(){this.autoFireOn.node.active=!1,this.rotateTween=cc.tween(this.autoFireLight).repeatForever(cc.rotateBy(.8,360))},t.prototype.changeAutoFire=function(){return this.autoFireOn.node.active=!this.autoFireOn.node.active,this.autoFireOn.node.active?this.rotateTween.start():this.rotateTween.stop(),this.autoFireOn.node.active},t.prototype.setAutoFire=function(){return this.rotateTween.start(),this.autoFireOn.node.active=!0,!0},t.prototype.cancelAutoFire=function(){return this.rotateTween.stop(),this.autoFireOn.node.active=!1,!1},r([l(cc.Sprite)],t.prototype,"autoFireOn",void 0),r([l(cc.Node)],t.prototype,"autoFireLight",void 0),r([c,a("FISHMoHuanHY/FISHMoHuanHY_AutoFireButton")],t)}(cc.Component);i.default=h,cc._RF.pop()},{}],FISHMoHuanHY_BulletManager:[function(e,t,i){"use strict";cc._RF.push(t,"1ad3aut4JQZUOMqJBvB/yCd","FISHMoHuanHY_BulletManager");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],o=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0});var c=e("./FISHMoHuanHY_GameBulletBase"),a=e("./FISHMoHuanHY_GameBulletHit"),l=e("./FISHMoHuanHY_GameDefine"),h=cc._decorator,u=h.ccclass,p=h.menu,d=h.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefab=null,t.bulletDrillPrefab=null,t.bulletHitPrefab=null,t.bulletHitNode=null,t.bulletJinLuanPrefab=null,t.bulletSmallOctopusPrefab=null,t.bulletsInfo=[],t.gameBullets=[],t.bulletCache=[],t.hitCache=[],t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.clearBullets=function(){this.bulletsInfo=[];for(var e=this.gameBullets.length-1;e>=0;e--)this.recycleBullet(this.gameBullets[e]);this.gameBullets=[],this.bulletCache=[],this.hitCache=[]},t.prototype.fire=function(e,t,i,o,n,r,s,c,a){this.bulletsInfo.push({chairID:e,gameID:t,bulletIndex:i,crashGridPos:o,angle:n,lockFishIndex:r,multiple:s,createTick:c,isDrillGun:1==a,isJinLuan:4==a,isSmallOctopus:9==a})},t.prototype.recycleBullet=function(e){var t=this.gameBullets.indexOf(e);-1!=t&&this.gameBullets.splice(t,1),e.bulletInfo.isDrillGun||e.bulletInfo.isJinLuan||e.bulletInfo.isSmallOctopus?e.node.destroy():this.bulletCache.push(e.recycle())},t.prototype.bulletDrillBomb=function(e,t,i){var o,n;try{for(var r=s(this.gameBullets),c=r.next();!c.done;c=r.next()){var a=c.value;if(a.bulletInfo.bulletIndex==e){null!=a&&a.playBomb(t,i);break}}}catch(l){o={error:l}}finally{try{c&&!c.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}},t.prototype.getbulletJinLuan=function(){var e,t;try{for(var i=s(this.gameBullets),o=i.next();!o.done;o=i.next()){var n=o.value;if(null!=n)return n}}catch(r){e={error:r}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return null},t.prototype.getOutBullet=function(e,t,i){return e?cc.instantiate(this.bulletDrillPrefab).getComponent(c.default):t?cc.instantiate(this.bulletJinLuanPrefab).getComponent(c.default):i?cc.instantiate(this.bulletSmallOctopusPrefab).getComponent(c.default):this.bulletCache.length>0?this.bulletCache.shift():cc.instantiate(this.bulletPrefab).getComponent(c.default)},t.prototype.updateBulletOut=function(){this.game.iGameBase.GetServerTick();for(var e=0;e<this.bulletsInfo.length;e++)if(this.bulletsInfo[e]){var t=this.bulletsInfo.splice(e,1)[0],i=null,o=t.isDrillGun,n=t.isJinLuan,r=t.isSmallOctopus;if((i=this.getOutBullet(o,n,r)).setGame(this.game),this.node.addChild(i.node),o||n||r){var s=this.game.GameLogic.getFortByGamId(t.gameID);s?(i.init(t,this,s),this.gameBullets.push(i)):cc.error("\u627e\u4e0d\u5230\u8fd9\u4e2a\u73a9\u5bb6\uff1a",t.gameID)}else i.init(t,this),this.gameBullets.push(i);e--}},t.prototype.bulletSync=function(e,t,i,o){this.onrestorescene(e,t,i,o)},t.prototype.onrestorescene=function(e,t,i,o){var n,r;if(!this.game||this.game.iGameBase.getExectUpdate()){var a=this.game.GameLogic.getFortByGamId(t);if(a){var l=a.getBulletInitPos(),h=this.game.mCrashGrid.getCrashGridByPos(l).clone(),u=this.get_restore_bullet_context(h.x,h.y,i,this.game.iGameBase.GetServerTick()-o);if(u){var p=0;try{for(var d=s(this.game.GameLogic.gameFort),f=d.next();!f.done;f=d.next()){var y=f.value;y.isActive&&y.gameId==t&&(p=y.chairId)}}catch(v){n={error:v}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}var m=null;(m=this.bulletCache.length>0?this.bulletCache.shift():cc.instantiate(this.bulletPrefab).getComponent(c.default)).setGame(this.game);var g={chairID:p,gameID:t,bulletIndex:e,crashGridPos:u.pos,angle:u.rotation,lockFishIndex:0,multiple:0,createTick:o,isDrillGun:!1,isJinLuan:!1,isSmallOctopus:!1};this.node.addChild(m.node),m.init(g,this),console.log("\u751f\u6210\u540c\u6b65\u5b50\u5f39"),this.gameBullets.push(m)}else console.error("lnhewbfwefewfbyewfewfwe")}else console.error("\u8fd9\u4e2a\u73a9\u5bb6\u4e0d\u5b58\u5728")}},t.prototype.get_restore_bullet_context=function(e,t,i,o){var n=this.build_bullet_born_info(e,t,i);if(!n)return console.log("sjewvfwefwefwwe"),null;var r=o/1e3,s=Math.floor(r/l.FrameTime);if(s>120/l.FrameTime)return console.log("\u6240\u9700\u65f6\u95f4\u592a\u5927"),null;if(s<=0)return n;var c=n.born_row,a=n.born_col,h=n.speed_row,u=n.speed_col,p=this.caculate_bullet_in_row_in_col_speed_row_speed_col(c,a,h,u,s);return n.born_row=p.in_row,n},t.prototype.build_bullet_born_info=function(e,t,i){var o=this.game.mCrashGrid.getGridPos(e,t);if(!o)return console.error("\u5f53\u524d\u4f4d\u7f6e\u4e0d\u5728\u5c4f\u5e55\u4e2d"),null;var n=.7*Math.sin(i*Math.PI/180),r=.7*Math.cos(i*Math.PI/180),s=this.caculate_bullet_speed_x_y(n,r);return{born_row:e,born_col:t,speed_row:n,speed_col:r,pos:o,rotation:this.caculate_bullet_rotation(n,r),speed_x:s[0],speed_y:s[1]}},t.prototype.caculate_bullet_in_row_in_col_speed_row_speed_col=function(e,t,i,o,n){var r=this.game.mCrashGrid.CrashRowMin,s=this.game.mCrashGrid.CrashRowMax,c=this.game.mCrashGrid.CrashColMin,a=this.game.mCrashGrid.CrashColMax;return e<=(r+=.5)?i<0&&(i=-i):e>=(s+=.5)&&i>0&&(i=-i),t<=(c+=.5)?o<0&&(o=-o):t>=(a+=.5)&&o>0&&(o=-o),e+=i,t+=o,(n-=1)>0&&this.caculate_bullet_in_row_in_col_speed_row_speed_col(e,t,i,o,n),{in_row:e,in_col:t}},t.prototype.caculate_bullet_rotation=function(e,t){return 180*Math.atan2(e,t)/Math.PI},t.prototype.caculate_bullet_speed_x_y=function(e,t){return[t*this.game.mCrashGrid.GridWidth,e*this.game.mCrashGrid.GridHeight]},t.prototype.updateBulletMove=function(){for(var e=this.game.iGameBase.GetServerTick(),t=0;t<this.gameBullets.length;t++)this.gameBullets[t].updateMove(e)},t.prototype.playHit=function(e){var t=null;if(this.hitCache.length>0)t=this.hitCache.shift();else{var i=cc.instantiate(this.bulletHitPrefab);i&&(t=i.getComponent(a.default)).setGame(this.game)}e.angle&&(t.node.angle=e.angle+90),this.bulletHitNode.addChild(t.node),t.node.setPosition(e.pos),t.playHit(e.bulletIndex,e.hitType,e.cb,e.bomb,e.playerId,e.chairId)},t.prototype.onHitFinish=function(e){this.hitCache.length<30?(e.node.removeFromParent(!0),this.hitCache.push(e)):e.node.destroy()},t.prototype.onUpdate=function(e){this.updateBulletOut(),this.updateBulletMove(e)},t.prototype.onDisable=function(){console.log("BulletManager_DEMO \u7981\u7528\u72b6\u6001")},r([d(cc.Prefab)],t.prototype,"bulletPrefab",void 0),r([d(cc.Prefab)],t.prototype,"bulletDrillPrefab",void 0),r([d(cc.Prefab)],t.prototype,"bulletHitPrefab",void 0),r([d(cc.Node)],t.prototype,"bulletHitNode",void 0),r([d(cc.Prefab)],t.prototype,"bulletJinLuanPrefab",void 0),r([d(cc.Prefab)],t.prototype,"bulletSmallOctopusPrefab",void 0),r([u,p("FISHMoHuanHY/FISHMoHuanHY_BulletManager")],t)}(cc.Component);i.default=f,cc._RF.pop()},{"./FISHMoHuanHY_GameBulletBase":"FISHMoHuanHY_GameBulletBase","./FISHMoHuanHY_GameBulletHit":"FISHMoHuanHY_GameBulletHit","./FISHMoHuanHY_GameDefine":"FISHMoHuanHY_GameDefine"}],FISHMoHuanHY_CMD:[function(e,t,i){"use strict";cc._RF.push(t,"8ee7bzRm131GnSs4YaGADTq","FISHMoHuanHY_CMD"),Object.defineProperty(i,"__esModule",{value:!0}),i.SceneStatus_DEMO=i.FishKind_DEMO=void 0,function(e){e[e.FISH_DAYANYU=0]="FISH_DAYANYU",e[e.FISH_XIAOLVYU=1]="FISH_XIAOLVYU",e[e.FISH_XIAOHONGYU=2]="FISH_XIAOHONGYU",e[e.FISH_XIAOHUANGYU=3]="FISH_XIAOHUANGYU",e[e.FISH_XIAOLANYU=4]="FISH_XIAOLANYU",e[e.FISH_XIAOKEDOU=5]="FISH_XIAOKEDOU",e[e.FISH_LVHETUN=6]="FISH_LVHETUN",e[e.FISH_SHUIMU=7]="FISH_SHUIMU",e[e.FISH_XIAOHAIGUI=8]="FISH_XIAOHAIGUI",e[e.FISH_HUDIEYU=9]="FISH_HUDIEYU",e[e.FISH_QUNDAIYU=10]="FISH_QUNDAIYU",e[e.FISH_PANGHONGYU=11]="FISH_PANGHONGYU",e[e.FISH_DENGLONGYU=12]="FISH_DENGLONGYU",e[e.FISH_JIANYU=13]="FISH_JIANYU",e[e.FISH_PANGXIE=14]="FISH_PANGXIE",e[e.FISH_MOGUIYU=15]="FISH_MOGUIYU",e[e.FISH_LANBIANFU=16]="FISH_LANBIANFU",e[e.FISH_LANCHUISHA=17]="FISH_LANCHUISHA",e[e.FISH_LANSHA=18]="FISH_LANSHA",e[e.FISH_50ZUHE=19]="FISH_50ZUHE",e[e.FISH_60ZUHE=20]="FISH_60ZUHE",e[e.FISH_JINCHUISHA=21]="FISH_JINCHUISHA",e[e.FISH_70ZUHE=22]="FISH_70ZUHE",e[e.FISH_JINSHA=23]="FISH_JINSHA",e[e.FISH_80ZUHE=24]="FISH_80ZUHE",e[e.FISH_JINBIANFU=25]="FISH_JINBIANFU",e[e.FISH_JINWUGUI=26]="FISH_JINWUGUI",e[e.FISH_JINHAMA=27]="FISH_JINHAMA",e[e.FISH_MEIRENYU=28]="FISH_MEIRENYU",e[e.FISH_ZHANGYU=29]="FISH_ZHANGYU",e[e.FISH_JINLONG=30]="FISH_JINLONG",e[e.FISH_YIWANG1=31]="FISH_YIWANG1",e[e.FISH_YIWANG2=32]="FISH_YIWANG2",e[e.FISH_YIWANG3=33]="FISH_YIWANG3",e[e.FISH_YIWANG4=34]="FISH_YIWANG4",e[e.FISH_YIWANG5=35]="FISH_YIWANG5",e[e.FISH_KIND_COUNT=36]="FISH_KIND_COUNT"}(i.FishKind_DEMO||(i.FishKind_DEMO={})),function(e){e[e.SCENE_NONE=0]="SCENE_NONE",e[e.SCENE_WAIT_TIDE=1]="SCENE_WAIT_TIDE",e[e.SCENE_RUNNING=2]="SCENE_RUNNING"}(i.SceneStatus_DEMO||(i.SceneStatus_DEMO={}));var o=function(){function e(){}return e.GAME_PLAYER=4,e.SUB_S_ANDROID_BANKOPERATOR=511,e.SUB_S_FISH=2002,e.SUB_S_USER_FIRE=2003,e.SUB_S_EXCHANGE_BULLET=2004,e.SUB_S_SWITCH_SCENE=2005,e.SUB_S_CATCH_CHAIN=2006,e.SUB_S_TIMER_SYNC=2007,e.SUB_S_LOCK_FISH=2008,e.SUB_S_PLAYER_SYNC=2010,e.SUB_S_FISH_SYNC=2011,e.SUB_S_BULLET_SYNC=2012,e.SUB_S_REPLACE_CATCH=2013,e.SUB_S_SWITCH_CANNON=2009,e.SUB_S_BULLET_OVER=2014,e.SUB_S_THUNDER_CATCH_CHAIN=2015,e.SUB_S_TRANSITION_SCORE=2016,e.SUB_S_ZUAN_TOU=2017,e.SUB_S_BACKSTAGE=2018,e.SUB_S_LAST_EFFECTS=2020,e.CMD_S_GameScene=[{k:"nSceneID",t:"int"},{k:"lBaseScore",t:"score"},{k:"nStyleID",t:"int"},{k:"wPlayerCount",t:"word"},{k:"wFishCount",t:"word"},{k:"wBulletCount",t:"word"},{k:"dwServerTicket",t:"dword"}],e.CMD_S_PlayerInfo=[{k:"nPlayerID",t:"int"},{k:"wChairID",t:"word"},{k:"lPlayerScore",t:"score"},{k:"dwPlayerMultiple",t:"dword"},{k:"dwLockFishIndex",t:"dword"},{k:"cbCannonType",t:"byte"},{k:"fWinScore",t:"score"}],e.CMD_S_FishInfo=[{k:"dwFishIndex",t:"dword"},{k:"nFishKindID",t:"int"},{k:"wPathID",t:"word"},{k:"wPath_Index",t:"word"},{k:"dwCreteTicket",t:"dword"},{k:"nSpecialFishKindID",t:"int"},{k:"fSpeed",t:"float"}],e.CMD_S_BulletInfo=[{k:"dwBulletIndex",t:"dword"},{k:"nPlayerID",t:"int"},{k:"dBulletAngle",t:"double"},{k:"dwBulletTicket",t:"dword"},{k:"cbBulletDefine",t:"byte"}],e.CMD_S_UserFire=[{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"},{k:"nBulletMultiple",t:"int"},{k:"dBulletAngle",t:"double"},{k:"lPlayerScore",t:"score"},{k:"dwCreateTicket",t:"dword"},{k:"dwFishIndex",t:"dword"},{k:"cbBulletDefine",t:"byte"}],e.CMD_S_PlayerExchangeBullet=[{k:"nPlayerID",t:"int"},{k:"nPlayerMultiple",t:"int"}],e.CMD_S_PlayerCatchFish=[{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"},{k:"cbBulletDefine",t:"byte"},{k:"dwFishIndex",t:"dword"},{k:"lFishScore",t:"score"},{k:"lGongNengScore",t:"score"},{k:"fWinScore",t:"score"},{k:"iBulletMultiple",t:"int"},{k:"cbSpecial",t:"byte"}],e.CMD_S_CatchMuchFish=[{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"},{k:"cbBulletDefine",t:"byte"},{k:"dwFishIndex",t:"dword",l:[40,0]},{k:"lFishScore",t:"score",l:[40,0]},{k:"lGongNengScore",t:"score"},{k:"fWinScore",t:"score"},{k:"fFirePower",t:"double"}],e.CMD_S_BulletInfoSyn=[{k:"dwBulletIndex",t:"dword"},{k:"dCol",t:"double"},{k:"dRow",t:"double"}],e.CMD_S_CHANGE_SCENE=[{k:"nSceneID",t:"int"}],e.CMD_S_LockFish=[{k:"nPlayerID",t:"int"},{k:"dwLockFishIndex",t:"dword"}],e.CMD_S_SynTime=[{k:"dwServerTicket",t:"dword"}],e.CMD_S_Replace_Catch=[{k:"dwMaxReplaceGameID",t:"dword",l:[3,0]}],e.CMD_S_SwitchCannon=[{k:"wChairID",t:"word"},{k:"cbCannonType",t:"byte"}],e.CMD_S_GongNengBulletOver=[{k:"wChairID",t:"word"},{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"},{k:"cbBulletDefine",t:"byte"},{k:"lGongNengScore",t:"score"}],e.CMD_S_Transition_Score=[{k:"bTransition",t:"bool"},{k:"fScore",t:"double"},{k:"fTransitionScore",t:"double"}],e.CMD_S_ZuanTouBulletOver=[{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"}],e.CMD_S_BackStage=[{k:"nPlayerID",t:"int"}],e.CMD_S_GongNengBulletLast=[{k:"nPlayerID",t:"int"},{k:"cbBulletDefine",t:"byte"}],e.SUB_C_USER_FIRE=1,e.SUB_C_EXCHANGE_BULLET=2,e.SUB_C_CATCH_FISH=3,e.SUB_C_TIMER_SYNC=4,e.SUB_C_LOCK_FISH=5,e.SUB_C_SWITCH_CANNON=6,e.SUB_C_SHAN_DIAN_CATCH_FISH=7,e.SUB_C_ZUAN_TOU_CATCH_FISH=9,e.SUB_C_TRANSITION_SCORE=15,e.SUB_C_BACKSTAGE_START=16,e.SUB_C_BACKSTAGE_END=17,e.SUB_C_GONG_NENG_CATCH_FISH=19,e.CMD_C_UserFire=[{k:"dwBulletIndex",t:"dword"},{k:"dBulletAngle",t:"double"},{k:"dwFishIndex",t:"dword"},{k:"cbUserDefine",t:"byte"}],e.CMD_C_Transition_Score=[{k:"fScore",t:"double"}],e.CMD_C_PlayerExchangeBullet=[{k:"bMultiple",t:"bool"}],e.CMD_C_PlayerCatchFish=[{k:"wChairID",t:"word"},{k:"dwBulletIndex",t:"dword"},{k:"dwFishIndex",t:"dword"}],e.CMD_C_PlayerShanDianCatchFish=[{k:"wChairID",t:"word"},{k:"dwBulletIndex",t:"dword"},{k:"dwFishIndex",t:"dword"}],e.CMD_C_PlayerGongNengCatchFish=[{k:"wChairID",t:"word"},{k:"dwBulletIndex",t:"dword"},{k:"cbFishCount",t:"byte"},{k:"dwFishIndex",t:"dword",l:[40,0]}],e.CMD_C_PlayerZuanTouCatchFish=[{k:"wChairID",t:"word"},{k:"dwBulletIndex",t:"dword"},{k:"dwFishIndex",t:"dword"}],e.CMD_C_LockFish=[{k:"dwLockFishIndex",t:"dword"}],e.CMD_C_SwitchCannon=[{k:"wChairID",t:"word"},{k:"cbCannonType",t:"byte"}],e}();i.default=o,cc._RF.pop()},{}],FISHMoHuanHY_CrabEffect:[function(e,t,i){"use strict";cc._RF.push(t,"82c10iba1V9+9gqvtD91f85","FISHMoHuanHY_CrabEffect");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=e("../FISHMoHuanHY_GameDefine"),c=e("../FISHMoHuanHY_ResourceMgr"),a=cc._decorator,l=a.ccclass,h=a.menu,u=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.crabPointArray=null,t.ball=null,t.centerNode=null,t.animOneArray=[],t.animTwoArray=[],t.animBoom=null,t.multiple=null,t.lableMultiple=null,t.targetMultiple=0,t.currMultiple=0,t.fish=null,t.crabPrefab_l=null,t.crabPrefab_r=null,t.targetFort=null,t.currWeight=s.FunctionWeight.DaPangXie,t.isNext=!0,t.index=0,t.crabArray=[],t.isplaying=!1,t.isEnd=!1,t._special=!1,t.lblScore=null,t.redLove=null,t.redLove1=null,t.compCb=null,t.fishAnim=[],t.isLastTime=!1,t.createNum=0,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.onLoad=function(){this.crabPointArray=[];for(var e=0;e<2;e++){var t=this.node.getChildByName("129_"+(e+1).toString());this.crabPointArray[e]=[];for(var i=t.childrenCount,o=0;o<i;o++)this.crabPointArray[e][o]=t.children[o]}},t.prototype.SetTotalScore=function(e){this._score=e},t.prototype.initFunction=function(e,t,i,o,n,r,s,a){this.fish=n,this.targetFort=e,this._bulletIndex=r,this._multiple=Math.ceil(o),this.compCb=a,this._special=t,this.targetFort.setEffect(this);var l=n.getCurrWorldPos();this._score=i;var h=this;this.isLastTime=!1,this.game.iAudioPlayer.play_music("SilverCrabBgm",!0,1),this.game.resourMgr.loadOther("crabBall",c.ResourceType.other,cc.Prefab,function(e){h.redLove=cc.instantiate(e),h.lblScore=h.redLove.getChildByName("lblScore").getComponent(cc.Label),h.redLove.scale=0,h.multiple=h.redLove.getChildByName("multile"),h.lableMultiple=h.multiple.getChildByName("lableMultile").getComponent(cc.Label),h.createNum=0,h.index=0;for(var t=0;t<2;t++)h.createDragon(h.createNum,t);h.moveRedLove(l)})},t.prototype.normalRedLoveAnim=function(e,t){this.targetFort.showFunctionTotalScore(this._score,this.currWeight);var i=this.targetFort.functionFort.node.convertToNodeSpaceAR(e);this.targetFort.functionFort.node.addChild(this.redLove1),this.redLove1.setPosition(i),this._targetPos=t;var o=cc.tween().to(1.2,{scale:1},{easing:"backOut"});cc.tween(this.redLove1).then(o).start(),this.scheduleOnce(this.anim,.5)},t.prototype.anim=function(){cc.tween(this.redLove1).to(1.5,{position:cc.v3(this._targetPos)}).call(function(){}).start(),this.scheduleOnce(this.playComplete,3),this.game.GameLogic.setWinScore(this.targetFort.gameId,this._score),this.game.iGameBase.updatenNumberAnim(this.lblScore,this._score,2,null)},t.prototype.moveRedLove=function(e){var t=this;e=this.node.convertToNodeSpaceAR(e),this.node.addChild(this.redLove),this.redLove.setPosition(e);var i=cc.tween().to(.2,{scale:1},{easing:"backOut"}),o=cc.tween().to(.5,{position:cc.v3()});cc.tween(this.redLove).sequence(i,o).call(function(){t.moveEyuball()}).start()},t.prototype.moveEyuball=function(){var e=this,t=this;t.multiple.active=!0,t.lableMultiple.node.active=!0;var i=cc.tween(this.redLove).to(.5,{scale:1});cc.tween(this.redLove).to(.25,{scale:1}).call(function(){t.scheduleOnce(e.exectPlay,.8),i.start()}).start()},t.prototype.startPlay=function(e,t,i,o){this.fish=e,this.targetFort=t,this._bulletIndex=o,this._multiple=i,this.scheduleOnce(this.exectPlay,.8)},t.prototype.exectPlay=function(){var e=this.fish.goldBombPointArray[this.fish.goldBombPointArray.length-1].convertToWorldSpaceAR(cc.v2());e=this.node.convertToNodeSpaceAR(e),this.moveCrabball(e)},t.prototype.startPlayLighting=function(){this.game.gameScene.shakeEffect(.5),this.isplaying=!0},t.prototype.exectAnim1=function(){this.executeMove()},t.prototype.exectAnim2=function(){var e=this;this.hideCrabBall();var t=this;this.game.resourMgr.loadOther("earthquake2",c.ResourceType.other,cc.Prefab,function(i){e.game.gameScene.shakeEffect(.5),t.ball=cc.instantiate(i);var o=cc.winSize.width/2,n=cc.winSize.height/2,r=e.targetFort.functionFort.node.convertToNodeSpaceAR(new cc.Vec2(o,n));e.targetFort.functionFort.node.addChild(e.ball),t.ball.setPosition(r),e.scheduleOnce(function(){t.creatorDragonBall()},2)}),this.scheduleOnce(this.moveMultiple,1)},t.prototype.executeMove=function(){var e=this;this.index>=2&&(this.index=0);var t=this;if(this.isplaying=!1,0==this.index){var i=this.crabPointArray[0][0],o=this.crabPointArray[0][1];this.crabArray[0].opacity=255,this.crabArray[1].opacity=0,this.fishAnim[0].play("move"),this.scheduleOnce(function(){this.fishAnim[0].play("attack"),this.game.iAudioPlayer.play_sound("BombCrab")},1.2),cc.tween(this.crabArray[0]).sequence(cc.moveTo(1.5,cc.v2(o.position.x,o.position.y)),cc.delayTime(.2),cc.callFunc(function(){e.fishAnim[0].play("move"),t.play(t._multiple),t.animBoom.play(),t.startPlayLighting(),t.sendCatchFish()}),cc.moveTo(1,cc.v2(i.position.x,i.position.y)),cc.callFunc(function(){e.crabArray[0].opacity=0})).start()}else 1==this.index&&(i=this.crabPointArray[1][0],o=this.crabPointArray[1][1],this.crabArray[1].opacity=255,this.crabArray[0].opacity=0,this.fishAnim[1].play("move"),this.scheduleOnce(function(){this.fishAnim[1].play("attack"),this.game.iAudioPlayer.play_sound("BombCrab")},1.2),cc.tween(this.crabArray[1]).sequence(cc.moveTo(1.5,cc.v2(o.position.x,o.position.y)),cc.delayTime(.2),cc.callFunc(function(){e.fishAnim[1].play("move"),t.play(t._multiple),t.animBoom.play(),t.startPlayLighting(),t.sendCatchFish()}),cc.moveTo(1,cc.v2(i.position.x,i.position.y)),cc.callFunc(function(){e.crabArray[1].opacity=0})).start())},t.prototype.executeMove1=function(){var e=this,t=this,i=this.crabPointArray[0][0],o=this.crabPointArray[0][1];this.crabArray[0].opacity=255,this.crabArray[1].opacity=255,this.fishAnim[0].play("move"),this.fishAnim[1].play("move"),this.scheduleOnce(function(){this.fishAnim[0].play("attack"),this.fishAnim[1].play("attack"),this.game.iAudioPlayer.play_sound("Boss3CrashFinalBomb")},1.2),cc.tween(this.crabArray[0]).sequence(cc.moveTo(1.5,cc.v2(o.position.x,o.position.y)),cc.delayTime(.1),cc.callFunc(function(){e.fishAnim[0].play("move"),e.fishAnim[1].play("move"),t.play(t._multiple),t.animBoom.play(),t.startPlayLighting(),t.sendCatchFish(),t.scheduleOnce(function(){t.exectAnim2()},2)}),cc.moveTo(1,cc.v2(i.position.x,i.position.y)),cc.callFunc(function(){e.crabArray[0].opacity=0,e.crabArray[1].opacity=0})).start();var n=this.crabPointArray[1][0],r=this.crabPointArray[1][1];cc.tween(this.crabArray[1]).sequence(cc.moveTo(1.5,cc.v2(r.position.x,r.position.y)),cc.delayTime(.1),cc.moveTo(1,cc.v2(n.position.x,n.position.y))).start()},t.prototype.createDragon=function(e){var t;t=0==e?this.crabPrefab_l:this.crabPrefab_r;var i=cc.instantiate(t);i.name=this.createNum.toString(),i.opacity=0,this.node.addChild(i),i.setSiblingIndex(this.node.childrenCount-2),i.setPosition(this.crabPointArray[e][0].position);var o=i.children[0].getComponent(cc.Animation);this.fishAnim.push(o),this.crabArray.push(i),this.createNum++},t.prototype.play=function(e){this.centerNode.opacity=255,e&&(this.targetMultiple=e),cc.tween(this.centerNode).parallel(cc.rotateTo(.8,1080),cc.fadeOut(.8)).start(),this.playCircleBlowUp()},t.prototype.playCircleBlowUp=function(){this.currMultiple+=1;var e=cc.tween().to(.18,{scale:2.5}),t=cc.tween().to(.18,{scale:1});this.lableMultiple.string=this.currMultiple.toString(),cc.tween(this.multiple).sequence(e,t).start();var i=cc.tween().to(.18,{scale:2.5}),o=cc.tween().to(.18,{scale:1});cc.tween(this.redLove).sequence(i,o).start()},t.prototype.moveCrabball=function(){var e=this,t=this;t.multiple.active=!0,t.lableMultiple.node.active=!0;var i=cc.tween(this.redLove).to(.5,{scale:1});cc.tween(this.redLove).to(.25,{scale:1}).call(function(){t.scheduleOnce(e.exectAnim1,1),i.start()}).start()},t.prototype.playAnimation=function(e,t){e.on(cc.Animation.EventType.FINISHED,function(){e.node.active=!1}),e.node.active=!0,e.play(t)},t.prototype.hideCrabBall=function(){this.redLove.active=!1},t.prototype.moveMultiple=function(){},t.prototype.sendCatchFish=function(){if(this._bulletIndex>=0){var e=this.game.fishMgr.getFunctionCatchFishs(s.FunctionCatchCount.crab);this.game.iGameBase.EmitEvent(s.EventCode.FunctionCatchFishs,{wChairID:this.game.iGameBase.UserManager_getChairID(),dwBulletIndex:this._bulletIndex,dwFishIndex:e,cbFishCount:e.length})}},t.prototype.playComplete=function(){var e=cc.v2(this.targetFort.node.x,this.targetFort.IsOnTop?this.targetFort.node.y-90:this.targetFort.node.y+90);e=this.node.convertToWorldSpaceAR(e),this.compCb&&this.compCb.exec(this.fish,!0),this.targetFort.hidefunctionUI(this.currWeight),this.redLove.destroy(),this.redLove=null,this.redLove1.destroy(),this.redLove1=null,this.ball.destroy(),this.targetFort.functionFort.checkCanFire(this.currWeight),this.targetFort.deleteWeightMultiple(this.currWeight),this.node.destroy()},t.prototype.onDestroy=function(){this.game&&!this.game.iGameBase.getExectUpdate()||(this.targetFort.subEffectWeight(this.currWeight),this.game.gameScene.playSceneBg())},t.prototype.nextStep=function(){var e=this;cc.tween(this.node).sequence(cc.delayTime(5),cc.callFunc(function(){e.index++,e.isLastTime?(e.isNext=!1,e.executeMove1()):e.exectAnim1()})).start()},t.prototype.lastStep=function(){this.isLastTime=!0},t.prototype.beforDestroy=function(){},t.prototype.ImmediatelyDestroy=function(){cc.error("ImmediatelyDestroy"),this.redLove&&this.redLove.destroy(),this.redLove1&&this.redLove1.destroy(),this.unscheduleAllCallbacks(),this.node&&this.node.isValid&&this.node.destroy()},t.prototype.creatorDragonBall=function(){var e=this,t=this;this.game.resourMgr.loadOther("crabBall",c.ResourceType.other,cc.Prefab,function(i){t.redLove1=cc.instantiate(i),t.lblScore=t.redLove1.getChildByName("lblScore").getComponent(cc.Label),t.lblScore.spacingX=-15,t.lblScore.font=e.game.resourMgr.getRes("Common/font/bf_number3",c.ResourceType.imgs,cc.Font),t.lblScore.string="0",t.redLove1.scale=0;var o=cc.winSize.width/2,n=cc.winSize.height/2,r=new cc.Vec2(o,n),s=cc.v2(0,400);t.normalRedLoveAnim(r,s)})},r([u(cc.Node)],t.prototype,"centerNode",void 0),r([u([cc.Animation])],t.prototype,"animOneArray",void 0),r([u([cc.Animation])],t.prototype,"animTwoArray",void 0),r([u([cc.Animation])],t.prototype,"animBoom",void 0),r([l,h("FISHMoHuanHY/CrabEffect")],t)}(cc.Component);i.default=p,cc._RF.pop()},{"../FISHMoHuanHY_GameDefine":"FISHMoHuanHY_GameDefine","../FISHMoHuanHY_ResourceMgr":"FISHMoHuanHY_ResourceMgr"}],FISHMoHuanHY_CrashGrid:[function(e,t,i){"use strict";cc._RF.push(t,"4a97aBE93Q51mudSdHQJt5M","FISHMoHuanHY_CrashGrid");var o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],o=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0}),i.CrashGrid_DEMO=i.GridItem=i.GridConfig=void 0,i.GridConfig={row:21,col:38};var n=function(e,t,i,o){this.rect=null,this.center=null,this.fishList=null,this.rect=cc.rect(e,t,i,o),this.center=cc.v2(e+i/2,t+o/2),this.fishList=[]};i.GridItem=n;var r=function(){function e(){this.NetColCount=0,this.NetRowCount=0,this.CrashRowMin=0,this.CrashRowMax=0,this.CrashColMin=0,this.CrashColMax=0,this.BeginRow=0,this.BeginCol=0,this.GridWidth=0,this.GridHeight=0,this.CrashMinX=0,this.CrashMaxX=0,this.CrashMinY=0,this.CrashMaxY=0,this.beginPos=null,this.gridItems={}}return e.prototype.setGame=function(e){this.game=e,this.Reset(this.game.iGameBase.getDeviceWIDTH(),this.game.iGameBase.getDeviceHEIGHT())},e.prototype.Reset=function(e,t){this.CrashMaxX=e,this.CrashMaxY=t,this.initGrid(),this.generateNetGrid()},e.prototype.release=function(){this.gridItems={}},e.prototype.clear=function(){for(var e in this.gridItems)for(var t in this.gridItems[e])this.gridItems[e][t].fishList=[]},e.prototype.initGrid=function(){var e=Math.max(i.GridConfig.row,i.GridConfig.col);this.NetColCount=3*(e+i.GridConfig.col),this.NetRowCount=3*(e+i.GridConfig.row),cc.error("gridExtern:",e,this.NetColCount,this.NetRowCount),this.GridWidth=cc.visibleRect.width/i.GridConfig.col,this.GridHeight=cc.visibleRect.height/i.GridConfig.row,this.CrashColMax=i.GridConfig.col-1,this.CrashRowMax=i.GridConfig.row-1,this.beginPos=cc.visibleRect.bottomLeft;var t=cc.winSize.width/(cc.winSize.height*this.game.iGameBase.getDeviceWIDTH()/this.game.iGameBase.getDeviceHEIGHT());if(t>1){cc.log("\u53ea\u6709\u5f53\u957f\u5c4f\u5e55\u624d\u9002\u914d\u78b0\u649e\u65b9\u6848 \u4e0d\u6ee1\u4e00\u683c\u5219\u8865\u9f50");var o=Math.ceil((t-1)*i.GridConfig.col/2);cc.error("0==extendCrashCol:",o,this.CrashColMin,this.CrashColMax),this.CrashColMin=-o,this.CrashColMax+=o,cc.error("1==extendCrashCol:",this.CrashColMin,this.CrashColMax),this.CrashMinX-=o*this.GridWidth,this.CrashMaxX+=o*this.GridWidth}this.BeginCol=-e,this.BeginRow=-e},e.prototype.generateNetGrid=function(){var e=0;cc.error("generateNetGrid>>>",this.BeginRow,this.BeginCol);for(var t=this.BeginRow;t<this.BeginRow+this.NetRowCount;t++){this.gridItems[t]={};for(var i=this.BeginCol;i<this.BeginCol+this.NetColCount;i++){var o=this.beginPos.x+this.GridWidth*i,r=this.beginPos.y+this.GridHeight*t,s=new n(o,r,this.GridWidth,this.GridHeight);this.gridItems[t][i]=s,e++}}console.log("\u683c\u5b50\u7684\u6570\u91cf\uff1a"+e)},e.prototype.getGridItem=function(e,t){return this.gridItems[e]?this.gridItems[e][t]:null},e.prototype.getGridItemCenter=function(e,t){var i=this.getGridItem(e,t);return i?i.center:cc.v2(-999,-999)},e.prototype.getGridPos=function(e,t){var i=Math.floor(e),o=Math.floor(t),n=this.getGridItem(i,o);return n?cc.v2(n.rect.x+(t-o)*this.GridWidth,n.rect.y+(e-i)*this.GridHeight):(cc.error("getGridPos row",i,"col",o),null)},e.prototype.isCrashGrid=function(e,t){return e>=this.CrashRowMin&&e<=this.CrashRowMax+1&&t>=this.CrashColMin&&t<=this.CrashColMax+1},e.prototype.getCrashGridByPos=function(e,t){void 0===t&&(t=!0);var i=e.sub(this.beginPos),o=i.x/this.GridWidth,n=i.y/this.GridHeight;return!t||this.isCrashGrid(n,o)?cc.v2(n,o):(cc.log("\u4e0d\u5728\u7f51\u683c\u5185   "+e),null)},e.prototype.insertCrashItem=function(e,t){var i,n;try{for(var r=o(e.CrashGrid),s=r.next();!s.done;s=r.next()){var c=s.value,a=this.getGridItem(c.x,c.y);a&&a.fishList.push(t)}}catch(l){i={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}},e.prototype.removeCrashItem=function(e,t){var i,n;if(e.CrashGrid)try{for(var r=o(e.CrashGrid),s=r.next();!s.done;s=r.next()){var c=s.value,a=this.getGridItem(c.x,c.y);if(a){var l=a.fishList.indexOf(t);l>=0&&a.fishList.splice(l,1)}}}catch(h){i={error:h}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}},e.prototype.getFishInGrid=function(e,t){var i=this.getGridItem(Math.floor(e),Math.floor(t));return i?i.fishList:[]},e}();i.CrashGrid_DEMO=r,cc._RF.pop()},{}],FISHMoHuanHY_DragonEffect:[function(e,t,i){"use strict";cc._RF.push(t,"9836co2wsNk4jm+wjG0Ipd3","FISHMoHuanHY_DragonEffect");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=e("../FISHMoHuanHY_GameDefine"),c=cc._decorator,a=c.ccclass,l=c.menu,h=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dragonPointArray=null,t.dragonBall=null,t.centerNode=null,t.animOneArray=[],t.animTwoArray=[],t.multiple=null,t.lableMultiple=null,t.animBoom=null,t.targetMultiple=0,t.currMultiple=0,t.fish=null,t.dragonPrefab=null,t.targetFort=null,t.currWeight=s.FunctionWeight.thunderDragon,t.isNext=!1,t.createNum=0,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.onLoad=function(){this.dragonPointArray=[];for(var e=0;e<3;e++){var t=this.node.getChildByName("309_"+(e+1).toString());this.dragonPointArray[e]=[];for(var i=t.childrenCount,o=0;o<i;o++)this.dragonPointArray[e][o]=t.children[o]}},t.prototype.SetTotalScore=function(e){this._score=e},t.prototype.initFunction=function(e,t,i,o){this.fish=t,this.targetFort=e,this._bulletIndex=o,this._multiple=i,this.targetFort.setEffect(this),this.scheduleOnce(this.exectPlay,.8)},t.prototype.startPlay=function(e,t,i,o){this.fish=e,this.targetFort=t,this._bulletIndex=o,this._multiple=i,this.game.iAudioPlayer.play_music("GoldCrabBgm",!0,1),this.scheduleOnce(this.exectPlay,.8)},t.prototype.exectPlay=function(){var e=this.fish.goldBombPointArray[this.fish.goldBombPointArray.length-1].convertToWorldSpaceAR(cc.v2());e=this.node.convertToNodeSpaceAR(e),this.moveDragoball(e)},t.prototype.startPlayLighting=function(){this.game.gameScene.shakeEffect(.5),this.targetFort.showFunctionUI(s.functionType.thunderDragon),this.scheduleOnce(this.exectAnim1,1)},t.prototype.exectAnim1=function(){this.createNum=0,this.executeCreate(0)},t.prototype.exectAnim2=function(){if(cc.error("\u9f99\u6b7b\u4ea1\u7279\u6548\u64ad\u653e\u5b8c\u6210"),this.hideDragonBall(),this.scheduleOnce(this.moveMultiple,2),this._bulletIndex>=0){var e=this.game.fishMgr.getFunctionCatchFishs(s.FunctionCatchCount.dragon);this.game.iGameBase.EmitEvent(s.EventCode.FunctionCatchFishs,{wChairID:this.game.iGameBase.UserManager_getChairID(),dwBulletIndex:this._bulletIndex,dwFishIndex:e,cbFishCount:e.length})}},t.prototype.executeCreate=function(e){var t=this;if(!(e>=this.dragonPointArray.length)){for(var i=this.dragonPointArray[e].length,o=0;o<i;o++)this.createDragon(e,o);this.scheduleOnce(function(){t.playCircleBlowUp(),t.game.gameScene.shakeEffect(.5),t.animBoom.play()},e<this.dragonPointArray.length-1?.2:.3),e==this.dragonPointArray.length-1||this.scheduleOnce(function(){t.play(t._multiple)},.3),e<this.dragonPointArray.length-1?this.scheduleOnce(function(){t.game.iAudioPlayer.play_sound("FullScrenDragonBomb")},.7):this.scheduleOnce(function(){t.game.iAudioPlayer.play_sound("FullScrenDragonFinalBomb")},.3),++e<this.dragonPointArray.length?this.scheduleOnce(function(){t.executeCreate(e)},4):this.scheduleOnce(function(){t.exectAnim2()},1.5)}},t.prototype.createDragon=function(e,t){var i=cc.instantiate(this.dragonPrefab);i.name=this.createNum.toString();var o=i.children[0].getComponent(sp.Skeleton);this.node.addChild(i),i.setSiblingIndex(this.node.childrenCount-2),i.setPosition(this.dragonPointArray[e][t].position),i.angle=this.dragonPointArray[e][t].angle;var n=cc.v2(this.dragonPointArray[e][t].position.x+0,this.dragonPointArray[e][t].position.y+0);cc.tween(i).sequence(cc.moveTo(1.5,cc.v2(n.x,n.y)),cc.delayTime(.2),cc.callFunc(function(){})).start(),o.setCompleteListener(function(){i.destroy()}),this.createNum++},t.prototype.play=function(e){this.centerNode.opacity=255,e&&(this.targetMultiple=e),cc.tween(this.centerNode).parallel(cc.rotateTo(.8,1080),cc.fadeOut(.8)).start()},t.prototype.playCircleBlowUp=function(){this.currMultiple+=1;var e=cc.tween().to(.18,{scale:2.5}),t=cc.tween().to(.18,{scale:1});this.lableMultiple.string=this.currMultiple.toString(),cc.tween(this.dragonBall).sequence(e,t).start(),cc.tween(this.multiple).sequence(e,t).start()},t.prototype.moveDragoball=function(e){this.dragonBall.parent.setPosition(e),this.dragonBall.active=!0;var t=this;cc.tween(this.dragonBall.parent).sequence(cc.moveTo(1.25,cc.v2()),cc.delayTime(.5),cc.callFunc(function(){t.startPlayLighting()})).start()},t.prototype.playAnimation=function(e,t){e.on(cc.Animation.EventType.FINISHED,function(){e.node.active=!1}),e.node.active=!0,e.play(t)},t.prototype.hideDragonBall=function(){this.dragonBall.active=!1},t.prototype.moveMultiple=function(){var e=this,t=this.targetFort.node.getPosition();cc.tween(this.multiple).to(1,{position:cc.v3(t)}).call(function(){e.scheduleOnce(function(){e.node.destroy()},2.5)}).start()},t.prototype.playComplete=function(){this.targetFort.hidefunctionUI(this.currWeight),this.targetFort.functionFort.checkCanFire(this.currWeight),this.targetFort.deleteWeightMultiple(this.currWeight),this.node.destroy()},t.prototype.onDestroy=function(){this.game&&!this.game.iGameBase.getExectUpdate()||(this.targetFort&&this.targetFort.subEffectWeight(this.currWeight),this.game.gameScene.playSceneBg())},t.prototype.lastStep=function(){},t.prototype.nextStep=function(){},t.prototype.beforDestroy=function(){},t.prototype.ImmediatelyDestroy=function(){this.unscheduleAllCallbacks(),this.node&&this.node.isValid&&this.node.destroy()},r([h(cc.Node)],t.prototype,"dragonBall",void 0),r([h(cc.Node)],t.prototype,"centerNode",void 0),r([h([cc.Animation])],t.prototype,"animOneArray",void 0),r([h([cc.Animation])],t.prototype,"animTwoArray",void 0),r([h(cc.Node)],t.prototype,"multiple",void 0),r([h(cc.Label)],t.prototype,"lableMultiple",void 0),r([h([cc.Animation])],t.prototype,"animBoom",void 0),r([a,l("FISHMoHuanHY/DragonEffect")],t)}(cc.Component);i.default=u,cc._RF.pop()},{"../FISHMoHuanHY_GameDefine":"FISHMoHuanHY_GameDefine"}],FISHMoHuanHY_FishKindMap:[function(e,t,i){"use strict";cc._RF.push(t,"e6551L/XPfd7lScC9DHyRwj","FISHMoHuanHY_FishKindMap"),Object.defineProperty(i,"__esModule",{value:!0}),i.FishKindMap=void 0;var o=e("./FISHMoHuanHY_GameDefine");i.FishKindMap={101:{id:101,name:"\u98de\u9c7c",packet:"101",model:1,shadowSize:50,multipleMin:2,multipleMax:2,type:6,zorder:1,animType:o.FishAnimType_DEMO.spine,copyNum:20,moveSpeed:.012,lightSize:60,vortexSize:100,goldCount:1,isNoneShadow:!0},102:{id:102,name:"\u5c0f\u4e11\u9c7c",packet:"102",model:1,multipleMin:2,multipleMax:2,type:6,zorder:2,animType:o.FishAnimType_DEMO.spine,copyNum:20,moveSpeed:.012,lightSize:90,vortexSize:100,goldCount:1,isNoneShadow:!0},103:{id:103,name:"\u5c0f\u65d7\u9c7c",packet:"103",model:1,multipleMin:3,multipleMax:3,type:6,zorder:3,animType:o.FishAnimType_DEMO.spine,copyNum:20,moveSpeed:.02,lightSize:100,vortexSize:130,goldCount:1,isNoneShadow:!0},104:{id:104,name:"\u5c0f\u6cb3\u8c5a",packet:"104",model:1004,multipleMin:4,multipleMax:4,type:1,zorder:12,animType:o.FishAnimType_DEMO.spine,copyNum:20,moveSpeed:.02,lightSize:100,vortexSize:150,goldCount:1,isNoneShadow:!0},105:{id:105,name:"\u72ee\u5b50\u9c7c",packet:"105",model:1003,multipleMin:5,multipleMax:5,type:6,zorder:10,animType:o.FishAnimType_DEMO.spine,copyNum:4,moveSpeed:.02,lightSize:200,vortexSize:230,goldCount:3,isNoneShadow:!0},106:{id:106,name:"\u5c0f\u6241\u9c7c",packet:"106",model:1,multipleMin:6,multipleMax:6,type:6,zorder:6,animType:o.FishAnimType_DEMO.spine,copyNum:20,lightSize:150,vortexSize:180,goldCount:3,isNoneShadow:!0},107:{id:107,name:"\u5bc4\u5c45\u87f9",packet:"107",model:1015,multipleMin:7,multipleMax:7,type:6,zorder:8,animType:o.FishAnimType_DEMO.spine,copyNum:20,lightSize:240,vortexSize:280,isNoneShadow:!0,goldCount:3},108:{id:108,name:"\u5251\u9c7c",packet:"108",model:1005,multipleMin:8,multipleMax:8,type:6,zorder:5,animType:o.FishAnimType_DEMO.spine,copyNum:20,lightSize:280,vortexSize:280,goldCount:5,isNoneShadow:!0,moveSpeed:.01},109:{id:109,name:"\u7ae0\u9c7c",packet:"109",model:16,multipleMin:9,multipleMax:9,type:2,zorder:30,dieSound:"fish33_1",animType:o.FishAnimType_DEMO.spine,idx:[0,1,2,3],copyNum:4,lightSize:200,vortexSize:200,goldCount:5,isNoneShadow:!0},110:{id:110,name:"\u706f\u7b3c\u9c7c",packet:"110",model:7,multipleMin:10,multipleMax:10,type:1,zorder:10,animType:o.FishAnimType_DEMO.spine,copyNum:4,lightSize:180,vortexSize:250,goldCount:5,isNoneShadow:!0},111:{id:111,name:"\u5c0f\u6d77\u9f9f",packet:"201",model:4,multipleMin:12,multipleMax:12,type:6,zorder:9,animType:o.FishAnimType_DEMO.spine,copyNum:20,lightSize:300,vortexSize:350,goldCount:6,isNoneShadow:!0},112:{id:112,name:"\u84dd\u8272\u952f\u9f7f\u9ca8",packet:"202",model:1010,multipleMin:15,multipleMax:15,type:1,zorder:18,dieSound:"fish22_1",animType:o.FishAnimType_DEMO.spine,copyNum:4,lightSize:350,vortexSize:400,goldCount:6,isNoneShadow:!0},113:{id:113,name:"\u7d2b\u8272\u9b54\u9b3c\u9c7c",packet:"203",model:1001,multipleMin:18,multipleMax:18,type:1,zorder:17,dieSound:"fish20_1",animType:o.FishAnimType_DEMO.spine,idx:[0,1],copyNum:4,lightSize:250,vortexSize:340,goldCount:6,isNoneShadow:!0},114:{id:114,name:"\u5927\u5c0f\u4e11\u9c7c",packet:"204",model:1008,multipleMin:20,multipleMax:60,type:3,zorder:22,dieSound:"fish23_1",animType:o.FishAnimType_DEMO.pulltogun,idx:[0,1],copyNum:4,moveSpeed:.02,lightSize:300,vortexSize:400,isNoneShadow:!0,goldCount:8},115:{id:115,name:"\u5927\u65d7\u9c7c",packet:"205",model:1007,multipleMin:20,multipleMax:60,type:1,zorder:14,animType:o.FishAnimType_DEMO.pulltogun,copyNum:4,moveSpeed:.02,lightSize:300,vortexSize:450,isNoneShadow:!0,goldCount:8},116:{id:116,name:"\u5927\u6cb3\u8c5a",packet:"206",model:1006,multipleMin:20,multipleMax:60,type:6,zorder:7,animType:o.FishAnimType_DEMO.pulltogun,copyNum:20,moveSpeed:.02,lightSize:300,vortexSize:400,goldCount:8,isNoneShadow:!0},117:{id:117,name:"\u864e\u7eb9\u9ca8\u9c7c",packet:"117",model:1009,multipleMin:30,multipleMax:100,type:1,zorder:19,dieSound:"fish9_1",animType:o.FishAnimType_DEMO.pulltogun,idx:[0,1],copyNum:4,moveSpeed:.02,isNoneShadow:!0,goldCount:8},118:{id:118,name:"\u6c34\u6bcd",packet:"208",model:1013,multipleMin:60,multipleMax:200,type:1,zorder:16,dieSound:"fish19_1",animType:o.FishAnimType_DEMO.pulltogun,copyNum:4,moveSpeed:.02,isNoneShadow:!0,goldCount:10},119:{id:119,name:"\u65d7\u9c7c",packet:"209",model:1013,multipleMin:350,multipleMax:350,type:1,zorder:16,dieSound:"fish15_1",animType:o.FishAnimType_DEMO.pulltogun,copyNum:4,moveSpeed:.02,goldCount:10,isNoneShadow:!0},120:{id:120,name:"\u9f99",packet:"304",model:102,multipleMin:70,multipleMax:70,type:102,zorder:29,dieSound:"fish15_1",animType:o.FishAnimType_DEMO.none,copyNum:4,moveSpeed:.6,isNoneShadow:!0,goldCount:30,animName:"animation"},121:{id:121,name:"\u5927\u738b\u4e4c\u8d3c",packet:"302",model:101,multipleMin:60,multipleMax:60,type:101,zorder:21,dieSound:"fish14_1",animType:o.FishAnimType_DEMO.spine,copyNum:4,goldCount:1,isNoneShadow:!0},122:{id:122,name:"\u94bb\u5934\u5bc4\u5c45\u87f9",packet:"303",model:1016,multipleMin:50,multipleMax:50,type:3,zorder:30,dieSound:"fish23_1",animType:o.FishAnimType_DEMO.none,idx:[0,1],copyNum:4,moveSpeed:.02,isNoneShadow:!0,goldCount:40},123:{id:123,name:"\u70b8\u5f39\u5bc4\u5c45\u87f9",packet:"304",model:102,multipleMin:70,multipleMax:70,type:102,zorder:29,dieSound:"fish15_1",animType:o.FishAnimType_DEMO.none,copyNum:4,moveSpeed:.02,isNoneShadow:!0,goldCount:30},124:{id:124,name:"\u6fc0\u5149\u5bc4\u5c45\u87f9",packet:"305",model:11,multipleMin:60,multipleMax:60,type:3,zorder:24,dieSound:"fish16_1",animType:o.FishAnimType_DEMO.none,idx:[0,1,2],copyNum:-1,moveSpeed:.02,isNoneShadow:!0,goldCount:30},125:{id:125,name:"\u6f29\u6da1\u9c7c",packet:"306",model:100,multipleMin:50,multipleMax:50,type:100,zorder:20,dieSound:"fish12_1",animType:o.FishAnimType_DEMO.vortex,copyNum:4,goldCount:1,isNoneShadow:!0},126:{id:126,name:"\u95ea\u7535\u9c7c",packet:"307",model:101,multipleMin:60,multipleMax:60,type:101,zorder:21,dieSound:"fish14_1",animType:o.FishAnimType_DEMO.combination,copyNum:4,goldCount:1,isNoneShadow:!0},127:{id:127,name:"\u91d1\u5e01\u718a\u732b",packet:"308",model:13,multipleMin:100,multipleMax:100,type:3,zorder:27,dieSound:"fish29_1",animType:o.FishAnimType_DEMO.none,copyNum:4,moveSpeed:.015,isUsedSpine:!0,isNoneShadow:!0,goldCount:10,animName:"swim"},128:{id:128,name:"\u9c7c\u8247",packet:"309",model:14,multipleMin:120,multipleMax:120,type:3,zorder:28,dieSound:"fish30_1",animType:o.FishAnimType_DEMO.none,idx:[0,1,2],copyNum:4,moveSpeed:.02,isUsedSpine:!0,isNoneShadow:!0,goldCount:10,animName:"animation"},129:{id:129,name:"\u9cc4\u9c7c",packet:"402",model:18,multipleMin:25,multipleMax:25,type:1,zorder:15,animType:o.FishAnimType_DEMO.none,copyNum:4,moveSpeed:.02,isNoneShadow:!0,goldCount:40,animName:"animation"},130:{id:130,name:"\u8d85\u7ea7\u87f9\u738b",packet:"304",model:130,multipleMin:100,multipleMax:300,type:102,zorder:23,animType:o.FishAnimType_DEMO.no_ani,copyNum:4,moveSpeed:.02,goldCount:20}},cc._RF.pop()},{"./FISHMoHuanHY_GameDefine":"FISHMoHuanHY_GameDefine"}],FISHMoHuanHY_FishManager:[function(e,t,i){"use strict";cc._RF.push(t,"f1698ZPKS1IdY/ykZGosfcz","FISHMoHuanHY_FishManager");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],o=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0});var c=e("./FISHMoHuanHY_FishKindMap"),a=e("./FISHMoHuanHY_PoolManager"),l=e("./FISHMoHuanHY_GameFish"),h=e("./FISHMoHuanHY_ResourceMgr"),u=e("./FISHMoHuanHY_GameFishShadow"),p=cc._decorator,d=p.ccclass,f=p.menu,y=p.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shadowMaterial=null,t.fishCircleLayer=null,t.darkLayer=null,t.darkLayerLite=null,t.handlerPriority=8,t.fishfunctionCirclePrefab=null,t.UpSideDown=!1,t.fishInfo=[],t.gameFish=[],t.fishCache={},t.fishNodes={},t.fishShadowNodes={},t.loadingFish={},t.loadCompletes=new Map,t.isChangeSceneing=!1,t}return n(t,e),Object.defineProperty(t.prototype,"getGameFish",{get:function(){return this.gameFish},enumerable:!1,configurable:!0}),t.prototype.setGame=function(e){this.game=e,this.fishfunctionCirclePrefab=this.game.resourMgr.getRes("FishCircle",h.ResourceType.initPrefab,cc.Prefab)},t.prototype.onLoad=function(){var e=new cc.Node("FishShadows");for(var t in this.node.addChild(e),c.FishKindMap)c.FishKindMap[t],this.fishShadowNodes[t]=new cc.Node,e.addChild(this.fishShadowNodes[t]),this.fishNodes[t]=new cc.Node,this.node.addChild(this.fishNodes[t]);this.fishNodes[120].setSiblingIndex(this.node.childrenCount-1),this.fishNodes[121].setSiblingIndex(this.node.childrenCount-1)},t.prototype.onDestroy=function(){this.fishInfo=[],this.gameFish=[],this.fishCache={},this.fishNodes={},this.fishShadowNodes={}},t.prototype.getFishByIndex=function(e){var t,i;try{for(var o=s(this.gameFish),n=o.next();!n.done;n=o.next()){var r=n.value;if(r.fishInfo.dwFishIndex==e)return r}}catch(c){t={error:c}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return null},t.prototype.getFishByKindID=function(e){var t,i,o=[];try{for(var n=s(this.gameFish),r=n.next();!r.done;r=n.next()){var c=r.value;c.fishInfo.nFishKindID==e&&null!=c&&c.isCanCatch&&c.checkInScreenRegion()&&o.push(c)}}catch(a){t={error:a}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return o},t.prototype.clearFish=function(){var e,t;this.fishInfo=[];try{for(var i=s(this.gameFish),o=i.next();!o.done;o=i.next()){var n=o.value;this.recycleFish(n)}}catch(r){e={error:r}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}this.gameFish=[]},t.prototype.onFishInfo=function(e){this.fishInfo=this.fishInfo.concat(e)},t.prototype.changeScene=function(){this.fishInfo=[];for(var e=this.gameFish.length,t=0;t<e;t++)this.gameFish[t].enterChangeSceneState()},t.prototype.updateFishOut=function(e){void 0===e&&(e=100);for(var t=this.game.iGameBase.GetServerTick(),i=0,o=0;o<this.fishInfo.length;o++){if(this.fishInfo[o]&&this.fishInfo[o].dwCreteTicket<=t){var n=this.fishInfo.splice(o,1)[0],r=n.nFishKindID,s=!1;if(125!=n.nFishKindID&&126!=n.nFishKindID||(r=n.nSpecialFishKindID,s=!0),this.fishCache[r]&&this.fishCache[r].length>0){var c=this.fishCache[r].shift();this.createFish(r,n,s,c,!1)}else this.createFish(r,n,s,null,!0);++i,o--}if(i>=e)break}},t.prototype.createFish=function(e,t,i,o,n){if(void 0===n&&(n=!1),n){var r=this.game.resourMgr.getRes(e,h.ResourceType.fishPrefab,cc.Prefab);if(!r)return void cc.error("\u6ca1\u6709\u8fd9\u4e2a\u9c7c\u7684\u9884\u5236\u4f53,fishKind\uff1a"+e);o=cc.instantiate(r).getComponent(l.default)}if(null!=o){o.setGame(this.game),this.fishNodes[t.nFishKindID].addChild(o.node),o.node.setPosition(-5e4,0);var s=null;if(c.FishKindMap[e].isNoneShadow=!0,!c.FishKindMap[e].isNoneShadow){var p=o.isAnim?a.NodeType.fishShadow:a.NodeType.fishSkeletonShadow,d=this.game.poolMgr.Dequeue(p);s=d.addComponent(u.default),null!=d&&(1==d.childrenCount?(s.type=a.NodeType.fishSkeletonShadow,s.skele=cc.find("New Node",d).getComponent(sp.Skeleton)):(s.type=a.NodeType.fishShadow,s.isAnim=!0)),this.fishShadowNodes[e].addChild(d),s.setGame(this.game),d.setPosition(-5e4,0)}128==t.nFishKindID||t.nFishKindID;var f=this.game.iGameBase.utils_gen_handler(this.recycleFish,this);o.initWithFishInfo(t,this.UpSideDown,s,f),i&&this.setSpecialFish(o,t.nFishKindID),this.gameFish.push(o)}else cc.error("\u5b9e\u4f8b\u5316\u7684\u9c7c\u4e3a\u7a7a\uff1a",e,n)},t.prototype.getFunctionCatchFishs=function(e){for(var t=[],i=new Map,o=this.getGameFish.length-1;o>=0;o--){var n=this.game.iGameBase.utils_random(0,this.getGameFish.length-1),r=this.getGameFish[n];if(r.isCanCatch&&(r.fishInfo.nFishKindID<118||r.fishInfo.nFishKindID>307)&&r.checkInScreenRegion())if(i.has(r.fishInfo.dwFishIndex))o++;else if(t.push(r.fishInfo.dwFishIndex),i.set(r.fishInfo.dwFishIndex,!0),t.length>=e)break}return t},t.prototype.setSpecialFish=function(e,t){var i=cc.instantiate(this.fishfunctionCirclePrefab);this.fishCircleLayer.addChild(i),i.setPosition(-5e4,0),e.initSpecialFish(i,t)},t.prototype.updateFishMove=function(e){for(var t=this.game.iGameBase.GetServerTick(),i=0;i<this.gameFish.length;i++){var o=this.gameFish[i];if(o.updateMove(t,e)){128==o.fishInfo.nFishKindID&&this.game.fishMgr.showMask(!0,!0);var n=this.gameFish.splice(i,1)[0];this.recycleFish(n),i--}}},t.prototype.recycleFish=function(e,t){if(void 0===t&&(t=!0),!t)for(var i=0;i<this.gameFish.length;i++)if(this.gameFish[i].fishInfo.dwFishIndex==e.fishInfo.dwFishIndex){this.gameFish.splice(i,1)[0];break}null!=e&&null==this.fishCache[e.fishKind.id]&&(this.fishCache[e.fishKind.id]=[]),null!=e&&this.fishCache[e.fishKind.id].push(e.recycle())},t.prototype.onUpdate=function(e){this.updateFishOut(),this.updateFishMove(e)},t.prototype.showMask=function(e,t,i){var o=this;if(void 0===i&&(i=!1),cc.error("showMask==",e,t),t)return this.darkLayer.setPosition(-1500,0),void cc.error("fishgone setposition -1500");if(e){if(i)return void setTimeout(function(){o.darkLayer.zIndex=0,o.darkLayer.active=!0,o.darkLayer.setPosition(-1500,0),cc.tween(o.darkLayer.children[0]).to(1,{opacity:200}).start(),o.darkLayerLite.zIndex=cc.macro.MAX_ZINDEX-1,o.darkLayerLite.active=!0,cc.tween(o.darkLayerLite).to(1,{opacity:40}).start(),cc.error("mask on delay")},4e3);this.darkLayer.zIndex=0,this.darkLayer.active=!0,this.darkLayer.setPosition(-1500,0),cc.tween(this.darkLayer.children[0]).to(1,{opacity:200}).start(),this.darkLayerLite.zIndex=cc.macro.MAX_ZINDEX-1,this.darkLayerLite.active=!0,cc.tween(this.darkLayerLite).to(1,{opacity:40}).start(),cc.error("mask on")}else cc.tween(this.darkLayer.children[0]).to(1,{opacity:0}).call(function(){o.darkLayer.active=!1}).start(),cc.tween(this.darkLayerLite).to(1,{opacity:0}).call(function(){o.darkLayerLite.active=!1}).start(),cc.error("mask off")},t.prototype.hideCrab=function(){for(var e=this.gameFish.length-1;e>=0;e--){var t=this.gameFish[e];130==t.fishInfo.nFishKindID&&(t.isCanCatch=!1,cc.tween(t.node).to(1.5,{opacity:0}).start(),this.gameFish.splice(e,1)[0])}},r([y(cc.Material)],t.prototype,"shadowMaterial",void 0),r([y(cc.Node)],t.prototype,"fishCircleLayer",void 0),r([y(cc.Node)],t.prototype,"darkLayer",void 0),r([d,f("FISHMoHuanHY/FISHMoHuanHY_FishManager")],t)}(cc.Component);i.default=m,cc._RF.pop()},{"./FISHMoHuanHY_FishKindMap":"FISHMoHuanHY_FishKindMap","./FISHMoHuanHY_GameFish":"FISHMoHuanHY_GameFish","./FISHMoHuanHY_GameFishShadow":"FISHMoHuanHY_GameFishShadow","./FISHMoHuanHY_PoolManager":"FISHMoHuanHY_PoolManager","./FISHMoHuanHY_ResourceMgr":"FISHMoHuanHY_ResourceMgr"}],FISHMoHuanHY_FishPathCrash:[function(e,t,i){"use strict";cc._RF.push(t,"a699b9SMFg0jSVjbBQ9jpZK","FISHMoHuanHY_FishPathCrash"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./FISHMoHuanHY_ResourceMgr"),n=function(){function e(){this.FishPath={}}return e.prototype.setGame=function(e){this.game=e},e.prototype.release=function(){this.releaseMem()},e.prototype.releaseMem=function(){this.FishPath={}},e.prototype.loadFishPath=function(){var e=this.game.resourMgr.getSelfRes("Path",o.ResourceType.fishPath,cc.JsonAsset).json;for(var t in e)this.FishPath[t]=e[t],this.FishPath[t].len==this.FishPath[t].row.length&&this.FishPath[t].len==this.FishPath[t].col.length||cc.error("wPathID",t,this.FishPath[t].len,this.FishPath[t].row.length,this.FishPath[t].col.length)},e}();i.default=n,cc._RF.pop()},{"./FISHMoHuanHY_ResourceMgr":"FISHMoHuanHY_ResourceMgr"}],FISHMoHuanHY_FunctionFort:[function(e,t,i){"use strict";cc._RF.push(t,"03903cQbHASo7LTYBxZRLTG","FISHMoHuanHY_FunctionFort");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],o=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var o,n,r=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("./FISHMoHuanHY_functionUI"),l=e("./FISHMoHuanHY_GameDefine"),h=e("./FISHMoHuanHY_ResourceMgr"),u=cc._decorator,p=u.ccclass,d=u.menu,f=(u.inspector,u.property),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.laserPoint=null,t.gunbarrel=null,t.container=null,t.functionUIOriginPos=null,t.drillTotalScoreNodePos=null,t.fort=null,t.functionUIMap=null,t.whalekingArray=null,t.isDestroy=!1,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.onLoad=function(){this.functionUIMap=new Map,this.whalekingArray=[]},t.prototype.showFunctionUI=function(e,t){var i=null,o=null,n=l.functionType[e]+"FunctionUI",r=l.getWeightByType(e),s=this.game.resourMgr.getRes(n,h.ResourceType.initPrefab,cc.Prefab);i=cc.instantiate(s),this.container.addChild(i),(o=i.getComponent(a.default)).setGame(this.game),i.setSiblingIndex(0),o.show(this.fort,e==l.functionType.lighting?this.gunbarrel:t),this.functionUIMap.set(r,o),o.setMultiple(this.fort.labelMultiple.string)},t.prototype.showFunctionTotalScore=function(e,t){var i=this.functionUIMap.get(t);i&&i.showTotalScore(e,this.showTotalScoreComplete.bind(this))},t.prototype.checkCanFire=function(e){var t,i,o=!0;if(this.functionUIMap){try{for(var n=s(this.functionUIMap.keys()),r=n.next();!r.done;r=n.next()){var c=r.value;if(-1!=l.DisableFireFunction.indexOf(c)){o=!1;break}}}catch(a){t={error:a}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}e!=l.FunctionWeight.drill&&e!=l.FunctionWeight.laser||(this.fort.showGunbarrel(),this.fort.isWaitfire=!1),o&&(this.fort.isCanFire=!0,this.fort.currFunctionType=l.functionType.normal)}},t.prototype.showTotalScoreComplete=function(e,t){this.functionUIMap.delete(e),this.checkCanFire(e),this.game.GameLogic.setWinScore(this.fort.gameId,t)},t.prototype.showDrillCatchScroe=function(e,t){void 0===t&&(t=0),this.functionUIMap.has(e)&&this.functionUIMap.get(e).showCatchScore(t)},t.prototype.hideTotalScore=function(e){var t,i;if(null!=e)this.hidefunctionUI(e);else try{for(var o=s(this.functionUIMap),n=o.next();!n.done;n=o.next()){var r=c(n.value,2),a=r[0];r[1].destoryFunction(),this.functionUIMap.delete(a)}}catch(l){t={error:l}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}},t.prototype.hidefunctionUI=function(e){var t=this.functionUIMap.get(e);t&&t.destoryFunction(),this.functionUIMap.delete(e)},t.prototype.setLaserEffect=function(e){this.laserPoint.addChild(e),e.setPosition(cc.v2()),e.angle=0,this.gunbarrel.angle=0},t.prototype.getMountPoint=function(e){return e==l.FunctionWeight.whaleking?this.whalekingArray.length>0?this.whalekingArray[0].getMountPoint():null:this.functionUIMap.has(e)?this.functionUIMap.get(e).getMountPoint():null},t.prototype.destoryFunctionUI=function(e){var t,i,o=this;if(void 0===e&&(e=!1),this.isDestroy=!0,e){try{for(var n=s(this.functionUIMap.entries()),r=n.next();!r.done;r=n.next()){var a=c(r.value,2),h=a[0];a[1].destoryFunction(),this.functionUIMap.delete(h)}}catch(f){t={error:f}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}for(var u=0,p=this.whalekingArray.length;u<p;u++)this.whalekingArray[u].destoryFunction(),u--;this.whalekingArray=[]}else{var d=[l.FunctionWeight.superBomb,l.FunctionWeight.drill];d.forEach(function(e){o.functionUIMap.has(e)&&(o.functionUIMap.get(e).destoryFunction(),o.functionUIMap.delete(e))}),d=null}},r([f(cc.Node)],t.prototype,"laserPoint",void 0),r([f(cc.Node)],t.prototype,"gunbarrel",void 0),r([f(cc.Node)],t.prototype,"container",void 0),r([p,d("FISHMoHuanHY/FunctionFort")],t)}(cc.Component);i.default=y,cc._RF.pop()},{"./FISHMoHuanHY_GameDefine":"FISHMoHuanHY_GameDefine","./FISHMoHuanHY_ResourceMgr":"FISHMoHuanHY_ResourceMgr","./FISHMoHuanHY_functionUI":"FISHMoHuanHY_functionUI"}],FISHMoHuanHY_FunctionLayer:[function(e,t,i){"use strict";cc._RF.push(t,"87f0aHltjg1POMX/ZbBowuu","FISHMoHuanHY_FunctionLayer");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=e("./effectFunction/FISHMoHuanHY_CrabEffect"),c=e("./effectFunction/FISHMoHuanHY_DragonEffect"),a=e("./effectFunction/FISHMoHuanHY_LightingEffect"),l=e("./effectFunction/FISHMoHuanHY_SuperbombEffect"),h=e("./effectFunction/FISHMoHuanHY_whalekingEffect"),u=e("./effectFunction/FISHMoHuanHY_PandaEffect"),p=e("./FISHMoHuanHY_GameDefine"),d=e("./FISHMoHuanHY_PoolManager"),f=e("./FISHMoHuanHY_ResourceMgr"),y=e("./effectFunction/FISHMoHuanHY_GoldBombEffect"),m=cc._decorator,g=m.ccclass,v=m.menu,S=m.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.greenpeopleEffectLayer=null,t._points=null,t.vortexSoundId=-1,t}return n(t,e),Object.defineProperty(t.prototype,"points",{get:function(){return this._points},enumerable:!1,configurable:!0}),t.prototype.setGame=function(e){this.game=e},t.prototype.start=function(){this._points=[];var e=cc.winSize.width/4,t=cc.winSize.height/4,i=cc.v2(),o=cc.v2(e,-t),n=cc.v2(-e,-t),r=cc.v2(-e,t),s=cc.v2(e,t);this._points.push(i),this._points.push(o),this._points.push(n),this._points.push(r),this._points.push(s)},t.prototype.playSuperBombEffect=function(e,t,i){var o=this;this.game.resourMgr.loadOther("bomb",f.ResourceType.other,cc.Prefab,function(n){var r=cc.instantiate(n);o.node.addChild(r),r.setPosition(e);var s=r.addComponent(l.default);s.bomb=cc.find("bombSp",r),s.lblIndex=cc.find("index/lableIndex",r).getComponent(cc.Label),s.haloAni=cc.find("halo",r).getComponent(cc.Animation),s.setGame(o.game),s.initFunction(i,t)})},t.prototype.playLaserEffect=function(e){this.game.resourMgr.loadOther("laserEffect",f.ResourceType.other,cc.Prefab,function(t){var i=cc.instantiate(t);e.setLaserEffect(i)})},t.prototype.playGoldBombEffect=function(e,t,i,o,n){var r=this.game.resourMgr.getRes("GoldEffect",f.ResourceType.initPrefab,cc.Prefab),s=cc.instantiate(r);this.node.addChild(s);var c=s.getComponent(y.default);c.setGame(this.game),c.play(e,i,o,n)},t.prototype.playGoldEffect=function(e){var t=this;this.game.iAudioPlayer.play_sound("coinBigBomb"),this.game.poolMgr.AsyncDequeue(d.NodeType.goldBomb,function(i){var o=i;t.node.addChild(o),o.setPosition(e);var n=[];if(0==o.childrenCount)for(var r=0;r<20;r++)for(var s=0;s<12;s++){var c=t.game.poolMgr.Dequeue(d.NodeType.coin);o.addChild(c),c.name="gold_"+r+"_"+s,c.angle=t.game.iGameBase.utils_random(0,180),c.opacity=255,c.setPosition(new cc.Vec2),n.push(c)}else for(r=0;r<20;r++)for(s=0;s<12;s++)(c=o.getChildByName("gold_"+r+"_"+s)).opacity=255,c.setPosition(new cc.Vec2),n.push(c);if(n.length>0){var a=0;for(r=0;r<20;r++)for(s=0;s<12;s++){var l=n.pop(),h=10*r,u=200*Math.cos(h+30*s),p=200*Math.sin(h+30*s);t.game.iGameBase.utils_random(0,180),cc.tween(l).sequence(cc.delayTime(.2*r),cc.spawn(cc.moveTo(t.game.iGameBase.utils_random(.85+.3*r,1),cc.v2(u,p)),cc.fadeOut(2.5)),cc.callFunc(function(){239==++a&&t.game.poolMgr.Enqueue(o,d.NodeType.goldBomb)})).start()}}o.getComponent(cc.Animation).play()})},t.prototype.playGoldEffect1=function(e){var t=this;this.game.poolMgr.AsyncDequeue(d.NodeType.goldBomb1,function(i){var o=i;t.node.addChild(o),o.setPosition(e);var n=[];if(0==o.childrenCount)for(var r=0;r<20;r++)for(var s=0;s<12;s++){var c=t.game.poolMgr.Dequeue(d.NodeType.coin);o.addChild(c),c.name="gold_"+r+"_"+s,c.angle=t.game.iGameBase.utils_random(0,180),c.opacity=255,c.setPosition(new cc.Vec2),n.push(c)}else for(r=0;r<20;r++)for(s=0;s<12;s++)(c=o.getChildByName("gold_"+r+"_"+s)).opacity=255,c.setPosition(new cc.Vec2),n.push(c);if(n.length>0){var a=0;for(r=0;r<20;r++)for(s=0;s<12;s++){var l=n.pop(),h=10*r,u=200*Math.cos(h+30*s),p=200*Math.sin(h+30*s);t.game.iGameBase.utils_random(0,180),cc.tween(l).sequence(cc.delayTime(.2*r),cc.spawn(cc.moveTo(t.game.iGameBase.utils_random(.85+.3*r,1),cc.v2(u,p)),cc.fadeOut(2.5)),cc.callFunc(function(){239==++a&&t.game.poolMgr.Enqueue(o,d.NodeType.goldBomb1)})).start()}}o.getComponent(cc.Animation).play()})},t.prototype.playVortex=function(e){var t=this,i=this.game.resourMgr.getRes("vortex",f.ResourceType.initPrefab,cc.Prefab),o=cc.instantiate(i);o.scale=0,this.node.addChild(o),o.setPosition(e);var n=cc.tween(o).sequence(cc.scaleTo(.5,1.5),cc.repeat(cc.rotateBy(.35,180),1e4)).start();this.vortexSoundId=this.game.iAudioPlayer.play_sound("vortex"),this.scheduleOnce(function(){cc.tween(o).then(cc.scaleTo(.5,0)).call(function(){n.stop(),o.destroy()}).start(),-1!=t.vortexSoundId&&t.game.iAudioPlayer.stop_sound(t.vortexSoundId)},3)},t.prototype.playLightingEffect=function(e,t){var i=this.game.resourMgr.getRes("LightingEffect",f.ResourceType.initPrefab,cc.Prefab),o=cc.instantiate(i);this.node.addChild(o);var n=o.addComponent(a.default);n.setGame(this.game),n.initFunction(e),n.addFishInfo(t),n.playShandianEffect(t.fish.node,e.node,0,!0)},t.prototype.playMushGoldBomb=function(e,t,i,o,n){if(void 0===t&&(t=!0),void 0===n&&(n=!1),!e.isShake||e.goldBombPointArray.length<=0)cc.error("\u8bf7\u68c0\u67e5\u5f53\u524d\u9c7c\u7684\u9884\u5236\u4f53\uff08playMushGoldBomb\uff09:"+e.fishKind.id);else{for(var r=e.goldBombPointArray.length,s=0;s<r;s++){var c=e.goldBombPointArray[s].convertToWorldSpaceAR(cc.v2());c=this.node.convertToNodeSpaceAR(c),this.playGoldEffect(c)}t&&e.playDieAni(i,o,n)}},t.prototype.playDragonEffect=function(e,t,i,o){var n=this;this.playMushGoldBomb(e),this.game.resourMgr.loadOther("dragonEffect",f.ResourceType.other,cc.Prefab,function(r){var s=r,a=cc.instantiate(s);n.node.addChild(a);var l=a.addComponent(c.default);l.dragonBall=cc.find("empty/dragonBall",a),l.centerNode=cc.find("empty/center",a),l.multiple=cc.find("empty/multile",a),l.lableMultiple=cc.find("lableMultile",l.multiple).getComponent(cc.Label),l.animBoom=cc.find("empty/boom",a).getComponent(cc.Animation),l.setGame(n.game),l.dragonPrefab=n.game.resourMgr.getRes("dragon",f.ResourceType.other,cc.Prefab),l.animOneArray=new Array(8);for(var h=0;h<l.animOneArray.length;h++){var u=cc.find("Anim1/"+(h+1),a).getComponent(cc.Animation);l.animOneArray[h]=u}for(l.animTwoArray=new Array(8),h=0;h<l.animTwoArray.length;h++)u=cc.find("Anim2/"+(h+9),a).getComponent(cc.Animation),l.animTwoArray[h]=u;l.initFunction(o,e,i,t)})},t.prototype.playOtherFishDieEffect=function(e,t,i,o){return void 0===o&&(o=!1),!!e.isSpecialAnim()&&(this.playMushGoldBomb(e,!0,t,i,o),this.game.gameScene.shakeEffect(.5),!0)},t.prototype.playWhalekingEffect=function(e,t,i,o,n,r,s){var c=this;this.playMushGoldBomb(e);var a=e.getCurrWorldPos();this.game.resourMgr.loadOther("featherFlame",f.ResourceType.other,cc.Prefab,function(l){var u=l,d=cc.instantiate(u);c.node.addChild(d);var y=c.node.convertToNodeSpaceAR(a);d.setPosition(y);var m=d.getComponent(cc.Animation);m.play(),m.on(cc.Animation.EventType.FINISHED,function(){d.destroy(),t.showFunctionUI(p.functionType.eyu,o),c.game.resourMgr.loadOther("whalekingEffect",f.ResourceType.other,cc.Prefab,function(a){var l=a,u=cc.instantiate(l);c.node.addChild(u);var d=u.getComponent(h.default);d.animBoom=cc.find("empty/boom",u).getComponent(cc.Animation),d.setGame(c.game);var f=t.getMountPoint(p.FunctionWeight.eyu);d.initFunction(t,o,n,r,e,i,f,s)})})})},t.prototype.playCrabEffect=function(e,t,i,o,n,r,c){var a=this;this.playMushGoldBomb(e);var l=e.getCurrWorldPos();this.game.resourMgr.loadOther("featherFlame",f.ResourceType.other,cc.Prefab,function(h){var u=h,d=cc.instantiate(u);a.node.addChild(d);var y=a.node.convertToNodeSpaceAR(l);d.setPosition(y);var m=d.getComponent(cc.Animation);m.play(),m.on(cc.Animation.EventType.FINISHED,function(){d.destroy(),t.showFunctionUI(p.functionType.DaPangXie,o),a.game.resourMgr.loadOther("crabEffect",f.ResourceType.other,cc.Prefab,function(l){var h=l,u=cc.instantiate(h);a.node.addChild(u);var d=u.getComponent(s.default);d.setGame(a.game),d.crabPrefab_l=a.game.resourMgr.getRes("crab_l",f.ResourceType.other,cc.Prefab),d.crabPrefab_r=a.game.resourMgr.getRes("crab_r",f.ResourceType.other,cc.Prefab);var y=t.getMountPoint(p.FunctionWeight.DaPangXie);d.initFunction(t,o,n,r,e,i,y,c)})})})},t.prototype.playPandaEffect=function(e){var t=this.game.resourMgr.getRes("PandaEffect",f.ResourceType.initPrefab,cc.Prefab),i=cc.instantiate(t);this.node.addChild(i);var o=i.getComponent(u.default);return o.setGame(this.game),o.initFunction(e),o},r([S(cc.Node)],t.prototype,"greenpeopleEffectLayer",void 0),r([g,v("FISHMoHuanHY/FunctionLayer")],t)}(cc.Component);i.default=_,cc._RF.pop()},{"./FISHMoHuanHY_GameDefine":"FISHMoHuanHY_GameDefine","./FISHMoHuanHY_PoolManager":"FISHMoHuanHY_PoolManager","./FISHMoHuanHY_ResourceMgr":"FISHMoHuanHY_ResourceMgr","./effectFunction/FISHMoHuanHY_CrabEffect":"FISHMoHuanHY_CrabEffect","./effectFunction/FISHMoHuanHY_DragonEffect":"FISHMoHuanHY_DragonEffect","./effectFunction/FISHMoHuanHY_GoldBombEffect":"FISHMoHuanHY_GoldBombEffect","./effectFunction/FISHMoHuanHY_LightingEffect":"FISHMoHuanHY_LightingEffect","./effectFunction/FISHMoHuanHY_PandaEffect":"FISHMoHuanHY_PandaEffect","./effectFunction/FISHMoHuanHY_SuperbombEffect":"FISHMoHuanHY_SuperbombEffect","./effectFunction/FISHMoHuanHY_whalekingEffect":"FISHMoHuanHY_whalekingEffect"}],FISHMoHuanHY_GameBulletBase:[function(e,t,i){"use strict";cc._RF.push(t,"41281dqLzkpHquzsWrHpP4/","FISHMoHuanHY_GameBulletBase");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=e("./FISHMoHuanHY_GameDefine"),c=cc._decorator,a=c.ccclass,l=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletInfo=null,t.currentAngel=0,t.startGrid=null,t.currentGrid=null,t.speedRow=0,t.speedCol=0,t.speedX=0,t.speedY=0,t._isdrillstop=!1,t.bulletMgr=null,t.collider=null,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.onLoad=function(){this.collider=this.node.getComponent(cc.Collider)},t.prototype.init=function(e,t){this.bulletInfo=e,this.currentAngel=e.angle,this.startGrid=this.game.mCrashGrid.getCrashGridByPos(this.bulletInfo.crashGridPos),this.startGrid?(this.currentGrid=this.startGrid.clone(),this.bulletMgr=t,this.collider.enabled=!0,this.node.setPosition(e.crashGridPos)):cc.error("startGrid \u4e3anull")},t.prototype.updateSpeed=function(){this.speedRow=Math.sin(this.currentAngel*Math.PI/180)*this.currSpeed,this.speedCol=Math.cos(this.currentAngel*Math.PI/180)*this.currSpeed,this.speedX=this.speedCol*this.game.mCrashGrid.GridWidth,this.speedY=this.speedRow*this.game.mCrashGrid.GridHeight},t.prototype.caculate_bullet_rotation=function(e,t){return 180*Math.atan2(e,t)/Math.PI},t.prototype.updateMove=function(){if(null!=this.currentGrid){this.bulletInfo.createTick,this.BulletTick;var e=!1,t=this.currentGrid.x,i=this.currentGrid.y;t+=this.speedRow,i+=this.speedCol;var o=this.game.mCrashGrid.CrashRowMin,n=this.game.mCrashGrid.CrashRowMax,r=this.game.mCrashGrid.CrashColMin,s=this.game.mCrashGrid.CrashColMax;return t<=o?this.speedRow<0&&(this.speedRow=-this.speedRow,e=!0):t>=n+1?this.speedRow>0&&(this.speedRow=-this.speedRow,e=!0):i<=r?this.speedCol<0&&(this.speedCol=-this.speedCol,e=!0):i>=s+1&&this.speedCol>0&&(this.speedCol=-this.speedCol,e=!0),e&&(this.speedX=this.speedCol*this.game.mCrashGrid.GridWidth,this.speedY=this.speedRow*this.game.mCrashGrid.GridHeight,this.currentAngel=this.caculate_bullet_rotation(this.speedRow,this.speedCol)),this.node.angle=this.currentAngel,this.update_bullet_pos(),!this._isdrillstop&&this.checkCollider()}},t.prototype.update_bullet_pos=function(){var e=this.currentGrid.x,t=this.currentGrid.y;e+=this.speedRow,t+=this.speedCol;var i=this.check_bullet_row_col(e,t);if(0==i){this.currentGrid.x=e,this.currentGrid.y=t;var o=cc.v2(this.node.x+this.speedX,this.node.y+this.speedY);this.node.setPosition(o)}else console.log("check_bullet_row_col: r = "+i)},t.prototype.check_bullet_row_col=function(e,t){var i=this.game.mCrashGrid.CrashRowMin,o=this.game.mCrashGrid.CrashRowMax,n=this.game.mCrashGrid.CrashColMin,r=this.game.mCrashGrid.CrashColMax;return e<i?1:e>o+1?2:t<n?3:t>r+1?4:0},t.prototype.checkCollider=function(){var e=this.game._quadCollision.check(this.game.fishMgr.getGameFish,this.collider);if(e.length>0){for(var t=null,i=0;i<e.length&&!((t=e[i])&&t.isCanCatch&&t.checkInScreenRegion());i++)t=null;if(t){if(t.playByHit(),this.bulletInfo.gameID==this.game.gameId)if(this.bulletInfo.isDrillGun){if(t.fishInfo.nFishKindID>117)return!0;this.game.iGameBase.EmitEvent(s.EventCode.DrillCatchFishs,{wChairID:this.bulletInfo.chairID,dwBulletIndex:this.bulletInfo.bulletIndex,dwFishIndex:t.fishInfo.dwFishIndex})}else this.game.iGameBase.EmitEvent(s.EventCode.SendCatchFish,{wChairID:this.bulletInfo.chairID,dwBulletIndex:this.bulletInfo.bulletIndex,dBulletRow:this.currentGrid.x,dBulletCol:this.currentGrid.y,dwFishIndex:t.fishInfo.dwFishIndex,wPathIndex:t?t.CurrentStep:0,bFreeBullet:this.bulletInfo.isDrillGun});return!0}}return!1},t.prototype.recycle=function(){return this.node.removeFromParent(!0),this},r([a],t)}(cc.Component));i.default=l,cc._RF.pop()},{"./FISHMoHuanHY_GameDefine":"FISHMoHuanHY_GameDefine"}],FISHMoHuanHY_GameBulletDrill:[function(e,t,i){"use strict";cc._RF.push(t,"a2d84Oqa+goUaTXs1dUV0xF","FISHMoHuanHY_GameBulletDrill");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=e("./FISHMoHuanHY_GameBulletBase"),c=e("./FISHMoHuanHY_GameDefine"),a=cc._decorator,l=a.ccclass,h=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currWeight=c.FunctionWeight.drill,t.isNext=!1,t.currSpeed=1,t.flgEnd=!1,t.bullerAni=null,t.tail=null,t}return n(t,e),t.prototype.initFunction=function(e){this.targetFort=e,this.targetFort.setEffect(this)},t.prototype.SetTotalScore=function(){},t.prototype.init=function(t,i,o){e.prototype.init.call(this,t,i),this.initFunction(o),this.tail.active=!0,this.currSpeed=1,this.updateSpeed()},t.prototype.updateSpeed=function(){e.prototype.updateSpeed.call(this)},t.prototype.updateMove=function(t){var i=e.prototype.updateMove.call(this,t);return this.flgEnd||i&&this.bulletMgr.playHit({pos:this.node.getPosition(),hitType:c.HitType.drillHit,angle:this.node.angle}),!1},t.prototype.strackEffect=function(){var e=cc.repeatForever(cc.rotateBy(.4,360));cc.tween(this.node).then(e).start()},t.prototype.playBomb=function(t,i){var o=this;e.prototype._isdrillstop=!0,this.flgEnd=!0,this.tail.active=!1,this.currSpeed=.4,this.updateSpeed(),this.game.iAudioPlayer.play_sound("zuantouBombSound"),this.scheduleOnce(this.strackEffect,.01663),this.scheduleOnce(function(){o.unschedule(o.strackEffect),o.bulletMgr.playHit({pos:o.node.getPosition(),hitType:c.HitType.bigBang,cb:i,bulletIndex:o.bulletInfo.bulletIndex,bomb:c.bombType.drill,playerId:t}),e.prototype._isdrillstop=!1,o.bulletMgr.recycleBullet(o)},1)},t.prototype.lastStep=function(){},t.prototype.nextStep=function(){},t.prototype.beforDestroy=function(){},t.prototype.ImmediatelyDestroy=function(){this.bulletMgr.recycleBullet(this)},r([h(cc.Animation)],t.prototype,"bullerAni",void 0),r([h(cc.Node)],t.prototype,"tail",void 0),r([l],t)}(s.default);i.default=u,cc._RF.pop()},{"./FISHMoHuanHY_GameBulletBase":"FISHMoHuanHY_GameBulletBase","./FISHMoHuanHY_GameDefine":"FISHMoHuanHY_GameDefine"}],FISHMoHuanHY_GameBulletHit:[function(e,t,i){"use strict";cc._RF.push(t,"b9c48Zpkq0aomtyVhzSAsn+","FISHMoHuanHY_GameBulletHit");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],o=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0});var c=e("./FISHMoHuanHY_GameDefine"),a=cc._decorator,l=a.ccclass,h=a.menu,u=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletManager=null,t.ani=null,t.isCollider=!1,t.collider=null,t.isCheckCollide=!1,t.bulletIndex=0,t.drillCallbaer=null,t.currType=-1,t.catchCount=0,t.catchFishMap=new Map,t.playerId=0,t.chairId=0,t.currSpeed=0,t}return n(t,e),t.prototype.setGame=function(e){this.game=e,this.collider=this.node.getComponent(cc.Collider),this.ani=this.node.getComponent(cc.Animation)},t.prototype.getCatchfishCount=function(e){switch(e){case c.bombType.drill:return c.FunctionCatchCount.drill;case c.bombType.superBomb:return c.FunctionCatchCount.superBomb;case c.bombType.denLong:return c.FunctionCatchCount.denLong;case c.bombType.smallOctopus:return c.FunctionCatchCount.smallOctopus}},t.prototype.playHit=function(e,t,i,o,n,r){if(void 0===t&&(t=c.HitType.normalHit),this.bulletIndex=e,this.drillCallbaer=i,t!=c.HitType.denlong&&t!=c.HitType.bigBang||(this.isCollider=!0),this.currType=o,this.catchFishMap.clear(),this.playerId=n,this.chairId=r,this.isCollider){this.game.iAudioPlayer.play_sound("bombHit"),this.node.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.CUSTOM;var s=o==c.bombType.denLong?7:5;this.node.setContentSize(185*s,197*s),this.catchCount=this.getCatchfishCount(o),this.ani.play(c.HitType[t]),this.collider.enabled=!0,this.isCheckCollide=!0,this.game.gameScene.shakeEffect(.5)}else this.node.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.TRIMMED,this.isCheckCollide=!1,this.collider.enabled=!1,t!=c.HitType.drillHit&&this.ani.play(c.HitType[t]);t==c.HitType.normalHit&&this.game.iAudioPlayer.play_sound("anniu")},t.prototype.onHitFinish=function(){var e,t;if(this.bulletManager)this.bulletManager.onHitFinish(this);else{if(this.isCollider&&this.game.gameId==this.playerId){for(var i=[],o=0;o<this.catchCount;o++)i[o]=0;var n=0;try{for(var r=s(this.catchFishMap.keys()),a=r.next();!a.done;a=r.next()){var l=a.value;i[n]=l,n++}}catch(h){e={error:h}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this.game.iGameBase.EmitEvent(c.EventCode.FunctionCatchFishs,{wChairID:this.game.iGameBase.UserManager_getChairID(),dwBulletIndex:this.bulletIndex,dwFishIndex:i,cbFishCount:n})}this.drillCallbaer&&this.drillCallbaer.exec(),this.node.destroy()}},t.prototype.lateUpdate=function(){if(this.isCheckCollide){var e=this.game._quadCollision.check(this.game.fishMgr.getGameFish,this.collider),t=e.length;if(t>0)for(var i=0;i<t;i++){var o=e[i];o.isCanCatch&&!this.catchFishMap.has(o.fishInfo.dwFishIndex)&&this.catchFishMap.size<this.catchCount&&o.fishInfo.nFishKindID<118&&o.checkInScreenRegion()&&(this.catchFishMap.set(o.fishInfo.dwFishIndex,o),this.catchFishMap.size>=this.catchCount&&(this.isCheckCollide=!1))}}},r([l,h("FISHMoHuanHY/GameBulletHit_DEMO")],t)}(cc.Component));i.default=u,cc._RF.pop()},{"./FISHMoHuanHY_GameDefine":"FISHMoHuanHY_GameDefine"}],FISHMoHuanHY_GameBulletJinLuan:[function(e,t,i){"use strict";cc._RF.push(t,"9859a+0uBBK17ytx2pNsljJ","FISHMoHuanHY_GameBulletJinLuan");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=e("./FISHMoHuanHY_GameBulletBase"),c=e("./FISHMoHuanHY_GameDefine"),a=cc._decorator,l=a.ccclass,h=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currWeight=c.FunctionWeight.drill,t.isNext=!1,t.currSpeed=.1,t.flgEnd=!1,t.shoot_time=8e3,t.isShootStop=!1,t.temp=null,t.temp2=null,t.anim=null,t.bullerAni=null,t.isfirsttime=!0,t}return n(t,e),t.prototype.initFunction=function(e){this.targetFort=e,this.targetFort.setEffect(this)},t.prototype.SetTotalScore=function(){},t.prototype.init=function(t,i,o){this.anim=this.node.getComponent(cc.Animation),e.prototype._isdrillstop=!0,e.prototype.init.call(this,t,i),this.initFunction(o),this.currSpeed=.07,this.updateSpeed(),this.small_octopus_fire()},t.prototype.updateSpeed=function(){e.prototype.updateSpeed.call(this)},t.prototype.updateMove=function(t){return e.prototype.updateMove.call(this,t),!1},t.prototype.small_octopus_fire=function(){var e=this;if(this.isfirsttime)return this.anim.play("BulletKingFish_fashe"),setTimeout(function(){e.targetFort.fire(c.functionType.Small_Octopus),e.anim.play("BulletKingFish_move"),e.small_octopus_fire()},1500),void(this.isfirsttime=!1);this.temp2=setTimeout(function(){e.anim.play("BulletKingFish_fashe")},this.shoot_time-1500),this.temp=setTimeout(function(){e.small_octopus_fire()},this.shoot_time),this.targetFort.fire(c.functionType.Small_Octopus),this.anim.play("BulletKingFish_move")},t.prototype.playBomb=function(){clearTimeout(this.temp),clearTimeout(this.temp2),this.bulletMgr.recycleBullet(this)},t.prototype.lastStep=function(){},t.prototype.nextStep=function(){},t.prototype.beforDestroy=function(){},t.prototype.ImmediatelyDestroy=function(){},r([h(cc.Animation)],t.prototype,"bullerAni",void 0),r([l],t)}(s.default);i.default=u,cc._RF.pop()},{"./FISHMoHuanHY_GameBulletBase":"FISHMoHuanHY_GameBulletBase","./FISHMoHuanHY_GameDefine":"FISHMoHuanHY_GameDefine"}],FISHMoHuanHY_GameBulletSmallOctopus:[function(e,t,i){"use strict";cc._RF.push(t,"a9d68xxnh1JdY5xjkxLwb5J","FISHMoHuanHY_GameBulletSmallOctopus");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=e("./FISHMoHuanHY_GameBulletBase"),c=e("./FISHMoHuanHY_GameDefine"),a=cc._decorator,l=a.ccclass,h=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currWeight=c.FunctionWeight.Small_Octopus,t.isNext=!1,t.currSpeed=.8,t.flgEnd=!1,t.playerID=0,t.rotation=-90,t.bullerAni=null,t}return n(t,e),t.prototype.initFunction=function(e){this.targetFort=e,this.targetFort.setEffect(this)},t.prototype.SetTotalScore=function(){},t.prototype.init=function(t,i,o){var n=this;e.prototype.init.call(this,t,i),this.playerID=this.bulletInfo.gameID,e.prototype._isdrillstop=!0,this.initFunction(o),this.node.rotation=this.rotation,this.currSpeed=.25,this.updateSpeed(),setTimeout(function(){n.playBomb(n.playerID)},2e3),cc.tween(this.node).to(2,{scale:.7}).start()},t.prototype.updateSpeed=function(){e.prototype.updateSpeed.call(this)},t.prototype.updateMove=function(t){return e.prototype.updateMove.call(this,t),!1},t.prototype.strackEffect=function(){},t.prototype.playBomb=function(e,t){var i=this;this.updateSpeed(),this.game.iAudioPlayer.play_sound("zuantouBombSound"),this.scheduleOnce(function(){i.bulletMgr.playHit({pos:i.node.getPosition(),hitType:c.HitType.bigBang,cb:t,bulletIndex:i.bulletInfo.bulletIndex,bomb:c.bombType.smallOctopus,playerId:e}),i.bulletMgr.recycleBullet(i)},1)},t.prototype.lastStep=function(){},t.prototype.nextStep=function(){},t.prototype.beforDestroy=function(){},t.prototype.ImmediatelyDestroy=function(){this.bulletMgr.recycleBullet(this)},r([h(cc.Animation)],t.prototype,"bullerAni",void 0),r([l],t)}(s.default);i.default=u,cc._RF.pop()},{"./FISHMoHuanHY_GameBulletBase":"FISHMoHuanHY_GameBulletBase","./FISHMoHuanHY_GameDefine":"FISHMoHuanHY_GameDefine"}],FISHMoHuanHY_GameBullet:[function(e,t,i){"use strict";cc._RF.push(t,"0aebdn58v6Tl9osKTKqVerL","FISHMoHuanHY_GameBullet");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=e("./FISHMoHuanHY_GameBulletBase"),c=e("./FISHMoHuanHY_GameDefine"),a=cc._decorator,l=a.ccclass,h=a.menu,u=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currSpeed=c.BulletGridSpeed,t}return n(t,e),t.prototype.init=function(t,i){e.prototype.init.call(this,t,i),this.updateSpeed()},t.prototype.updateSpeed=function(){e.prototype.updateSpeed.call(this)},t.prototype.updateMove=function(t){return e.prototype.updateMove.call(this,t)&&(this.collider.enabled=!1,this.bulletMgr.recycleBullet(this),this.bulletMgr.playHit({pos:this.node.getPosition(),hitType:c.HitType.normalHit})),!1},r([l,h("FISHMoHuanHY/GameBullet_DEMO")],t)}(s.default));i.default=u,cc._RF.pop()},{"./FISHMoHuanHY_GameBulletBase":"FISHMoHuanHY_GameBulletBase","./FISHMoHuanHY_GameDefine":"FISHMoHuanHY_GameDefine"}],FISHMoHuanHY_GameDefine:[function(e,t,i){"use strict";var o,n;cc._RF.push(t,"29bb34XgqOH/ZQE5ImtDGqA","FISHMoHuanHY_GameDefine"),Object.defineProperty(i,"__esModule",{value:!0}),i.DisableFireFunction=i.getEffectWeightFishId=i.getWeightByType=i.ResetType=i.FishDieType=i.HitType=i.bombType=i.FunctionWeight=i.FunctionCatchCount=i.functionType=i.EventCode=i.FishAnimType_DEMO=i.FISHAype_DEMO=i.BulletGridSpeed=i.fireTime=i.FrameTime=void 0,i.FrameTime=.03,i.fireTime=.3,i.BulletGridSpeed=.7,function(e){e[e.normal=1]="normal",e[e.boss=2]="boss",e[e.gold=3]="gold",e[e.bomb=4]="bomb",e[e.wang=5]="wang",e[e.bomb_effect=6]="bomb_effect",e[e.combination_1=100]="combination_1",e[e.combination_2=101]="combination_2",e[e.combination_3=102]="combination_3",e[e.combination_4=103]="combination_4"}(i.FISHAype_DEMO||(i.FISHAype_DEMO={})),function(e){e[e.none=-1]="none",e[e.spine=0]="spine",e[e.bai_zheng=1]="bai_zheng",e[e.no_ani=2]="no_ani",e[e.combination=3]="combination",e[e.absolute=4]="absolute",e[e.vortex=5]="vortex",e[e.pulltogun=6]="pulltogun"}(i.FishAnimType_DEMO||(i.FishAnimType_DEMO={})),function(e){e.ShowGamePlaza="ShowGamePlaza",e.SendCatchFish="SendCatchFish",e.DrillCatchFishs="DrillCatchFishs",e.FunctionCatchFishs="FunctionCatchFishs",e.MyFire="MyFire",e.sendEnterGame="sendEnterGame",e.changeGun="changeGun",e.autoScendlockFish="autoScendlockFish",e.converProperty="converProperty",e.treasurBox="treasurBox",e.ingot="ingot",e.sendCatchPanda="sendCatchPanda"}(i.EventCode||(i.EventCode={})),function(e){e[e.normal=0]="normal",e[e.drill=1]="drill",e[e.superBomb=2]="superBomb",e[e.laser=3]="laser",e[e.JinLuan=4]="JinLuan",e[e.vortex=5]="vortex",e[e.lighting=6]="lighting",e[e.thunderDragon=7]="thunderDragon",e[e.DaPangXie=8]="DaPangXie",e[e.Small_Octopus=9]="Small_Octopus",e[e.eyu=10]="eyu",e[e.panda=14]="panda"}(o=i.functionType||(i.functionType={})),function(e){e[e.drill=10]="drill",e[e.superBomb=5]="superBomb",e[e.mermaid=40]="mermaid",e[e.cowMin=15]="cowMin",e[e.cowMax=30]="cowMax",e[e.dragon=40]="dragon",e[e.flash=20]="flash",e[e.laser=20]="laser",e[e.eyu=15]="eyu",e[e.crab=15]="crab",e[e.denLong=15]="denLong",e[e.smallOctopus=3]="smallOctopus"}(i.FunctionCatchCount||(i.FunctionCatchCount={})),function(e){e[e.drill=1]="drill",e[e.superBomb=2]="superBomb",e[e.laser=4]="laser",e[e.JinLuan=8]="JinLuan",e[e.xingxing=16]="xingxing",e[e.vortex=32]="vortex",e[e.lighting=64]="lighting",e[e.thunderDragon=128]="thunderDragon",e[e.DaPangXie=256]="DaPangXie",e[e.Small_Octopus=512]="Small_Octopus",e[e.panda=1024]="panda",e[e.eyu=2048]="eyu"}(n=i.FunctionWeight||(i.FunctionWeight={})),function(e){e[e.drill=0]="drill",e[e.superBomb=1]="superBomb",e[e.denLong=2]="denLong",e[e.smallOctopus=3]="smallOctopus"}(i.bombType||(i.bombType={})),function(e){e[e.normalHit=0]="normalHit",e[e.drillHit=1]="drillHit",e[e.denlong=2]="denlong",e[e.bigBang=3]="bigBang",e[e.crab=4]="crab"}(i.HitType||(i.HitType={})),function(e){e[e.normal=0]="normal",e[e.vortex=1]="vortex",e[e.shandian=2]="shandian"}(i.FishDieType||(i.FishDieType={})),function(e){e[e.gameBg=0]="gameBg",e[e.changeBg=1]="changeBg"}(i.ResetType||(i.ResetType={})),i.getWeightByType=function(e){return n[o[e]]?n[o[e]]:(cc.error("\u4e0d\u5b58\u5728\u5bf9\u5e94\u7684\u6743\u4f4d\uff1a",o[e]),0)};var r=new Map([[120,n.thunderDragon],[125,n.vortex],[126,n.lighting],[124,n.laser],[122,n.drill],[123,n.superBomb],[121,n.Small_Octopus],[130,n.DaPangXie],[127,n.panda],[129,n.eyu]]);i.getEffectWeightFishId=function(e){var t=-1;return r.has(e)&&(t=r.get(e)),t},i.DisableFireFunction=[n.drill,n.laser,n.DaPangXie,n.Small_Octopus,n.lighting,n.superBomb,n.thunderDragon,n.vortex,n.JinLuan,n.eyu],cc._RF.pop()},{}],FISHMoHuanHY_GameFishShadow:[function(e,t,i){"use strict";cc._RF.push(t,"12a22x9xlQbSCKYrnkeyCI3","FISHMoHuanHY_GameFishShadow");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=e("./FISHMoHuanHY_PoolManager"),c=cc._decorator,a=c.ccclass,l=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isAnim=!1,t.skele=null,t.type=s.NodeType.none,t.sp=null,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.init=function(e,t,i){void 0===i&&(i=!1),this.isAnim?this.sp=this.node.getComponent(cc.Sprite):(i?(this.node.position=e.parent.position,this.skele.node.setPosition(e.position)):this.skele.node.setPosition(cc.v2()),this.node.angle=e.angle,this.skele.node.angle=0,this.skele.node.scale=e.scale,this.skele.skeletonData=t.skeletonData,this.skele.setAnimation(0,t.animation,!i),this.skele.timeScale=t.timeScale,this.skele.paused=!1,this.skele.setMaterial(0,this.game.fishMgr.shadowMaterial))},t.prototype.set=function(e,t,i,o,n){this.node.setPosition(e),this.node.scale=t,this.node.angle=o,this.node.opacity=i,this.isAnim&&(this.sp.spriteFrame=n)},t.prototype.stop=function(){this.isAnim||(this.skele.paused=!0)},t.prototype.recycle=function(){this.isAnim||(this.skele.setMaterial(0,null),this.skele.paused=!0,this.skele.skeletonData=null),this.game.poolMgr.Enqueue(this.node,this.type)},r([l],t.prototype,"isAnim",void 0),r([l({type:sp.Skeleton,visible:function(){return!this.isAnim}})],t.prototype,"skele",void 0),r([l({type:cc.Enum(s.NodeType)})],t.prototype,"type",void 0),r([a],t)}(cc.Component);i.default=h,cc._RF.pop()},{"./FISHMoHuanHY_PoolManager":"FISHMoHuanHY_PoolManager"}],FISHMoHuanHY_GameFish:[function(e,t,i){"use strict";cc._RF.push(t,"01846EiTNLvTBZZxV94rURM","FISHMoHuanHY_GameFish");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],o=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0});var c=e("./FISHMoHuanHY_FishKindMap"),a=e("./FISHMoHuanHY_GameDefine"),l=cc._decorator,h=l.ccclass,u=l.menu,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isShake=!1,t.goldBombPointArray=[],t.isAnimMove=!1,t.IsDragon=!1,t.IsDenlong=!1,t.colliderArray=[],t.isMuchPoint=!1,t.lockNode=[],t.isAnim=!1,t.moveSP=null,t.dieSP=null,t.blackLayer=null,t.anim=null,t.fishSkeleton=null,t.collider=null,t.fishSprite=null,t.shadow=null,t.functionCircle=null,t.UpSideDown=!1,t.FishPath=null,t.FishPathCrashSteps=null,t.FishCrashExtend=null,t.CenterGrid=cc.v2(),t.CrashGrid=[],t.CurrentStep=0,t.NextModelStep=-1,t.NextModelStepIndex=-1,t.fishInfo=null,t.fishKind=null,t.Caught=!0,t.isCanCatch=!1,t.Locked=!1,t._isChangeSpeeding=!1,t.targetMoveSpeed=0,t._recycleHandle=null,t.fish=null,t.cowMoveSoundId=-1,t.phoenixSoundIndex=1,t.isplaying=!1,t.speedupTick=0,t.isCanSpeedup=!0,t.sustainTime=2.5,t.spineSpeed=1,t.currExistTime=0,t.startSpeedupStep=0,t.targetSpineSpedd=2.5,t.frameSpeed=0,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.onLoad=function(){this.node.group="fish",this.fish=this.node.children[0],this.isAnim?(this.anim=this.fish.getComponent(cc.Animation),this.collider=this.fish.getComponent(cc.Collider),this.fishSprite=this.fish.getComponent(cc.Sprite)):(this.fishSkeleton=this.fish.getComponent(sp.Skeleton),this.IsDragon||(this.collider=this.node.getComponent(cc.Collider)),null==this.fishSkeleton&&cc.error("\u9aa8\u9abc\u4e3a\u7a7a>>>")),this.isMuchPoint||(this.lockNode[0]=this.fish.getChildByName("center"))},t.prototype.playMoveAni=function(){var e=this;if(this.isAnim)this.anim.play("move").wrapMode=cc.WrapMode.Loop,this.fishKind.isNoneShadow||this.shadow.init(this.fish);else{if(this.isAnimMove){this.fishSkeleton.setAnimation(0,this.fishKind.animName||"Sprite",!this.isAnimMove),this.fishSkeleton.setCompleteListener(function(){e._recycleHandle&&e._recycleHandle.exec(e,!1)}),this.CurrentStep=0;var t=0,i=0;this.fish.scaleX=1.5,this.fish.scaleY=1.5,12502==this.fishInfo.wPathID?this.UpSideDown?(t=1150,i=cc.winSize.height-200+1300,this.fish.scaleX=1.5,this.fish.scaleY=-1.5):(t=cc.winSize.width-1150-400,i=200,this.fish.scaleX=-1.5,this.fish.scaleY=1.5):12503==this.fishInfo.wPathID?this.UpSideDown?(t=cc.winSize.width-1150-400,i=200,this.fish.scaleX=-1.5,this.fish.scaleY=1.5):(t=1150,i=cc.winSize.height-200+1300,this.fish.scaleX=1.5,this.fish.scaleY=-1.5):12504==this.fishInfo.wPathID?this.UpSideDown?(t=1150,i=200,this.fish.scaleX=1.5,this.fish.scaleY=1.5):(t=cc.winSize.width-1150-400,i=cc.winSize.height-200+1300,this.fish.scaleX=-1.5,this.fish.scaleY=-1.5):this.UpSideDown?(t=cc.winSize.width-1150-400,i=cc.winSize.height+1300,this.fish.scaleX=-1.5,this.fish.scaleY=-1.5):(t=1150,i=200,this.fish.scaleX=1.5,this.fish.scaleY=1.5);var o=new cc.Vec2(t,i);this.node.setPosition(o)}128!=this.fishKind.id&&129!=this.fishKind.id||(this.fishSkeleton.skeletonData=this.moveSP,this.fishSkeleton.setAnimation(0,this.fishKind.animName||"Sprite",!this.isAnimMove)),this.fishSkeleton.timeScale=this.IsDragon?.3:1,this.fishSkeleton.paused=!1,this.fishKind.isNoneShadow||this.shadow.init(this.fish,this.fishSkeleton,this.isAnimMove)}},t.prototype.playSound=function(){401==this.fishKind.id?this.game.iAudioPlayer.play_sound("mermaid"):601==this.fishKind.id&&this.game.iAudioPlayer.play_sound("phoenixWing"+this.phoenixSoundIndex,!1,.7)},t.prototype.stopSound=function(){this.unschedule(this.playSound),this.cowMoveSoundId>-1&&(this.game.iAudioPlayer.stop_sound(this.cowMoveSoundId),this.cowMoveSoundId=-1)},t.prototype.enterChangeSceneState=function(){if(!this.Caught){if(null!=this.FishPath){var e=this.FishPath.len-this.CurrentStep;this.targetMoveSpeed=1.5/e}else cc.error("\u6ca1\u6709\u8def\u5f84");this._isChangeSpeeding=!0,this.isCanCatch=!1,this.activeCollider(!1);var t=this;this.functionCircle&&cc.tween(this.functionCircle).to(1.5,{opacity:0}).start(),cc.tween(this.node).to(1.5,{opacity:0}).call(function(){t._recycleHandle&&t._recycleHandle.exec(t,!1)}).start()}},t.prototype.enterDie=function(){this.isCanCatch=!1,this.Caught=!0,this.stopSound(),this.isAnim?this.anim.stop("move"):(this.fishSkeleton.paused=!0,this.shadow&&this.shadow.stop()),this.activeCollider(!1),this.game.mCrashGrid.removeCrashItem(this,this.fishInfo.dwFishIndex)},Object.defineProperty(t.prototype,"goldCount",{get:function(){return this.fishKind.goldCount},enumerable:!1,configurable:!0}),t.prototype.isSpecialAnim=function(){return this.fishInfo.nSpecialFishKindID<=0&&this.fishKind.id>119&&this.fishKind.id<=130},t.prototype.getCurrWorldPos=function(){return this.node.convertToWorldSpaceAR(cc.v2())},t.prototype.playDieAni=function(e,t,i){var o=this;void 0===i&&(i=!1),this.stopShake(),this.enterDie();var n=c.FishKindMap[this.fishInfo.nFishKindID].animType,r=this.node.angle;this.functionCircle&&(this.functionCircle.destroy(),this.functionCircle=null),this.isSpecialAnim()||this.game.iAudioPlayer.play_sound("show2");var s=this;switch(n){case a.FishAnimType_DEMO.pulltogun:118!=this.fishInfo.nFishKindID&&119!=this.fishInfo.nFishKindID||(this.fish.children[0].active=!1,this.fish.children[1].active=!0,this.fish.children[1].getComponent(cc.Animation).play());var l,h=e.node.convertToWorldSpaceAR(cc.v2()),u=this.node.parent.convertToNodeSpaceAR(h),p=cc.v3(u.x,e.IsOnTop?u.y-200:u.y+200);119!=this.fishInfo.nFishKindID&&118!=this.fishInfo.nFishKindID&&(l=this.anim.play("die"));var d=cc.tween(this.node).by(7,{angle:-540}).call(function(){119==o.fishInfo.nFishKindID||118==o.fishInfo.nFishKindID?(t&&t.exec(s,i),cc.tween(o.node).sequence(cc.delayTime(0),o.playFadeOut(.2,3),cc.callFunc(function(){o.fish.children[0].active=!0,o.fish.children[1].active=!1,s._recycleHandle&&s._recycleHandle.exec(s,!1)})).start()):l&&(l.wrapMode=cc.WrapMode.Loop,l.repeatCount=1/0,t&&t.exec(s,i),cc.tween(o.node).sequence(cc.delayTime(0),o.playFadeOut(.2,3),cc.callFunc(function(){s._recycleHandle&&s._recycleHandle.exec(s,!1)})).start())}),f=cc.tween(this.node).to(4,{position:p});cc.tween(this.node).parallel(d,f).start();break;case a.FishAnimType_DEMO.spine:if(this.isAnim){var y=this.anim.play("die");y?(y.wrapMode=cc.WrapMode.Loop,y.repeatCount=1/0,t&&t.exec(s,i),cc.tween(this.node).sequence(cc.delayTime(1),this.playFadeOut(.2,3),cc.callFunc(function(){s._recycleHandle&&s._recycleHandle.exec(s,!1)})).start()):(cc.error("\u8fd9\u4e2a\u9c7c\u6ca1\u6709\u6b7b\u4ea1\u52a8\u753b\uff1a",this.fishKind.id),s._recycleHandle&&s._recycleHandle.exec(s,!1))}else this.fishSkeleton.paused=!1,t&&t.exec(s,i),cc.tween(this.node).sequence(cc.delayTime(1),this.playFadeOut(.2,3),cc.callFunc(function(){s.fishSkeleton.paused=!0,s._recycleHandle&&s._recycleHandle.exec(s,!1)})).start();break;case a.FishAnimType_DEMO.bai_zheng:t&&t.exec(this,i),cc.tween(this.node).sequence(cc.scaleTo(.1,1.5),cc.repeat(cc.sequence(cc.rotateTo(.13,r+60),cc.rotateTo(.13,r),cc.rotateTo(.13,r-60),cc.rotateTo(.13,r)),4),cc.scaleTo(.1,1),cc.callFunc(function(){s._recycleHandle&&s._recycleHandle.exec(s,!1)})).start();break;case a.FishAnimType_DEMO.no_ani:t&&t.exec(this,i),this.anim.play("die"),cc.tween(this.node).sequence(this.playFadeOut(.2,1.2),cc.callFunc(function(){s._recycleHandle&&s._recycleHandle.exec(s,!1)})).start();break;case a.FishAnimType_DEMO.combination:t&&t.exec(this,i),cc.tween(this.node).sequence(cc.spawn(cc.rotateTo(2.5,r+720),cc.scaleTo(2.5,0),cc.fadeOut(2.5)),cc.callFunc(function(){s._recycleHandle&&s._recycleHandle.exec(s,!1)})).start();break;default:t&&t.exec(this,i),s._recycleHandle&&s._recycleHandle.exec(s,!1)}},t.prototype.playVortex=function(e,t,i){void 0===i&&(i=!1),this.enterDie(),this.functionCircle&&(this.functionCircle.destroy(),this.functionCircle=null),i&&this.game.gameScene.shakeEffect(.5);var o=this;e=this.node.parent.convertToNodeSpaceAR(e),cc.tween(this.node).parallel(cc.moveTo(1.5,e),cc.rotateTo(3.5,-1080)).call(function(){t&&t.exec(o),o._recycleHandle&&o._recycleHandle.exec(o,!1)}).start()},t.prototype.playShandianDie=function(e){var t=this;this.functionCircle.scale=2,e=this.node.parent.convertToNodeSpaceAR(e);var i=cc.tween(this.node).parallel(cc.moveTo(1.5,e),cc.rotateBy(1.5,-180));cc.tween(this.functionCircle).parallel(cc.scaleTo(.5,.5),cc.tintTo(.5,cc.Color.WHITE.r,cc.Color.WHITE.g,cc.Color.WHITE.b)).call(function(){t.functionCircle.getComponent(cc.Animation).play("shandian1"),i.start()}).start()},t.prototype.dieFishMoveFort=function(e,t){var i=e.gunbarrel.convertToWorldSpaceAR(cc.v2()),o=this.game.fishMgr.node.convertToNodeSpaceAR(i),n=cc.v2(o.x,e.IsOnTop?o.y-150:o.y+150);cc.tween(this.node).sequence(cc.spawn(cc.moveTo(.8,n),cc.rotateTo(1,0)),cc.delayTime(1),cc.callFunc(function(){t.start()})).start()},t.prototype.playFadeOut=function(e,t){return cc.sequence(cc.delayTime(e),cc.fadeOut(t))},t.prototype.playByHit=function(){var e=this;if(!this.isplaying){this.isplaying=!0;var t=cc.tween().to(.2,{color:cc.Color.RED}),i=cc.tween().to(.1,{color:cc.Color.WHITE});118!=this.fishKind.id&&119!=this.fishKind.id?cc.tween(this.fish).sequence(t,i).call(function(){e.isplaying=!1}).start():cc.tween(this.fish.children[0]).sequence(t,i).call(function(){e.isplaying=!1}).start()}},t.prototype.updateCrashGrid=function(){this.Caught||(this.FishPathCrashSteps&&this.CurrentStep==this.NextModelStep?this.updateCrashGridByStep():this.updateGrashGridByPath())},t.prototype.updateGrashGridByPath=function(){var e=Math.floor(this.CenterGrid.x),t=Math.floor(this.CenterGrid.y);if(this.game.mCrashGrid.removeCrashItem(this,this.fishInfo.dwFishIndex),this.game.mCrashGrid.isCrashGrid(e,t)){var i=this.node.angle;i<0&&(i+=360),i>360&&(i-=360),i>90&&i<=180?i=180-i:i>180&&i<=270?i-=180:i>270&&i<=360&&(i=360-i),this.CrashGrid=[],this.CrashGrid.push(cc.v2(e,t)),this.game.mCrashGrid.insertCrashItem(this,this.fishInfo.dwFishIndex)}else this.CrashGrid=[]},t.prototype.updateCrashGridByStep=function(){var e,t;this.game.mCrashGrid.removeCrashItem(this,this.fishInfo.dwFishIndex),this.CrashGrid=[];try{for(var i=s(this.FishPathCrashSteps.crashSteps[this.NextModelStepIndex].crash),o=i.next();!o.done;o=i.next()){var n=o.value;this.CrashGrid.push(cc.v2(n.row,n.col))}}catch(r){e={error:r}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}this.game.mCrashGrid.insertCrashItem(this,this.fishInfo.dwFishIndex),this.updateNextModelStep(this.CurrentStep)},t.prototype.initSpecialFish=function(e,t){var i=e.getComponent(cc.Animation);this.functionCircle=e,125==t?(i.play("cyclone"),this.functionCircle.color=cc.Color.WHITE,e.setContentSize(cc.size(this.fishKind.vortexSize,this.fishKind.vortexSize))):126==t&&(i.play("shandian"),this.functionCircle.color=new cc.Color(226,246,106,255),e.setContentSize(cc.size(this.fishKind.lightSize,this.fishKind.lightSize))),this.fishKind.lightSize&&this.fishKind.vortexSize||cc.error("\u8fd9\u4e2aid\uff1a"+this.fishKind.id+"  \u7684\u9c7c\u6ca1\u6709\u8bbe\u7f6e\u5149\u5708\u5927\u5c0f")},t.prototype.activeCollider=function(e){this.IsDragon?this.colliderArray.forEach(function(t){t.enabled=e}):this.collider.enabled=e},t.prototype.isDenLongYu=function(){return this.IsDenlong},t.prototype.initWithFishInfo=function(e,t,i,o){this.node.scale=1,this.Locked=!1,this.UpSideDown=t,this.fishInfo=e,this.fishKind=e.nSpecialFishKindID>0?c.FishKindMap[e.nSpecialFishKindID]:c.FishKindMap[e.nFishKindID],this.originaSpeed=this.fishKind.moveSpeed?this.fishKind.moveSpeed:a.FrameTime,e.fSpeed>.01?this.moveSpeed=e.fSpeed:this.moveSpeed=this.originaSpeed,this.CurrentStep=e.wPath_Index,this.NextModelStep=-1,this.NextModelStepIndex=-1,this.shadow=i,this.activeCollider(!0),this.FishPath=this.game.fishPathMgr.FishPath[e.wPathID],this.FishPath||cc.error("\u6ca1\u6709\u83b7\u53d6\u5230\u8fd9\u4e2a\u8def\u5f84\uff1a"+e.wPathID),this.node.opacity=255,118!=this.fishKind.id&&119!=this.fishKind.id||(this.fish.children[0].color=cc.Color.WHITE),this.fish.color=cc.Color.WHITE,this._recycleHandle=o,this.Caught=!1,this.isCanCatch=!0,this.isplaying=!1,this.playMoveAni()},t.prototype.setPosition=function(){if(!(this.isAnimMove||this.CurrentStep<0)){this.CenterGrid.x=this.FishPath.row[this.CurrentStep],this.CenterGrid.y=this.FishPath.col[this.CurrentStep];var e=this.game.mCrashGrid.getGridPos(this.CenterGrid.x,this.CenterGrid.y);if(e){this.UpSideDown&&(e.y=cc.winSize.height-e.y);var t=this.FishPath.angle[this.CurrentStep];this.node.setPosition(e),122!=this.fishKind.id&&(this.UpSideDown?this.node.angle=-t:this.node.angle=t),this.updateCrashGrid()}}},t.prototype.updateMove=function(e,t){if(this.customUpdate(e,t),128==this.fishKind.id){var i=cc.find("fish/ATTACHED_NODE_TREE/ATTACHED_NODE:root/ATTACHED_NODE:bone/ATTACHED_NODE:bone22/ATTACHED_NODE:bone6/lightpos",this.node).convertToWorldSpaceAR(cc.v2()),o=this.game.fishMgr.darkLayer.parent.convertToNodeSpaceAR(i);this.game.fishMgr.darkLayer.setPosition(o)}return!(this.isAnimMove||this.Caught||(this.FishPath?this.CurrentStep>=this.FishPath.len||this.CurrentStep>=this.FishPath.row.length||this.CurrentStep>=this.FishPath.col.length?(999==this.fishKind.id||(this.node.opacity=0),0):(this.CurrentStep=Math.floor((e-this.fishInfo.dwCreteTicket)/1e3/this.moveSpeed),this.CurrentStep>=this.FishPath.len||this.CurrentStep>=this.FishPath.row.length||this.CurrentStep>=this.FishPath.col.length?(130==this.fishKind.id?cc.tween(this.node).to(1,{opacity:0}).call(function(){}).start():this.node.opacity=0,0):(this.setPosition(),1)):(cc.error("\u8def\u5f84ID:"+this.fishInfo.wPathID+",fishID:"+this.fishInfo.nFishKindID),1)))},t.prototype.updateNextModelStep=function(e){if(this.FishPathCrashSteps){for(var t=0;t<this.FishPathCrashSteps.crashSteps.length;t++)if(e<this.FishPathCrashSteps.crashSteps[t].id)return this.NextModelStep=this.FishPathCrashSteps.crashSteps[t].id,void(this.NextModelStepIndex=t);this.NextModelStep=this.FishPathCrashSteps.e+1,this.NextModelStepIndex=-1}},t.prototype.shake=function(e){var t=this,i=this.node.getPosition();cc.tween(this.node).sequence(cc.moveTo(.1,cc.v2(i.x+3,i.y+3)),cc.moveTo(.1,cc.v2(i.x-3,i.y-3)),cc.moveTo(.1,cc.v2(i.x+3,i.y+3)),cc.moveTo(.1,cc.v2(i.x-3,i.y-3)),cc.moveTo(.1,cc.v2(i.x+3,i.y+3)),cc.moveTo(.1,cc.v2(i.x-3,i.y-3)),cc.moveTo(.1,cc.v2(i.x+3,i.y+3)),cc.moveTo(.1,cc.v2(i.x-3,i.y-3)),cc.moveTo(.1,i)).call(function(){t.node.opacity=0,e&&e.exec()}).start()},t.prototype.checkLock=function(e){return!(this.Caught||!this.isCanCatch||!this.fishInfo||this.fishInfo.dwFishIndex!=e)},t.prototype.checkInCrashGrid=function(){return!!this.game.mCrashGrid.isCrashGrid(this.CenterGrid.x,this.CenterGrid.y)},t.prototype.checkInScreenRegion=function(){for(var e=0;e<this.lockNode.length;e++)if(this.lockNode[e]){var t=this.lockNode[e].convertToWorldSpaceAR(cc.v2());if(t.x>=0&&t.x<=cc.winSize.width&&t.y>=0&&t.y<=cc.winSize.height)return this.lockNode[e]}return null},t.prototype.stopShake=function(){308==this.fishKind.id?(this.stopSound(),this.game.gameScene.stopCowShake()):122==this.fishKind.id&&this.game.gameScene.stopPeopleShake()},t.prototype.recycle=function(){return this.stopShake(),this._isChangeSpeeding=!1,this.isCanCatch=!1,this.Caught=!0,this.isAnim?(this.anim.stop(),this.anim.node.angle=0):(this.fishSkeleton.setCompleteListener(null),this.fishSkeleton.paused=!0,this.fishSkeleton.node.angle=0),this.functionCircle&&(this.functionCircle.destroy(),this.functionCircle=null),this.node.removeFromParent(!0),this.game.mCrashGrid.removeCrashItem(this,this.fishInfo.dwFishIndex),this.node.angle=0,this.FishPath=null,this.FishCrashExtend=null,this.FishPathCrashSteps=null,this.CenterGrid.x=0,this.CenterGrid.y=0,this.CrashGrid=[],this.shadow&&(this.shadow.recycle(),this.shadow=null),this.isCanSpeedup=!0,this.CurrentStep=0,this},t.prototype.customUpdate=function(e,t){if(this._isChangeSpeeding&&(this.moveSpeed-=this.targetMoveSpeed*t),this.shadow){var i=this.isAnim?this.fishSprite.spriteFrame:null;this.shadow.set(this.node.getPosition(),this.fish.scale,this.node.opacity,this.node.angle,i)}this.functionCircle&&this.functionCircle.setPosition(this.node.position)},r([p({tooltip:"\u662f\u5426\u9707\u52a8"})],t.prototype,"isShake",void 0),r([p({type:[cc.Node],tooltip:"\u7206\u70b8\u91d1\u5e01\u70b9",visible:function(){return this.isShake}})],t.prototype,"goldBombPointArray",void 0),r([p({tooltip:"\u662f\u5426\u52a8\u753b\u63a7\u5236\u79fb\u52a8"})],t.prototype,"isAnimMove",void 0),r([p],t.prototype,"IsDragon",void 0),r([p],t.prototype,"IsDenlong",void 0),r([p({type:[cc.PolygonCollider],visible:function(){return this.IsDragon}})],t.prototype,"colliderArray",void 0),r([p({tooltip:"\u591a\u4e2a\u9501\u5b9a\u70b9"})],t.prototype,"isMuchPoint",void 0),r([p({type:[cc.Node],tooltip:"\u9501\u5b9a\u70b9",visible:function(){return this.isMuchPoint}})],t.prototype,"lockNode",void 0),r([p],t.prototype,"isAnim",void 0),r([p({type:sp.SkeletonData,visible:function(){return 0==this.isAnim}})],t.prototype,"moveSP",void 0),r([p({type:sp.SkeletonData,visible:function(){return 0==this.isAnim}})],t.prototype,"dieSP",void 0),r([p({type:cc.Node,visible:function(){return this.IsDenlong}})],t.prototype,"blackLayer",void 0),r([h,u("FISHMoHuanHY/GameFish_DEMO")],t)}(cc.Component);i.default=d,cc._RF.pop()},{"./FISHMoHuanHY_FishKindMap":"FISHMoHuanHY_FishKindMap","./FISHMoHuanHY_GameDefine":"FISHMoHuanHY_GameDefine"}],FISHMoHuanHY_GameFortGunAni:[function(e,t,i){"use strict";cc._RF.push(t,"651ffFew3Vv/YPoQ/8EmWwj","FISHMoHuanHY_GameFortGunAni");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=e("./FISHMoHuanHY_GameFort"),c=cc._decorator,a=c.ccclass,l=c.menu,h=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onFireEnd=function(){var e=this.node.getParent().getParent().getParent();if(e){var t=e.getComponent(s.default);t&&t.playFree()}},r([a,l("FISHMoHuanHY/GameFortGunAni_DEMO")],t)}(cc.Component));i.default=h,cc._RF.pop()},{"./FISHMoHuanHY_GameFort":"FISHMoHuanHY_GameFort"}],FISHMoHuanHY_GameFort:[function(e,t,i){"use strict";cc._RF.push(t,"437c5/ZxxN9AO5MOoposudb","FISHMoHuanHY_GameFort");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],o=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var o,n,r=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../FISHMoHuanHY_GameLogic"),l=e("./effectFunction/FISHMoHuanHY_LaserEffect"),h=e("./FISHMoHuanHY_FunctionFort"),u=e("./FISHMoHuanHY_GameDefine"),p=cc._decorator,d=p.ccclass,f=p.menu,y=(p.inspector,p.property),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.siteIndex=0,t.posJinLuan=cc.v2(),t.angleJinLuan=0,t.posSmallOctopus=cc.v2(),t.angleSmallOctopus=0,t.BulletJinLuan=null,t.normalGun=null,t.electricityGun=null,t.drillGun=null,t.laserGun=null,t.gunbarrel=null,t.bottom=null,t.labelMultiple=null,t.btnAddMultple=null,t.btnSubMultple=null,t.drillLightEffect=null,t.bulletPoint=null,t.countdown=null,t.lblcountdown=null,t.functionFort=null,t.functionObj=null,t.lightningNode=null,t.fireLightFish=null,t.currentPaoIndex=1,t.laserEffect=null,t.UpSideDown=!1,t._isOnTop=!1,t._UserItem=null,t.LockFishIndex=a.INVALID_DWORD,t.lockFish=null,t.AutoFire=!1,t.fireTime=0,t.aimPos=cc.v2(),t.firePos=null,t.bulletIndex=0,t.drillPos=cc.v2(),t.isPress=!1,t.isCanstop=!1,t.isCanFire=!0,t.isWaitfire=!1,t.currFunctionType=u.functionType.normal,t._isActive=!1,t._currEffectWeight=0,t.effectMap=null,t._effectMultipleMap=null,t._currAngle=0,t.drillSoundId=-1,t.laserSoundId=-1,t.timer=9,t.isPlayRaigun=!1,t.playPastTime=0,t.raigunSoundId=-1,t}return n(t,e),Object.defineProperty(t.prototype,"IsOnTop",{get:function(){return this._isOnTop},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"chairId",{get:function(){return this._UserItem.getChairID()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gameId",{get:function(){return this._UserItem.getGameID()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"effectMultipleMap",{get:function(){return this._effectMultipleMap},enumerable:!1,configurable:!0}),t.prototype.setGame=function(e){this.game=e,this.LockFishIndex=a.INVALID_DWORD},t.prototype.start=function(){this.functionFort.fort=this,this.normalGun=this.gunbarrel.getChildByName("normalGun").getComponent(cc.Animation),this.drillGun=this.gunbarrel.getChildByName("drillGun").getComponent(cc.Animation),this.laserGun=this.gunbarrel.getChildByName("laserGun").getComponent(cc.Animation),this.electricityGun=this.gunbarrel.getChildByName("electricityGun"),this._isOnTop=180==this.node.angle,this.drillPos=this.drillGun.node.getPosition();var e=cc.v2();this.bulletPoint.convertToWorldSpaceAR(cc.v2(),e),this.firePos=this.game.fishMgr.node.convertToNodeSpaceAR(e),this.lightningNode=this.electricityGun.getChildByName("lightNode"),this.effectMap=new Map,this._effectMultipleMap=new Map},t.prototype.onEnable=function(){this.raigunSoundId=-1},t.prototype.onDisable=function(){this._UserItem&&this._UserItem.getGameID()==this.game.gameId&&(this.normalGun.node.off("click",this.clickGun,this),this.electricityGun.off("click",this.clickGun,this),this.normalGun.node.removeComponent(cc.Button),this.electricityGun.removeComponent(cc.Button)),this._isActive=!1},t.prototype.initInfo=function(e,t,i){this.currMultiple=e,this.currScore=t,this.labelMultiple.string=this.game.iGameBase.getNum(this.currMultiple,!0),this.currentPaoIndex=i},t.prototype.init=function(e,t){void 0===t&&(t=1),this._isActive||(this._currAngle=0,this._currEffectWeight=0,this._isActive=!0,this.bulletIndex=0,this._UserItem=e,this.currMultiple=t,this.currentPaoIndex=1,this.reset(!0),this._UserItem.getGameID()==this.game.gameId?(this.normalGun.node.addComponent(cc.Button),this.electricityGun.addComponent(cc.Button),this.normalGun.node.on("click",this.clickGun,this),this.electricityGun.on("click",this.clickGun,this),this.btnAddMultple.active=!0,this.btnSubMultple.active=!0):(this.btnAddMultple.active=!1,this.btnSubMultple.active=!1),this.labelMultiple.spacingX=-5)},t.prototype.reset=function(e){void 0===e&&(e=!1),this._currEffectWeight=0,this.gunbarrel.angle=0,this.laserGun.node.active=!1,this.normalGun.node.active=!0,this.electricityGun.active=!1,this.hideCountdown(),this.hideDrillGun(),this.functionFort.hideTotalScore(null),e?(this.isWaitfire=!1,this.isCanFire=!0,this.node.opacity=255):(this.stopRaigunAutoFire(),this.node.opacity=0,this._isActive=!1,this.destroyEffect(!0),this.playFree(),this.gunbarrel.active=!0,this.functionObj=null,this.laserEffect=null,this.currMultiple=0),this.labelMultiple.string=this.game.iGameBase.getNum(this.currMultiple,!0),this.btnAddMultple.active=!1,this.btnSubMultple.active=!1},t.prototype.clickGun=function(){this.isCanFire&&!this.isWaitfire&&(this._UserItem?this._UserItem.getGameID()==this.game.gameId&&(this.isCanFire=!1,this.game.iGameBase.EmitEvent(u.EventCode.changeGun,{chairId:this.chairId,gunIndex:1==this.currentPaoIndex?2:1})):cc.error("\u73a9\u5bb6\u4fe1\u606f\u4e0d\u5b58\u5728"))},t.prototype.showFunctionUI=function(e,t){this.functionFort.showFunctionUI(e,t)},t.prototype.showFunctionCatchScroe=function(e,t){void 0===t&&(t=0),this.functionFort.showDrillCatchScroe(e,t)},t.prototype.showFunctionTotalScore=function(e,t){this.functionFort.showFunctionTotalScore(e,t)},t.prototype.hidefunctionUI=function(e){this.functionFort.hidefunctionUI(e)},t.prototype.launchFunctionGunCountdown=function(){this.lblcountdown.string=this.timer.toString(),this.timer<=0?this.currFunctionType==u.functionType.drill?this._UserItem.getGameID()==this.game.gameId&&(this.fire(u.functionType.drill),this.fireFunctionGun()):this.currFunctionType==u.functionType.laser&&this._UserItem.getGameID()==this.game.gameId&&(this.fire(u.functionType.laser),this.isCanFire=!1):(this.timer--,12==this.timer&&(this.isCanFire=!0))},t.prototype.hideCountdown=function(){this.unschedule(this.launchFunctionGunCountdown),this.countdown.active=!1},t.prototype.fireFunctionGun=function(){this.game.iAudioPlayer.stop_sound(this.drillSoundId),this.game.iAudioPlayer.play_sound("zuanTouFaShe"),this.hideCountdown(),this.hideDrillGun(),this.isCanFire=!1},t.prototype.hideCurrGun=function(){this.gunbarrel.angle=0,this.normalGun.node.active=!1,this.electricityGun.active=!1},t.prototype.showDrillGun=function(){var e=this;this.drillGun&&(this.hideCurrGun(),this.drillGun.node.angle=0,this.drillGun.node.active=!0,this.gunbarrel.setSiblingIndex(0),this.game.iAudioPlayer.play_sound("zuanTouPaoBack"),cc.tween(this.drillGun.node).sequence(cc.delayTime(1),cc.moveTo(1,cc.v2(0,80)),cc.callFunc(function(){e.gunbarrel.setSiblingIndex(1),e.game.iAudioPlayer.play_sound("zuanTouWeapon"),e.showFunctionUI(u.functionType.drill),e.functionFort.showDrillCatchScroe(u.FunctionWeight.drill),e.drillLightEffect.active=!0,e.drillGun.node.setScale(cc.v2(1.5,1.5)),e.drillGun.node.setPosition(0,80)}),cc.scaleTo(1,1.5),cc.callFunc(function(){e.drillSoundId=e.game.iAudioPlayer.play_sound("zuanTouPaoZhuanDong",!0,1),e.timer=15,e.lblcountdown.string=e.timer.toString(),e.countdown.active=!0,e.schedule(e.launchFunctionGunCountdown,1,15),e.isWaitfire=!0,e.isCanFire=!0})).start())},t.prototype.showLaserGun=function(e){var t=this;cc.log("\u663e\u793a\u6fc0\u5149\u70ae"),this.hideCurrGun(),this.laserGun.node.getPosition(),this.gunbarrel.setSiblingIndex(0),this.laserGun.node.scale=1.5,this.laserGun.node.active=!0;var i=this;this.laserSoundId=this.game.iAudioPlayer.play_sound("dianCiPaoWaitFire",!0,1),cc.tween(this.laserGun.node).sequence(cc.delayTime(.5),cc.moveTo(1.5,cc.v2(2,-3)),cc.delayTime(1.25),cc.callFunc(function(){i.gunbarrel.setSiblingIndex(1),i.laserGun.node.scale=1.5,e&&e.exec(i)}),cc.scaleTo(.5,1),cc.callFunc(function(){i.showFunctionUI(u.functionType.laser),i.timer=15,i.lblcountdown.string=i.timer.toString(),i.countdown.active=!0,i.schedule(i.launchFunctionGunCountdown,1,15),t.isWaitfire=!0,t.isCanFire=!0})).start()},t.prototype.hideDrillGun=function(){this.drillLightEffect.active=!1,this.drillGun.node.active=!1,this.drillGun.node.setScale(cc.v2(1.8,1.5)),this.drillGun.node.setPosition(this.drillPos),this.bottom.play("bottom")},t.prototype.showGunbarrel=function(){this.drillGun.node.active=!1,this.laserGun.node.active=!1,this.currFunctionType!=u.functionType.laser&&this.currFunctionType!=u.functionType.drill||(this.gunbarrel.angle=0),1==this.currentPaoIndex?(this.normalGun.stop("fire"),this.electricityGun.active=!1,this.normalGun.node.active=!0,this.playFree()):(this.normalGun.node.active=!1,this.electricityGun.active=!0)},t.prototype.playFree=function(){this.normalGun.play("free"),this.bottom.play("bottom")},t.prototype.playFire=function(){this.normalGun.play("fire"),this.bottom.play("bottom_fashe"),this.game.iAudioPlayer.play_sound("fapao")},t.prototype.setAngle=function(e){return this._isOnTop?this.gunbarrel.angle=-e:this.gunbarrel.angle=e,this.functionFort.gunbarrel.angle=this.gunbarrel.angle,this},t.prototype.getFireAngle=function(){return this._isOnTop?180-this._currAngle:this._currAngle},t.prototype.getWorldAngle=function(){return this._isOnTop?this.gunbarrel.angle-90:this.gunbarrel.angle+90},t.prototype.aimAt=function(e,t){void 0===t&&(t=!1),this.node.getParent().convertToNodeSpaceAR(e,this.aimPos);var i=this.node.getPosition(),o=this.aimPos.sub(i),n=new cc.Vec2(0,1),r=-180*o.signAngle(n)/Math.PI;return r=cc.misc.clampf(r,-85,85),this._isOnTop?this._currAngle=270+r:this._currAngle=r,t&&(this.gunbarrel.angle=this._currAngle,this.functionFort.gunbarrel.angle=this._currAngle),this},t.prototype.checkScoreCanFire=function(e){return void 0===e&&(e=!1),this.currScore>=this.currMultiple||(e&&this.game.iGameBase.PopMessage_ShowMessage(1),!1)},t.prototype.fire=function(e){if(this._UserItem){if(this._UserItem.getGameID()!=this.game.gameId)return-1;var t=this.bulletIndex++;return t=100*this._UserItem.getChairID()+t%100,e==u.functionType.Small_Octopus?(this.game.iGameBase.EmitEvent(u.EventCode.MyFire,{dwBulletIndex:t,dBulletAngle:180,dwFishIndex:0,cbUserDefine:e||this.currFunctionType}),t=this.bulletIndex++,t=100*this._UserItem.getChairID()+t%100,this.game.iGameBase.EmitEvent(u.EventCode.MyFire,{dwBulletIndex:t,dBulletAngle:205,dwFishIndex:0,cbUserDefine:e||this.currFunctionType}),t=this.bulletIndex++,t=100*this._UserItem.getChairID()+t%100,this.game.iGameBase.EmitEvent(u.EventCode.MyFire,{dwBulletIndex:t,dBulletAngle:230,dwFishIndex:0,cbUserDefine:e||this.currFunctionType}),t=this.bulletIndex++,t=100*this._UserItem.getChairID()+t%100,this.game.iGameBase.EmitEvent(u.EventCode.MyFire,{dwBulletIndex:t,dBulletAngle:155,dwFishIndex:0,cbUserDefine:e||this.currFunctionType}),t=this.bulletIndex++,t=100*this._UserItem.getChairID()+t%100,void this.game.iGameBase.EmitEvent(u.EventCode.MyFire,{dwBulletIndex:t,dBulletAngle:130,dwFishIndex:0,cbUserDefine:e||this.currFunctionType})):(this.game.iGameBase.EmitEvent(u.EventCode.MyFire,{dwBulletIndex:t,dBulletAngle:this.getFireAngle(),dwFishIndex:0,cbUserDefine:e||this.currFunctionType}),this.isWaitfire&&(this.isCanFire=!1),t)}cc.error("\u8fd9\u4e2a\u73a9\u5bb6\u7684\u4fe1\u606f\u4e3anull")},t.prototype.lightUpdata=function(){if(this.fireLightFish&&this.fireLightFish.isCanCatch){var e=this.fireLightFish.checkInScreenRegion();if(e){this.lightningNode.angle=90;var t=e.convertToWorldSpaceAR(cc.v2(0,0));t=this.lightningNode.convertToNodeSpaceAR(t);var i=180*Math.atan2(t.y,t.x)/Math.PI;this.lightningNode.angle=i+90;var o=e.convertToWorldSpaceAR(cc.v2(0,0)),n=(o=this.lightningNode.convertToNodeSpaceAR(o)).mag();this.lightningNode.width=n,this.lightningNode.getChildByName("light").setPosition(o),this.lightningNode.active=!0,this.fireLightFish.playByHit(),this.playRaigunFireSound()}else this.stopRaigunAutoFire(),cc.error("\u4e0d\u5728\u5c4f\u5e55\u5185")}else this.stopRaigunAutoFire()},t.prototype.playRaigunFire=function(e,t){this.playRaigunFireAuto(e,t)},t.prototype.playRaigunFireSound=function(){this.raigunSoundId>-1||(this.raigunSoundId=this.game.iAudioPlayer.play_sound("lightShot",!0,1))},t.prototype.stopRaigunFireSound=function(){this.raigunSoundId>-1&&(this.game.iAudioPlayer.stop_sound(this.raigunSoundId),this.raigunSoundId=-1)},t.prototype.playRaigunFireAuto=function(e,t){this._UserItem.getGameID()==this.game.gameId&&this.game.iGameBase.EmitEvent(u.EventCode.SendCatchFish,{wChairID:this.chairId,dwBulletIndex:t,dBulletRow:0,dBulletCol:0,dwFishIndex:e,wPathIndex:this.fireLightFish?this.fireLightFish.CurrentStep:0,bFreeBullet:!1})},t.prototype.raigunFire=function(e){if(this._UserItem&&this._UserItem.getGameID()==this.game.gameId){var t=this.game.fishMgr.getFishByIndex(e);if(t&&t.isCanCatch&&t.checkInScreenRegion()){var i=this.bulletIndex++;i=100*this._UserItem.getChairID()+i%100,this.game.iGameBase.EmitEvent(u.EventCode.MyFire,{dwBulletIndex:i,dBulletAngle:this.getFireAngle(),dwFishIndex:e,bFreeBullet:!1})}}},t.prototype.setLockFish=function(e,t){void 0===t&&(t=!1),2==this.currentPaoIndex&&(this.LockFishIndex!=e&&(this.fireTime=0),this.LockFishIndex=e,this.lockFish=this.game.fishMgr.getFishByIndex(e),this.isCanstop=!1,this.lockFish?(this.unschedule(this.lightUpdata),this.fireLightFish=this.lockFish,this.startRaigunAutoFire()):(this.LockFishIndex=a.INVALID_DWORD,this.stopRaigunAutoFire(),this._UserItem.getGameID()==this.game.gameId&&(this.AutoFire||t)&&2==this.currentPaoIndex&&this.game.iGameBase.EmitEvent(u.EventCode.autoScendlockFish,t)))},t.prototype.onFire=function(e){return this.setAngle(e),this.playFire(),this.getBulletInitPos()},t.prototype.getBulletInitPos=function(){var e=cc.v2();return this.bulletPoint.convertToWorldSpaceAR(cc.v2(),e),this.firePos=this.game.fishMgr.node.convertToNodeSpaceAR(e),this.firePos},t.prototype.setLaserEffect=function(e){this._currAngle=0,this.functionObj=e,this.laserEffect=e.getComponent(l.default),this.laserEffect.setGame(this.game),this.laserEffect.initFunction(this),this.functionFort.setLaserEffect(e)},t.prototype.fireLaser=function(e,t){var i=this;this.game.iAudioPlayer.stop_sound(this.laserSoundId),this.game.iAudioPlayer.play_sound("dianCiPaoFire");var o=this.getEffect(u.FunctionWeight.laser);o?(cc.error("\u53d1\u5c04\u6fc0\u5149\u7279\u6548===="),o.setGame(this.game),this.laserGun.play("laserBattery_fashe"),o.playFire(e,t),this.scheduleOnce(function(){i.laserGun.play("laserBattery"),i.bottom.play("bottom")},2.5)):cc.error("\u6fc0\u5149\u7279\u6548\u4e0d\u5b58\u5728")},t.prototype.setNormalAutoFire=function(){this.AutoFire||(this.isPress=!0)},t.prototype.checkFireing=function(){return!(!this.isPlayRaigun&&!this.isPress)},t.prototype.autoFire=function(e){if(this.isCanFire&&this.currFunctionType==u.functionType.normal&&(this.AutoFire||this.checkFireing())&&(this.gameId!=this.game.gameId||this.checkScoreCanFire()))return!this.isCanstop||this.AutoFire||this.gameId!=this.game.gameId||this.isPress?void(this.fireTime>this._currFireTime?(2==this.currentPaoIndex?this.LockFishIndex!=a.INVALID_DWORD?(this.isCanstop=!0,this.lockFish&&this.lockFish.isCanCatch&&this.lockFish.checkInScreenRegion()&&this.lockFish.checkLock(this.LockFishIndex)?this.raigunFire(this.lockFish.fishInfo.dwFishIndex):this.setLockFish(a.INVALID_DWORD)):this.setLockFish(a.INVALID_DWORD):this.fire(),this.fireTime=0):this.fireTime+=e):(this.setLockFish(a.INVALID_DWORD,!0),void(this.isCanstop=!1))},t.prototype.changePaoTypeTween=function(e){var t=this;this.currentPaoIndex=e,this.normalGun.node.stopAllActions(),this.electricityGun.stopAllActions();var i=cc.sequence(cc.scaleTo(.5,1),cc.callFunc(function(){t.isCanFire=!0}));1==e?(this.playFree(),this.normalGun.node.scale=1.8,this.setPaoType(e),cc.tween(this.normalGun.node).then(i).start()):(this.electricityGun.scale=1.8,this.setPaoType(e),cc.tween(this.electricityGun).then(i).start()),this.game.iAudioPlayer.play_sound("huanPao")},t.prototype.setPaoType=function(e){1==e?(this.stopRaigunAutoFire(),this.normalGun.node.active=!0,this.electricityGun.active=!1,this._currFireTime=.23):(this.gunbarrel.angle=0,this.normalGun.node.active=!1,this.electricityGun.active=!0,this._currFireTime=.3)},t.prototype.startRaigunAutoFire=function(){this.unschedule(this.lightUpdata),this.playPastTime=0,this.isPlayRaigun=!0,this.lightUpdata(),this.schedule(this.lightUpdata,.05)},t.prototype.checkCanAutoFire=function(){return!(this.checkScoreCanFire()||2!=this.currentPaoIndex||!this.AutoFire&&!this.checkFireing()||(cc.error("\u5206\u6570\u4e0d\u591f\uff0c\u53d6\u6d88\u81ea\u52a8\u5f00\u70ae"),this.setLockFish(a.INVALID_DWORD,!0),0))},t.prototype.stopRaigunAutoFire=function(){this.isPlayRaigun=!1,this.unschedule(this.lightUpdata),this.lightningNode.active=!1,this.LockFishIndex=a.INVALID_DWORD,this.fireLightFish=null,this.stopRaigunFireSound()},t.prototype.getMountPoint=function(e){return this.functionFort.getMountPoint(e)},t.prototype.setEffect=function(e){this.effectMap.set(e.currWeight,e)},t.prototype.getEffect=function(e){return this.effectMap&&this.effectMap.has(e)?this.effectMap.get(e):null},t.prototype.addEffectWeight=function(e){this._currEffectWeight|=e,cc.error("addEffectWeight:",e)},t.prototype.subEffectWeight=function(e){this.existWeight(e)&&(this._currEffectWeight-=e),this.effectMap.has(e)&&this.effectMap.delete(e),this.deleteWeightMultiple(e),cc.error("subEffectWeight:",e)},t.prototype.existWeight=function(e){return(this._currEffectWeight&e)>0},t.prototype.setWeightMultiple=function(e,t){this._effectMultipleMap.set(e,t)},t.prototype.deleteWeightMultiple=function(e){this._effectMultipleMap.has(e)&&this._effectMultipleMap.delete(e)},t.prototype.destroyEffect=function(e){var t,i,o=this;if(void 0===e&&(e=!1),this.functionFort.destoryFunctionUI(e),e)try{for(var n=s(this.effectMap.entries()),r=n.next();!r.done;r=n.next()){var a=c(r.value,2),l=a[0],h=a[1];null!=h&&(h.ImmediatelyDestroy(),this.effectMap.delete(l))}}catch(d){t={error:d}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}else{var p=[u.FunctionWeight.DaPangXie,u.FunctionWeight.drill,u.FunctionWeight.superBomb,u.FunctionWeight.Small_Octopus];p.forEach(function(e){o.effectMap.has(e)&&o.effectMap.get(e).ImmediatelyDestroy()}),p=null}},t.prototype.getMultiple=function(e){return this.effectMultipleMap.has(e)?this.effectMultipleMap.get(e):(cc.error("\u4e0d\u5b58\u5728\u8fd9\u4e2a\u6743\u4f4d\u5bf9\u5e94\u7684\u500d\u6570\uff1a",u.FunctionWeight[e]),-1)},t.prototype.checkMultiple=function(e,t,i){if(void 0===t&&(t=1),void 0===i&&(i=0),this.effectMultipleMap.has(e)){if(i>=this.effectMultipleMap.get(e)-10*t)return!0}else cc.error("\u8fd9\u4e2a\u73a9\u5bb6\u6ca1\u6709\u8fd9\u4e2a\u7279\u6548\u500d\u7387\uff1a",e);return!1},r([y],t.prototype,"siteIndex",void 0),r([y({type:cc.Node,tooltip:"\u70ae\u7ba1"})],t.prototype,"gunbarrel",void 0),r([y({type:cc.Animation,tooltip:"\u5e95\u5ea7"})],t.prototype,"bottom",void 0),r([y(cc.Label)],t.prototype,"labelMultiple",void 0),r([y(cc.Node)],t.prototype,"btnAddMultple",void 0),r([y(cc.Node)],t.prototype,"btnSubMultple",void 0),r([y(cc.Node)],t.prototype,"drillLightEffect",void 0),r([y({type:cc.Node,tooltip:"\u5b50\u5f39\u53d1\u5c04\u70b9"})],t.prototype,"bulletPoint",void 0),r([y({type:cc.Node,tooltip:"\u94bb\u5934\u70ae\u53d1\u5c04\u5012\u8ba1\u65f6"})],t.prototype,"countdown",void 0),r([y({type:cc.Label,tooltip:"\u94bb\u5934\u70ae\u53d1\u5c04\u5012\u8ba1\u65f6\u6587\u5b57"})],t.prototype,"lblcountdown",void 0),r([y(h.default)],t.prototype,"functionFort",void 0),r([d,f("FISHMoHuanHY/GameFort_DEMO")],t)}(cc.Component);i.default=m,cc._RF.pop()},{"../FISHMoHuanHY_GameLogic":"FISHMoHuanHY_GameLogic","./FISHMoHuanHY_FunctionFort":"FISHMoHuanHY_FunctionFort","./FISHMoHuanHY_GameDefine":"FISHMoHuanHY_GameDefine","./effectFunction/FISHMoHuanHY_LaserEffect":"FISHMoHuanHY_LaserEffect"}],FISHMoHuanHY_GameLogic:[function(e,t,i){"use strict";cc._RF.push(t,"1791evspP8MGRxlAFqwdQMI","FISHMoHuanHY_GameLogic");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],o=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0}),i.SupportedFish=i.INVALID_DWORD=void 0;var s=e("./GameScripts/FISHMoHuanHY_GameDefine"),c=e("./GameScripts/FISHMoHuanHY_GoldRoutine"),a=e("./GameScripts/FISHMoHuanHY_ResourceMgr"),l=e("./GameScripts/FISHMoHuanHY_ShootSelectSetting");i.INVALID_DWORD=4294967295,i.SupportedFish=[101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130];var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ServerTick=0,t.game=null,t.ReplaceCatchAndroids=[],t.gameFort=[],t.functionLayer=null,t.touchNode=null,t.labelGold=null,t.lableWinScore=null,t.autoFireButton=null,t.autoFireSetBtn=null,t.mouseCollider=null,t.changePaoBtn=null,t.lblAccount=null,t.myInfo=null,t.lblVersion=null,t.signal=null,t.shootSelect=null,t.ruleDetails=null,t.mouseAni=null,t.scoreAndGoldLayer=null,t.fortGameIdMap=new Map,t.fortChairIdMap=new Map,t.UpSideDown=!1,t.mySeat=0,t.myChairID=0,t.myMultiple=1,t.mouseSpriteComp=null,t._currWinScore=0,t.isPress=!1,t.goldRoutineArray=[],t.goldRoutineRuningArray=[],t.chooseLock=!1,t.showpao1=null,t.showpao2=null,t}return n(t,e),t.prototype.onLoad=function(){this.scoreAndGoldLayer=this.node.getChildByName("scoreAndGoldLayer")},t.prototype.clearData=function(){},t.prototype.start=function(){this.mouseSpriteComp=this.mouseCollider.getComponent(cc.Sprite),this.touchNode.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.touchNode.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.touchNode.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.touchNode.on(cc.Node.EventType.MOUSE_MOVE,this.mouseMove,this),this.touchNode.on(cc.Node.EventType.MOUSE_LEAVE,this.mouseLeave,this),this.touchNode.on(cc.Node.EventType.MOUSE_ENTER,this.mouseEnter,this)},t.prototype.onEnable=function(){},t.prototype.onKeyUp=function(e){switch(e.keyCode){case cc.macro.KEY.a:cc.error("\u5c4f\u5e55\u5bbd\u5ea6\uff1a"+this.game.node.width)}},t.prototype.onDisable=function(){var e,t;console.log("GamePlay_DEMO.onDisable"),this.touchNode.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.touchNode.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.touchNode.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.touchNode.off(cc.Node.EventType.MOUSE_MOVE,this.mouseMove,this),this.touchNode.off(cc.Node.EventType.MOUSE_LEAVE,this.mouseLeave,this),this.touchNode.off(cc.Node.EventType.MOUSE_ENTER,this.mouseEnter,this);try{for(var i=r(this.gameFort),o=i.next();!o.done;o=i.next())o.value.reset()}catch(s){e={error:s}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}if(this.goldRoutineRuningArray.length>0)for(var n=0;n<this.goldRoutineRuningArray.length;n++)this.goldRoutineRuningArray[n].release()},t.prototype.getFortByGamId=function(e){return this.fortGameIdMap.has(e)?this.fortGameIdMap.get(e):null},t.prototype.netWorkDelay=function(){var e=this;this.signal.active=!0,setTimeout(function(){e.signal.active=!1},3e3)},t.prototype.mouseAnimation=function(){var e=cc.tween().by(.5,{angle:-20}),t=cc.tween().to(.5,{scale:1.1}),i=cc.tween().to(.5,{scale:1}),o=cc.tween().parallel(e,t),n=cc.tween().parallel(e,i),r=cc.tween().sequence(o,n);return cc.tween().repeatForever(r)},t.prototype.onUpScore=function(e){cc.error("onUpScore=",e,this.gameFort[this.mySeat].currScore),this.gameFort[this.mySeat].currScore+=e,this.labelGold.string=this.game.iGameBase.getNum(this.gameFort[this.mySeat].currScore,!0)},t.prototype.onGameScene=function(e){this.initGameScene(),this.game.gameScene.setCurrSceneBg(e,!0),this.game.iGameBase.setExectUpdate(!0)},t.prototype.setGameViewUpSideDown=function(e){var t,i;console.log("GamePlay_DEMO.setGameViewUpSideDown",this.UpSideDown),this.UpSideDown=e,this.game.fishMgr.UpSideDown=this.UpSideDown;try{for(var o=r(this.gameFort),n=o.next();!n.done;n=o.next())n.value.UpSideDown=e}catch(s){t={error:s}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}},t.prototype.setPropertyUIPos=function(){var e=cc.find("layout",this.myInfo),t=e.getChildByName("Property"),i=e.getChildByName("Winscore");if(0==this.mySeat){this.myInfo.scaleX=1;for(var o=t.childrenCount,n=0;n<o;n++)t.children[n].scaleX=1;for(o=i.childrenCount,n=0;n<o;n++)i.children[n].scaleX=1;this.lblAccount.node.anchorX=0,this.lblAccount.node.scaleX=1,this.lblVersion.node.anchorX=1,this.lblVersion.node.scaleX=1}else if(1==this.mySeat){for(this.myInfo.scaleX=-1,o=t.childrenCount,n=0;n<o;n++)t.children[n].scaleX=-1;for(o=i.childrenCount,n=0;n<o;n++)i.children[n].scaleX=-1;this.lblAccount.node.anchorX=1,this.lblAccount.node.scaleX=-1,this.lblVersion.node.anchorX=0,this.lblVersion.node.scaleX=-1}this.lblAccount.string=this.game.iGameBase.GlobalUserItem_account(),this.lblVersion.string="v"+this.game.iGameBase.GetClientVersion(),this.lblVersion.getComponent(cc.Widget).updateAlignment(),t.active=!0},t.prototype.initGameScene=function(){this.game.iGameBase.CommonUI_RootNode(this.node),this.game.fishMgr.clearFish(),this.game.bulletMgr.clearBullets(),this.myMultiple=1,this.chooseLock=!1;for(var e=this.game.iGameBase.UserManager_getTableUserItems(),t=0;t<4;t++){var i=this.switchChairToSeat(t),o=this.gameFort[i];this.fortChairIdMap.set(t,this.gameFort[i]),e[t]?(o.init(e[t]),this.fortGameIdMap.set(e[t].getGameID(),o),e[t].getUserID()==this.game.iGameBase.getUserID()&&(this.mySeat=i,this.myChairID=t,this.setPropertyUIPos())):o.node.opacity=0}},t.prototype.userLeave=function(e){var t=this.fortChairIdMap.get(e);t?t.reset():console.error("\u8fd9\u4e2a\u73a9\u5bb6\u4e0d\u5b58\u5728\uff1a"+e)},t.prototype.myLeave=function(){this.gameFort.forEach(function(e){e.reset(),e.destroyEffect(!0)})},t.prototype.userEnter=function(e,t){var i=this.fortChairIdMap.get(e);i.init(t),this.fortGameIdMap.set(t.getGameID(),i);var o=this.switchChairToSeat(e);t.getUserID()==this.game.iGameBase.getUserID()?(this.mySeat=o,this.myChairID=e,cc.log("\u8fdb\u5165\u7684\u662f\u81ea\u5df1")):cc.log("\u8fdb\u5165\u7684\u662f\u5176\u4ed6\u73a9\u5bb6")},t.prototype.switchChairToSeat=function(e){var t=e;if(this.UpSideDown)switch(e){case 0:t=3;break;case 1:t=2;break;case 2:t=1;break;case 3:t=0}return t},t.prototype.mouseEnter=function(){if(cc.game.canvas.style.cursor="none",this.mouseSpriteComp.node.opacity=255,this.mouseAni)this.mouseAni.start();else{var e=this.mouseAnimation();this.mouseAni=cc.tween(this.mouseSpriteComp.node).then(e).start()}},t.prototype.mouseLeave=function(){this.mouseAni.stop(),this.mouseSpriteComp.node.opacity=0,cc.game.canvas.style.cursor="url(/web-mobile/mouseIcon.png),auto"},t.prototype.mouseMove=function(e){var t=e.getLocation(),i=cc.v2();this.node.convertToNodeSpaceAR(t,i),this.mouseSpriteComp.node.setPosition(i);var o=this.gameFort[this.mySeat];o.isWaitfire&&o.isCanFire&&this.isPress&&o.aimAt(t,!0)},t.prototype.onTouchStart=function(e){var t=this.gameFort[this.mySeat],i=e.getLocation(),o=cc.v2();if(this.node.convertToNodeSpaceAR(i,o),this.mouseSpriteComp.node.setPosition(o),(t=this.gameFort[this.mySeat]).isWaitfire)return this.isPress=!0,void console.log("isWaitfire onblock");if(t.isCanFire)if(t.checkScoreCanFire(!0))if(2==t.currentPaoIndex){var n=this.game._quadCollision.check(this.game.fishMgr.getGameFish,this.mouseCollider),r=n.length;if(r>0){for(var s=n[0],c=1;c<r;c++){var a=n[c];a.node.parent==s.node.parent?a.node.getSiblingIndex()>s.node.getSiblingIndex()&&(s=a):a.node.parent.getSiblingIndex()>s.node.parent.getSiblingIndex()&&(s=a)}t.setNormalAutoFire();var l=s.fishInfo.dwFishIndex;this.onClickFish(l,i)}}else t.AutoFire?t.aimAt(i):(t.aimAt(i).fire(),t.setNormalAutoFire());else console.log("checkScoreCanFire onblock");else console.log("isCanFire onblock")},t.prototype.onTouchMove=function(e){var t=this.gameFort[this.mySeat];if(t.isWaitfire&&this.isPress){var i=e.getLocation();t.aimAt(i,!0)}t.isPress&&1==t.currentPaoIndex&&(i=e.getLocation(),t.aimAt(i))},t.prototype.onTouchEnd=function(e){this.isPress=!1;var t=this.gameFort[this.mySeat];if(t.isPress=!1,t.isWaitfire&&t.isCanFire){var i=e.getLocation();t.fireFunctionGun(),t.aimAt(i).fire()}},t.prototype.onClickFish=function(e){var t=this.gameFort[this.mySeat];t.isCanFire&&(t.AutoFire||t.isPress)&&this.game.iGameBase.sendLockFish(e)},t.prototype.autoScendLockFish=function(e){var t=this;void 0===e&&(e=!1);var o=this.gameFort[this.mySeat];if(2==o.currentPaoIndex&&o.LockFishIndex==i.INVALID_DWORD){if(e)return void this.game.iGameBase.sendLockFish(i.INVALID_DWORD);if(o.AutoFire){if(!this.shootSelect)return;var n=this.shootSelect.getCurrentSelectFishID(),r=i.INVALID_DWORD;if(n.length>0){for(var c=0;c<n.length;c++){var a=this.game.fishMgr.getFishByKindID(n[c]);if(a.length>0&&(r=a[this.game.iGameBase.utils_random(0,a.length-1)].fishInfo.dwFishIndex),r!=i.INVALID_DWORD)break}r!=i.INVALID_DWORD?this.game.iGameBase.sendLockFish(r):this.scheduleOnce(function(){t.autoScendLockFish()},s.fireTime)}}}},t.prototype.onPlayerInfo=function(e,t,i,o,n,s,c){var a,l,h=this.switchChairToSeat(t),u=this.gameFort[h];if(this.fortGameIdMap.set(e,u),u){var p=this.game.iGameBase.UserManager_getTableUserItems(),d=null;try{for(var f=r(p),y=f.next();!y.done;y=f.next()){var m=y.value;if(m){var g=m.getGameID();if(g&&g==e){d=m;break}}}}catch(v){a={error:v}}finally{try{y&&!y.done&&(l=f.return)&&l.call(f)}finally{if(a)throw a.error}}u.init(d),u.initInfo(i,o,n),u.setPaoType(n),t==this.myChairID?(this.myMultiple=i,this.mySeat=h,this.myChairID=t,this.labelGold.string=this.game.iGameBase.getNum(o,!0),this.setWin(s),2==n?(this.showpao1.active=!0,this.showpao2.active=!1,this.autoFireSetBtn.active=!0):(this.showpao1.active=!1,this.showpao2.active=!0,this.autoFireSetBtn.active=!1)):u.setLockFish(c)}},t.prototype.onExchangeMultiple=function(e,t,i){var o=this.fortGameIdMap.get(t);o.labelMultiple.string=this.game.iGameBase.getNum(i,!0),o.currMultiple=i,t==e&&(this.myMultiple=i)},t.prototype.onUpdate=function(e){var t,i;if(this.gameFort[this.mySeat].isActive)try{for(var o=r(this.gameFort),n=o.next();!n.done;n=o.next()){var s=n.value;s.isActive&&s.autoFire(e)}}catch(a){t={error:a}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}if(this.goldRoutineRuningArray.length>0)for(var c=0;c<this.goldRoutineRuningArray.length;c++)this.goldRoutineRuningArray[c].onUpdate(e)},t.prototype.onUserFire=function(e,t,i,o,n,r,c,a,l){var h=this.fortGameIdMap.get(t);if(h){var u=i;if(u>s.functionType.normal){if(h.hideCountdown(),u==s.functionType.laser)h.onFire(o),h.fireLaser(n,t);else if(u==s.functionType.drill){var p=h.onFire(o),d=h.getWorldAngle();h.hideDrillGun(),this.game.bulletMgr.fire(h.chairId,t,n,p,d,h.LockFishIndex,c,a,u)}else if(u==s.functionType.JinLuan){var f=cc.view.getVisibleSize().height,y=cc.view.getVisibleSize().width;(g=h.posJinLuan.x)<0&&(g=0),g>y&&(g=y),(v=h.posJinLuan.y)<0&&(v=0),v>f&&(v=f),this.game.bulletMgr.fire(h.chairId,t,n,cc.v2(g,v),h.angleJinLuan-180,h.LockFishIndex,c,a,u)}else if(u==s.functionType.Small_Octopus){var m=this.game.bulletMgr.getbulletJinLuan();h.BulletJinLuan=m;var g=h.BulletJinLuan.node.getPosition(cc.v2()).x,v=h.BulletJinLuan.node.getPosition(cc.v2()).y;f=cc.view.getVisibleSize().height,y=cc.view.getVisibleSize().width,g<0&&(g=0,cc.error("x minseted")),g>y&&(g=y,cc.error("x maxseted")),v<0&&(v=0,cc.error("y minseted")),v>f&&(v=f,cc.error("y maxseted")),this.game.bulletMgr.fire(h.chairId,t,n,cc.v2(g,v),h.BulletJinLuan.node.angle+o,h.LockFishIndex,c,a,u)}h.isCanFire=!1,h.isWaitfire=!1}else 2==h.currentPaoIndex?h.playRaigunFire(l,n):(p=h.onFire(o),d=h.getWorldAngle(),this.game.bulletMgr.fire(h.chairId,t,n,p,d,h.LockFishIndex,c,a,u));this.game.iGameBase.isNoWin()?h.currScore-=r:h.currScore=r}else cc.error("\u627e\u4e0d\u5230\u5f00\u706b\u7684\u73a9\u5bb6");if(t==e&&(this.labelGold.string=this.game.iGameBase.getNum(this.gameFort[this.mySeat].currScore,!0),this.gameFort[this.mySeat].checkCanAutoFire())){if(this.gameFort[this.mySeat].AutoFire){var S=this.autoFireButton.cancelAutoFire();this.gameFort[this.mySeat].AutoFire=S}this.game.iGameBase.PopMessage_ShowMessage(1)}},t.prototype.onLockFish=function(e,t){var i=this.fortGameIdMap.get(e);i&&i.isActive&&i.setLockFish(t)},t.prototype.playGoldAnimation=function(e,t,i,o){if(e&&!(e<0)){var n=null;if(this.goldRoutineArray.length>0)for(var r=0;r<this.goldRoutineArray.length;r++)if(this.goldRoutineArray[r].getStateIsIdle){n=this.goldRoutineArray.splice(r,1)[0];break}null==n&&(n=new c.default(this.scoreAndGoldLayer,this,this.goldPlayComplete)).setGame(this.game),n.init(i,t,e,o),this.goldRoutineRuningArray.push(n)}},t.prototype.goldPlayComplete=function(e){var t=this.goldRoutineRuningArray.indexOf(e);-1!=t&&this.goldRoutineRuningArray.splice(t,1),this.goldRoutineArray.push(e)},t.prototype.showFunctionTotalScore=function(e,t,i){this.fortGameIdMap.get(e).showFunctionTotalScore(t,i)},t.prototype.showFunctionLast=function(e,t){var i=this.fortGameIdMap.get(e),o=s.getWeightByType(t),n=i.getEffect(o);n&&n.lastStep()},t.prototype.getCatchFishLen=function(e){var t=0;return e.forEach(function(e){if(!(e<4294967295))return t;t++}),t},t.prototype.nextExect=function(e,t,i,o){var n=s.getWeightByType(e),r=t.getEffect(n);r?e==s.functionType.eyu||e==s.functionType.DaPangXie||e==s.functionType.Small_Octopus?r.isNext&&r&&r.nextStep(i):r.isNext&&(t.checkMultiple(n,o,i)?(r&&r.beforDestroy(i),t.deleteWeightMultiple(n)):r&&r.nextStep(i)):cc.error("\u8be5\u6743\u4f4d\u5bf9\u5e94\u7684\u7279\u6548\u4e0d\u5b58\u5728\uff1a",s.FunctionWeight[n])},t.prototype.onCatchMushFish=function(e,t,i,o,n,r){var c=this,a=this.fortGameIdMap.get(e),l=this.getCatchFishLen(t),h=i;if(0!=o){var u=s.getWeightByType(o);if(!a.existWeight(u))return void cc.error("\u73a9\u5bb6\u6ca1\u6709\u8fd9\u4e2a\u7279\u6548\uff1a",o);if(a.showFunctionCatchScroe(u,h),o==s.functionType.lighting){var p=a.getEffect(u);if(p){for(var d=0;d<l;d++)if(F=this.game.fishMgr.getFishByIndex(t[d])){var f;f=a.IsOnTop?this.game.iGameBase.utils_random(a.node.position.y-150,a.node.position.y-200):this.game.iGameBase.utils_random(a.node.position.y+150,a.node.position.y+200);var y=cc.v2(this.game.iGameBase.utils_random(a.node.position.x-100,a.node.position.x+100),f);y=this.node.convertToWorldSpaceAR(y);var m=n[d];F.enterDie();var g={fish:F,score:m,cb:v=this.game.iGameBase.utils_gen_handler(this.playGoldAnimation,this,m,a),movePos:y};p.addFishInfo(g)}else cc.error("catchFish not found",t[d]);var v=this.game.iGameBase.utils_gen_handler(this.showFunctionTotalScore,this,e,h,u);p.playAnim(v)}}else if(o==s.functionType.vortex){for(cc.error("\u88ab\u540c\u7c7b\u9c7c\u738b\u6253\u6b7b\u7684\u9c7c"),y=cc.v2(a.node.position.x,a.node.position.y+200),y=this.node.convertToWorldSpaceAR(y),d=0;d<l;d++){var S=t[d];if(F=this.game.fishMgr.getFishByIndex(S)){m=n[d];var _=this.game.iGameBase.utils_gen_handler(this.playGoldAnimation,this,m,a);F.playVortex(y,_)}else cc.error("catchFish not found",t[d])}this.scheduleOnce(function(){c.showFunctionTotalScore(e,h,u),a.subEffectWeight(u)},1.5)}else{for(d=0;d<l;d++){var F;if(S=t[d],F=this.game.fishMgr.getFishByIndex(S)){if(m=n[d],_=this.game.iGameBase.utils_gen_handler(this.playGoldAnimation,this,m,a),F.fishKind.id>113&&F.fishKind.id<120){var I=o==s.functionType.normal;this.functionLayer.playGoldBombEffect(F,a,e,m,I)}this.functionLayer.playOtherFishDieEffect(F,a,_,!1)||F.playDieAni(a,_)}else cc.error("catchFish not found",t[d])}this.nextExect(o,a,h,r)}}},t.prototype.setWeightCorrelation=function(e,t,i){var o=s.getEffectWeightFishId(t);-1!=o&&(e.setWeightMultiple(o,i),e.addEffectWeight(o))},t.prototype.onCatchFish=function(e,t,i,o,n,r,c,a,l){void 0===l&&(l=!0);var h=this.fortGameIdMap.get(t),u=i,p=o,d=null;if(0!=n){var f=s.getWeightByType(n);if(!h.existWeight(f))return void cc.error("\u73a9\u5bb6\u6ca1\u6709\u8fd9\u4e2a\u529f\u80fd\uff1a",n);h.showFunctionCatchScroe(f,u)}var y=this.game.fishMgr.getFishByIndex(r);if(y){var m=!1,g=-1,v=null,S=y.fishInfo.nFishKindID;if(this.setWeightCorrelation(h,S,p),128==S)return this.game.fishMgr.showMask(!0,!0),m=n==s.functionType.normal,v=this.game.iGameBase.utils_gen_handler(this.playGoldAnimation,this,p,h),void this.functionLayer.playOtherFishDieEffect(y,h,v,m);if(S>113&&S<120)m=n==s.functionType.normal,this.functionLayer.playGoldBombEffect(y,h,t,p,!1),v=this.game.iGameBase.utils_gen_handler(this.playGoldAnimation,this,p,h);else if(121==S){y.node.opacity=0,h.currFunctionType=s.functionType.JinLuan,t==e&&(g=h.fire(s.functionType.JinLuan));var _=y.node.convertToWorldSpaceAR(cc.v2());h.posJinLuan=_,h.angleJinLuan=y.node.angle;var F=y.getCurrWorldPos(),I=this.node.convertToNodeSpaceAR(F);h.showFunctionUI(s.functionType.JinLuan,_),h.isCanFire=!1}else if(122==S){this.game.iAudioPlayer.play_sound("zuanTouCrash"),h.isCanFire=!1,h.currFunctionType=s.functionType.drill;var b=y.node.convertToWorldSpaceAR(cc.v2()),H=h.drillGun.node.parent.parent.convertToNodeSpaceAR(b);h.drillGun.node.setPosition(H),h.showDrillGun()}else if(123==S){t==e&&(g=h.fire(s.functionType.superBomb));var M=y.getCurrWorldPos();I=this.node.convertToNodeSpaceAR(M),h.showFunctionUI(s.functionType.superBomb,M),this.functionLayer.playSuperBombEffect(I,g,h),h.isCanFire=!1}else if(124==S){this.game.iAudioPlayer.play_sound("dianCiPaoHuoDe"),h.isCanFire=!1,h.currFunctionType=s.functionType.laser;var C=y.node.convertToWorldSpaceAR(cc.v2());H=h.laserGun.node.parent.parent.convertToNodeSpaceAR(C),h.laserGun.node.setPosition(H),h.showLaserGun(this.game.iGameBase.utils_gen_handler(this.functionLayer.playLaserEffect,this.functionLayer))}else{if(125==S){cc.error("\u6253\u6b7b\u540c\u7c7b\u9c7c\u738b:",h.IsOnTop),h.isCanFire=!1,d=cc.v2(h.node.position.x,h.IsOnTop?h.node.position.y-200:h.node.position.y+200),h.showFunctionUI(s.functionType.vortex),this.functionLayer.playVortex(d),d=cc.v2(this.game.iGameBase.utils_random(d.x-100,d.x+100),this.game.iGameBase.utils_random(d.y-100,d.y+100)),d=this.node.convertToWorldSpaceAR(d);var P=y.getCurrWorldPos();return P=this.functionLayer.node.convertToNodeSpaceAR(P),this.functionLayer.playGoldEffect(P),v=this.game.iGameBase.utils_gen_handler(this.playGoldAnimation,this,p,h),void y.playVortex(d,v,!0)}if(126==S){cc.error("\u6253\u6b7b\u95ea\u7535\u9c7c\uff1a",h.IsOnTop),h.isCanFire=!1,h.showFunctionUI(s.functionType.lighting);var w;w=h.IsOnTop?this.game.iGameBase.utils_random(h.node.position.y-150,h.node.position.y-200):this.game.iGameBase.utils_random(h.node.position.y+150,h.node.position.y+200),d=cc.v2(this.game.iGameBase.utils_random(h.node.position.x-100,h.node.position.x+100),w),d=this.node.convertToWorldSpaceAR(d);var A={score:p,cb:v=this.game.iGameBase.utils_gen_handler(this.playGoldAnimation,this,p,h),movePos:d,fish:y};return this.functionLayer.playLightingEffect(h,A),y.enterDie(),void y.playShandianDie(d)}if(127==S)cc.error("\u6253\u6b7b\u9c7c\uff1a\u718a\u732b"),h.isCanFire=!1,h.showFunctionUI(s.functionType.panda),this.functionLayer.playPandaEffect(h);else{if(129==S){this.game.iAudioPlayer.play_sound("Boss2Die"),h.isCanFire=!1;var G=p/c;G*=.01;var T=!0;t==e&&T&&(g=h.fire(s.functionType.eyu)),y.enterDie();var B=this.game.iGameBase.utils_gen_handler(this.functionLayer.playWhalekingEffect,this.functionLayer,y,h,g,T,p,G);return void y.shake(B)}if(120==S)return h.isCanFire=!1,G=p/c,G*=.01,y.enterDie(),t==e&&(g=h.fire(s.functionType.thunderDragon)),B=this.game.iGameBase.utils_gen_handler(this.functionLayer.playDragonEffect,this.functionLayer,y,g,G,h),void y.shake(B);if(130==S)return this.game.fishMgr.hideCrab(),h.isCanFire=!1,G=p/c,G*=.01,T=!0,t==e&&T&&(g=h.fire(s.functionType.DaPangXie)),y.enterDie(),B=this.game.iGameBase.utils_gen_handler(this.functionLayer.playCrabEffect,this.functionLayer,y,h,g,T,p,G,v),void y.shake(B);if(999==S);else if(m=n==s.functionType.normal,v=this.game.iGameBase.utils_gen_handler(this.playGoldAnimation,this,p,h),this.functionLayer.playOtherFishDieEffect(y,h,v,m))return}}y.playDieAni(h,v,m)}else cc.error("catchFish not found ID:",S)},t.prototype.onSwitchCannon=function(e,t,i){var o,n;try{for(var s=r(this.gameFort),c=s.next();!c.done;c=s.next()){var a=c.value;if(a.isActive&&a.chairId==t){a.gameId==e&&(2==i?(this.showpao1.active=!0,this.showpao2.active=!1,this.autoFireSetBtn.active=!0):(this.showpao1.active=!1,this.showpao2.active=!0,this.autoFireSetBtn.active=!1)),a.changePaoTypeTween(i);break}}}catch(l){o={error:l}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}},t.prototype.changeScene=function(e){var t=this;this.game.fishMgr.changeScene(),this.scheduleOnce(function(){t.game.gameScene.changeScene(e)},1.5)},t.prototype.onDrillBomb=function(e,t){var i=this;this.game.bulletMgr.bulletDrillBomb(e,t),setTimeout(function(){i.fortGameIdMap.get(t).subEffectWeight(s.FunctionWeight.drill)},5e3)},t.prototype.onLastTimeBullet=function(e,t){cc.log("\u6700\u540e\u4e00\u6b21"),this.showFunctionLast(e,t)},t.prototype.onGongNengBulletOver=function(e,t,i){var o,n=t,r=s.getWeightByType(i);cc.error("\u529f\u80fd\u6d88\u5931 weight: ",r),r==s.FunctionWeight.JinLuan&&(this.game.bulletMgr.getbulletJinLuan().playBomb(),(o=this.fortGameIdMap.get(e).getEffect(r))&&o.SetTotalScore(n)),r==s.FunctionWeight.xingxing||r==s.FunctionWeight.DaPangXie||r==s.FunctionWeight.eyu?(o=this.fortGameIdMap.get(e).getEffect(r))&&o.SetTotalScore(n):r>0&&this.showFunctionTotalScore(e,n,r)},t.prototype.onChangeBackGround=function(e,t){t!=e&&this.fortGameIdMap.get(t).destroyEffect()},t.prototype.setProperty=function(e,t){this.game.iGameBase.isNoWin()||(this._currWinScore-=e,this.lableWinScore.string=this.game.iGameBase.getNum(this._currWinScore,!0),this.labelGold.string=this.game.iGameBase.getNum(t,!0),this.gameFort[this.mySeat].currScore=t)},t.prototype.setWinScore=function(e,t){e==this.game.gameId&&(this.game.iGameBase.isNoWin()?(this.gameFort[this.mySeat].currScore+=t,this.labelGold.string=this.game.iGameBase.getNum(this.gameFort[this.mySeat].currScore,!0)):(this._currWinScore+=t,this.lableWinScore.string=this.game.iGameBase.getNum(this._currWinScore,!0)))},t.prototype.onBtnAddMultiple=function(){this.game.iGameBase.sendPlayerExchangeBullet(!0),this.game.iAudioPlayer.play_sound("huanPao")},t.prototype.onBtnSubMultiple=function(){this.game.iGameBase.sendPlayerExchangeBullet(!1),this.game.iAudioPlayer.play_sound("huanPao")},t.prototype.onBtnLockFish=function(){this.chooseLock=!this.chooseLock,this.chooseLock||this.game.iGameBase.sendLockFish(i.INVALID_DWORD)},t.prototype.onSkillBtnClick=function(e,t){cc.log("\u70b9\u51fb\u6280\u80fd\u6309\u94ae\uff1a"+t)},t.prototype.onChangePaoBtnClick=function(){if(this.gameFort[this.mySeat].isCanFire&&!this.gameFort[this.mySeat].isWaitfire){var e=this.gameFort[this.mySeat];e.isCanFire=!1;var t=1==e.currentPaoIndex?2:1;this.game.iGameBase.sendSwitchCannon(this.myChairID,t)}},t.prototype.onBtnAutoFire=function(){if(this.gameFort[this.mySeat].checkScoreCanFire(!0)){var e=this.autoFireButton.changeAutoFire();this.gameFort[this.mySeat].AutoFire=e,2==this.gameFort[this.mySeat].currentPaoIndex&&e?this.autoScendLockFish():e||2!=this.gameFort[this.mySeat].currentPaoIndex||(this.game.iGameBase.sendLockFish(i.INVALID_DWORD),this.gameFort[this.mySeat].setLockFish(i.INVALID_DWORD))}},t.prototype.setAutoFire=function(){if(this.gameFort[this.mySeat].checkScoreCanFire(!0)){var e=this.autoFireButton.setAutoFire();this.gameFort[this.mySeat].AutoFire=e,2==this.gameFort[this.mySeat].currentPaoIndex&&e&&this.autoScendLockFish()}},t.prototype.cancelAutoFire=function(){var e=this.autoFireButton.cancelAutoFire();this.gameFort[this.mySeat].AutoFire=e,2==this.gameFort[this.mySeat].currentPaoIndex&&(this.game.iGameBase.sendLockFish(i.INVALID_DWORD),this.gameFort[this.mySeat].setLockFish(i.INVALID_DWORD))},t.prototype.onAutoFireSetBtnClick=function(){var e=this;cc.error("onAutoFireSetBtnClick"),this.shootSelect?(cc.find("bg/OKBtn",this.shootSelect.node).active=!0,cc.find("bg/ClearBtn",this.shootSelect.node).active=!0,this.shootSelect.node.setSiblingIndex(this.node.childrenCount-1),this.shootSelect.node.active=!0):this.game.resourMgr.loadOther("ShootSelectPanel",a.ResourceType.other,cc.Prefab,function(t){var i=cc.instantiate(t);e.shootSelect=i.addComponent(l.default),e.shootSelect.contentNode=cc.find("bg/New ScrollView/view/content",i),e.shootSelect.prefab=cc.find("Item",e.shootSelect.contentNode);var o=cc.find("bg/closebtn",i);e.shootSelect.SetBtnEvent(o.getComponent(cc.Button),!0,!0);var n=cc.find("bg/OKBtn",i);n.active=!0,e.shootSelect.SetBtnEvent(n.getComponent(cc.Button),!0,!0);var r=cc.find("bg/ClearBtn",i);r.active=!0,e.shootSelect.SetBtnEvent(r.getComponent(cc.Button),!0,!0),e.shootSelect.setGame(e.game),e.shootSelect.onOk=e.setAutoFire.bind(e),e.node.addChild(i)})},t.prototype.onConverPropertyBtnClick=function(){this.game.iGameBase.isNoWin()||this.game.iGameBase.ShowDona()},t.prototype.onInfoBtnClick=function(){var e=this;cc.error("onInfoBtnClick"),this.shootSelect?(cc.find("bg/OKBtn",this.shootSelect.node).active=!1,cc.find("bg/ClearBtn",this.shootSelect.node).active=!1,this.shootSelect.node.setSiblingIndex(this.node.childrenCount-1),this.shootSelect.node.active=!0):this.game.resourMgr.loadOther("ShootSelectPanel",a.ResourceType.other,cc.Prefab,function(t){var i=cc.instantiate(t);e.shootSelect=i.addComponent(l.default),e.shootSelect.contentNode=cc.find("bg/New ScrollView/view/content",i),e.shootSelect.prefab=cc.find("Item",e.shootSelect.contentNode);var o=cc.find("bg/closebtn",i);e.shootSelect.SetBtnEvent(o.getComponent(cc.Button),!0,!0),cc.find("bg/OKBtn",i).active=!1,cc.find("bg/ClearBtn",i).active=!1,e.shootSelect.setGame(e.game),e.node.addChild(i)})},t.prototype.showWin=function(e,t){this.game.iGameBase.isNoWin()?(t.active=!1,e.active=!1):(t.active=!0,e.active=!0)},t.prototype.setWin=function(e){this.game.iGameBase.isNoWin()||(this.lableWinScore.string=this.game.iGameBase.getNum(e,!0),this._currWinScore=e)},t.prototype.bulletSync=function(e,t,i,o){this.game.bulletMgr.bulletSync(e,t,i,o)},t.prototype.onFishInfo=function(e){this.game.fishMgr&&this.game.fishMgr.onFishInfo(e)},t.prototype.onIngot=function(){},t.prototype.onIngotEnd=function(){},t.prototype.onCatchPanda=function(e){cc.error("\u718a\u732b\u5206\u6570",e.wChairID,e.cbIndex,e.fScore,e.iFirePower);var t=this.fortChairIdMap.get(e.wChairID);if(t.existWeight(s.FunctionWeight.panda)){for(var i=t.getEffect(s.FunctionWeight.panda),o=[],n=0;n<3;n++)o[n]=e.iPandaMul[n]*e.iFirePower;i.playWinScore(e.cbIndex,e.fScore,o)}else cc.error("\u73a9\u5bb6\u6ca1\u6709\u718a\u732b\u8fd9\u4e2a\u7279\u6548\uff1a")},t.prototype.onUpdateTreasureBox=function(e,t){cc.error("\u66f4\u65b0\u5b9d\u7bb1\u5206\u6570:",e,t);var i=this.fortChairIdMap.get(e);if(i){var o=t;i.showFunctionCatchScroe(s.FunctionWeight.DaPangXie,o)}else cc.error("\u4e0d\u5b58\u5728\u8fd9\u4e2a\u73a9\u5bb6\uff1a",e)},t.prototype.onTreasureBoxEnd=function(){},t.prototype.fullScreenSetcontentSize=function(){this.game.iGameBase&&!this.game.iGameBase.getExectUpdate()||this.game.gameScene.init()},t.prototype.getWinScore=function(){return this._currWinScore},t}(cc.Component);i.default=h,cc._RF.pop()},{"./GameScripts/FISHMoHuanHY_GameDefine":"FISHMoHuanHY_GameDefine","./GameScripts/FISHMoHuanHY_GoldRoutine":"FISHMoHuanHY_GoldRoutine","./GameScripts/FISHMoHuanHY_ResourceMgr":"FISHMoHuanHY_ResourceMgr","./GameScripts/FISHMoHuanHY_ShootSelectSetting":"FISHMoHuanHY_ShootSelectSetting"}],FISHMoHuanHY_GameRewardTip:[function(e,t,i){"use strict";cc._RF.push(t,"e393emr3mv8M87HY9E8Ok8O","FISHMoHuanHY_GameRewardTip");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.menu,l=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rewardTip=null,t.showTipBtn=null,t.hideTipBtn=null,t.fishCountLabel=null,t.timeEndLabel=null,t.FISHAype=null,t.rewardType=null,t.FISHAypeFrames=[],t.rewardTypeFrame=[],t.rewardInfoPanel=null,t.rewardInfoList=[],t.currentPage=0,t}return n(t,e),t.prototype.onLoad=function(){this.currentPage=0,this.rewardInfoList.push({FISHAype:0,rewardType:0,rewardTip:"CATCH ANY FISH",maxFishCount:20,currentFishCount:10,endTime:"20:12:20"}),this.rewardInfoList.push({FISHAype:1,rewardType:1,rewardTip:"CATCH ANY FISH",maxFishCount:20,currentFishCount:15,endTime:"21:12:20"})},t.prototype.start=function(){},t.prototype.onShowRewardTipBtnClick=function(){this.rewardTip.active=!0,this.showTipBtn.active=!1,this.hideTipBtn.active=!0},t.prototype.onHideRewardTipBtnClick=function(){this.rewardTip.active=!1,this.showTipBtn.active=!0,this.hideTipBtn.active=!1},t.prototype.showCurrentReward=function(){if(this.currentPage>=0&&this.currentPage<this.rewardInfoList.length){var e=this.rewardInfoList[this.currentPage];this.FISHAype.spriteFrame=this.FISHAypeFrames[e.FISHAype],this.rewardType.spriteFrame=this.rewardTypeFrame[e.rewardType],this.fishCountLabel.string=e.currentFishCount+" / "+e.maxFishCount}},t.prototype.onLeftPageBtnClick=function(){cc.log("\u5956\u52b1\u63d0\u793a\u5de6\u7ffb\u9875\u7bad\u5934"),this.currentPage>0?this.currentPage-=1:this.currentPage=this.rewardInfoList.length-1,this.showCurrentReward()},t.prototype.onRightPageBtnClick=function(){cc.log("\u5956\u52b1\u63d0\u793a\u53f3\u7ffb\u9875\u7bad\u5934"),this.currentPage<this.rewardInfoList.length-1?this.currentPage+=1:this.currentPage=0,this.showCurrentReward()},t.prototype.onShowTipInfo=function(){cc.log("\u663e\u793a\u8bf4\u660e\u754c\u9762"),this.rewardInfoPanel.active=!0},t.prototype.onHideTipInfo=function(){this.rewardInfoPanel.active=!1},r([l(cc.Node)],t.prototype,"rewardTip",void 0),r([l(cc.Node)],t.prototype,"showTipBtn",void 0),r([l(cc.Node)],t.prototype,"hideTipBtn",void 0),r([l(cc.Label)],t.prototype,"fishCountLabel",void 0),r([l(cc.Label)],t.prototype,"timeEndLabel",void 0),r([l(cc.Sprite)],t.prototype,"FISHAype",void 0),r([l(cc.Sprite)],t.prototype,"rewardType",void 0),r([l([cc.SpriteFrame])],t.prototype,"FISHAypeFrames",void 0),r([l([cc.SpriteFrame])],t.prototype,"rewardTypeFrame",void 0),r([l(cc.Node)],t.prototype,"rewardInfoPanel",void 0),r([c,a("FISHMoHuanHY/GameRewardTip")],t)}(cc.Component);i.default=h,cc._RF.pop()},{}],FISHMoHuanHY_GameSceneMgr:[function(e,t,i){"use strict";cc._RF.push(t,"8ef63Y9zIywf4IOoVL4QYmx","FISHMoHuanHY_GameSceneMgr");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s,c=e("../FISHMoHuanHY_Game"),a=e("./FISHMoHuanHY_GameDefine"),l=cc._decorator,h=l.ccclass,u=l.menu,p=l.property;(function(e){e[e.normal=0]="normal",e[e.cow=1]="cow",e[e.greenPeople=2]="greenPeople"})(s||(s={}));var d={1:{isStatic:!0,animType:s.greenPeople,musicVolume:1},2:{isStatic:!0,animType:s.greenPeople,musicVolume:.5},3:{isStatic:!0,animType:s.cow,musicVolume:.6},4:{isStatic:!0,animType:s.greenPeople,musicVolume:.6},5:{isStatic:!0,animType:s.cow,musicVolume:1},6:{isStatic:!0,animType:s.greenPeople,musicVolume:1},7:{isStatic:!0,animType:s.cow,musicVolume:1}},f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameBgNode=null,t.gameBgArray=[],t.gameBgMask=null,t.changeBgArray=[],t.changeSceneBgNode=null,t.changeSceneAdrom=null,t.ParticleParent=null,t.ParticleGroup0=null,t.ParticleGroup1=null,t.ParticleArray=[],t.ParticleArray1=[],t.lava=null,t.iron_plane=null,t.cowShakeNode=null,t._currSceneId=0,t.currBg=null,t.bgWidth=0,t.moveTween=null,t.moveSceneSpeed=.25,t.changeScreenSpeed=.1,t.isChangeSceneing=!1,t.changeComplete=!0,t.stopShakeHandle=null,t.ParticleIndex=0,t.ParticleIndexArray=[[4,3,5],[0,1,6],[2,7,0],[1,7,4]],t.moveCount=1,t.shakeTween=null,t.lastPos=null,t}return n(t,e),Object.defineProperty(t.prototype,"currSceneI",{get:function(){return this._currSceneId},enumerable:!1,configurable:!0}),t.prototype.setGame=function(e){this.game=e},t.prototype.start=function(){this.stopShakeHandle=this.stopShake.bind(this);var e=this;cc.view.setResizeCallback(function(){var t=cc.view.getVisibleSize();e.gameBgArray.forEach(function(e){e.height=t.height+60}),e.changeBgArray.forEach(function(e){e.height=t.height+60})}),this.ParticleGroup0=cc.find("group_0",this.ParticleParent),this.ParticleGroup1=cc.find("group_1",this.ParticleParent);for(var t=0;t<8;t++)this.ParticleArray[t]=this.ParticleGroup0.getChildByName("Particle"+t);for(t=0;t<8;t++)this.ParticleArray1[t]=this.ParticleGroup1.getChildByName("Particle"+t);this.ParticleGroup0.active=!1,this.ParticleGroup1.active=!1},t.prototype.onDisable=function(){cc.view.setResizeCallback(null)},t.prototype.init=function(){var e=this;this.lava=this.gameBgNode.children[0].children[0].children[0],this.iron_plane=this.gameBgNode.children[0].children[0].children[1];var t=cc.view.getVisibleSize();this.bgWidth=t.width+50,this.gameBgNode.setContentSize(t.width,t.height),this.changeSceneBgNode.setContentSize(t.width,t.height),this.gameBgArray.forEach(function(i,o){i.width=e.bgWidth,i.height=t.height+60,i.setPosition(25+o*e.bgWidth,0)}),this.changeBgArray.forEach(function(i,o){i.width=e.bgWidth,i.height=t.height+60,i.setPosition(25+o*e.bgWidth,0)})},t.prototype.playSceneBg=function(){if(this.changeComplete){1==this._currSceneId||2==this._currSceneId||3==this._currSceneId||4==this._currSceneId||5!=this._currSceneId&&this._currSceneId;var e=d[this._currSceneId].musicVolume,t="";1==this._currSceneId?t="bg5":2==this._currSceneId?t="boss3":3==this._currSceneId?t="bg1":4==this._currSceneId?t="boss2":5==this._currSceneId?t="bg3":6==this._currSceneId&&(t="boss1"),this.game.iAudioPlayer.play_music(t,!0,e)}},t.prototype.startMoveScene=function(e){void 0===e&&(e=!1);var t=this.gameBgNode,i=this.moveSceneSpeed,o=this.cowShakeNode.children[0];e?(t=this.changeSceneBgNode,i=this.changeScreenSpeed,o=this.changeSceneBgNode.children[0]):this.gameBgArray.forEach(function(e){e.active=!0}),this.moveCount=1,this.currBg=o,this.moveScene(t,i,e)},t.prototype.stopMove=function(){this.moveTween&&this.moveTween.stop()},t.prototype.moveScene=function(e,t,i){if(void 0===i&&(i=!1),!this.isChangeSceneing||0!=i)if(null!=this.moveCount&&this.moveCount){var o=this,n=cc.v2(-this.bgWidth*this.moveCount,0);e.x<=n.x&&(cc.error(e.x,n.x,this.moveCount),this.moveCount++,n=cc.v2(-this.bgWidth*this.moveCount,0),cc.error("\u5df2\u7ecf\u79fb\u52a8\u5230\u76ee\u6807\u70b9\u4e86"));var r=Math.abs(n.x-e.x)/10*t;this.moveTween=cc.tween(e).sequence(cc.moveTo(r,n),cc.callFunc(function(){o.moveCount++,o.currBg.x=o.moveCount*o.bgWidth+25,o.currBg.setSiblingIndex(1),o.currBg=i?e.children[0]:o.cowShakeNode.children[0],o.moveScene(e,t)})).start()}else cc.error("moveCount\u4e3a\u65e0\u6548\u503c")},t.prototype.resetBg=function(e,t){var i=this;void 0===t&&(t=!0),t&&this.stopMove();var o,n=[];e==a.ResetType.gameBg?(o=this.gameBgNode,n=this.gameBgArray):(o=this.changeSceneBgNode,n=this.changeBgArray),o.setPosition(cc.v2()),n.forEach(function(e,t){e.setSiblingIndex(t),e.setPosition(25+t*i.bgWidth,0),e.opacity=255})},t.prototype.setCurrSceneBg=function(e,t){void 0===t&&(t=!1),this._currSceneId=e,5==this._currSceneId||4==this._currSceneId?this.lava.active=!0:this.lava.active=!1,6==this._currSceneId||7==this._currSceneId?this.iron_plane.active=!0:this.iron_plane.active=!1,cc.log("\u662f\u5426\u663e\u793a\u906e\u7f69"),3==this._currSceneId?this.game.fishMgr.showMask(!0,!1):this.game.fishMgr.showMask(!1,!1);var i=this.GetBGSpriteFrame(this._currSceneId);this.gameBgArray.forEach(function(e){e.getComponent(cc.Sprite).spriteFrame=i}),t&&(this.playSceneBg(),d[e].isStatic||this.startMoveScene(),this.playParticle())},t.prototype.changeScene=function(e){var t=this;cc.error("\u5207\u6362\u573a\u666f:",e),this.lastPos=null,this._currSceneId=e,this.changeComplete=!1;var i=d[e];switch(cc.log("\u662f\u5426\u663e\u793a\u906e\u7f69"),3!=this._currSceneId&&this.game.fishMgr.showMask(!1,!1),this.ParticleGroup0.active=!1,this.ParticleGroup1.active=!1,this.unschedule(this.updateParticle),i.animType){case s.greenPeople:this.changeToGreenPeopleScene();break;case s.normal:this.isChangeSceneing=!0,this.changeToNormalScene();break;case s.cow:this.changeToCowScene()}5==this._currSceneId||4==this._currSceneId?setTimeout(function(){t.lava.active=!0},5e3):this.lava.active=!1,6==this._currSceneId||7==this._currSceneId?setTimeout(function(){t.iron_plane.active=!0},5e3):this.iron_plane.active=!1},t.prototype.changeToGreenPeopleScene=function(){cc.error("\u5207\u6362\u5230\u7eff\u4eba\u573a\u666f"),this.currBg=this.gameBgArray[1],this.currBg.setSiblingIndex(0),this.currBg.setPosition(cc.v2(25,0)),this.currBg.opacity=0,this.currBg.active=!0;var e=this;cc.tween(this.gameBgArray[0]).to(2,{opacity:0}).start(),cc.tween(this.gameBgArray[1]).to(2,{opacity:255}).call(function(){e.changeComplete=!0}).start(),this.changeSceneAdrom.getComponent(cc.Sprite).spriteFrame=this.game.GetGameAsset("Res/Map/sceneLogo1",c.AssetType.AT_SpriteFrame);var t=this.game.GetGameAsset("Res/Map/BG",c.AssetType.AT_SpriteFrame);this.changeBgArray.forEach(function(e){e.getComponent(cc.Sprite).spriteFrame=t}),this.changeSceneBgNode.opacity=255,this.changeSceneBgNode.active=!0,this.changeSceneAdrom.scale=.8,this.changeSceneAdrom.active=!0,this.changeSceneAdrom.setPosition(cc.v2()),cc.tween(this.changeSceneAdrom).to(2,{scale:2}).start(),cc.tween(this.changeSceneBgNode).then(cc.fadeIn(.8)).start(),cc.tween(this.changeSceneAdrom).then(cc.fadeIn(.8)).start(),this.stopMove(),this.scheduleOnce(this.changeSceneHandle,2.5)},t.prototype.changeToNormalScene=function(){var e=this;cc.error("\u5207\u6362\u5230\u666e\u901a\u573a\u666f"),this.changeBgArray.forEach(function(t){t.getComponent(cc.Sprite).spriteFrame=e.GetBGSpriteFrame(e._currSceneId)}),this.changeSceneAdrom.getComponent(cc.Sprite).spriteFrame=null,this.changeSceneBgNode.opacity=0,this.changeSceneBgNode.active=!0,this.changeSceneAdrom.opacity=0,this.changeSceneAdrom.scale=1,this.changeSceneAdrom.active=!0,this.changeSceneAdrom.setPosition(cc.v2()),cc.tween(this.changeSceneBgNode).then(cc.fadeIn(.8)).start(),cc.tween(this.changeSceneAdrom).then(cc.fadeIn(.8)).start(),this.stopMove(),this.scheduleOnce(this.changeSceneHandle,2.5)},t.prototype.changeToCowScene=function(){var e=this,t=this._currSceneId-1;-1==t&&(t=6);var i=this.GetBGSpriteFrame(t);this.changeBgArray.forEach(function(t,o){t.setPosition(e.gameBgArray[o].getPosition()),t.getComponent(cc.Sprite).spriteFrame=i});var o=this;this.changeSceneBgNode.opacity=0,this.changeSceneBgNode.active=!0,cc.tween(this.changeSceneBgNode).to(1,{opacity:255}).call(function(){e.gameBgNode.opacity=0,e.gameBgArray.forEach(function(t){t.getComponent(cc.Sprite).spriteFrame=e.GetBGSpriteFrame(e._currSceneId)}),cc.tween(e.changeSceneBgNode).to(2,{opacity:0}).call(function(){o.resetBg(a.ResetType.changeBg,!1)}).start(),cc.tween(e.gameBgNode).to(2,{opacity:255}).start()}).start(),this.changeSceneAdrom.stopAllActions(),3==this._currSceneId?this.changeSceneAdrom.getComponent(cc.Sprite).spriteFrame=this.game.GetGameAsset("Res/Map/sceneLogo0",c.AssetType.AT_SpriteFrame):5==this._currSceneId?this.changeSceneAdrom.getComponent(cc.Sprite).spriteFrame=this.game.GetGameAsset("Res/Map/sceneLogo2",c.AssetType.AT_SpriteFrame):this.changeSceneAdrom.getComponent(cc.Sprite).spriteFrame=this.game.GetGameAsset("Res/Map/sceneLogo3",c.AssetType.AT_SpriteFrame),this.changeSceneAdrom.angle=0,this.changeSceneAdrom.x=1200,this.changeSceneAdrom.opacity=255,this.changeSceneAdrom.scale=1,this.changeSceneAdrom.active=!0,3==this._currSceneId?(this.game.fishMgr.showMask(!0,!1,!0),cc.error("changeToCowScene\uff1ashow delay")):this.game.fishMgr.showMask(!1,!1);var n=cc.spawn(cc.rotateTo(.25,20),cc.scaleTo(.25,1.2)),r=cc.spawn(cc.rotateTo(.25,0),cc.scaleTo(.25,1)),s=cc.spawn(cc.rotateTo(.25,-20),cc.scaleTo(.25,1.2)),l=cc.tween(this.changeSceneAdrom).sequence(cc.moveTo(.25,cc.v2(.5*this.changeSceneAdrom.width,0)),cc.moveTo(.35,cc.v2(-1200,0))).call(function(){d[o._currSceneId].musicVolume,o.changeComplete=!0,o.playSceneBg()}),h=cc.tween(this.changeSceneAdrom).repeat(4,cc.sequence(n,r,s,r)).call(function(){l.start()});cc.tween(this.changeSceneAdrom).sequence(cc.moveTo(.35,cc.v2(-.5*this.changeSceneAdrom.width,0)).easing(cc.easeBackOut()),cc.moveTo(.25,cc.v2())).call(function(){h.start()}).start()},t.prototype.changeSceneHandle=function(){var e=this,t=this;this.resetBg(a.ResetType.gameBg,!1),this.setCurrSceneBg(this._currSceneId);var i=cc.fadeOut(1.2);cc.tween(this.changeSceneBgNode).then(i).start(),cc.tween(this.changeSceneAdrom).then(i).start(),this.gameBgNode.scale=1.1,cc.tween(this.gameBgNode).then(cc.scaleTo(1.2,1).easing(cc.easeBackIn())).call(function(){t.changeSceneBgNode.active=!1,t.changeSceneAdrom.active=!1,t.resetBg(a.ResetType.changeBg),t.isChangeSceneing=!1,cc.log("\u5207\u6362\u573a\u666f\u5b8c\u6bd5"),d[t._currSceneId].isStatic||t.startMoveScene(),e.playParticle(),t.changeComplete=!0,t.playSceneBg()}).start(),cc.log("\u662f\u5426\u663e\u793a\u906e\u7f69"),3==this._currSceneId?(this.game.fishMgr.showMask(!0,!1,!0),cc.error("changeSceneHandle\uff1a")):this.game.fishMgr.showMask(!1,!1)},t.prototype.shakeEffect=function(e,t){var i=this;this.stopMove(),this.unschedule(this.stopShakeHandle),this.shakeTween&&this.shakeTween.stop(),d[this._currSceneId].isStatic?this.gameBgNode.setPosition(0,0):this.lastPos&&this.gameBgNode.setPosition(this.lastPos);var o=this.gameBgNode.getPosition();this.lastPos=cc.v2(o.x,0),this.gameBgNode.setPosition(o.x,0);var n=this;this.shakeTween=t?cc.tween(this.gameBgNode).repeat(6,cc.sequence(cc.moveTo(.02,cc.v2(o.x+15,o.y+17)),cc.moveTo(.02,cc.v2(o.x-16,o.y+17)),cc.moveTo(.02,cc.v2(o.x-13,o.y+13)),cc.moveTo(.02,cc.v2(o.x+13,o.y-16)),cc.moveTo(.02,cc.v2(o.x-15,o.y-15)),cc.moveTo(.02,cc.v2(o.x+12,o.y-18)),cc.moveTo(.02,cc.v2(o.x-18,o.y-20)),cc.moveTo(.02,cc.v2(o.x+13,o.y+20)),cc.moveTo(.02,cc.v2(o.x,0)))):cc.tween(this.gameBgNode).repeat(6,cc.sequence(cc.moveTo(.02,cc.v2(o.x+5,o.y+7)),cc.moveTo(.02,cc.v2(o.x-6,o.y+7)),cc.moveTo(.02,cc.v2(o.x-3,o.y+3)),cc.moveTo(.02,cc.v2(o.x+3,o.y-6)),cc.moveTo(.02,cc.v2(o.x-5,o.y-5)),cc.moveTo(.02,cc.v2(o.x+2,o.y-8)),cc.moveTo(.02,cc.v2(o.x-8,o.y-10)),cc.moveTo(.02,cc.v2(o.x+3,o.y+10)),cc.moveTo(.02,cc.v2(o.x,0)))),this.shakeTween.call(function(){n.unschedule(n.stopShakeHandle),i.gameBgNode.setPosition(i.lastPos),n.lastPos=null,d[n._currSceneId].isStatic||n.moveScene(n.gameBgNode,n.moveSceneSpeed)}).start(),this.scheduleOnce(this.stopShakeHandle,e)},t.prototype.stopShake=function(){this.shakeTween&&this.shakeTween.stop(),d[this._currSceneId].isStatic?this.gameBgNode.setPosition(0,0):(this.lastPos?this.gameBgNode.setPosition(this.lastPos):cc.error("\u4e0a\u6b21\u7684\u4f4d\u7f6e\u4e3a\u7a7a"),this.moveScene(this.gameBgNode,this.moveSceneSpeed)),this.lastPos=null},t.prototype.playCowShake=function(){var e=this;this.scheduleOnce(function(){e.cowShake(),e.schedule(e.cowShake,1.005,cc.macro.REPEAT_FOREVER)},.25)},t.prototype.stopCowShake=function(){this.unschedule(this.cowShake)},t.prototype.cowShake=function(){var e=cc.tween().to(.08,{y:-25},{easing:"backIn"}),t=cc.tween().to(.35,{y:0},{easing:"backOut"});cc.tween(this.cowShakeNode).sequence(e,t).start()},t.prototype.stopPeopleShake=function(){this.unschedule(this.peopleShake)},t.prototype.playPeopleShake=function(){var e=this;this.scheduleOnce(function(){e.peopleShake(),e.schedule(e.peopleShake,.5,cc.macro.REPEAT_FOREVER)},.25)},t.prototype.peopleShake=function(){var e=cc.tween().to(.08,{y:-15},{easing:"backIn"}),t=cc.tween().to(.35,{y:0},{easing:"backOut"});cc.tween(this.cowShakeNode).sequence(e,t).start()},t.prototype.onDestroy=function(){},t.prototype.updateParticle=function(){for(var e=0;e<8;e++)e==this.ParticleIndexArray[this.ParticleIndex][0]||e==this.ParticleIndexArray[this.ParticleIndex][1]||e==this.ParticleIndexArray[this.ParticleIndex][2]?this.ParticleArray[e].active=!0:this.ParticleArray[e].active=!1;this.ParticleIndex++,this.ParticleIndex>this.ParticleIndexArray.length-1&&(this.ParticleIndex=0)},t.prototype.updateParticle1=function(){for(var e=0;e<8;e++)e==this.ParticleIndexArray[this.ParticleIndex][0]||e==this.ParticleIndexArray[this.ParticleIndex][1]||e==this.ParticleIndexArray[this.ParticleIndex][2]?this.ParticleArray1[e].active=!0:this.ParticleArray1[e].active=!1;this.ParticleIndex++,this.ParticleIndex>this.ParticleIndexArray.length-1&&(this.ParticleIndex=0)},t.prototype.playParticle=function(){6==this._currSceneId||7==this._currSceneId?this.ParticleGroup0.active||(this.ParticleGroup0.active=!0,this.updateParticle(),cc.error("Particle1 on"),this.schedule(this.updateParticle,10,cc.macro.REPEAT_FOREVER)):this.ParticleGroup0.active&&(this.ParticleGroup0.active=!1,this.unschedule(this.updateParticle),cc.error("Particle1 off")),5==this._currSceneId||4==this._currSceneId?this.ParticleGroup1.active||(this.ParticleGroup1.active=!0,this.updateParticle1(),cc.error("Particle2 on"),this.schedule(this.updateParticle1,10,cc.macro.REPEAT_FOREVER)):this.ParticleGroup1.active&&(this.ParticleGroup1.active=!1,this.unschedule(this.updateParticle1),cc.error("Particle2 off"))},t.prototype.GetBGSpriteFrame=function(e){var t=1;return 1==e?t=1:2==e?t=2:3==e?t=2:4==e?t=4:5==e?t=4:6==e?t=6:7==e&&(t=6),this.game.GetGameAsset("Res/Map/map_"+t,c.AssetType.AT_SpriteFrame)},r([p(cc.Node)],t.prototype,"gameBgNode",void 0),r([p([cc.Node])],t.prototype,"gameBgArray",void 0),r([p(cc.Node)],t.prototype,"gameBgMask",void 0),r([p([cc.Node])],t.prototype,"changeBgArray",void 0),r([p(cc.Node)],t.prototype,"changeSceneBgNode",void 0),r([p(cc.Node)],t.prototype,"changeSceneAdrom",void 0),r([p(cc.Node)],t.prototype,"ParticleParent",void 0),r([p(cc.Node)],t.prototype,"cowShakeNode",void 0),r([h,u("FISHMoHuanHY/GameSceneMgr")],t)}(cc.Component);i.default=f,cc._RF.pop()},{"../FISHMoHuanHY_Game":"FISHMoHuanHY_Game","./FISHMoHuanHY_GameDefine":"FISHMoHuanHY_GameDefine"}],FISHMoHuanHY_Game:[function(e,t,i){"use strict";cc._RF.push(t,"1b969llbyMuu/Im3/iN5Ed3","FISHMoHuanHY_Game");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0}),i.AssetType=void 0;var s,c=e("./GameScripts/FISHMoHuanHY_CrashGrid"),a=e("./GameScripts/FISHMoHuanHY_QuadtreeCollision"),l=e("./GameScripts/FISHMoHuanHY_ResourceMgr"),h=e("./GameScripts/FISHMoHuanHY_GameSceneMgr"),u=e("./GameScripts/FISHMoHuanHY_BulletManager"),p=e("./GameScripts/FISHMoHuanHY_FishManager"),d=e("./GameScripts/FISHMoHuanHY_PoolManager"),f=e("./GameScripts/FISHMoHuanHY_FishPathCrash"),y=e("./GameScripts/FISHMoHuanHY_GameFort"),m=e("./GameScripts/FISHMoHuanHY_GameFortGunAni"),g=e("./GameScripts/FISHMoHuanHY_FunctionLayer"),v=e("./GameScripts/FISHMoHuanHY_FishManager"),S=e("./GameScripts/FISHMoHuanHY_BulletManager"),_=e("./GameScripts/FISHMoHuanHY_AutoFireButton"),F=e("./GameScripts/FISHMoHuanHY_PoolManager"),I=e("./GameScripts/FISHMoHuanHY_GameSceneMgr"),b=e("./GameScripts/FISHMoHuanHY_FunctionFort"),H=e("./FISHMoHuanHY_GameLogic"),M=e("./FISHMoHuanHY_GameLogic"),C=e("./GameScripts/FISHMoHuanHY_MyFishSetting"),P=cc._decorator,w=P.ccclass,A=P.menu,G=P.property;(function(e){e[e.AT_SpriteFrame=0]="AT_SpriteFrame",e[e.AT_SpriteAtlas=1]="AT_SpriteAtlas",e[e.AT_Prefab=2]="AT_Prefab",e[e.AT_AudioClip=3]="AT_AudioClip",e[e.AT_Material=4]="AT_Material"})(s=i.AssetType||(i.AssetType={}));var T=function(e){function t(){var t=e.call(this)||this;return t.GameLogic=null,t.handlerPriority=2,t.handlerName="FISHMoHuanHY",t.scriptName="FISHMoHuanHY_Game",t.gameScene=null,t.fishMgr=null,t.bulletMgr=null,t.setBtn=null,t.setPanel=null,t.setPanelMask=null,t.poolMgr=null,t.isPlaying=!1,t.setbtnWidget=null,t.setPanelWidget=null,t.fishPathMgr=null,t.UpSideDown=!1,t.resourMgr=null,t.iGameBase=null,t.currTime=0,t}return n(t,e),t.prototype.setIGameBase=function(e){cc.error("setIGameBase>>>>",e),this.iGameBase=e,this.iAudioPlayer=this.iGameBase.getIAudioPlayer(),this.resourMgr=new l.default,this.iGameBase.newFishResMgrBase(),this.resourMgr.setIMrgBase(this.iGameBase.getFishResMgrBase()),this.gameId=this.iGameBase.GlobalUserItem_gameId(),this.mCrashGrid=new c.CrashGrid_DEMO,this.mCrashGrid.setGame(this),this.fishPathMgr=new f.default,this.fishPathMgr.setGame(this),this.fishPathMgr.loadFishPath(),this.resourMgr.KindID=this.iGameBase.GetKindID(),this.SetGameObject()},t.prototype.netWorkDelay=function(){},t.prototype.onEnable=function(){cc.sys.isBrowser&&(cc.macro.CLEANUP_IMAGE_CACHE=!1,cc.dynamicAtlasManager.enabled=!0,cc.dynamicAtlasManager.maxFrameSize=642)},t.prototype.onLoad=function(){},t.prototype.enterGame=function(){cc.error(this.node.width,this.node.height,this.node.scale),this.iGameBase.enterGame()},t.prototype.start=function(){this._quadCollision=new a.default(this.node.getBoundingBoxToWorld())},t.prototype.onDestroy=function(){this.iGameBase.RemoveHandler(),this.fishPathMgr.release(),this.mCrashGrid=null,this.resourMgr.iMrgBase.release(),this.iGameBase.releaseGameRes(this.resourMgr.KindID)},t.prototype.getGameUINode=function(){return this.gameScene.node},t.prototype.update=function(e){if(this.iGameBase){if(!this.iGameBase.onUpdate(e))return;if(!this.iGameBase.getExectUpdate())return;this.GameLogic.onUpdate(e),this.fishMgr.onUpdate(e),this.bulletMgr.onUpdate(e)}},t.prototype.onSetClick=function(){var e=this;this.isPlaying||(this.setBtnPos=this.setBtn.getPosition(),this.setbtnWidth=this.setBtn.getContentSize().width,this.setPanelPos=this.setPanel.getPosition(),this.setPanelWidth=this.setPanel.getContentSize().width,this.isPlaying=!0,cc.tween(this.setBtn).to(.25,{position:cc.v3(this.setBtnPos.x+this.setbtnWidth,this.setBtnPos.y,0)}).call(function(){e.setbtnWidget.right=-e.setbtnWidth,cc.tween(e.setPanel).to(.25,{position:cc.v3(e.setPanelPos.x-e.setPanelWidth,e.setPanelPos.y,0)}).call(function(){e.setPanelMask.active=!0,e.isPlaying=!1}).start()}).start())},t.prototype.onInfoClick=function(){this.GameLogic.onInfoBtnClick(),this.onMaskClick()},t.prototype.onMaskClick=function(){var e=this;this.isPlaying||(this.setBtnPos=this.setBtn.getPosition(),this.setbtnWidth=this.setBtn.getContentSize().width,this.setPanelPos=this.setPanel.getPosition(),this.setPanelWidth=this.setPanel.getContentSize().width,this.isPlaying=!0,cc.tween(this.setPanel).to(.25,{position:cc.v3(this.setPanelPos.x+this.setPanelWidth,this.setPanelPos.y,0)}).call(function(){e.setPanelMask.active=!1,cc.tween(e.setBtn).to(.25,{position:cc.v3(e.setBtnPos.x-e.setbtnWidth,e.setBtnPos.y,0)}).call(function(){e.setbtnWidget.right=0,e.isPlaying=!1}).start()}).start())},t.prototype.GetGameAsset=function(e,t){return this.iGameBase.GetGameAsset(this.handlerName,e,t)},t.prototype.SetGameObject=function(){var e=this,t=cc.find("Pool",this.node);this.poolMgr=t.addComponent(F.default),this.poolMgr.setGame(this),this.initPoolManager(t);var i=cc.find("GameScene",this.node);this.gameScene=i.addComponent(I.default),this.gameScene.setGame(this),this.initgameScene(i);var o=this;this.resourMgr.loadOther("MyInfo",l.ResourceType.initPrefab,cc.Prefab,function(t){o.MyInfoPrefab=t;var i=cc.find("Playing",o.node);o.initPlaying(i),o.initSetting(i),e.iGameBase.setMyGameLogic(e.GameLogic,e.iGameBase.GetKindID(),H.SupportedFish),e.enterGame()})},t.prototype.initPoolManager=function(){var e=new d.FISHA_Pool;e.isInitRes=!0,e.nodeType=d.NodeType.gold,e.prefab=this.resourMgr.getRes("gold",l.ResourceType.initPrefab,cc.Prefab),e.initCount=30,e.setGame(this),this.poolMgr.poolArray.push(e);var t=new d.FISHA_Pool;t.isInitRes=!0,t.nodeType=d.NodeType.score,t.prefab=this.resourMgr.getRes("Score",l.ResourceType.initPrefab,cc.Prefab),t.initCount=20,t.setGame(this),this.poolMgr.poolArray.push(t);var i=new d.FISHA_Pool;i.isInitRes=!0,i.nodeType=d.NodeType.fishShadow,i.prefab=this.resourMgr.getRes("FishShadow",l.ResourceType.initPrefab,cc.Prefab),i.initCount=50,i.setGame(this),this.poolMgr.poolArray.push(i);var o=new d.FISHA_Pool;o.isInitRes=!1,o.nodeType=d.NodeType.goldBomb,o.resname="Goldblast",o.initCount=15,o.setGame(this),this.poolMgr.poolArray.push(o);var n=new d.FISHA_Pool;n.isInitRes=!0,n.nodeType=d.NodeType.coin,n.prefab=this.resourMgr.getRes("coin",l.ResourceType.initPrefab,cc.Prefab),n.initCount=100,n.setGame(this),this.poolMgr.poolArray.push(n);var r=new d.FISHA_Pool;r.isInitRes=!0,r.nodeType=d.NodeType.fishSkeletonShadow,r.prefab=this.resourMgr.getRes("fishSkeletonShadow",l.ResourceType.initPrefab,cc.Prefab),r.initCount=5,r.setGame(this),this.poolMgr.poolArray.push(r);var s=new d.FISHA_Pool;s.isInitRes=!1,s.nodeType=d.NodeType.goldBomb1,s.resname="yuanbao",s.initCount=10,s.setGame(this),this.poolMgr.poolArray.push(s),this.poolMgr.init()},t.prototype.initgameScene=function(e){var t=cc.find("BgNode",e),i=cc.find("cowShake",t),o=cc.find("bg1",i),n=cc.find("bg2",i),r=cc.find("adorn",e),s=cc.find("ChangeBgNode",e),c=cc.find("bg1",s),a=cc.find("bg2",s),l=cc.find("changeSceneAdrom",e);this.gameScene.ParticleParent=cc.find("ParticleParent",e),this.gameScene.gameBgNode=t,this.gameScene.gameBgArray.push(o),this.gameScene.gameBgArray.push(n),this.gameScene.gameBgMask=r,this.gameScene.changeBgArray.push(c),this.gameScene.changeBgArray.push(a),this.gameScene.changeSceneBgNode=s,this.gameScene.changeSceneAdrom=l,this.gameScene.cowShakeNode=i,this.gameScene.init()},t.prototype.initPlaying=function(e){var t=cc.find("touchNode",e),i=cc.find("fishLayer",e),o=cc.find("fishCircleLayer",e),n=cc.find("darkLayer",i),r=cc.find("darkLayerLite",i),c=cc.find("bulletLayer",e),a=cc.find("bulletHitLayer",e),h=cc.find("functionLayer",e),u=cc.find("FunctionFort",e),p=cc.find("signal",e);this.bulletMgr=c.addComponent(S.default),this.bulletMgr.setGame(this),this.bulletMgr.bulletPrefab=this.GetGameAsset("Res/Prefab/GameBullet_DEMO",s.AT_Prefab),this.bulletMgr.bulletDrillPrefab=this.GetGameAsset("Res/Prefab/GameBulletDrill_DEMO",s.AT_Prefab),this.bulletMgr.bulletJinLuanPrefab=this.GetGameAsset("Res/Prefab/GameBulletJinLuan_DEMO",s.AT_Prefab),this.bulletMgr.bulletSmallOctopusPrefab=this.GetGameAsset("Res/Prefab/GameBulletSmallOctopus_DEMO",s.AT_Prefab),this.bulletMgr.bulletHitPrefab=this.resourMgr.getRes("GameBulletHit_DEMO",l.ResourceType.initPrefab,cc.Prefab),cc.error("====",this.bulletMgr.bulletHitPrefab),this.bulletMgr.bulletHitNode=a,this.fishMgr=i.addComponent(v.default),this.fishMgr.setGame(this),this.fishMgr.fishCircleLayer=o,this.fishMgr.darkLayer=n,this.fishMgr.darkLayerLite=r,this.fishMgr.shadowMaterial=this.GetGameAsset("Res/Shader/sprite-shadow",s.AT_Material);var d=h.addComponent(g.default);d.greenpeopleEffectLayer=cc.find("greenpeopleEffectLayer",e),d.setGame(this),this.GameLogic=e.addComponent(M.default),this.GameLogic.game=this,this.GameLogic.functionLayer=d,this.GameLogic.touchNode=t;var f=cc.find("middlebottomPoint",e),F=this.resourMgr.getRes("Middlebottom",l.ResourceType.initPrefab,cc.Prefab);if(F){cc.error("=====Middlebottom===",F);var I=cc.instantiate(F);f.addChild(I);var H=cc.find("AutoFireSetBtn",I);this.SetBtnEvent(H.getComponent(cc.Button),!0,!0);var C=cc.find("ChangePaoBtn",I);this.SetBtnEvent(C.getComponent(cc.Button),!0,!0);var P=cc.find("AutoFireBtn",I),w=P.addComponent(_.default),A=cc.find("autolight",P),G=cc.find("light",A);w.autoFireLight=G,w.autoFireOn=A.getComponent(cc.Sprite),this.SetBtnEvent(P.getComponent(cc.Button),!0,!0),this.GameLogic.changePaoBtn=C,this.GameLogic.autoFireSetBtn=H,this.GameLogic.autoFireButton=w,this.GameLogic.showpao1=cc.find("showpao1",C),this.GameLogic.showpao2=cc.find("showpao2",C)}if(this.MyInfoPrefab){var T=cc.find("MyInfoPoint",e);cc.error("====MyInfoPoint\u9884\u5236\u4f53\uff1a",this.MyInfoPrefab);var B=cc.instantiate(this.MyInfoPrefab);T.addChild(B);var x=cc.find("lblAccount",B).getComponent(cc.Label),O=cc.find("lblVersion",B).getComponent(cc.Label),D=cc.find("layout",B),R=cc.find("Property/labelGold",D).getComponent(cc.Label),N=D.getChildByName("Winscore"),E=cc.find("labelScore",N).getComponent(cc.Label),k=cc.find("Property/btnConver",D).getComponent(cc.Button);this.SetBtnEvent(k,!this.iGameBase.isNoWin(),!0),this.GameLogic.showWin(k,N),this.GameLogic.myInfo=B,this.GameLogic.lblAccount=x,this.GameLogic.lblVersion=O,this.GameLogic.labelGold=R,this.GameLogic.lableWinScore=E}var L=this.resourMgr.getRes("mouse1",l.ResourceType.initPrefab,cc.Prefab);if(L){var Y=cc.instantiate(L);Y.getComponent(cc.Sprite).spriteFrame=this.resourMgr.getRes("Common/mouseIcon1",l.ResourceType.imgs,cc.SpriteFrame),e.addChild(Y);var j=Y.getComponent(cc.CircleCollider);this.GameLogic.mouseCollider=j}this.GameLogic.signal=p;for(var W=cc.find("forts",e),U=0;U<4;U++){var z=cc.find("functionFort"+U,u),K=cc.find("container",z),q=cc.find("gunbarrel",z),V=cc.find("laserGun/laserPoint",q),X=cc.find("fort"+U,W),J=cc.find("fort",X),Z=cc.find("gunbarrel",J),Q=cc.find("drillGun/drillLightEffect",Z),$=cc.find("normalGun",Z);$.addComponent(m.default);var ee=cc.find("bulletPoint",$),te=(I=cc.find("New Sprite",Z).getComponent(cc.Animation),cc.find("Option",J)),ie=cc.find("MulpitleBg/labelMultiple",Z).getComponent(cc.Label);ie.font=this.resourMgr.getRes("bf_number1",l.ResourceType.font,cc.Font);var oe=cc.find("btnAddMultple",te);this.SetBtnEvent(oe.getComponent(cc.Button),!1,!0);var ne=cc.find("btnSubMultple",te);this.SetBtnEvent(ne.getComponent(cc.Button),!1,!0);var re=cc.find("countdown",J);re.getComponent(cc.Sprite).spriteFrame=this.resourMgr.getRes("Cannon/DrillGun/timeShot",l.ResourceType.imgs,cc.SpriteFrame);var se=cc.find("lblcountdown",re).getComponent(cc.Label);se.font=this.resourMgr.getRes("Cannon/Font/LabelAtlasNumber3",l.ResourceType.imgs,cc.Font);var ce=X.addComponent(y.default);ce.setGame(this),ce.siteIndex=U,ce.gunbarrel=Z,ce.normalGun=Z.getChildByName("normalGun").getComponent(cc.Animation),ce.drillGun=Z.getChildByName("drillGun").getComponent(cc.Animation),ce.laserGun=Z.getChildByName("laserGun").getComponent(cc.Animation),ce.electricityGun=Z.getChildByName("electricityGun"),ce.bottom=I,ce.labelMultiple=ie,ce.btnAddMultple=oe,ce.btnSubMultple=ne,ce.drillLightEffect=Q,ce.bulletPoint=ee,ce.countdown=re,ce.lblcountdown=se,ce.functionFort=z.addComponent(b.default),ce.functionFort.setGame(this),ce.functionFort.container=K,ce.functionFort.laserPoint=V,ce.functionFort.gunbarrel=q,ce.functionFort.fort=ce,this.GameLogic.gameFort.push(ce)}},t.prototype.initSetting=function(e){var t=cc.find("SettingPoint",e),i=this.resourMgr.getRes("Setting",l.ResourceType.initPrefab,cc.Prefab);if(cc.error("====setting \u9884\u5236\u4f53\uff1a",i),i){var o=cc.instantiate(i);t.addChild(o),o.addComponent(C.default).Init(this.iGameBase,"FISHMoHuanHY_MyFishSetting",this,this.GameLogic.onInfoBtnClick.bind(this.GameLogic))}},t.prototype.SetBtnEvent=function(e,t,i){if(void 0===t&&(t=!0),void 0===i&&(i=!0),null!=e){var o=new cc.Component.EventHandler;o.target=this.node,o.component=this.scriptName,o.handler="BtnEventCallback",e.clickEvents.push(o),e.node.active=t,e.interactable=i}},t.prototype.BtnEventCallback=function(e){var t=e.target;this.OnClickBtn(t)},t.prototype.OnClickBtn=function(e){switch(e.name){case"btnConver":this.GameLogic.onConverPropertyBtnClick();break;case"AutoFireSetBtn":this.GameLogic.onAutoFireSetBtnClick();break;case"ChangePaoBtn":this.GameLogic.onChangePaoBtnClick();break;case"AutoFireBtn":this.GameLogic.onBtnAutoFire();break;case"btnAddMultple":this.GameLogic.onBtnAddMultiple();break;case"btnSubMultple":this.GameLogic.onBtnSubMultiple()}},r([G(h.default)],t.prototype,"gameScene",void 0),r([G(p.default)],t.prototype,"fishMgr",void 0),r([G({type:u.default})],t.prototype,"bulletMgr",void 0),r([G(cc.Node)],t.prototype,"setBtn",void 0),r([G(cc.Node)],t.prototype,"setPanel",void 0),r([G(cc.Node)],t.prototype,"setPanelMask",void 0),r([G(d.default)],t.prototype,"poolMgr",void 0),r([w,A("FISHMoHuanHY/Game_DEMO")],t)}(cc.Component);i.default=T,cc._RF.pop()},{"./FISHMoHuanHY_GameLogic":"FISHMoHuanHY_GameLogic","./GameScripts/FISHMoHuanHY_AutoFireButton":"FISHMoHuanHY_AutoFireButton","./GameScripts/FISHMoHuanHY_BulletManager":"FISHMoHuanHY_BulletManager","./GameScripts/FISHMoHuanHY_CrashGrid":"FISHMoHuanHY_CrashGrid","./GameScripts/FISHMoHuanHY_FishManager":"FISHMoHuanHY_FishManager","./GameScripts/FISHMoHuanHY_FishPathCrash":"FISHMoHuanHY_FishPathCrash","./GameScripts/FISHMoHuanHY_FunctionFort":"FISHMoHuanHY_FunctionFort","./GameScripts/FISHMoHuanHY_FunctionLayer":"FISHMoHuanHY_FunctionLayer","./GameScripts/FISHMoHuanHY_GameFort":"FISHMoHuanHY_GameFort","./GameScripts/FISHMoHuanHY_GameFortGunAni":"FISHMoHuanHY_GameFortGunAni","./GameScripts/FISHMoHuanHY_GameSceneMgr":"FISHMoHuanHY_GameSceneMgr","./GameScripts/FISHMoHuanHY_MyFishSetting":"FISHMoHuanHY_MyFishSetting","./GameScripts/FISHMoHuanHY_PoolManager":"FISHMoHuanHY_PoolManager","./GameScripts/FISHMoHuanHY_QuadtreeCollision":"FISHMoHuanHY_QuadtreeCollision","./GameScripts/FISHMoHuanHY_ResourceMgr":"FISHMoHuanHY_ResourceMgr"}],FISHMoHuanHY_GoldBombEffect:[function(e,t,i){"use strict";cc._RF.push(t,"32fcd3a991NBpU+jncPuCNC","FISHMoHuanHY_GoldBombEffect");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.light=null,t.lblScore=null,t.gold=null,t.fish=null,t.isAddScore=!0,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.play=function(e,t,i,o){var n=this;this.gold.getComponent(cc.Animation).on(cc.Animation.EventType.FINISHED,function(){n.gold.active=!1}),this.playGameId=t,this.score=i,this.fish=e,this.isAddScore=o;var r=e.getCurrWorldPos(),s=this.node.convertToNodeSpaceAR(r);this.light.setPosition(s),this.lblScore.string="0",this.game.iGameBase.updatenNumberAnim(this.lblScore,this.score,3.5,this.lblAnim.bind(this)),this.gold.setPosition(s),this.gold.active=!0,cc.tween(this.gold).to(1.92,{scale:1.5}).start(),this.schedule(this.followFish,.015,cc.macro.REPEAT_FOREVER),this.scheduleOnce(this.hide,7)},t.prototype.playSound=function(e){var t="";switch(e){case 2:t="mediumdie2_"+this.game.iGameBase.utils_random(1,2),this.game.iAudioPlayer.play_sound(t,!1,1,this.game.iGameBase.utils_gen_handler(this.playSound,this,3));break;case 3:t="mediumdie3_"+this.game.iGameBase.utils_random(1,2),this.game.iAudioPlayer.play_sound(t,!1,1,this.game.iGameBase.utils_gen_handler(this.playSound,this,4));break;case 4:t="effect"+this.game.iGameBase.utils_random(2311,2320),this.game.iAudioPlayer.play_sound(t)}},t.prototype.lblAnim=function(){cc.tween(this.lblScore.node).to(.2,{scale:1.5}).to(.2,{scale:1}).start()},t.prototype.followFish=function(){var e=this.fish.getCurrWorldPos(),t=this.node.convertToNodeSpaceAR(e);this.light.setPosition(t)},t.prototype.hide=function(){this.isAddScore&&this.game.GameLogic.setWinScore(this.playGameId,this.score),this.unschedule(this.followFish),this.node.destroy()},r([a(cc.Node)],t.prototype,"light",void 0),r([a(cc.Label)],t.prototype,"lblScore",void 0),r([a(cc.Node)],t.prototype,"gold",void 0),r([c],t)}(cc.Component);i.default=l,cc._RF.pop()},{}],FISHMoHuanHY_GoldRoutine:[function(e,t,i){"use strict";cc._RF.push(t,"aa7804sZrQGg9SwqLdwNtmk","FISHMoHuanHY_GoldRoutine"),Object.defineProperty(i,"__esModule",{value:!0});var o,n=e("./FISHMoHuanHY_PoolManager"),r=e("./FISHMoHuanHY_ResourceMgr"),s=cc._decorator;s.ccclass,s.menu,s.property,function(e){e[e.busy=0]="busy",e[e.idle=1]="idle"}(o||(o={}));var c=function(){function e(e,t,i){this.completeCount=0,this.startPos=null,this.endPos=null,this.createCount=0,this.goldArray=null,this.score=0,this.state=o.idle,this.complete=null,this.caller=null,this.updownInterval=.25,this.moveInterval=.1,this.isupwown=!1,this.isMoveFort=!1,this.currMoveFortTime=0,this.currUpDownTime=0,this.scoreAndGoldParent=null,this.scoreTween=null,this._isAddScore=!1,this.currCount=0,this.completeCount=0,this.state=o.busy,this.complete=i,this.caller=t,this.scoreAndGoldParent=e}return e.prototype.setGame=function(e){this.game=e},e.prototype.init=function(e,t,i,n){this.state=o.busy;var r=e.getCurrWorldPos();r=this.game.GameLogic.node.convertToNodeSpaceAR(r),this.startPos=r,this.endPos=t.node.getPosition(),this.score=i,this.currCount=0,this.createCount=e.goldCount,this._isAddScore=n,this.playGameId=t.gameId,this.completeCount=0,this.currUpDownTime=0,this.currMoveFortTime=0,this.goldArray=[],this.isupwown=!1,e.isSpecialAnim(),this.playScoreAnimation(this.scoreAndGoldParent,e.fishKind.id,t,null)},e.prototype.playScoreAnimation=function(e,t,i,o){var s=this,c=this.game.poolMgr.Dequeue(n.NodeType.score),a=c.getComponent(cc.Label);if(e.addChild(c),c.setPosition(this.startPos),o)this.startPos=o,a.spacingX=-20,a.fontSize=50,a.font=this.game.resourMgr.getRes("Common/font/bf_number3",r.ResourceType.imgs,cc.Font),a.string="0",this.game.iGameBase.updatenNumberAnim(a,this.score,1.5),cc.tween(c).sequence(cc.delayTime(.35),cc.moveTo(.8,o),cc.delayTime(2)).call(function(){s.game.poolMgr.Enqueue(c,n.NodeType.score),s.isupwown=!0}).start();else{a.spacingX=-5,a.fontSize=50,a.font=this.game.resourMgr.getRes("Common/font/bf_number1",r.ResourceType.imgs,cc.Font),a.string=this.game.iGameBase.getNum(this.score,!0);var l=this.game.iGameBase.utils_random(c.x-10,c.x+10);this.startPos=cc.v2(l,c.y+20),cc.tween(c).sequence(cc.scaleTo(.2,1.5),cc.scaleTo(.2,1),cc.moveTo(1.5,this.startPos),cc.callFunc(function(){for(var e=0;e<c.children.length;e++)c.children[e].active=!1;s.game.poolMgr.Enqueue(c,n.NodeType.score),s.isupwown=!0})).start()}},e.prototype.moveToFortAnimation=function(e){var t=this;this.game.iAudioPlayer.play_sound("NormalFishHuiBi",!1,.3),e.getPosition().sub(this.endPos).mag();var i=this;cc.tween(e).sequence(cc.moveTo(.4,this.endPos),cc.callFunc(function(){i.destroyGold(e),0==i.goldArray.length&&i.isMoveFort&&(i.isMoveFort=!1,i.state=o.idle,i._isAddScore&&t.game.GameLogic.setWinScore(i.playGameId,i.score),i.complete&&i.complete.call(i.caller,i))})).start()},e.prototype.destroyGold=function(e){this.game.poolMgr.Enqueue(e,n.NodeType.gold)},Object.defineProperty(e.prototype,"getStateIsIdle",{get:function(){return this.state==o.idle},enumerable:!1,configurable:!0}),e.prototype.bounceAnimation=function(e,t,i){return cc.repeat(cc.sequence(cc.moveTo(.06,cc.v2(e,t+i)),cc.callFunc(function(){i-=5}),cc.moveTo(.06,cc.v2(e,t))),3)},e.prototype.onUpdate=function(){var e=this;if(this.isupwown)if(this.currUpDownTime>=this.updownInterval||0==this.goldArray.length){this.currCount++,this.currCount==this.createCount&&(this.isupwown=!1);var t=this.game.poolMgr.Dequeue(n.NodeType.gold);this.scoreAndGoldParent.addChild(t);var i=this.createCount>1?this.game.iGameBase.utils_random(this.startPos.x-50,this.startPos.x+50):this.startPos.x;t.setPosition(cc.v2(i,this.startPos.y));var o=this.game.iGameBase.utils_random(this.startPos.y+100,this.startPos.y+200),r=this.game.iGameBase.utils_random(this.startPos.y,this.startPos.y-50);this.goldArray.push(t),cc.tween(t).sequence(cc.sequence(cc.moveTo(.35,cc.v2(i,o)),cc.moveTo(.35,cc.v2(i,r))),this.bounceAnimation(i,r,20),cc.delayTime(.2),cc.callFunc(function(){e.completeCount++,e.completeCount==e.createCount&&(e.isMoveFort=!0)})).start(),this.game.iAudioPlayer.play_sound("huofen",!1,.3),this.currUpDownTime=0}else this.currUpDownTime+=.1;if(this.isMoveFort&&this.goldArray.length>0)if(this.currMoveFortTime>=this.moveInterval||this.goldArray.length==this.createCount){var s=this.goldArray.pop();this.moveToFortAnimation(s),this.currMoveFortTime=0}else this.currMoveFortTime+=.1},e.prototype.release=function(){this.scoreTween&&this.scoreTween.stop(),this.scoreTween=null},e}();i.default=c,cc._RF.pop()},{"./FISHMoHuanHY_PoolManager":"FISHMoHuanHY_PoolManager","./FISHMoHuanHY_ResourceMgr":"FISHMoHuanHY_ResourceMgr"}],FISHMoHuanHY_GrapComp:[function(e,t,i){"use strict";cc._RF.push(t,"b8d84I3UxoZ9ztxogutSwvW","FISHMoHuanHY_GrapComp");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.menu,l=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.graphicsComp=null,t}var i;return n(t,e),i=t,t.prototype.onLoad=function(){i.Instance=this},t.prototype.start=function(){},t.Instance=null,r([l(cc.Graphics)],t.prototype,"graphicsComp",void 0),i=r([c,a("FISHT/GrapComp")],t)}(cc.Component);i.default=h,cc._RF.pop()},{}],FISHMoHuanHY_LaserEffect:[function(e,t,i){"use strict";cc._RF.push(t,"daff7XWw4c5mHR+QjIZvIcW","FISHMoHuanHY_LaserEffect");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=e("../FISHMoHuanHY_GameDefine"),c=e("./FISHMoHuanHY_Laser"),a=cc._decorator,l=a.ccclass,h=a.menu,u=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.laserIdle=null,t.granule=null,t.laserFire=null,t.currWeight=s.FunctionWeight.laser,t.isNext=!1,t}return n(t,e),t.prototype.setGame=function(e){this.game=e,this.laserFire.setGame(this.game)},t.prototype.start=function(){this.laserIdle.width=10,cc.tween(this.laserIdle).to(1.5,{width:100}).call(function(){}).start(),this.granule.play("laserGranule")},t.prototype.SetTotalScore=function(){},t.prototype.initFunction=function(e){this.targetFort=e,this.targetFort.setEffect(this)},t.prototype.playFire=function(e,t){this.granule.node.active=!1,this.laserFire.node.active=!0,this.laserFire.palyLaserFire(e,t,this.playComplete.bind(this)),this.game.iAudioPlayer.play_sound("diancifire")},t.prototype.playComplete=function(){cc.error("\u7535\u78c1\u70ae\u64ad\u653e\u5b8c\u6210"),this.scheduleOnce(this.beforDestroy,.2)},t.prototype.onDestroy=function(){this.game&&!this.game.iGameBase.getExectUpdate()||(cc.error("\u9500\u6bc1\u7535\u78c1\u70ae"),this.targetFort.subEffectWeight(this.currWeight))},t.prototype.nextStep=function(){},t.prototype.lastStep=function(){},t.prototype.beforDestroy=function(){this.node.destroy()},t.prototype.ImmediatelyDestroy=function(){this.unschedule(this.beforDestroy),this.beforDestroy()},r([u(cc.Node)],t.prototype,"laserIdle",void 0),r([u(cc.Animation)],t.prototype,"granule",void 0),r([u(c.default)],t.prototype,"laserFire",void 0),r([l,h("FISHMoHuanHY/LaserEffect")],t)}(cc.Component);i.default=p,cc._RF.pop()},{"../FISHMoHuanHY_GameDefine":"FISHMoHuanHY_GameDefine","./FISHMoHuanHY_Laser":"FISHMoHuanHY_Laser"}],FISHMoHuanHY_Laser:[function(e,t,i){"use strict";cc._RF.push(t,"5a934Wq42DvPRPSSPzf5JHU","FISHMoHuanHY_Laser");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],o=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0});var c=e("../FISHMoHuanHY_GameDefine"),a=cc._decorator,l=a.ccclass,h=a.menu,u=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.catchFish=new Map,t.laserFire=null,t.bulletIndex=0,t.playerId=0,t.collider=null,t.isCheckCollider=!1,t._complete=null,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.onLoad=function(){this.laserFire=this.node.getComponent(cc.Animation),this.collider=this.node.getComponent(cc.Collider)},t.prototype.start=function(){},t.prototype.onDisable=function(){},t.prototype.laserPlayComplete=function(){var e,t;if(this.game.gameId==this.playerId){for(var i=[],o=0;o<c.FunctionCatchCount.laser;o++)i[o]=0;var n=0;try{for(var r=s(this.catchFish.keys()),a=r.next();!a.done;a=r.next()){var l=a.value;i[n]=l,n++}}catch(h){e={error:h}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this.game.iGameBase.EmitEvent(c.EventCode.FunctionCatchFishs,{wChairID:this.game.iGameBase.UserManager_getChairID(),dwBulletIndex:this.bulletIndex,dwFishIndex:i,cbFishCount:this.catchFish.size}),cc.log("\u6fc0\u5149\u7279\u6548\u64ad\u653e\u5b8c\u6210"+this.catchFish.size)}this._complete&&this._complete()},t.prototype.checkStart=function(){this.isCheckCollider=!0},t.prototype.checkEnd=function(){this.isCheckCollider=!1},t.prototype.palyLaserFire=function(e,t,i){this._complete=i,this.bulletIndex=e,this.playerId=t,this.laserFire.play()},t.prototype.lateUpdate=function(){if(this.isCheckCollider){var e=this.game._quadCollision.check(this.game.fishMgr.getGameFish,this.collider);if(e.length>0)for(var t=e.length,i=0;i<t;i++){var o=e[i];if(o&&o.isCanCatch&&this.catchFish.size<c.FunctionCatchCount.laser&&!this.catchFish.has(o.fishInfo.dwFishIndex)&&(o.fishInfo.nFishKindID<118||o.fishInfo.nFishKindID>307)&&o.checkInScreenRegion()&&(this.catchFish.set(o.fishInfo.dwFishIndex,o),this.catchFish.size>=c.FunctionCatchCount.laser)){this.isCheckCollider=!1;break}}}},t.prototype.onDestroy=function(){this.catchFish.clear()},r([l,h("FISHMoHuanHY/Laser")],t)}(cc.Component));i.default=u,cc._RF.pop()},{"../FISHMoHuanHY_GameDefine":"FISHMoHuanHY_GameDefine"}],FISHMoHuanHY_LightingEffect:[function(e,t,i){"use strict";cc._RF.push(t,"79670mvdZpfKS/gliqjoAKT","FISHMoHuanHY_LightingEffect");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=e("../FISHMoHuanHY_GameDefine"),c=e("../FISHMoHuanHY_ResourceMgr"),a=e("./FISHMoHuanHY_ThunderEffect"),l=cc._decorator,h=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currWeight=s.FunctionWeight.lighting,t.isNext=!1,t.thunderFishInfo=null,t.thunderCompArr=null,t.thunderIndex=0,t.compcb=null,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.SetTotalScore=function(){},t.prototype.initFunction=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.targetFort=e,this.targetFort.setEffect(this),this.thunderFishInfo=[],this.thunderCompArr=[]},t.prototype.addFishInfo=function(e){this.thunderFishInfo.push(e)},t.prototype.playAnim=function(e){this.compcb=e,this.thunderIndex=1,this.thunderFishInfo.length>1?this.schedule(this.playThunderHandle,1):this.thunderPlayComplete(0)},t.prototype.playThunderHandle=function(){var e=this;if(this.thunderIndex>=this.thunderFishInfo.length)this.unschedule(this.playThunderHandle);else{var t=this.thunderFishInfo[this.thunderIndex],i=this.game.iGameBase.utils_gen_handler(function(t){var i=e.thunderFishInfo[t].fish,o=e.thunderFishInfo[t].movePos;e.game.fishMgr.setSpecialFish(i,126),i.playShandianDie(o)},this,this.thunderIndex),o=this.game.iGameBase.utils_gen_handler(this.thunderPlayComplete,this),n=this.thunderFishInfo[this.thunderIndex-1].fish;this.playShandianEffect(t.fish.node,n.node,this.thunderIndex,!1,i,o),this.thunderIndex++}},t.prototype.thunderPlayComplete=function(e){if(e>=this.thunderIndex-1){for(var t=this.thunderFishInfo[e].fish,i=0;i<this.thunderFishInfo.length;i++){var o=this.thunderFishInfo.splice(i,1)[0];o.fish.node.stopAllActions(),o.fish.playDieAni(this.targetFort,o.cb),i--}var n=t.getCurrWorldPos();this.playThunderBomb(n),this.compcb&&this.compcb.exec()}},t.prototype.playShandianEffect=function(e,t,i,o,n,r){void 0===o&&(o=!1),i>0&&this.thunderCompArr[i-1].hideIndex();var s=this.game.resourMgr.getRes("thunderEffect",c.ResourceType.initPrefab,cc.Prefab),l=cc.instantiate(s),h=l.getComponent(a.default);h.setGame(this.game),this.node.addChild(l),h.init(t,e,i,r,o,n),this.thunderCompArr[i]=h},t.prototype.playThunderBomb=function(e){e=this.node.convertToNodeSpaceAR(e),this.game.GameLogic.functionLayer.playGoldEffect1(e)},t.prototype.playThunderBombComp=function(e,t){var i=this,o=cc.instantiate(t);this.node.addChild(o),o.setPosition(e);var n=o.getComponent(cc.Animation);n.on(cc.Animation.EventType.FINISHED,function(){o.destroy(),i.beforDestroy()}),n.play("thunderBomb")},t.prototype.onDestroy=function(){this.game&&!this.game.iGameBase.getExectUpdate()||(this.targetFort.subEffectWeight(this.currWeight),this.thunderFishInfo=null,this.thunderCompArr=null)},t.prototype.lastStep=function(){},t.prototype.nextStep=function(){},t.prototype.beforDestroy=function(){for(var e=0;e<this.thunderFishInfo.length;e++){var t=this.thunderFishInfo.splice(e,1)[0];t.fish.node.stopAllActions(),t.fish.playDieAni(this.targetFort,t.cb),e--}this.node.destroy()},t.prototype.ImmediatelyDestroy=function(){this.unscheduleAllCallbacks(),this.beforDestroy()},r([h],t)}(cc.Component));i.default=u,cc._RF.pop()},{"../FISHMoHuanHY_GameDefine":"FISHMoHuanHY_GameDefine","../FISHMoHuanHY_ResourceMgr":"FISHMoHuanHY_ResourceMgr","./FISHMoHuanHY_ThunderEffect":"FISHMoHuanHY_ThunderEffect"}],FISHMoHuanHY_LockFishButton:[function(e,t,i){"use strict";cc._RF.push(t,"cdde7efk49eH9owO7T6+Pr5","FISHMoHuanHY_LockFishButton");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.menu,l=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lockOn=null,t}return n(t,e),t.prototype.setLock=function(e){this.lockOn.node.active=e},t.prototype.update=function(e){this.lockOn.node.angle-=360*e,this.lockOn.node.angle<0&&(this.lockOn.node.angle+=360)},r([l(cc.Sprite)],t.prototype,"lockOn",void 0),r([c,a("FISHMoHuanHY/LockFishButton")],t)}(cc.Component);i.default=h,cc._RF.pop()},{}],FISHMoHuanHY_MyFishSetting:[function(e,t,i){"use strict";cc._RF.push(t,"dbc39Fi5u9IzZu0krv8oa03","FISHMoHuanHY_MyFishSetting");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setBtn=null,t.setPanel=null,t.setPanelMask=null,t.isPlaying=!1,t.setbtnWidget=null,t.setPanelWidget=null,t.scriptName="MySetting",t.iGameBase=null,t.mCaller=null,t.InfoEvn=null,t}return n(t,e),t.prototype.Init=function(e,t,i,o){this.iGameBase=e,cc.error("script===",t),this.scriptName=t,this.mCaller=i,this.InfoEvn=o;var n=this.node,r=cc.find("Setting",n),s=cc.find("layout/Sound/Switch",r);cc.error("==m_Panel_Setting===",s);var c=cc.find("soundOn",s),a=cc.find("soundOff",s);this.iGameBase.AddSetSystem(r,c,a)},t.prototype.start=function(){var e;e=this.node,cc.error("\u8bbe\u7f6e>>>Setting",e),this.setBtn=cc.find("SetBtn",e),cc.error("\u8bbe\u7f6e>>>this.setBtn",this.setBtn),this.SetBtnEvent(this.setBtn.getComponent(cc.Button),!0,!0),this.setPanel=cc.find("Setting",e),this.setPanelWidget=this.setPanel.getComponent(cc.Widget),this.setbtnWidget=this.setBtn.getComponent(cc.Widget),cc.error("\u8bbe\u7f6e1>>>",this.setbtnWidget),this.setPanelMask=cc.find("Mask",this.setPanel),this.SetBtnEvent(this.setPanelMask.getComponent(cc.Button),!1,!0);var t=cc.find("layout",this.setPanel),i=cc.find("Sound",t),o=cc.find("Switch/soundOn",i),n=cc.find("Switch/soundOff",i);this.iGameBase.AddSetSystem(this.setPanel,o,n),this.SetBtnEvent(i.getComponent(cc.Button),!0,!0);var r=cc.find("Info",t);this.SetBtnEvent(r.getComponent(cc.Button),!0,!0);var s=cc.find("ToLgin",t);this.SetBtnEvent(s.getComponent(cc.Button),!0,!0)},t.prototype.SetBtnEvent=function(e,t,i){if(void 0===t&&(t=!0),void 0===i&&(i=!0),null!=e){var o=new cc.Component.EventHandler;o.target=this.node,o.component=this.scriptName,o.handler="BtnEventCallback",e.clickEvents.push(o),e.node.active=t,e.interactable=i}},t.prototype.BtnEventCallback=function(e){var t=e.target;this.OnClickBtn(t)},t.prototype.OnClickBtn=function(e){switch(cc.log("===============>>\u6240\u6709\u6309\u94ae\u70b9\u51fb\u4e8b\u4ef6\uff1a"+e.name),e.name){case"ToLgin":this.iGameBase.onBtnLeaveGame();break;case"Info":this.onMaskClick(),this.showGamInfoPanel();break;case"Sound":this.iGameBase.SettingClick();break;case"Mask":this.onMaskClick();break;case"SetBtn":this.onSetClick()}},t.prototype.onSetClick=function(){var e=this;this.isPlaying||(this.setBtnPos=this.setBtn.getPosition(),this.setbtnWidth=this.setBtn.getContentSize().width,this.setPanelPos=this.setPanel.getPosition(),this.setPanelWidth=this.setPanel.getContentSize().width,this.isPlaying=!0,cc.error("onSetClick:",this.setbtnWidget),cc.tween(this.setBtn).to(.25,{position:cc.v3(this.setBtnPos.x+this.setbtnWidth,this.setBtnPos.y,0)}).call(function(){e.setbtnWidget.right=-e.setbtnWidth,cc.tween(e.setPanel).to(.25,{position:cc.v3(e.setPanelPos.x-e.setPanelWidth,e.setPanelPos.y,0)}).call(function(){e.setPanelWidget.right=0,e.setPanelMask.active=!0,e.isPlaying=!1}).start()}).start())},t.prototype.onMaskClick=function(){var e=this;this.isPlaying||(this.setBtnPos=this.setBtn.getPosition(),this.setbtnWidth=this.setBtn.getContentSize().width,this.setPanelPos=this.setPanel.getPosition(),this.setPanelWidth=this.setPanel.getContentSize().width,this.isPlaying=!0,cc.tween(this.setPanel).to(.25,{position:cc.v3(this.setPanelPos.x+this.setPanelWidth,this.setPanelPos.y,0)}).call(function(){e.setPanelMask.active=!1,e.setPanelWidget.right=-e.setPanelWidth,cc.tween(e.setBtn).to(.25,{position:cc.v3(e.setBtnPos.x-e.setbtnWidth,e.setBtnPos.y,0)}).call(function(){e.setbtnWidget.right=0,e.isPlaying=!1}).start()}).start())},t.prototype.showGamInfoPanel=function(){null!=this.InfoEvn&&this.InfoEvn.call(this.mCaller,!0)},r([a(cc.Node)],t.prototype,"setBtn",void 0),r([a(cc.Node)],t.prototype,"setPanel",void 0),r([a(cc.Node)],t.prototype,"setPanelMask",void 0),r([c],t)}(cc.Component);i.default=l,cc._RF.pop()},{}],FISHMoHuanHY_MyProperty:[function(e,t,i){"use strict";cc._RF.push(t,"b9595hIQQNIOl4RWui9CtcG","FISHMoHuanHY_MyProperty");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=e("./FISHMoHuanHY_GameDefine"),c=cc._decorator,a=c.ccclass,l=c.menu,h=c.property,u=[1,5,10,20,100],p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnScoreArray=[],t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},t.prototype.touchEnd=function(){this.OnCloseBtnClick()},t.prototype.show=function(e){for(var t=this.btnScoreArray.length,i=0;i<t-1;i++)cc.find("Background/Label",this.btnScoreArray[i].node).getComponent(cc.Label).string="$"+u[i];if(e>=100){for(i=0;i<t;i++)this.btnScoreArray[i].interactable=e>=100*u[i];this.btnScoreArray[t-1].interactable=!0}else for(i=0;i<t;i++)this.btnScoreArray[i].interactable=!1;this.currWinScore=e,this.node.active=!0},t.prototype.OnCloseBtnClick=function(){this.node.active=!1},t.prototype.OnScoreBtnClick=function(e,t){var i=t<6?100*u[t-1]:this.currWinScore;cc.error("\u5f53\u524d\u5206\u6570\uff1a"+this.currWinScore,"\u63d0\u53d6\u5206\u6570\uff1a",i),this.game.iGameBase.EmitEvent(s.EventCode.converProperty,i),this.OnCloseBtnClick()},r([h([cc.Button])],t.prototype,"btnScoreArray",void 0),r([a,l("FISHMoHuanHY/MyProperty")],t)}(cc.Component);i.default=p,cc._RF.pop()},{"./FISHMoHuanHY_GameDefine":"FISHMoHuanHY_GameDefine"}],FISHMoHuanHY_PandaEffect:[function(e,t,i){"use strict";cc._RF.push(t,"cbd18v2+blLSZ3XCht+tzxW","FISHMoHuanHY_PandaEffect");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=e("../FISHMoHuanHY_GameDefine"),c=cc._decorator,a=c.ccclass,l=c.menu,h=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pandabomb=null,t.pandaout=null,t.pandaTitle=null,t.pandaEffectSelectUI=null,t.jarNode=null,t.uititleNode=null,t.uijarNodes=[],t.timeLable=null,t.countTime=20,t.jarIndex=0,t.currSelectIndex=-1,t.currWinScore=0,t.currpandaMulScore=[],t.isSelect=!1,t.currIndex=0,t.bulletIndex=0,t.targetFort=null,t.currWeight=s.FunctionWeight.panda,t.isNext=!0,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.SetTotalScore=function(){},t.prototype.initFunction=function(e){var t=this;cc.error("\u521d\u59cb\u5316\u718a\u732beffect"),this.targetFort=e,this.currIndex=0,this.playId=e.gameId,this.targetFort.setEffect(this),this.isSelect=!1,this.pandaEffectSelectUI.setParent(this.targetFort.functionFort.node),this.pandaEffectSelectUI.setPosition(0,30),this.jarNode=cc.find("jar",this.pandaout),this.timeLable=cc.find("timeLabel",this.pandaEffectSelectUI).getComponent(cc.Label),this.uititleNode=cc.find("brand",this.pandaEffectSelectUI);for(var i=function(e){o.uijarNodes[e]=cc.find("jarLayout/jar_"+e,o.pandaEffectSelectUI);var t=cc.find("jar_0",o.uijarNodes[e]),i=o;o.targetFort.gameId==o.game.gameId&&t.on(cc.Node.EventType.MOUSE_ENTER,function(){i.showUIjar(e)},o)},o=this,n=0;n<3;n++)i(n);this.pandabomb.active=!0,this.game.GameLogic.functionLayer.playGoldEffect(cc.v2()),this.schedule(function(){t.game.GameLogic.functionLayer.playGoldEffect(cc.v2())},1,1),this.scheduleOnce(this.showTitle,4)},t.prototype.showTitle=function(){var e=this;this.pandabomb.active=!1,this.pandaout.active=!0,this.pandaTitle.active=!0,this.pandaTitle.scale=0,this.targetFort.IsOnTop&&(this.pandaTitle.angle=-180),cc.tween(this.pandaTitle).to(.2,{scale:1.5}).to(.8,{scale:.6}).call(function(){e.pandaTitle.active=!1,e.uititleNode.active=!0,e.pandaEffectSelectUI.active=!0,e.showJar()}).start();var t=this.uititleNode.convertToWorldSpaceAR(cc.v2());t=this.pandaout.convertToNodeSpaceAR(t),cc.tween(this.pandaTitle).delay(.2).to(.8,{position:cc.v3(t.x,t.y,0)}).start()},t.prototype.showJar=function(){var e=this;if(cc.error("\u7f50\u5b50\u52a8\u753b",this.jarIndex),3==this.jarIndex)this.pandaout.active=!1,this.pandabomb.active=!1,this.showSelectUI();else{var t=this;this.jarNode.active=!0,this.jarNode.scale=0,this.jarNode.setPosition(0,0);var i=this.uijarNodes[this.jarIndex].convertToWorldSpaceAR(cc.v2());i=this.pandaout.convertToNodeSpaceAR(i),cc.tween(this.jarNode).to(.2,{scale:1}).to(.7,{scale:.2}).to(.1,{scale:.3}).start(),cc.tween(this.jarNode).delay(.2).to(.8,{position:cc.v3(i.x,i.y,0)}).call(function(){t.jarNode.active=!1,t.uijarNodes[e.jarIndex].getChildByName("jar_0").active=!0,t.jarIndex++,t.showJar()}).start()}},t.prototype.showSelectUI=function(){cc.error("showSelectUI"),this.showUIjar(0),this.targetFort.gameId==this.game.gameId&&this.schedule(this.Timer,1,20)},t.prototype.Timer=function(){this.countTime--,this.timeLable.string=""+this.countTime,this.countTime<=0&&(this.countTime=0,cc.error("\u5012\u8ba1\u65f6\u7ed3\u675f\uff0c\u81ea\u52a8\u9009\u62e9\u5f53\u524d\u9009\u62e9"),this.onSelectUIBtnClick(null,this.currSelectIndex+""))},t.prototype.showUIjar=function(e){if(!this.isSelect){cc.error("this.currSelectIndex",this.currSelectIndex,e);for(var t=0;t<3;t++)this.uijarNodes[t].scale=.3,this.uijarNodes[t].width=0,cc.find("lightbg",this.uijarNodes[t]).active=!1,cc.find("lightQuan",this.uijarNodes[t]).active=!1;this.uijarNodes[e].scale=.5,this.uijarNodes[e].width=70,this.uijarNodes[e].getChildByName("lightbg").active=!0,this.uijarNodes[e].getChildByName("lightQuan").active=!0,this.currSelectIndex=e}},t.prototype.playWinScore=function(e,t,i){cc.error("\u663e\u793a\u718a\u732b\u8d62\u5206\uff1a",e,t),this.showUIjar(e),this.currWinScore=t,this.currpandaMulScore=i,this.scheduleOnce(this.playWinScore1,1)},t.prototype.playWinScore1=function(){var e=this,t=this.currSelectIndex,i=this.currWinScore;cc.error("\u663e\u793a\u718a\u732b\u8d62\u520622222\uff1a",t,i);var o=this.uijarNodes[t];cc.find("lightbg",o).active=!1,cc.find("lightQuan",o).active=!1,cc.find("jar_0",o).active=!1;var n=cc.find("jarWinScore",o),r=cc.find("jarWinScore/scoreLabel",o).getComponent(cc.Label),s=function(){var e=this;cc.tween(r.node).to(.5,{scale:1.5}).call(function(){for(var i=0;i<3;i++)i==t?cc.find("score",e.uijarNodes[i]).active=!1:(cc.find("score",e.uijarNodes[i]).active=!0,cc.find("score",e.uijarNodes[i]).getComponent(cc.Label).string=e.game.iGameBase.getNum(e.currpandaMulScore[i],!0))}).delay(1).call(function(){for(var i=0;i<3;i++)i==t||(cc.find("lightbg",e.uijarNodes[i]).active=!1,cc.find("lightQuan",e.uijarNodes[i]).active=!1,cc.find("jar_0",e.uijarNodes[i]).active=!1,cc.find("score",e.uijarNodes[i]).active=!1);cc.tween(n).to(.5,{scale:1.5,position:cc.v3(0,350,0)}).delay(1).to(.5,{scale:1,position:cc.v3(0,0,0)}).call(function(){e.hide()}).start()}).start()};cc.find("jar_Open",o).active=!0,this.scheduleOnce(function(){cc.find("jar_Open",o).active=!1,n.active=!0,e.game.iGameBase.updatenNumberAnim(r,i,3,s.bind(e))},2)},t.prototype.onSelectUIBtnClick=function(e,t){if(this.targetFort.gameId==this.game.gameId){if(this.unschedule(this.Timer),this.timeLable.string="",this.isSelect)return;if(""!=t){var i=Number(t);cc.error("\u53d1\u9001\u6355\u83b7\u718a\u732b:",i),this.game.iGameBase.EmitEvent(s.EventCode.sendCatchPanda,{index:i}),this.isSelect=!0}else cc.error("customEventData == null")}},t.prototype.nextStep=function(){},t.prototype.lastStep=function(){},t.prototype.onDestroy=function(){this.game&&!this.game.iGameBase.getExectUpdate()||this.targetFort.subEffectWeight(this.currWeight)},t.prototype.beforDestroy=function(){this.node&&this.node.isValid&&(this.unscheduleAllCallbacks(),this.pandaEffectSelectUI.destroy(),this.node.stopAllActions(),this.node.destroy())},t.prototype.ImmediatelyDestroy=function(){this.beforDestroy()},t.prototype.hide=function(){cc.error("\u718a\u732b\uff0chide"),this.targetFort.showFunctionTotalScore(this.currWinScore,s.FunctionWeight.panda),this.ImmediatelyDestroy()},r([h(cc.Node)],t.prototype,"pandabomb",void 0),r([h(cc.Node)],t.prototype,"pandaout",void 0),r([h(cc.Node)],t.prototype,"pandaTitle",void 0),r([h(cc.Node)],t.prototype,"pandaEffectSelectUI",void 0),r([a,l("FISHMoHuanHY/PandaEffect")],t)}(cc.Component);i.default=u,cc._RF.pop()},{"../FISHMoHuanHY_GameDefine":"FISHMoHuanHY_GameDefine"}],FISHMoHuanHY_PoolManager:[function(e,t,i){"use strict";cc._RF.push(t,"d37bccI94GsYgL52Vh0fUop","FISHMoHuanHY_PoolManager");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],o=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0}),i.FISHA_Pool=i.NodeType=void 0;var c,a=e("./FISHMoHuanHY_ResourceMgr"),l=cc._decorator,h=l.ccclass,u=l.property,p=l.menu,d=(l.executeInEditMode,l.executionOrder);(function(e){e[e.none=0]="none",e[e.bullet=1]="bullet",e[e.bulletEffect=2]="bulletEffect",e[e.gold=3]="gold",e[e.score=4]="score",e[e.fishShadow=5]="fishShadow",e[e.fishSkeletonShadow=6]="fishSkeletonShadow",e[e.flame=7]="flame",e[e.goldBomb=8]="goldBomb",e[e.goldBomb1=9]="goldBomb1",e[e.coin=10]="coin"})(c=i.NodeType||(i.NodeType={}));var f=function(){function e(){this.isInitRes=!0,this.nodeType=c.none,this.prefab=null,this.resname="none",this.initCount=0,this.pool=null,this.pool=new cc.NodePool}return e.prototype.setGame=function(e){this.game=e},e.prototype.Init=function(){var e=this;if(this.isInitRes)for(var t=0;t<this.initCount;t++){var i=cc.instantiate(this.prefab);this.pool.put(i)}else cc.error("====",this.resname),this.game.resourMgr.loadOther(this.resname,a.ResourceType.initPrefab,cc.Prefab,function(t){e.prefab=t;var i=cc.instantiate(t);e.pool.put(i)})},e.prototype.Dequeue=function(){return this.pool.size()>0?this.pool.get():this.isInitRes?cc.instantiate(this.prefab):void cc.error("\u5f53\u524d\u8d44\u6e90\u4e0d\u662f\u521d\u59cb\u8d44\u6e90\uff0c\u9700\u8981\u4f7f\u7528\u5f02\u6b65\u52a0\u8f7d")},e.prototype.AsyncDequeue=function(e){this.pool.size()>0?e&&e(this.pool.get()):(this.isInitRes,e&&e(cc.instantiate(this.prefab)))},e.prototype.Enqueue=function(e){e.stopAllActions(),this.pool.put(e)},e.prototype.clear=function(){this.pool.clear()},r([u({tooltip:"\u662f\u5426\u662f\u521d\u59cb\u8d44\u6e90"})],e.prototype,"isInitRes",void 0),r([u({type:cc.Enum(c),tooltip:"1:\u5b50\u5f39 2:\u5b50\u5f39\u7279\u6548 3:\u91d1\u5e01 4:\u5206\u6570 5:\u9c7c\u9634\u5f71 6:\u94bb\u5934\u5c3e\u7130"})],e.prototype,"nodeType",void 0),r([u({type:cc.Prefab,visible:function(){return this.isInitRes}})],e.prototype,"prefab",void 0),r([u({tooltip:"\u8d44\u6e90\u540d\u79f0",visible:function(){return!this.isInitRes}})],e.prototype,"resname",void 0),r([u({type:cc.Integer,tooltip:"\u6c60\u4e2d\u7684\u521d\u59cb\u6570\u91cf"})],e.prototype,"initCount",void 0),r([h("FISHMoHuanHY_Pool")],e)}();i.FISHA_Pool=f;var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.poolArray=[],t.poolMap=null,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.init=function(){this.poolMap=new Map;for(var e=0;e<this.poolArray.length;e++){var t=this.poolArray[e];t.Init(),this.poolMap.set(t.nodeType,t)}},t.prototype.Dequeue=function(e){if(this.poolMap.has(e))return this.poolMap.get(e).Dequeue();cc.error("\u6ca1\u6709\u8fd9\u4e2a\u7c7b\u578b\u7684\u6c60\uff1a"+c[e])},t.prototype.AsyncDequeue=function(e,t){this.poolMap.has(e)?this.poolMap.get(e).AsyncDequeue(t):cc.error("\u6ca1\u6709\u8fd9\u4e2a\u7c7b\u578b\u7684\u6c60\uff1a"+c[e])},t.prototype.Enqueue=function(e,t,i){var o;this.poolMap.has(t)?(o=this.poolMap.get(t)).Enqueue(e):((o=new f).nodeType=t,o.isInitRes=!1,o.resname=i,o.Enqueue(e),this.poolMap.set(t,o))},t.prototype.onDestroy=function(){var e,t;try{for(var i=s(this.poolMap.keys()),o=i.next();!o.done;o=i.next()){var n=o.value;this.poolMap.delete(n)}}catch(r){e={error:r}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}this.poolArray.length},r([u([f])],t.prototype,"poolArray",void 0),r([h,p("FISHMoHuanHY/PoolManager"),d(-1)],t)}(cc.Component);i.default=y,cc._RF.pop()},{"./FISHMoHuanHY_ResourceMgr":"FISHMoHuanHY_ResourceMgr"}],FISHMoHuanHY_QuadtreeCollision:[function(e,t,i){"use strict";cc._RF.push(t,"f17b7Lq3HM07BTVjxCjIl68","FISHMoHuanHY_QuadtreeCollision"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e){this._tree=new r(e)}return e.prototype.check=function(e,t){var i=[];if(this._tree){this._tree.clear();var o=cc.director.getCollisionManager();o.updateCollider(t);for(var r=0,s=e.length;r<s;r++){var c,a=e[r];if(e[r].IsDragon)for(var l=a.colliderArray.length,h=0;h<l;h++){var u=a.colliderArray[h];o.updateCollider(u);var p={x:(c=u.world.aabb).x,y:c.y,height:c.height,width:c.width,collider:u,fish:a};this._tree.insert(p)}else u=e[r].collider,o.updateCollider(u),p={x:(c=u.world.aabb).x,y:c.y,height:c.height,width:c.width,collider:u,fish:a},this._tree.insert(p)}this._tree.retrieve(t.world.aabb).forEach(function(e){n(e.collider,t)&&-1==i.indexOf(e.fish)&&i.push(e.fish)})}return i},e}();function n(e,t){if(!cc.director.getCollisionManager().shouldCollide(e,t))return!1;var i=e.world,o=t.world;if(!i.aabb.intersects(o.aabb))return!1;var n=e instanceof cc.BoxCollider||e instanceof cc.PolygonCollider,r=t instanceof cc.BoxCollider||t instanceof cc.PolygonCollider,s=e instanceof cc.CircleCollider,c=t instanceof cc.CircleCollider;return n&&r?cc.Intersection.polygonPolygon(i.points,o.points):s&&c?cc.Intersection.circleCircle(i,o):n&&c?cc.Intersection.polygonCircle(i.points,o):s&&r?cc.Intersection.polygonCircle(o.points,i):(cc.error(6601,cc.js.getClassName(e),cc.js.getClassName(t)),!1)}i.default=o;var r=function(){function e(e,t,i,o){this.max_objects=null,this.max_levels=null,this.level=null,this.bounds=null,this.objects=null,this.nodes=null,this.max_objects=t||10,this.max_levels=i||4,this.level=o||0,this.bounds=e,this.objects=[],this.nodes=[]}return e.prototype.split=function(){var t=this.level+1,i=this.bounds.width/4,o=this.bounds.height/4,n=this.bounds.width/2,r=this.bounds.height/2;this.bounds.x,this.bounds.y,this.nodes[0]=new e({x:3*i,y:3*o,width:n,height:r},this.max_objects,this.max_levels,t),this.nodes[1]=new e({x:i,y:3*o,width:n,height:r},this.max_objects,this.max_levels,t),this.nodes[2]=new e({x:i,y:o,width:n,height:r},this.max_objects,this.max_levels,t),this.nodes[3]=new e({x:3*i,y:o,width:n,height:r},this.max_objects,this.max_levels,t)},e.prototype.getIndex=function(e){var t=[],i=this.bounds.x+this.bounds.width/2,o=this.bounds.y+this.bounds.height/2,n=e.y+e.height>o,r=e.x<i,s=e.x+e.width>i,c=e.y<o;return n&&s&&t.push(0),r&&n&&t.push(1),r&&c&&t.push(2),s&&c&&t.push(3),t},e.prototype.insert=function(e){var t,i=0;if(this.nodes.length)for(t=this.getIndex(e),i=0;i<t.length;i++)this.nodes[t[i]].insert(e);else if(this.objects.push(e),this.objects.length>this.max_objects&&this.level<this.max_levels){for(this.nodes.length||this.split(),i=0;i<this.objects.length;i++){t=this.getIndex(this.objects[i]);for(var o=0;o<t.length;o++)this.nodes[t[o]].insert(this.objects[i])}this.objects=[]}},e.prototype.retrieve=function(e){var t=this.getIndex(e),i=this.objects;if(this.nodes.length)for(var o=0;o<t.length;o++)i=i.concat(this.nodes[t[o]].retrieve(e));return i=i.filter(function(e,t){return i.indexOf(e)>=t})},e.prototype.clear=function(){this.objects=[];for(var e=0;e<this.nodes.length;e++)this.nodes.length&&this.nodes[e].clear();this.nodes=[]},e}();cc._RF.pop()},{}],FISHMoHuanHY_ResourceMgr:[function(e,t,i){"use strict";cc._RF.push(t,"2c149aAFpMv4HSGctiMRoZA","FISHMoHuanHY_ResourceMgr");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0}),i.ResourceType=i.CommonResType=void 0;var s,c,a=cc._decorator,l=a.ccclass;a.menu,a.property,function(e){e[e.fishPath=0]="fishPath",e[e.font=1]="font",e[e.fishIcon=2]="fishIcon",e[e.fishSkeleton=3]="fishSkeleton",e[e.fishPrefab=4]="fishPrefab",e[e.Prefab=5]="Prefab",e[e.font_Cannon=6]="font_Cannon",e[e.font_function=7]="font_function",e[e.DragonDie=8]="DragonDie",e[e.imgs=9]="imgs",e[e.function=10]="function",e[e.Laser=11]="Laser"}(i.CommonResType||(i.CommonResType={})),function(e){e[e.none=0]="none",e[e.fishPrefab=1]="fishPrefab",e[e.initPrefab=2]="initPrefab",e[e.music=3]="music",e[e.sound=4]="sound",e[e.common=5]="common",e[e.font=6]="font",e[e.other=7]="other",e[e.fishSelect=8]="fishSelect",e[e.fishPath=9]="fishPath",e[e.DragonDie=10]="DragonDie",e[e.imgs=11]="imgs",e[e.function=12]="function",e[e.Laser=13]="Laser"}(s=i.ResourceType||(i.ResourceType={})),function(e){e.initPrefab="Res/Prefab/",e.fishPrefab="Res/fishPrefab/",e.sound="Res/Sounds/sound/",e.music="Res/Sounds/music/",e.common="Res/imgs/Common/",e.font="Res/imgs/Common/font/",e.other="PreloadRes/Prefab/",e.fishSelect="Res/fishSelect/",e.fishPath="Res/fishPath/",e.DragonDie="Preload/DragonDie/",e.imgs="Res/imgs/",e.function="Res/function/",e.Laser="Preload/Laser/"}(c||(c={}));var h=function(e){function t(){var t=e.call(this)||this;return t.KindID=0,t.iMrgBase=null,t.currBundle=null,t.preloadResArray=null,t.preloadIndex=0,t.isDestroy=!1,t.commonBundle=null,t.LoadingResourceMap=null,t.resMap=null,t._loadCompleteMap=null,t.currBundle=cc.assetManager.getBundle("FISHMoHuanHY"),t.preloadResArray=t.currBundle.getDirWithPath("PreloadRes",cc.Prefab),t}return n(t,e),t.prototype.setIMrgBase=function(e){this.iMrgBase=e,this.iMrgBase.setGameBundle(this.currBundle),this.iMrgBase.setPreloadArray(this.preloadResArray),this.iMrgBase.preloadRes()},t.prototype._getResPath=function(e,t){return c[s[e]]+t},t.prototype.getRes=function(e,t,i){var o=this._getResPath(t,e);return this.currBundle.get(o,i)},t.prototype.loadOther=function(e,t,i,o,n){void 0===n&&(n=!1);var r=this._getResPath(t,e);this.iMrgBase.load(r,i,o,n)},t.prototype.getSelfRes=function(e,t,i){var o=c[s[t]]+e;return this.currBundle.get(o,i)},t.prototype.loadFishSelect=function(e,t,i,o){var n=c[s[i]]+e;this.iMrgBase.load(n,t,o,!1)},t.prototype.preloadRes=function(){var e=this;if(this.isDestroy)cc.error("\u5df2\u7ecf\u9500\u6bc1\u573a\u666f");else if(this.preloadIndex>=this.preloadResArray.length)cc.error("\u9884\u52a0\u8f7d\u5b8c\u6210");else{var t=this.preloadResArray[this.preloadIndex];this.load(t.path,cc.Prefab,function(){e.preloadIndex++,e.preloadRes()})}},t.prototype.load=function(e,t,i,o){void 0===o&&(o=!1),this._load(e,t,i,!1,o)},t.prototype._load=function(e,t,i,o,n){if(void 0===o&&(o=!1),void 0===n&&(n=!1),this.isDestroy)i&&i(null);else{var r=o?this.commonBundle:this.currBundle,s=r.getInfoWithPath(e).uuid,c=this,a=this.LoadingResourceMap.has(s);i&&(n&&a||(this._loadCompleteMap.has(s)?this._loadCompleteMap.get(s).push(i):this._loadCompleteMap.set(s,[i]))),a?cc.error("\u6b63\u5728\u52a0\u8f7d\u4e2d\uff1a",e):this.resMap.has(s)?this._loadComplete(s):this._loadRes(r,e,t,s,function(e){e&&c._loadComplete(s)})}},t.prototype._loadComplete=function(e){for(var t=this._loadCompleteMap.get(e),i=0;i<t.length;i++){var o=t[i],n=this.resMap.get(e);o&&o(n),t.splice(i,1),i--}this._loadCompleteMap.delete(e)},t.prototype._loadRes=function(e,t,i,o,n){var r=this;this.LoadingResourceMap.set(o,!0),e.load(t,i,function(e,t){r.isDestroy?n&&n(null):e?(cc.error("\u52a0\u8f7d\u8d44\u6e90\u5f02\u5e38\uff1a",e.message),r.LoadingResourceMap.delete(o),n&&n(null)):(r.resMap.set(o,t),r.LoadingResourceMap.delete(o),n&&n(t))})},t.prototype.release=function(){var e=this;this.isDestroy=!0,this.resMap.forEach(function(t,i){cc.assetManager.releaseAsset(t),e.resMap.delete(i)}),this.resMap.clear(),this.resMap=null,this.LoadingResourceMap.clear(),this.LoadingResourceMap=null,this._loadCompleteMap.clear(),this._loadCompleteMap=null,this.currBundle=null,this.commonBundle.releaseAll(),cc.assetManager.removeBundle(this.commonBundle),this.commonBundle=null},r([l],t)}(cc.Component);i.default=h,cc._RF.pop()},{}],FISHMoHuanHY_RotateAround:[function(e,t,i){"use strict";cc._RF.push(t,"c418aGv9qkw2oaOFwU2ynXE","FISHMoHuanHY_RotateAround");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.menu,l=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetPos=null,t.clockwise=!0,t.timePerRound=.5,t.angle=0,t.radius=0,t.isRotating=!1,t.expendTime=0,t}return n(t,e),t.prototype.onLoad=function(){this.originPos=this.node.getPosition()},t.prototype.onDisable=function(){},t.prototype.run=function(e){this.angle=0;var t=e.convertToWorldSpaceAR(cc.v2());this._targetPos=this.node.parent.convertToNodeSpaceAR(t),this.radius=this.getDistance(this._targetPos,this.node.getPosition()),this.expendTime=0,this.isRotating=!0},t.prototype.getDistance=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},t.prototype.update=function(e){if(this.isRotating&&this._targetPos){if(this.expendTime>=2*this.timePerRound)return this.isRotating=!1,this.node.setPosition(this.originPos),void(this.node.angle=0);var t=Math.PI/180*this.angle,i=cc.v2(0,1).mul(this.radius).rotate(t).sub(cc.v2(0,this.radius));this.node.setPosition(i),this.node.angle=this.angle;var o=e*(360/this.timePerRound);this.angle+=o,this.angle>=360?this.angle%=360:this.angle<=-360&&(this.angle%=-360),this.expendTime+=e}},r([l({tooltip:"\u987a\u65f6\u9488\u65cb\u8f6c"})],t.prototype,"clockwise",void 0),r([c,a("FISHMoHuanHY/RotateAround")],t)}(cc.Component);i.default=h,cc._RF.pop()},{}],FISHMoHuanHY_RuleDetails:[function(e,t,i){"use strict";cc._RF.push(t,"7d6de0+1x/y0RC8wPiBXWDz","FISHMoHuanHY_RuleDetails");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sv=null,t}return n(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},t.prototype.touchEnd=function(){this.node.active=!1},t.prototype.show=function(){this.node.setSiblingIndex(this.node.parent.childrenCount-1),this.sv.setContentPosition(cc.v2()),this.node.active=!0},r([a(cc.ScrollView)],t.prototype,"sv",void 0),r([c],t)}(cc.Component);i.default=l,cc._RF.pop()},{}],FISHMoHuanHY_SelectFishItem:[function(e,t,i){"use strict";cc._RF.push(t,"77bc6lS/d2qRj9d+5PcFKRP","FISHMoHuanHY_SelectFishItem");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectSign=null,t.fishSprite=null,t.lblMultiple=null,t.infoBg=null,t.id=-1,t.isSelect=!1,t}return n(t,e),t.prototype.setUI=function(e,t){var i="";e.minScore>0?(i="x"+e.minScore,e.maxScore>0&&(i+="~"+e.maxScore),this.infoBg.active=!0):this.infoBg.active=!1,this.lblMultiple.string=i,this.fishSprite.spriteFrame=t,this.id=e.fishId,this.node.name=String(e.fishId),this.node.active=!0},t.prototype.setStatu=function(e){void 0===e&&(e=!1),this.isSelect=e,this.selectSign.active=this.isSelect},t.prototype.onFishSettingSelect=function(){this.isSelect=!this.isSelect,this.selectSign.active=this.isSelect},r([a(cc.Node)],t.prototype,"selectSign",void 0),r([a(cc.Sprite)],t.prototype,"fishSprite",void 0),r([a(cc.Label)],t.prototype,"lblMultiple",void 0),r([a(cc.Node)],t.prototype,"infoBg",void 0),r([c],t)}(cc.Component);i.default=l,cc._RF.pop()},{}],FISHMoHuanHY_ShootSelectSetting:[function(e,t,i){"use strict";cc._RF.push(t,"da09451zvJwBqenZz5oLyQO","FISHMoHuanHY_ShootSelectSetting");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],o=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0});var c=e("./FISHMoHuanHY_ResourceMgr"),a=e("./FISHMoHuanHY_SelectFishItem"),l=cc._decorator,h=l.ccclass,u=l.menu,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefab=null,t.contentNode=null,t.onOk=null,t.fishSelectTypeMap=[{fishId:130,minScore:0,maxScore:0},{fishId:129,minScore:0,maxScore:0},{fishId:128,minScore:0,maxScore:0},{fishId:127,minScore:0,maxScore:0},{fishId:126,minScore:0,maxScore:0},{fishId:125,minScore:0,maxScore:0},{fishId:124,minScore:0,maxScore:0},{fishId:123,minScore:0,maxScore:0},{fishId:122,minScore:0,maxScore:0},{fishId:121,minScore:0,maxScore:0},{fishId:120,minScore:0,maxScore:0},{fishId:119,minScore:80,maxScore:150},{fishId:118,minScore:60,maxScore:100},{fishId:117,minScore:30,maxScore:80},{fishId:116,minScore:20,maxScore:60},{fishId:115,minScore:20,maxScore:60},{fishId:114,minScore:20,maxScore:60},{fishId:113,minScore:18,maxScore:0},{fishId:112,minScore:15,maxScore:0},{fishId:111,minScore:12,maxScore:0},{fishId:110,minScore:10,maxScore:0},{fishId:109,minScore:9,maxScore:0},{fishId:108,minScore:8,maxScore:0},{fishId:107,minScore:7,maxScore:0},{fishId:106,minScore:6,maxScore:0},{fishId:105,minScore:5,maxScore:0},{fishId:104,minScore:4,maxScore:0},{fishId:103,minScore:3,maxScore:0},{fishId:102,minScore:2,maxScore:0},{fishId:101,minScore:2,maxScore:0}],t.currSelectFishMap=new Map,t.fishNodes=[],t.scriptName="FISHMoHuanHY_ShootSelectSetting",t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},t.prototype.touchEnd=function(){this.node.active=!1},t.prototype.start=function(){var e=this,t=this;this.game.resourMgr.loadOther("fishSelect",c.ResourceType.fishSelect,cc.SpriteAtlas,function(i){for(var o=0,n=e.fishSelectTypeMap.length;o<n;o++)t.setUI(o,i)})},t.prototype.setUI=function(e,t){var i=this.fishSelectTypeMap[e],o=cc.instantiate(this.prefab),n=o.addComponent(a.default);this.SetBtnEvent(o.getComponent(cc.Button),!0,!0),n.selectSign=cc.find("selecLlight",o),n.fishSprite=o.children[1].getComponent(cc.Sprite),n.lblMultiple=cc.find("Label",o).getComponent(cc.Label),n.infoBg=cc.find("info",o),n.setUI(i,t.getSpriteFrame(String(i.fishId))),this.fishNodes.push(n),this.contentNode.addChild(o)},t.prototype.onEnable=function(){for(var e=0,t=this.fishNodes.length;e<t;e++){var i=this.fishNodes[e],o=this.currSelectFishMap.has(i.id);i.setStatu(o)}},t.prototype.IsSelectFish=function(){return this.currSelectFishMap.size>0},t.prototype.onCloseBtnClick=function(){this.node.active=!1},t.prototype.onCancelBtnClick=function(){for(var e=0,t=this.fishNodes.length;e<t;e++)this.fishNodes[e].setStatu()},t.prototype.onOKBtnClick=function(){this.node.active=!1,this.currSelectFishMap.clear();for(var e=0,t=this.fishNodes.length;e<t;e++){var i=this.fishNodes[e];i.isSelect&&this.currSelectFishMap.set(i.id,!0)}this.onOk&&this.onOk()},t.prototype.getCurrentSelectFishID=function(){var e,t,i=[];try{for(var o=s(this.currSelectFishMap.keys()),n=o.next();!n.done;n=o.next()){var r=n.value;i.push(r)}}catch(c){e={error:c}}finally{try{n&&!n.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return i},t.prototype.SetBtnEvent=function(e,t,i){if(void 0===t&&(t=!0),void 0===i&&(i=!0),null!=e){var o=new cc.Component.EventHandler;o.target=this.node,o.component=this.scriptName,o.handler="BtnEventCallback",e.clickEvents.push(o),e.node.active=t,e.interactable=i}},t.prototype.BtnEventCallback=function(e){var t=e.target;this.OnClickBtn(t)},t.prototype.OnClickBtn=function(e){switch(cc.log("===============>>\u6240\u6709\u6309\u94ae\u70b9\u51fb\u4e8b\u4ef6\uff1a"+e.name),e.name){case"closebtn":this.onCloseBtnClick();break;case"OKBtn":this.onOKBtnClick();break;case"ClearBtn":this.onCancelBtnClick();break;default:e.getComponent(a.default).onFishSettingSelect()}},r([p(cc.Node)],t.prototype,"prefab",void 0),r([p(cc.Node)],t.prototype,"contentNode",void 0),r([h,u("FISHMoHuanHY/ShootSelectSetting")],t)}(cc.Component);i.default=d,cc._RF.pop()},{"./FISHMoHuanHY_ResourceMgr":"FISHMoHuanHY_ResourceMgr","./FISHMoHuanHY_SelectFishItem":"FISHMoHuanHY_SelectFishItem"}],FISHMoHuanHY_SuperbombEffect:[function(e,t,i){"use strict";cc._RF.push(t,"c0a75i7fIjRiBgVeWxoZUCM","FISHMoHuanHY_SuperbombEffect");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=e("../FISHMoHuanHY_GameDefine"),c=cc._decorator,a=c.ccclass,l=c.menu,h=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bomb=null,t.lblIndex=null,t.haloAni=null,t.currIndex=0,t.bulletIndex=0,t.targetFort=null,t.currWeight=s.FunctionWeight.superBomb,t.isNext=!0,t.bombRotateSoundId=-1,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.SetTotalScore=function(){},t.prototype.initFunction=function(e,t){var i=this;this.targetFort=e,this.currIndex=0,this.playId=e.gameId,this.bulletIndex=t,this.targetFort.setEffect(this),this.haloAni.on(cc.Animation.EventType.FINISHED,function(){i.haloAni.node.active=!1}),this.rotateSuperBomb(this.bomb),this.showSuperBomb(this.game.GameLogic.functionLayer.points[this.currIndex])},t.prototype.rotateSuperBomb=function(e){var t=cc.repeatForever(cc.sequence(cc.rotateBy(.6,-180),cc.delayTime(.015)));cc.tween(e).then(t).start()},t.prototype.showSuperBomb=function(e){var t=this,i=this,o=0==this.currIndex?2:1;this.lblIndex.string=(this.currIndex+1).toString(),cc.error("superbomb_position :",e);var n=cc.sequence(cc.moveTo(1.5,e),cc.callFunc(function(){i.haloAni.node.active=!0,i.bombRotateSoundId=t.game.iAudioPlayer.play_sound("bigSpecialBomb"),i.haloAni.play().repeatCount=0==i.currIndex?2:1}),cc.delayTime(o),cc.callFunc(function(){var e=i.node.convertToWorldSpaceAR(cc.v2());e=t.game.bulletMgr.node.convertToNodeSpaceAR(e),i.bombRotateSoundId>-1&&t.game.iAudioPlayer.stop_sound(i.bombRotateSoundId),t.game.bulletMgr.playHit({pos:e,hitType:s.HitType.bigBang,bulletIndex:i.bulletIndex,bomb:s.bombType.superBomb,playerId:i.playId}),cc.error("pos :",e)}));cc.tween(this.node).then(n).start()},t.prototype.nextStep=function(){this.currIndex++,this.currIndex>=this.game.GameLogic.functionLayer.points.length&&(this.currIndex=0),this.showSuperBomb(this.game.GameLogic.functionLayer.points[this.currIndex])},t.prototype.lastStep=function(){},t.prototype.onDestroy=function(){this.game&&!this.game.iGameBase.getExectUpdate()||this.targetFort.subEffectWeight(this.currWeight)},t.prototype.beforDestroy=function(){this.node&&this.node.isValid&&(this.node.stopAllActions(),this.node.destroy())},t.prototype.ImmediatelyDestroy=function(){this.beforDestroy()},r([h(cc.Node)],t.prototype,"bomb",void 0),r([h(cc.Label)],t.prototype,"lblIndex",void 0),r([h(cc.Animation)],t.prototype,"haloAni",void 0),r([a,l("FISHMoHuanHY/SuperbombEffect")],t)}(cc.Component);i.default=u,cc._RF.pop()},{"../FISHMoHuanHY_GameDefine":"FISHMoHuanHY_GameDefine"}],FISHMoHuanHY_ThunderEffect:[function(e,t,i){"use strict";cc._RF.push(t,"defd7C5zpiP88CoKjGqmLG9","FISHMoHuanHY_ThunderEffect");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=e("../FISHMoHuanHY_ResourceMgr"),c=cc._decorator,a=c.ccclass,l=c.menu,h=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startObj=null,t.endObj=null,t.isplaying=!1,t.isChangeScaleing=!1,t.lightPointNode=null,t.circleNode=null,t.lighting=null,t.currIndexLable=null,t.isInit=!1,t._complete=null,t._fiexComplete=null,t.consumeTime=0,t.flg=!1,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.init=function(e,t,i,o,n,r){void 0===n&&(n=!1),this._index=i,this.startObj=e,this.endObj=t,this.lighting.scale=1,this.lighting.width=0,this.lightPointNode.x=0,this._complete=o,this._fiexComplete=r,this.isChangeScaleing=!1,this.isplaying=n,this.scheduleOnce(this.delayHand,.1),this.isInit=!0,this.game.iAudioPlayer.play_sound("beginLightChain01"),this.currIndexLable.font=this.game.resourMgr.getRes("Cannon/Font/LabelAtlasNumber1",s.ResourceType.imgs,cc.Font)},t.prototype.delayHand=function(){this.lightPointNode.active=!0,this.showIndex(this._index)},t.prototype.showIndex=function(e){this.circleNode.active=!0,this.currIndexLable.string=(e+1).toString()},t.prototype.hideIndex=function(){this.circleNode.active=!1},t.prototype.converCurrLocalPos=function(e){var t=e.convertToWorldSpaceAR(cc.v2());return this.node.parent.convertToNodeSpaceAR(t)},t.prototype.getAngle=function(e){var t=cc.v2(e.x,e.y).signAngle(cc.v2(0,1))/Math.PI*180;return 360-t},t.prototype.setAngleAndPosition=function(){var e=this.converCurrLocalPos(this.endObj),t=this.converCurrLocalPos(this.startObj),i=e.sub(t),o=i.mag()-.5*this.startObj.width-.5*this.endObj.width;return this.node.angle=this.getAngle(i),this.node.setPosition(t.add(i.normalize().mul(.5*this.startObj.width))),o},t.prototype.lightUpdata=function(){this.lighting.angle=90;var e=this.endObj.convertToWorldSpaceAR(cc.v2());e=this.lighting.convertToNodeSpaceAR(e);var t=180*Math.atan2(e.y,e.x)/Math.PI;this.lighting.angle=t+90;var i=this.endObj.convertToWorldSpaceAR(cc.v2()),o=(i=this.lighting.convertToNodeSpaceAR(i)).mag();this.lighting.width=cc.misc.lerp(this.lighting.width,o,1),this.lightPointNode.setPosition(i);var n=this.converCurrLocalPos(this.startObj),r=this.converCurrLocalPos(this.endObj).sub(n);this.node.setPosition(n.add(r.normalize().mul(.5*this.startObj.width)))},t.prototype.changeScale=function(){var e=this;this.scheduleOnce(function(){e.isInit=!1,e._complete&&e._complete.exec(e._index),e.node.destroy()},2)},t.prototype.update=function(e){this.isInit&&(this.lightUpdata(),this.isplaying?this.isChangeScaleing||(this.isChangeScaleing=!0,this.changeScale()):(this.consumeTime+=e,this.consumeTime>=.6&&(this._fiexComplete&&this._fiexComplete.exec(),this.isplaying=!0,this.lightPointNode.active=!1)))},r([h(cc.Node)],t.prototype,"lightPointNode",void 0),r([h(cc.Node)],t.prototype,"circleNode",void 0),r([h(cc.Node)],t.prototype,"lighting",void 0),r([h(cc.Label)],t.prototype,"currIndexLable",void 0),r([a,l("FISHMoHuanHY/ThunderEffect")],t)}(cc.Component);i.default=u,cc._RF.pop()},{"../FISHMoHuanHY_ResourceMgr":"FISHMoHuanHY_ResourceMgr"}],FISHMoHuanHY_fishPathTool:[function(e,t,i){"use strict";cc._RF.push(t,"02ec5kfoSZq5jGTHg4aiEtE","FISHMoHuanHY_fishPathTool");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,a=s.menu,l=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.is_debug=!1,t.anim_com=null,t.graphics=null,t.road_data_set=[],t}return n(t,e),t.prototype.onLoad=function(){this.anim_com=this.node.getComponent(cc.Animation);var e=this.anim_com.getClips()[0];this.graphics=this.node.getComponent(cc.Graphics),this.graphics||(this.graphics=this.node.addComponent(cc.Graphics),this.graphics.fillColor=cc.color(255,0,0,255));var t,i=e.curveData.paths;for(t in this.road_data_set=[],i){var o=i[t].props.position;this.gen_path_data(o)}},t.prototype.get_road_set=function(){return this.road_data_set},t.prototype.gen_path_data=function(e){for(var t=null,i=null,o=null,n=null,r=[],s=0;s<e.length;s++){var c=e[s];null!==t&&r.push([i,t,t,cc.v2(c.value[0],c.value[1])]),i=cc.v2(c.value[0],c.value[1]);for(var a=0;a<c.motionPath.length;a++)o=cc.v2(c.motionPath[a][0],c.motionPath[a][1]),n=cc.v2(c.motionPath[a][2],c.motionPath[a][3]),null===t&&(t=n),r.push([i,t,n,o]),t=cc.v2(c.motionPath[a][4],c.motionPath[a][5]),i=o}for(var l=[r[0][0]],h=0;h<r.length;h++){i=r[h][0],t=r[h][1],n=r[h][2],o=r[h][3];var u=this.bezier_length(i,t,n,o)/20,p=1/(u=Math.floor(u)),d=p;for(s=0;s<u;s++){var f=i.x*(1-d)*(1-d)*(1-d)+3*t.x*d*(1-d)*(1-d)+3*n.x*d*d*(1-d)+o.x*d*d*d,y=i.y*(1-d)*(1-d)*(1-d)+3*t.y*d*(1-d)*(1-d)+3*n.y*d*d*(1-d)+o.y*d*d*d;l.push(cc.v2(f,y)),d+=p}}if(this.is_debug){for(s=0;s<l.length;s++)this.graphics.moveTo(l[s].x,l[s].y),this.graphics.lineTo(l[s].x+2,l[s].y+2),this.graphics.lineTo(l[s].x-2,l[s].y-2),this.graphics.lineTo(l[s].x-2,l[s].y-2),this.graphics.lineTo(l[s].x+2,l[s].y+2),this.graphics.stroke(),this.graphics.close();this.graphics.fill()}this.road_data_set.push(l);var m=JSON.stringify(this.road_data_set,null,4);new Blob([m])},t.prototype.bezier_length=function(e,t,i,o){for(var n=e,r=0,s=.05,c=0;c<20;c++){var a=e.x*(1-s)*(1-s)*(1-s)+3*t.x*s*(1-s)*(1-s)+3*i.x*s*s*(1-s)+o.x*s*s*s,l=e.y*(1-s)*(1-s)*(1-s)+3*t.y*s*(1-s)*(1-s)+3*i.y*s*s*(1-s)+o.y*s*s*s,h=cc.v2(a,l),u=h.sub(n);n=h,r+=u.mag(),s+=.05}return r},r([l],t.prototype,"is_debug",void 0),r([c,a("FISHMoHuanHY/fishPathTool")],t)}(cc.Component);i.default=h,cc._RF.pop()},{}],FISHMoHuanHY_functionUI:[function(e,t,i){"use strict";cc._RF.push(t,"b5dc9KxwLy8JkC8+57Xji1l","FISHMoHuanHY_functionUI");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=e("../../FISHMoHuanHY/GameScripts/FISHMoHuanHY_ResourceMgr"),c=e("./FISHMoHuanHY_GameDefine"),a=e("./FISHMoHuanHY_RotateAround"),l=cc._decorator,h=l.ccclass,u=l.menu,p=(l.inspector,l.property),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=c.functionType.normal,t.title=null,t.multiple=null,t.lblMultiple=null,t.catchScore=null,t.lblCatchScore=null,t.totalScore=null,t.lblTotalScore=null,t.mountPoint=null,t.isDestroy=!1,t}return n(t,e),t.prototype.setGame=function(e){this.game=e,this.lblMultiple.font=this.game.resourMgr.getRes("Cannon/Font/blodBM",s.ResourceType.imgs,cc.Font),this.lblCatchScore&&(this.catchScore.getComponent(cc.Sprite).spriteFrame=this.game.resourMgr.getRes("catchScore_drill",s.ResourceType.function,cc.SpriteFrame),this.lblCatchScore.font=this.game.resourMgr.getRes("font/LabelAtlasNumber2",s.ResourceType.function,cc.Font)),this.lblTotalScore.font=this.game.resourMgr.getRes("font/LabelAtlasNumber4",s.ResourceType.function,cc.Font)},t.prototype.getMountPoint=function(){return this.mountPoint?this.mountPoint.convertToWorldSpaceAR(cc.v2()):(cc.error("\u627e\u4e0d\u5230\u6302\u70b9,\u8bf7\u68c0\u67e5\u76d1\u89c6\u9762\u677f!"),null)},t.prototype.setMultiple=function(e){this.lblMultiple&&(this.lblMultiple.string=e)},t.prototype.showCatchScore=function(e){this.lblCatchScore&&this.game.iGameBase.updatenNumberAnim(this.lblCatchScore,e,1)},t.prototype.showTotalScore=function(e,t){if(this.type==c.functionType.panda){this.title.active=!0,this.lblTotalScore.string=""+e,this.totalScore.active=!0;var i=this.totalScore.getPosition();cc.tween(this.title).to(.25,{position:cc.v3(i.x,60)}).start(),cc.tween(this.totalScore).to(.25,{position:cc.v3(0,60)}).start();var o=this;cc.tween(this.totalScore).delay(1).call(function(){o.hide(t,e)}).start()}this.lblTotalScore.string="0",this.totalScore.active=!0,this.game.iGameBase.updatenNumberAnim(this.lblTotalScore,e,1),i=this.totalScore.getPosition(),cc.tween(this.title).to(.25,{position:cc.v3(i.x,70)}).start();var n=cc.moveTo(.5,cc.v2(i.x,i.y+30)),r=cc.moveTo(.5,i);o=this,cc.tween(this.totalScore).sequence(cc.repeat(cc.sequence(n,r),4),cc.fadeOut(.5)).call(function(){o.hide(t,e)}).start()},t.prototype.show=function(e,t){if(this.isDestroy=!1,this.game.iAudioPlayer.play_sound("rotateShowLogo"),this.type==c.functionType.superBomb){this.title.scale=0;var i=cc.v2();this.node.convertToNodeSpaceAR(t,i),this.title.setPosition(i),this.title.active=!0,cc.tween(this.title).sequence(cc.delayTime(.25),cc.scaleTo(.25,1),cc.delayTime(1),cc.moveTo(.8,cc.v2())).start()}else this.type==c.functionType.panda?(this.title.active=!1,this.totalScore.active=!1):this.type==c.functionType.lighting?(this.title.active=!0,this.node.getComponent(a.default).run(t)):(this.title.scale=.5,this.title.active=!0,cc.tween(this.title).then(cc.scaleTo(.2,1)).start());this.catchScore&&(this.catchScore.x=e.siteIndex%2==0?231.116:-197.989,this.catchScore.active=!0)},t.prototype.hide=function(e,t){var i=this;this.game.iAudioPlayer.play_sound("showLogoEndSound");var o=c.getWeightByType(this.type);cc.tween(this.title).to(.5,{opacity:0}).call(function(){i.destoryFunction(),e(o,t)}).start()},t.prototype.destoryFunction=function(){this.isDestroy=!0,this.node&&this.node.isValid&&this.node.destroy()},r([p({type:cc.Enum(c.functionType)})],t.prototype,"type",void 0),r([p(cc.Node)],t.prototype,"title",void 0),r([p(cc.Node)],t.prototype,"multiple",void 0),r([p(cc.Label)],t.prototype,"lblMultiple",void 0),r([p({type:cc.Node,visible:function(){return this.type==c.functionType.drill||this.type==c.functionType.superBomb}})],t.prototype,"catchScore",void 0),r([p({type:cc.Label,visible:function(){return this.type==c.functionType.drill||this.type==c.functionType.superBomb}})],t.prototype,"lblCatchScore",void 0),r([p(cc.Node)],t.prototype,"totalScore",void 0),r([p(cc.Label)],t.prototype,"lblTotalScore",void 0),r([p({type:cc.Node,visible:function(){return this.type==c.functionType.DaPangXie||this.type==c.functionType.thunderDragon}})],t.prototype,"mountPoint",void 0),r([h,u("FISHMoHuanHY/FunctionFort")],t)}(cc.Component);i.default=d,cc._RF.pop()},{"../../FISHMoHuanHY/GameScripts/FISHMoHuanHY_ResourceMgr":"FISHMoHuanHY_ResourceMgr","./FISHMoHuanHY_GameDefine":"FISHMoHuanHY_GameDefine","./FISHMoHuanHY_RotateAround":"FISHMoHuanHY_RotateAround"}],FISHMoHuanHY_whalekingEffect:[function(e,t,i){"use strict";cc._RF.push(t,"b43230s2SW5/gScay9uDUyr","FISHMoHuanHY_whalekingEffect");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=e("../FISHMoHuanHY_GameDefine"),c=e("../FISHMoHuanHY_ResourceMgr"),a=cc._decorator,l=a.ccclass,h=a.menu,u=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.eYuPointArray=null,t.ball=null,t.centerNode=null,t.animOneArray=[],t.animTwoArray=[],t.multiple=null,t.lableMultiple=null,t.targetMultiple=0,t.currMultiple=0,t.fish=null,t.eYuPrefab_l=null,t.eYuPrefab_r=null,t.targetFort=null,t.currWeight=s.FunctionWeight.eyu,t.isNext=!0,t.index=0,t.eYuArray=[],t.isplaying=!1,t.isEnd=!1,t.fishDragon=[],t.fishAnimation=[],t.animBoom=null,t._special=!1,t.lblScore=null,t.redLove=null,t.redLove1=null,t.compCb=null,t.isLastTime=!1,t.createNum=0,t}return n(t,e),t.prototype.setGame=function(e){this.game=e},t.prototype.onLoad=function(){this.eYuPointArray=[];for(var e=0;e<2;e++){var t=this.node.getChildByName("129_"+(e+1).toString());this.eYuPointArray[e]=[];for(var i=t.childrenCount,o=0;o<i;o++)this.eYuPointArray[e][o]=t.children[o]}},t.prototype.SetTotalScore=function(e){this._score=e,this.lblScore.string=e.toString()},t.prototype.initFunction=function(e,t,i,o,n,r,s,a){var l=this;this.fish=n,this.targetFort=e,this._bulletIndex=r,this._multiple=Math.ceil(o),this.compCb=a,this._special=t,this.targetFort.setEffect(this);var h=n.getCurrWorldPos();this._score=i;var u=this;this.isLastTime=!1,this.game.resourMgr.loadOther("eyuBall",c.ResourceType.other,cc.Prefab,function(e){u.redLove=cc.instantiate(e),u.lblScore=u.redLove.getChildByName("lblScore").getComponent(cc.Label),cc.error(u.lblScore),u.redLove.scale=0,u.redLove.active=!0,l.game.iAudioPlayer.play_music("BombSharkBgm",!0,1),u.multiple=u.redLove.getChildByName("multile"),u.lableMultiple=u.multiple.getChildByName("lableMultile").getComponent(cc.Label);for(var t=0;t<2;t++)u.createEyu(l.createNum,t);u.createNum=0,u.index=0,u.moveRedLove(h)})},t.prototype.normalRedLoveAnim=function(e,t){this.targetFort.showFunctionTotalScore(this._score,this.currWeight);var i=this.targetFort.functionFort.node.convertToNodeSpaceAR(e);this.targetFort.functionFort.node.addChild(this.redLove1),this.redLove1.setPosition(i),this._targetPos=t;var o=cc.tween().to(1.2,{scale:1},{easing:"backOut"});cc.tween(this.redLove1).then(o).start(),this.scheduleOnce(this.anim,.5)},t.prototype.anim=function(){cc.tween(this.redLove1).to(1.5,{position:cc.v3(this._targetPos)}).call(function(){}).start(),this.scheduleOnce(this.playComplete,3),this.game.GameLogic.setWinScore(this.targetFort.gameId,this._score),this.game.iGameBase.updatenNumberAnim(this.lblScore,this._score,2,null)},t.prototype.moveRedLove=function(e){var t=this;e=this.node.convertToNodeSpaceAR(e),this.node.addChild(this.redLove),this.redLove.setPosition(e);var i=cc.tween().to(.2,{scale:1},{easing:"backOut"}),o=cc.tween().to(.5,{position:cc.v3(0,0,0)});cc.tween(this.redLove).sequence(i,o).call(function(){t.redLove.scale=1,t.moveEyuball()}).start()},t.prototype.startPlay=function(e,t,i,o){this.fish=e,this.targetFort=t,this._bulletIndex=o,this._multiple=i,this.scheduleOnce(this.exectPlay,.8)},t.prototype.exectPlay=function(){var e=this.fish.goldBombPointArray[this.fish.goldBombPointArray.length-1].convertToWorldSpaceAR(cc.v2());e=this.node.convertToNodeSpaceAR(e)},t.prototype.startPlayLighting=function(){this.game.gameScene.shakeEffect(.5),this.isplaying=!0},t.prototype.exectAnim1=function(){this.executeMove()},t.prototype.exectAnim2=function(){var e=this,t=this;this.game.resourMgr.loadOther("earthquake2",c.ResourceType.other,cc.Prefab,function(i){e.redLove.active=!1,e.game.gameScene.shakeEffect(.5),t.ball=cc.instantiate(i);var o=cc.winSize.width/2,n=cc.winSize.height/2,r=t.targetFort.functionFort.node.convertToNodeSpaceAR(new cc.Vec2(o,n));t.targetFort.functionFort.node.addChild(t.ball),t.ball.setPosition(r),e.scheduleOnce(function(){t.creatorDragonBall()},2)}),this.scheduleOnce(this.moveMultiple,1)},t.prototype.executeMove=function(){var e=this;this.index>=2&&(this.index=0);var t=this;if(this.isplaying=!1,0==this.index){var i=this.eYuPointArray[0][0],o=this.eYuPointArray[0][1],n=this.eYuPointArray[0][2];this.eYuArray[0].setPosition(i.position),this.eYuArray[0].opacity=255,t.fishDragon[0].active=!0,this.scheduleOnce(function(){t.fishDragon[0].active=!1,t.fishAnimation[0].active=!0,t.fishAnimation[0].getComponent(cc.Animation).play()},1.5),cc.tween(this.eYuArray[0]).sequence(cc.moveTo(1.5,cc.v2(o.position.x,o.position.y)),cc.delayTime(1.2),cc.callFunc(function(){t.isLastTime&&t.hideCrabBall(),t.fishDragon[0].active=!0,t.fishAnimation[0].active=!1,t.play(t._multiple),t.startPlayLighting(),e.game.iAudioPlayer.play_sound("Boss2CrashFinalBomb"),t.sendCatchFish()}),cc.moveTo(2,cc.v2(n.position.x,n.position.y)),cc.callFunc(function(){e.eYuArray[0].opacity=0,e.isNext||e.scheduleOnce(function(){e.exectAnim2()},3)})).start()}else 1==this.index&&(i=this.eYuPointArray[1][0],o=this.eYuPointArray[1][1],n=this.eYuPointArray[1][2],this.eYuArray[1].setPosition(i.position),this.eYuArray[1].opacity=255,t.fishDragon[1].active=!0,this.scheduleOnce(function(){t.fishDragon[1].active=!1,t.fishAnimation[1].active=!0,t.fishAnimation[1].getComponent(cc.Animation).play()},1.5),cc.tween(this.eYuArray[1]).sequence(cc.moveTo(1.5,cc.v2(o.position.x,o.position.y)),cc.delayTime(1.2),cc.callFunc(function(){t.isLastTime&&t.hideCrabBall(),t.fishDragon[1].active=!0,t.fishAnimation[1].active=!1,t.play(t._multiple),t.startPlayLighting(),e.game.iAudioPlayer.play_sound("Boss2CrashFinalBomb"),t.sendCatchFish()}),cc.moveTo(2,cc.v2(n.position.x,n.position.y)),cc.callFunc(function(){e.eYuArray[1].opacity=0,e.isNext||e.scheduleOnce(function(){e.exectAnim2()},3)})).start())},t.prototype.executeMove1=function(){var e=this;this.index>=2&&(this.index=0);var t=this;if(0==this.index){var i=this.eYuPointArray[0][0],o=this.eYuPointArray[0][1],n=this.eYuPointArray[0][2];this.eYuArray[0].setPosition(i.position),this.eYuArray[0].opacity=255,t.fishDragon[0].active=!0,this.scheduleOnce(function(){t.fishDragon[0].active=!1,t.fishAnimation[0].active=!0,t.fishAnimation[0].getComponent(cc.Animation).play(),this.game.iAudioPlayer.play_sound("Boss2Jump")},1.5),cc.tween(this.eYuArray[0]).sequence(cc.moveTo(1.5,cc.v2(o.position.x,o.position.y)),cc.delayTime(1.2),cc.callFunc(function(){t.fishDragon[0].active=!0,t.fishAnimation[0].active=!1,t.play(t._multiple),t.startPlayLighting(),e.game.iAudioPlayer.play_sound("Boss2CrashBomb"),t.sendCatchFish()}),cc.moveTo(2,cc.v2(n.position.x,n.position.y)),cc.callFunc(function(){e.eYuArray[0].opacity=0})).start()}else 1==this.index&&(i=this.eYuPointArray[1][0],o=this.eYuPointArray[1][1],n=this.eYuPointArray[1][2],this.eYuArray[1].setPosition(i.position),this.eYuArray[1].opacity=255,t.fishDragon[1].active=!0,this.scheduleOnce(function(){t.fishDragon[1].active=!1,t.fishAnimation[1].active=!0,t.fishAnimation[1].getComponent(cc.Animation).play(),this.game.iAudioPlayer.play_sound("Boss2Jump")},1.5),cc.tween(this.eYuArray[1]).sequence(cc.moveTo(1.5,cc.v2(o.position.x,o.position.y)),cc.delayTime(1.2),cc.callFunc(function(){t.fishDragon[1].active=!0,t.fishAnimation[1].active=!1,t.play(t._multiple),t.startPlayLighting(),e.game.iAudioPlayer.play_sound("Boss2CrashBomb"),t.sendCatchFish()}),cc.moveTo(2,cc.v2(n.position.x,n.position.y)),cc.callFunc(function(){e.eYuArray[1].opacity=0})).start())},t.prototype.createEyu=function(e){var t;t=0==e?this.eYuPrefab_l:this.eYuPrefab_r;var i=cc.instantiate(t);i.name=this.createNum.toString(),i.opacity=0,this.node.addChild(i),i.setSiblingIndex(this.node.childrenCount-2),i.setPosition(this.eYuPointArray[e][0].position);var o=i.children[0],n=i.children[1];this.fishDragon.push(o),this.fishAnimation.push(n),this.eYuArray.push(i),this.createNum++},t.prototype.play=function(e){this.centerNode.opacity=255,e&&(this.targetMultiple=e),cc.tween(this.centerNode).parallel(cc.rotateTo(.8,1080),cc.fadeOut(.8)).start(),this.playCircleBlowUp(),this.animBoom.play()},t.prototype.playCircleBlowUp=function(){this.currMultiple+=1;var e=cc.tween().to(.18,{scale:2.5}),t=cc.tween().to(.18,{scale:1});this.lableMultiple.string=this.currMultiple.toString(),cc.tween(this.multiple).sequence(e,t).start();var i=cc.tween().to(.18,{scale:2.5}),o=cc.tween().to(.18,{scale:1});cc.tween(this.redLove).sequence(i,o).start()},t.prototype.moveEyuball=function(){var e=this,t=this;t.multiple.active=!0,t.lableMultiple.node.active=!0;var i=cc.tween(this.redLove).to(.5,{scale:1});cc.tween(this.redLove).to(.25,{scale:1}).call(function(){t.scheduleOnce(e.exectAnim1,1),i.start()}).start()},t.prototype.hideCrabBall=function(){this.redLove.active=!1},t.prototype.moveMultiple=function(){this.targetFort.node.getPosition()},t.prototype.sendCatchFish=function(){if(this._bulletIndex>=0){var e=this.game.fishMgr.getFunctionCatchFishs(s.FunctionCatchCount.eyu);this.game.iGameBase.EmitEvent(s.EventCode.FunctionCatchFishs,{wChairID:this.game.iGameBase.UserManager_getChairID(),dwBulletIndex:this._bulletIndex,dwFishIndex:e,cbFishCount:e.length})}},t.prototype.onDestroy=function(){this.game&&!this.game.iGameBase.getExectUpdate()||(this.targetFort.subEffectWeight(this.currWeight),this.game.gameScene.playSceneBg())},t.prototype.nextStep=function(){var e=this;cc.tween(this.node).sequence(cc.delayTime(5),cc.callFunc(function(){e.index++,e.isLastTime&&(e.isNext=!1),e.exectAnim1()})).start()},t.prototype.lastStep=function(){this.isLastTime=!0},t.prototype.playComplete=function(){var e=cc.v2(this.targetFort.node.x,this.targetFort.IsOnTop?this.targetFort.node.y-90:this.targetFort.node.y+90);e=this.node.convertToWorldSpaceAR(e),this.compCb&&this.compCb.exec(this.fish,!0),this.targetFort.hidefunctionUI(this.currWeight),this.redLove.destroy(),this.redLove=null,this.redLove1.destroy(),this.redLove1=null,this.ball.destroy(),this.targetFort.functionFort.checkCanFire(this.currWeight),this.targetFort.deleteWeightMultiple(this.currWeight),this.node.destroy()},t.prototype.beforDestroy=function(){},t.prototype.ImmediatelyDestroy=function(){cc.error("ImmediatelyDestroy"),this.unscheduleAllCallbacks(),this.redLove&&this.redLove.destroy(),this.redLove1&&this.redLove1.destroy(),this.node&&this.node.isValid&&this.node.destroy()},t.prototype.creatorDragonBall=function(){var e=this,t=this;this.game.resourMgr.loadOther("eyuBall",c.ResourceType.other,cc.Prefab,function(i){t.redLove1=cc.instantiate(i),t.lblScore=t.redLove1.getChildByName("lblScore").getComponent(cc.Label),t.lblScore.spacingX=-15,t.lblScore.font=e.game.resourMgr.getRes("bf_number3",c.ResourceType.font,cc.Font),t.redLove1.scale=0,t.redLove1.active=!0;var o=cc.winSize.width/2,n=cc.winSize.height/2,r=new cc.Vec2(o,n),s=cc.v2(0,400);t.normalRedLoveAnim(r,s)})},r([u(cc.Node)],t.prototype,"centerNode",void 0),r([u([cc.Animation])],t.prototype,"animOneArray",void 0),r([u([cc.Animation])],t.prototype,"animTwoArray",void 0),r([u(cc.Prefab)],t.prototype,"eYuPrefab_l",void 0),r([u(cc.Prefab)],t.prototype,"eYuPrefab_r",void 0),r([l,h("FISHMoHuanHY/whalekingEffect")],t)}(cc.Component);i.default=p,cc._RF.pop()},{"../FISHMoHuanHY_GameDefine":"FISHMoHuanHY_GameDefine","../FISHMoHuanHY_ResourceMgr":"FISHMoHuanHY_ResourceMgr"}]},{},["FISHMoHuanHY_CMD","FISHMoHuanHY_Game","FISHMoHuanHY_GameLogic","FISHMoHuanHY_AutoFireButton","FISHMoHuanHY_BulletManager","FISHMoHuanHY_CrashGrid","FISHMoHuanHY_FishKindMap","FISHMoHuanHY_FishManager","FISHMoHuanHY_FishPathCrash","FISHMoHuanHY_FunctionFort","FISHMoHuanHY_FunctionLayer","FISHMoHuanHY_GameBullet","FISHMoHuanHY_GameBulletBase","FISHMoHuanHY_GameBulletDrill","FISHMoHuanHY_GameBulletHit","FISHMoHuanHY_GameBulletJinLuan","FISHMoHuanHY_GameBulletSmallOctopus","FISHMoHuanHY_GameDefine","FISHMoHuanHY_GameFish","FISHMoHuanHY_GameFishShadow","FISHMoHuanHY_GameFort","FISHMoHuanHY_GameFortGunAni","FISHMoHuanHY_GameRewardTip","FISHMoHuanHY_GameSceneMgr","FISHMoHuanHY_GoldRoutine","FISHMoHuanHY_GrapComp","FISHMoHuanHY_LockFishButton","FISHMoHuanHY_MyFishSetting","FISHMoHuanHY_MyProperty","FISHMoHuanHY_PoolManager","FISHMoHuanHY_QuadtreeCollision","FISHMoHuanHY_ResourceMgr","FISHMoHuanHY_RotateAround","FISHMoHuanHY_RuleDetails","FISHMoHuanHY_SelectFishItem","FISHMoHuanHY_ShootSelectSetting","FISHMoHuanHY_fishPathTool","FISHMoHuanHY_functionUI","FISHMoHuanHY_CrabEffect","FISHMoHuanHY_DragonEffect","FISHMoHuanHY_GoldBombEffect","FISHMoHuanHY_Laser","FISHMoHuanHY_LaserEffect","FISHMoHuanHY_LightingEffect","FISHMoHuanHY_PandaEffect","FISHMoHuanHY_SuperbombEffect","FISHMoHuanHY_ThunderEffect","FISHMoHuanHY_whalekingEffect"]);