window.__require=function e(o,r,s){function a(t,l){if(!r[t]){if(!o[t]){var c=t.split("/");if(c=c[c.length-1],!o[c]){var i="function"==typeof __require&&__require;if(!l&&i)return i(c,!0);if(n)return n(c,!0);throw new Error("Cannot find module '"+t+"'")}t=c}var d=r[t]={exports:{}};o[t][0].call(d.exports,function(e){return a(o[t][1][e]||e)},d,d.exports,e,o,r,s)}return r[t].exports}for(var n="function"==typeof __require&&__require,t=0;t<s.length;t++)a(s[t]);return a}({QuickLoad:[function(e,o,r){"use strict";cc._RF.push(o,"9f578KJ+VxIObvxUS7lniRL","QuickLoad");var s=this&&this.__decorate||function(e,o,r,s){var a,n=arguments.length,t=n<3?o:null===s?s=Object.getOwnPropertyDescriptor(o,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)t=Reflect.decorate(e,o,r,s);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(t=(n<3?a(t):n>3?a(o,r,t):a(o,r))||t);return n>3&&t&&Object.defineProperty(o,r,t),t},a=this&&this.__awaiter||function(e,o,r,s){return new(r||(r=Promise))(function(a,n){function t(e){try{c(s.next(e))}catch(o){n(o)}}function l(e){try{c(s.throw(e))}catch(o){n(o)}}function c(e){var o;e.done?a(e.value):(o=e.value,o instanceof r?o:new r(function(e){e(o)})).then(t,l)}c((s=s.apply(e,o||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.loadBundle1=void 0;const n=e("../resources/Base/Progress2/Progress2"),t=e("./../BundlerHelper"),{ccclass:l,property:c}=cc._decorator,i=[{bundlename:"BaseRes",isLocal:!1,isPreload:!0},{bundlename:"ClientCommon",isLocal:!1},{bundlename:"ClientBase",isLocal:!1},{bundlename:"ClientFrame",isLocal:!1},{bundlename:"Game1",isLocal:!1},{bundlename:"Loading",isLocal:!1},{bundlename:"Plaza",isLocal:!1}];let d=class extends cc.Component{constructor(){super(...arguments),this.loadProgress=null,this.flgDebug=1}start(){globalThis.mUrl=t.GetUrl(),cc.sys.isBrowser||cc.sys.os==cc.sys.OS_ANDROID&&(globalThis.useMainUrl=!0),this.loadProgress.setProgress(0),this.loadResourceBase()}onLoad(){cc.error(cc.sys.os),"iOS"==cc.sys.os?(cc.macro.SUPPORT_TEXTURE_FORMATS=[".pvr",".png"],cc.error("\u5f53\u524d\u5e73\u53f0\u662fiOS")):"Android"==cc.sys.os?(cc.error("\u5f53\u524d\u5e73\u53f0\u662f\u5b89\u5353"),cc.macro.SUPPORT_TEXTURE_FORMATS=[".pkm",".png"]):(cc.macro.SUPPORT_TEXTURE_FORMATS=[".webp",".jpg",".jpeg",".bmp",".png"],cc.error("\u5f53\u524d\u5e73\u53f0\u662fwindow"));let e=this.node.parent.getParent().getComponent(cc.Canvas);cc.winSize.width/(1334*cc.winSize.height/750)<1?(e.fitHeight=!1,e.fitWidth=!0):(e.fitHeight=!0,e.fitWidth=!1)}loadResourceBase(){cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE),this.loadProgress.setDesc("Loading Base Resources"),cc.resources.loadDir("Base",(e,o)=>{this.loadProgress.setProgress(e/o)},e=>{e?cc.error("loadResourceBase",e):this.loadClientBundles()})}loadClientBundles(){this.loadProgress.setDesc("Check Resources");let e=0,o=e=>{cc.error("progress:",e),this.loadProgress.setProgress(e)},r=(o,r)=>{o?cc.error("onLoadComplete",o):("Game1"==r.name&&r.load("prefab/NodeRoot",cc.Prefab,(e,o)=>{if(!e){let e=cc.instantiate(o);this.node.parent.parent.parent.addChild(e);let n=cc.find("NodeRoot",this.node.parent.parent.parent);cc.game.addPersistRootNode(n);var r=cc.director.getScene().getComponentInChildren("MainControllerScript"),s=cc.director.getScene().getComponentInChildren("LoadingBase"),a=cc.director.getScene().getComponentInChildren("PlazaBase");if(a.setPlatformName("MantaRays"),0==this.flgDebug)cc.resources.load("Data",cc.JsonAsset,null,function(e,o){if(!e){var r=JSON.parse(JSON.stringify(o));a.setClientGames(r.json)}}),cc.resources.load("SupportGames",cc.TextAsset,null,function(e,o){e||a.setSupportGames(o.text)});else{let e="Data.json",o="SupportGames_MantaRays.txt";"Android"==cc.sys.os&&(o="SupportGames_MantaRays_android.txt"),cc.loader.load({url:globalThis.mUrl+e+"?v"+(new Date).getTime(),type:"json"},function(e,o){e||(cc.error("======\u8fdc\u7a0b\u6e38\u620f\u5217\u8868\u914d\u7f6e:"+o),a.setClientGames(o))}),cc.loader.load({url:globalThis.mUrl+o+"?v"+(new Date).getTime(),type:"text"},function(e,o){e||(cc.error("======\u8fdc\u7a0b\u6e38\u620f\u5217\u8868:"+o),a.setSupportGames(o))}),globalThis.BundlerVerions1&&s.SetGameVersion(globalThis.BundlerVerions1),"eSM_Money"==globalThis.ShowMode?a.setShowMode(1):a.setShowMode(0),"eSM_NoWin"==globalThis.UserScoreMode?a.setScoreMode(1):a.setScoreMode(0),"eSM_NoTable"==globalThis.TableMode?a.setTable(1):a.setTable(0)}if(r.setLOGONSERVER(globalThis.LOGONSERVER,81),r.setLOGONPORT&&globalThis.LOGONPORTLIST&&globalThis.LOGONPORTLIST.length>0){let e=Math.floor(Math.random()*globalThis.LOGONPORTLIST.length);r.setLOGONPORT(globalThis.LOGONPORTLIST[e])}0==this.flgDebug||2==this.flgDebug?s.SetGameUrl(""):s.SetGameUrl(globalThis.mUrl)}}),i[e].isPreload&&(cc.error("Preload Res bundlename:",i[e].bundlename),"Loading"==i[e].bundlename||r.preloadDir("Res")),++e!=i.length?"SLOST_COMMON"==i[e].bundlename||"FISHCOMMON"==i[e].bundlename||s(e):this.loadPlazaBaseRes())},s=e=>{if("Plaza"==i[e].bundlename&&1==globalThis.isLocal&&(cc.error("\u672c\u5730\u5927\u5385"),i[e].isLocal=!0),i[e].isLocal)cc.log("bundlename:",i[e].bundlename),cc.assetManager.loadBundle(i[e].bundlename,{onFileProgress:e=>{e&&e.progress&&o(e.progress)}},(e,o)=>{r(e,o)});else{let o="";globalThis.BundlerVerions1&&globalThis.BundlerVerions1[i[e].bundlename]&&(o=globalThis.BundlerVerions1[i[e].bundlename]);const a={version:o,onFileProgress:()=>{}};var s=1==globalThis.useMainUrl?t.GetUrl():"";cc.assetManager.loadBundle(s+i[e].bundlename,a,(e,o)=>{e?cc.log("err=",e):r(e,o)})}};s(e)}loadPlazaBaseRes(){this.loadProgress.setDesc("Load hall resources"),cc.assetManager.getBundle("Plaza").loadDir("Res",(e,o)=>{o>0&&this.loadProgress.setProgress(e/o)},e=>{e?cc.error("loadPlazaBaseRes Base",e):this.onPlazaReady()})}onPlazaReady(){cc.assetManager.getBundle("Plaza").loadScene("Plaza",(e,o)=>{e||cc.director.runSceneImmediate(o)})}};s([c(n.default)],d.prototype,"loadProgress",void 0),d=s([l],d),r.default=d,r.loadBundle1=function(e,o){return a(this,void 0,void 0,function*(){const r=cc.assetManager.getBundle(e);if(r)return o&&o(1),r;let s=0,a={onFileProgress:(e,r)=>{r&&e/r>s&&(s=e/r),o&&o(s)}};return cc.error(">>>>>",globalThis.BundlerVerions1[e]),globalThis.BundlerVerions1[e]&&(a.version=globalThis.BundlerVerions1[e],console.error("loadOptions.version::::",a.version)),new Promise((r,s)=>{var n=1==globalThis.useMainUrl?t.GetUrl():"";cc.assetManager.loadBundle(n+e,a,(e,a)=>{e?s(e):(o&&o(1),r(a))})})})},cc._RF.pop()},{"../resources/Base/Progress2/Progress2":void 0,"./../BundlerHelper":void 0}]},{},["QuickLoad"]);