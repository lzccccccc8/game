window.__require=function e(t,i,o){function n(m,s){if(!i[m]){if(!t[m]){var _=m.split("/");if(_=_[_.length-1],!t[_]){var r="function"==typeof __require&&__require;if(!s&&r)return r(_,!0);if(a)return a(_,!0);throw new Error("Cannot find module '"+m+"'")}m=_}var l=i[m]={exports:{}};t[m][0].call(l.exports,function(e){return n(t[m][1][e]||e)},l,l.exports,e,t,i,o)}return i[m].exports}for(var a="function"==typeof __require&&__require,m=0;m<o.length;m++)n(o[m]);return n}({DataManager_Skull:[function(e,t,i){"use strict";cc._RF.push(t,"81c4bpFlA7/w+Qb4a4yednF","DataManager_Skull");var o=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,m=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)m=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(m=(a<3?n(m):a>3?n(t,i,m):n(t,i))||m);return a>3&&m&&Object.defineProperty(t,i,m),m};Object.defineProperty(i,"__esModule",{value:!0}),i.AudioData=i.eAudioName=i.m_iPayTypeCountGenSpe=i.m_iPayTypeCountGen=i.m_iRuleCount=i.m_iJackpotCount=i.m_iLinesCount=i.m_iItemResCount=i.m_iItemRow=i.m_iItemCol=i.m_iItem_Tumbler4=i.m_iItem_Tumbler3=i.m_iItem_Tumbler2=i.m_iItem_Tumbler1=i.m_iItem_Tumbler0=i.m_iItem_Jackpot3=i.m_iItem_Jackpot2=i.m_iItem_Jackpot1=i.m_iItem_Jackpot0=i.m_iItem_FREE=i.m_iItem_WILD=i.m_iKeepDecPoint=i.m_Delay3=i.m_Delay2=i.m_Delay1=i.m_Delay05=i.m_iVerUI=void 0;var n=cc._decorator,a=n.ccclass;n.property,i.m_iVerUI=0,i.m_Delay05=.5,i.m_Delay1=1,i.m_Delay2=2,i.m_Delay3=3,i.m_iKeepDecPoint=2,i.m_iItem_WILD=16,i.m_iItem_FREE=17,i.m_iItem_Jackpot0=18,i.m_iItem_Jackpot1=19,i.m_iItem_Jackpot2=20,i.m_iItem_Jackpot3=21,i.m_iItem_Tumbler0=11,i.m_iItem_Tumbler1=12,i.m_iItem_Tumbler2=13,i.m_iItem_Tumbler3=14,i.m_iItem_Tumbler4=15,i.m_iItemCol=5,i.m_iItemRow=3,i.m_iItemResCount=22,i.m_iLinesCount=20,i.m_iJackpotCount=4,i.m_iRuleCount=4,i.m_iPayTypeCountGen=8,i.m_iPayTypeCountGenSpe=4,function(e){e[e.BGM_Gen=0]="BGM_Gen",e[e.BGM_Free=1]="BGM_Free",e[e.BGM_FreeAdd=2]="BGM_FreeAdd",e[e.Sound_GameWinTrans=3]="Sound_GameWinTrans",e[e.Sound_TotalWinTrans=4]="Sound_TotalWinTrans",e[e.Sound_SmallWin=5]="Sound_SmallWin",e[e.Sound_MiddleWin=6]="Sound_MiddleWin",e[e.Sound_BigWin=7]="Sound_BigWin",e[e.Sound_FreeEnab=8]="Sound_FreeEnab",e[e.Sound_FreeEnab1=9]="Sound_FreeEnab1",e[e.Sound_Spin=10]="Sound_Spin",e[e.Sound_SpinStop=11]="Sound_SpinStop",e[e.Sound_Bed=12]="Sound_Bed",e[e.Sound_Auto2Man=13]="Sound_Auto2Man",e[e.Sound_Icon_11=14]="Sound_Icon_11",e[e.Sound_RollingSllow=15]="Sound_RollingSllow",e[e.Sound_Line=16]="Sound_Line",e[e.reel_spining=17]="reel_spining",e[e.Sound_FreeStop=18]="Sound_FreeStop",e[e.Sound_OKBtn=19]="Sound_OKBtn",e[e.Sound_glassLoading=20]="Sound_glassLoading",e[e.Sound_glassWin=21]="Sound_glassWin",e[e.Sound_FreeAddInto=22]="Sound_FreeAddInto",e[e.Sound_bottle=23]="Sound_bottle",e[e.Sound_Shoot=24]="Sound_Shoot",e[e.Sound_FreeEnd=25]="Sound_FreeEnd"}(i.eAudioName||(i.eAudioName={}));var m=function(){function e(){this.ary_AudioNames=["BGM_Gen","BGM_Free","BGM_FreeAdd","Sound_GameWinTrans","Sound_TotalWinTrans","Sound_SmallWin","Sound_MiddleWin","Sound_BigWin","Sound_FreeEnab","Sound_FreeEnab1","Sound_Spin","Sound_SpinStop","Sound_Bed","Sound_Auto2Man","Sound_Icon_11","Sound_RollingSllow","Sound_Line","reel_spining","Sound_FreeStop","Sound_OKBtn","Sound_glassLoading","Sound_glassWin","Sound_FreeAddInto","Sound_bottle","Sound_Shoot","Sound_FreeEnd"],this.ary_AudioVolume=[.3,.3,.3,.5,.2,1,.5,.5,.3,.5,1,1,1,1,.5,.3,.5,.5,.5,.5,1,1,1,1,1,1]}return o([a],e)}();i.AudioData=m,cc._RF.pop()},{}],DealAutoTrans_Skull:[function(e,t,i){"use strict";cc._RF.push(t,"22d14Q+hpWoRVcklsnxRcTl","DealAutoTrans_Skull");var o=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,m=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)m=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(m=(a<3?n(m):a>3?n(t,i,m):n(t,i))||m);return a>3&&m&&Object.defineProperty(t,i,m),m};Object.defineProperty(i,"__esModule",{value:!0}),i.ePlayMode=void 0;var n,a=e("./GameLogic_Skull"),m=cc._decorator,s=m.ccclass;m.property,function(e){e[e.ePM_Man=0]="ePM_Man",e[e.ePM_Auto=1]="ePM_Auto"}(n=i.ePlayMode||(i.ePlayMode={}));var _=function(){function e(e){this.m_ePlayMode=n.ePM_Man,this.spinBtnIsTouch=!1,this.spinBtnTouchTimer=0,this.spinBtnTouchTimes=1,this.m_Logic=e}return e.prototype.SetBtnAutoSpinState=function(e,t){void 0===t&&(t=!0),this.m_BtnAutoSpin.node.active=e,this.m_BtnAutoSpin.interactable=t},e.prototype.SetBtnStartSpinState=function(e,t){void 0===t&&(t=!0),this.m_BtnSpin.node.active=e,this.m_BtnSpin.interactable=t,this.m_BtnStop.node.active=!e,this.m_BtnStop.interactable=!0},e.prototype.OnAutoBtn=function(){var e=this.m_ePlayMode==n.ePM_Man?n.ePM_Auto:n.ePM_Man;this.IsAutoPlay(e)},e.prototype.IsAutoPlay=function(e){this.m_ePlayMode!=e&&(this.m_ePlayMode==n.ePM_Man?(this.m_EffectBtnAutoSpin.active=!0,this.m_SPBtnAutoSpin.node.active=!0):(this.m_EffectBtnAutoSpin.active=!1,this.m_SPBtnAutoSpin.node.active=!1)),this.m_ePlayMode=e},e.prototype.SetMan2AutoSpin=function(){this.m_ePlayMode==n.ePM_Man&&this.IsAutoPlay(n.ePM_Auto)},e.prototype.SetAuto2ManSpin=function(){this.m_ePlayMode==n.ePM_Auto&&this.IsAutoPlay(n.ePM_Man)},e.prototype.onSpinBtnTouchStart=function(){this.m_Logic.m_GameState!=a.eGameState.eGS_Playing&&(this.spinBtnTouchTimer=0,this.spinBtnIsTouch=!0)},e.prototype.onSpinBtnTouchEnd=function(){this.spinBtnIsTouch=!1},e.prototype.onSpinBtnTouchCancel=function(){this.spinBtnIsTouch=!1},e.prototype.UpdateTouch=function(){this.spinBtnIsTouch&&this.m_Logic.m_GameTypeCur==a.eGameTypeCur.eGTC_General&&(this.spinBtnTouchTimer+=cc.director.getDeltaTime(),this.spinBtnTouchTimer,this.spinBtnTouchTimer>this.spinBtnTouchTimes&&this.onSpinBtnTouch())},e.prototype.onSpinBtnTouch=function(){this.spinBtnIsTouch=!1,this.spinBtnTouchTimer=0,this.SetMan2AutoSpin(),this.m_Logic.SetBtnState(a.eBtnState.eBS_FSIdle),this.m_Logic.m_DealWinPro.ShowGameWin()},o([s],e)}();i.default=_,cc._RF.pop()},{"./GameLogic_Skull":"GameLogic_Skull"}],DealBetRelevant_Skull:[function(e,t,i){"use strict";cc._RF.push(t,"fadcfLrcKWKzfBUOJNjpEFr","DealBetRelevant_Skull");var o=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,m=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)m=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(m=(a<3?n(m):a>3?n(t,i,m):n(t,i))||m);return a>3&&m&&Object.defineProperty(t,i,m),m};Object.defineProperty(i,"__esModule",{value:!0});var n=e("./GameLogic_Skull"),a=cc._decorator,m=a.ccclass,s=(a.property,function(){function e(e){this.m_iBet=0,this.m_iBetPct=0,this.m_iLines=0,this.m_fTotalBet=0,this.m_Logic=e}return e.prototype.Final=function(){this.m_ShowTotalBetCtrl=null,this.m_ShowLinesCtrl=null,this.m_ary_SprBetPct=null},e.prototype.ShowAllData=function(){this.m_ShowTotalBetCtrl.ShowNum1(this.m_fTotalBet,!0,-1,!1)},e.prototype.MaxBet=function(){},e.prototype.AddBet=function(){this.BIsCanChangeBet()&&(this.m_Logic.m_SlotMSGStru.m_iBetType=1)},e.prototype.SubBet=function(){this.BIsCanChangeBet()&&(this.m_Logic.m_SlotMSGStru.m_iBetType=-1)},e.prototype.BIsCanChangeBet=function(){switch(this.m_Logic.m_GameState){case n.eGameState.eGS_CanChangeBet:return!0}return!1},o([m],e)}());i.default=s,cc._RF.pop()},{"./GameLogic_Skull":"GameLogic_Skull"}],DealItemRelevant_Skull:[function(e,t,i){"use strict";cc._RF.push(t,"550e4T1btFGU+QJOkDFCrKp","DealItemRelevant_Skull");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,m=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)m=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(m=(a<3?n(m):a>3?n(t,i,m):n(t,i))||m);return a>3&&m&&Object.defineProperty(t,i,m),m};Object.defineProperty(i,"__esModule",{value:!0}),i.eRollState=void 0;var m,s=e("./DataManager_Skull"),_=e("./DealAutoTrans_Skull"),r=e("./GameLogic_Skull"),l=cc._decorator,c=l.ccclass;l.property,function(e){e[e.eRS_None=0]="eRS_None",e[e.eRS_Rolling=1]="eRS_Rolling"}(m=i.eRollState||(i.eRollState={}));var S=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var o=e.call(this)||this;return o.m_ItemCtrl=null,o.m_eRollState=m.eRS_None,o.m_fItemTransInter=.2,o.m_fItemTransTimer=0,o.m_fItemStopTotalTime=.3,o.m_fItemStopTotalTimer=0,o.m_iColStop=0,o.m_bIsTransing=!1,o.m_bIsGetResult=!1,o.m_bIsAutoStopOpened=!1,o.m_list_iColCanShowRollEff=new Array,o.m_bIsRunRollEff=!1,o.m_fRollEffTotalTime=1,o.m_fRollEffTimer=0,o.m_bIsOverall=!1,o.m_Logic=t[0],o}return n(t,e),t.prototype.Final=function(){this.m_ItemCtrl=null},t.prototype.UpdateState=function(){this.m_ItemCtrl.StateItemCtrl()},t.prototype.ResetParam=function(){this.m_fItemTransTimer=0,this.m_fItemStopTotalTimer=0,this.m_bIsTransing=!1,this.m_bIsGetResult=!1,this.m_eRollState=m.eRS_None,this.m_bIsAutoStopOpened=!1,this.m_bIsRunRollEff=!1,this.m_fRollEffTimer=0,this.m_RollerEff.active&&(this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEStop(this.m_RollingSllow,this.m_Logic.m_iSeatID),this.m_RollerEff.active=!1),this.m_bIsOverall=!1},t.prototype.ShowInitResultSpr=function(){this.m_ItemCtrl.ShowInitResultSpr()},t.prototype.OnTrans=function(){this.m_ItemCtrl.OnTrans()},t.prototype.SetAllItemResult=function(e){this.m_ItemCtrl.SetAllItemResult(e)},t.prototype.SetAItemResult=function(e,t,i){this.m_ItemCtrl.SetOneItemResult(e,t,i)},t.prototype.SetAllItemStop=function(e){var t=this;void 0===e&&(e=!0);var i=!1;if(this.m_bIsRunRollEff){this.m_list_iColCanShowRollEff[0];for(var o=0;o<s.m_iItemCol;o++)this.Get_m_ary_bIsCanStop(o)||(this.SetAColItemStop(o),i=!0)}else this.m_ItemCtrl.SetAllItemStop(),this.m_Logic.m_DealSound&&(this.m_SoundSpin=this.m_Logic.m_DealSound.SEPlay(s.eAudioName.Sound_SpinStop,this.m_Logic.m_iSeatID,!1,!0)),i=!0;i&&e&&this.scheduleOnce(function(){t.m_Logic.m_DealSound&&(t.m_SoundSpin=t.m_Logic.m_DealSound.SEPlay(s.eAudioName.Sound_SpinStop,t.m_Logic.m_iSeatID,!1,!0))},.25)},t.prototype.SetAColItemStop=function(e,t){var i,o=this;void 0===t&&(t=!0),this.m_ItemCtrl.SetAColItemStop(e),t&&this.scheduleOnce(function(){2==o.GetStopSound(e)?o.m_Logic.m_DealSound&&(o.m_SoundSpin=o.m_Logic.m_DealSound.SEPlay(s.eAudioName.Sound_FreeStop,o.m_Logic.m_iSeatID,!1,!0)):o.m_Logic.m_DealSound&&(o.m_SoundSpin=o.m_Logic.m_DealSound.SEPlay(s.eAudioName.Sound_SpinStop,o.m_Logic.m_iSeatID,!1,!0))},.25),this.m_fRollEffTimer=0,-1!=(i=this.m_list_iColCanShowRollEff.indexOf(e))&&(this.m_bIsRunRollEff=!1),this.m_RollerEff.active&&(this.m_RollerEff.active=!1,this.m_AnimRollerEff.stop(),null!=this.m_RollingSllow&&this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEStop(this.m_RollingSllow,this.m_Logic.m_iSeatID)),this.m_list_iColCanShowRollEff.length>=1?this.m_bIsRunRollEff||(this.m_bIsRunRollEff=!0,this.m_RollerEff.active||(this.SetModifySpeed(this.m_list_iColCanShowRollEff[0]+1,1.5),this.m_Logic.m_DealSound&&(this.m_RollingSllow=this.m_Logic.m_DealSound.SEPlay(s.eAudioName.Sound_RollingSllow,this.m_Logic.m_iSeatID,!1,!0)),this.m_RollerEff.position=this.m_VecRollerEff[this.m_list_iColCanShowRollEff[0]+1],this.m_RollerEff.active=!0,this.m_AnimRollerEff.play(),this.m_list_iColCanShowRollEff.splice(i,1))):(this.m_bIsRunRollEff=!1,this.m_RollerEff.active=!1)},t.prototype.GetImage=function(e,t){return this.m_ItemCtrl.GetImage(e,t)},t.prototype.Get_IsAllItemTransEnd=function(){return this.m_ItemCtrl.Get_IsAllItemTransEnd()},t.prototype.Get_m_ary_bIsCanStop=function(e){return this.m_ItemCtrl.Get_m_ary_bIsCanStop(e)},t.prototype.DealTransStop=function(){var e=this;switch(this.m_eRollState){case m.eRS_None:this.m_bIsGetResult&&(this.OnTrans(),this.SetAllItemResult(this.m_Logic.m_arys_ItemResult),this.scheduleOnce(function(){e.SetTransing()},.1),this.m_eRollState=m.eRS_Rolling);break;case m.eRS_Rolling:this.m_bIsTransing&&this.ItemTransLogic()}},t.prototype.SetTransing=function(){this.m_bIsTransing=!0},t.prototype.ItemTransLogic=function(){if(this.m_fRollEffTimer+=cc.director.getDeltaTime(),this.IsAutoStopOpened()){if(this.m_bIsRunRollEff&&this.m_fRollEffTimer<this.m_fRollEffTotalTime)return;if(this.m_fItemTransTimer+=cc.director.getDeltaTime(),this.m_fItemTransTimer>=this.m_fItemTransInter)for(var e=0;e<s.m_iItemCol;e++)if(!this.Get_m_ary_bIsCanStop(e)){this.m_fItemTransTimer=0,this.SetAColItemStop(e);break}}},t.prototype.AllStopItem=function(){this.m_bIsTransing&&this.m_bIsGetResult&&(this.SetAllItemStop(),this.m_Logic.m_eStartKey=r.eStartKey.eSK_None)},t.prototype.DesignateStopItem=function(){if(this.m_bIsTransing&&this.m_bIsGetResult){var e=this.m_iColStop;e<0||e>=this.m_Logic.m_arys_ItemResult.length||this.Get_m_ary_bIsCanStop(e)||(this.SetAColItemStop(e),this.m_fItemStopTotalTimer=0)}},t.prototype.IsAutoStopOpened=function(){return!!this.m_bIsAutoStopOpened||(this.m_Logic.m_DealAutoTrans.m_ePlayMode==_.ePlayMode.ePM_Auto?(this.m_bIsAutoStopOpened=!0,!0):(this.m_fItemStopTotalTimer+=cc.director.getDeltaTime(),this.m_fItemStopTotalTimer>=this.m_fItemStopTotalTime&&(this.m_bIsAutoStopOpened=!0,!0)))},t.prototype.AColStopEvn=function(){},t.prototype.SetModifySpeed=function(e,t){void 0===t&&(t=.5),this.m_ItemCtrl.SetModifySpeed(e,t)},t.prototype.SetGameTypeCurIndex=function(e){this.m_ItemCtrl.m_GameTypeCurIndex=e},t.prototype.GetStopSound=function(e){var t=0;if(e>=0&&e<=s.m_iItemCol)for(var i=s.m_iItemRow-1;i>=0;i--)if(this.m_Logic.m_arys_ItemResult[e][i]==s.m_iItem_FREE){t=2;break}return t},t.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},a([c],t)}(cc.Component);i.default=S,cc._RF.pop()},{"./DataManager_Skull":"DataManager_Skull","./DealAutoTrans_Skull":"DealAutoTrans_Skull","./GameLogic_Skull":"GameLogic_Skull"}],DealWinProcess_Skull:[function(e,t,i){"use strict";cc._RF.push(t,"d7cbfy6fdfkUI9JGu6LZdFC","DealWinProcess_Skull");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,m=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)m=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(m=(a<3?n(m):a>3?n(t,i,m):n(t,i))||m);return a>3&&m&&Object.defineProperty(t,i,m),m};Object.defineProperty(i,"__esModule",{value:!0}),i.eLuckyPrizeID=i.eManPullJPState=i.eTransScoreMode=i.eShowLinesMode=i.ePreObj=i.eTransScoreKey=void 0;var m,s,_,r,l=e("./DataManager_Skull"),c=e("./GameLogic_Skull");(function(e){e[e.eSK_None=0]="eSK_None",e[e.eSK_CanGetScoreFast=1]="eSK_CanGetScoreFast",e[e.eSK_CanGetScoreAll=2]="eSK_CanGetScoreAll"})(m=i.eTransScoreKey||(i.eTransScoreKey={})),function(e){e[e.ePO_None=-1]="ePO_None",e[e.ePO_ItemAnim=0]="ePO_ItemAnim",e[e.ePO_LinesFra=1]="ePO_LinesFra",e[e.ePO_Bouns=2]="ePO_Bouns",e[e.ePO_ItemWILD=3]="ePO_ItemWILD",e[e.ePO_ItemAnim_1=4]="ePO_ItemAnim_1",e[e.ePO_Bouns_1=5]="ePO_Bouns_1",e[e.ePO_MaxValue=6]="ePO_MaxValue"}(s=i.ePreObj||(i.ePreObj={})),function(e){e[e.eSLM_HideAll=0]="eSLM_HideAll",e[e.eSLM_ShowAll=1]="eSLM_ShowAll",e[e.eSLM_ShowAllGen=2]="eSLM_ShowAllGen",e[e.eSLM_HideAllGen=3]="eSLM_HideAllGen",e[e.eSLM_ShowSingle=4]="eSLM_ShowSingle",e[e.eSLM_HideSingle=5]="eSLM_HideSingle",e[e.eSLM_ShowFS=6]="eSLM_ShowFS",e[e.eSLM_ShowFSOut=7]="eSLM_ShowFSOut",e[e.eSLM_ShowWILD=8]="eSLM_ShowWILD"}(_=i.eShowLinesMode||(i.eShowLinesMode={})),function(e){e[e.eTSM_None=-1]="eTSM_None",e[e.eTSM_GameToWin=0]="eTSM_GameToWin",e[e.eTSM_GenWinToCredit=1]="eTSM_GenWinToCredit",e[e.eTSM_FSMedTotalWinToCredit=2]="eTSM_FSMedTotalWinToCredit",e[e.eTSM_MedToWin=3]="eTSM_MedToWin",e[e.eTSM_JPToCredit=4]="eTSM_JPToCredit"}(r=i.eTransScoreMode||(i.eTransScoreMode={}));var S,h,u=cc._decorator,d=u.ccclass;u.property,function(e){e[e.eMPJPS_None=0]="eMPJPS_None",e[e.eMPJPS_Timer=1]="eMPJPS_Timer",e[e.eMPJPS_JPPro=2]="eMPJPS_JPPro"}(S=i.eManPullJPState||(i.eManPullJPState={})),function(e){e[e.e_None=-1]="e_None",e[e.e_LP_0=0]="e_LP_0",e[e.e_LP_1=1]="e_LP_1",e[e.e_LP_2=2]="e_LP_2",e[e.e_LP_3=3]="e_LP_3",e[e.MaxValue=4]="MaxValue"}(h=i.eLuckyPrizeID||(i.eLuckyPrizeID={}));var p=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var o=e.call(this)||this;o.m_eTransScoreMode=r.eTSM_None,o.m_eeTransScoreModeJP=r.eTSM_None,o.m_bIsJPTransScoreing=!1,o.m_eManPullJPState=S.eMPJPS_None,o.m_list_PrizeInfos=[],o.m_list_ScatterInfos=[],o.m_list_AnimItemCtrlShowing=[],o.m_list_AnimItemBonusCtrlShowing=[],o.m_list_ItemCtrlShowing=[],o.m_list_gItemFraShowing=[],o.m_ary_imagBG=new Array(2),o.m_iExplodeMax=0,o.m_iAllAwardsID=-1,o.m_iJackpotId=-1,o.m_dJackpotScore=0,o.m_iBonusID=0,o.m_iFSCountTotal=0,o.m_iFSCountUesed=0,o.m_iFSCountAdd=0,o.m_iFSCountLave=0,o.m_iFSTrigLinesCount=0,o.m_iNextGameSpecialOdds=0,o.m_dTableScore=0,o.m_dUserPoint=0,o.m_dWinScoreCur=0,o.m_dGameWinScoreCur=0,o.m_dTotalWinScoreCur=0,o.m_dFSTotalWinScore=0,o.m_bIsShowLinesFra=!1,o.m_bIsCanStopLine=!1,o.m_fNextLineToTalTime=1,o.m_bIsPullJPAbled=!1,o.m_OutWinScoreNumCtrl=new Array(3),o.m_ary_JackpotNumChange=[],o.m_Button_Set=null,o.m_Panel_Set=null,o.m_Mask_Set=null,o.m_Widget_m_ButtonSet=null,o.m_Widget_PanelSet=null,o.m_Toggle_SoundOn=null,o.m_Toggle_SoundOff=null,o.m_dic_iqPreObj=new Map,o.m_list_gAnimItemShowing=[],o.m_list_gAnimItemBonusShowing=[],o.m_liat_gLinesShowing=[],o.m_list_gAnimItemTumblerShowing=[],o.m_IsShowDonateMessage=!1,o.mTransScoreKey=m.eSK_None,o.m_FSAddSelectItems=[],o.m_FSAddSelectItemButtons=[],o.FSaddTimesNum=0,o.FS_bullets=[],o.m_FSAddEndItemNumCtrls=[],o.m_dic_iqPreObjItem=new Map,o.m_TumblerItemNum=[],o.soundParticle=null,o.m_bIsShowJPLoongAnim=!1,o.m_dPreSubNumJP=0,o.m_dSubNumDvaJP=0,o.m_bIsWinFSWaitPlayOver=!1,o.m_bIsTurntableStoped=!1,o.m_bIsTurnOverStoped=!1,o.m_bIsJcakpotOK=!1,o.selectAnimName=["bottle_3_smashing","bottle_2_smashing","bottle_1_smashing","gas_lamp_smashing_upper_middle","bottle_2_smashing","bottle_5_smashing","bottle_1_smashing","bottle_4_smashing","gas_lamp_smashing_middle","bottle_3_smashing","gas_lamp_smashing_middle","bottle_1_smashing","bottle_4_smashing","bottle_3_smashing","bottle_5_smashing","gas_lamp_smashing_upper_side","bottle_2_smashing","gas_lamp_smashing_middle_side"],o.idleAnimName=["bottle_3_static","bottle_2_static","bottle_1_static","gas_lamp_idle_upper_middle","bottle_2_static","bottle_5_static","bottle_1_static","bottle_4_static","gas_lamp_idle_middle","bottle_3_static","gas_lamp_idle_middle","bottle_1_static","bottle_4_static","bottle_3_static","bottle_5_static","gas_lamp_idle_upper_side","bottle_2_static","gas_lamp_idle_middle_side"],o.glassColors=["red","green","yellow","blue","pink"],o.isFirst=!1;var n=t[0];o.m_Logic=n,o.m_arys_ItemResult=o.m_Logic.m_arys_ItemResult;for(var a=s.ePO_None+1;a<s.ePO_MaxValue;a++)o.m_dic_iqPreObj.set(a,[]);for(a=0;a<17;a++)o.m_dic_iqPreObjItem.set(a,[]);return o}return n(t,e),t.prototype.onDestroy=function(){this.unscheduleAllCallbacks(),this.m_Logic.onDestroy(),this.m_TransScoreCtrl.onDestroy(),this.m_TransScoreCtrlJP.onDestroy()},t.prototype.Final=function(){this.m_ary_SprItems=null,this.m_ary_SprLinesFra=null,this.m_ary_SprItemPanel=null},t.prototype.MyUpdate=function(){this.m_Logic.m_DealAutoTrans.UpdateTouch()},t.prototype.ResetParam=function(){this.m_bIsCanStopLine=!1},t.prototype.UpdateTableScore=function(e){void 0===e&&(e=0)},t.prototype.ShowFSTimesUsed=function(){cc.log("====ShowFSTimesUsed",this.m_iFSCountUesed,this.m_iFSCountTotal),this.m_FSTimesUsedCtrl.ShowNum1(this.m_iFSCountUesed,!0,-1,!1)},t.prototype.ShowFSTimesTotal=function(){cc.log("====ShowFSTimesTotal",this.m_iFSCountTotal),this.m_FSTotalTimes.ShowNum1(this.m_iFSCountTotal,!0,-1,!1)},t.prototype.ShowTableScore=function(){cc.error("==>>\u663e\u793a\u53f0\u9762\u5206\u6570\uff1a"),this.m_Logic.game.iGameBase.isNoWin()?this.ShowUserPoint():this.ShowImageNum(this.m_ShowTotalWinNumCtrl,this.m_dTableScore)},t.prototype.ShowTotalWin=function(){this.ShowImageNum(this.m_ShowTotalWinNumCtrl,this.m_dTotalWinScoreCur)},t.prototype.ShowGameWin=function(e){void 0===e&&(e=0),this.ShowImageNum(this.m_ShowGameWinNumCtrl,e)},t.prototype.ShowMidWin=function(e){this.m_transMidBigWinP.active=!0,this.ShowImageNum(this.m_MedBigWinScoreNumCtrl,e)},t.prototype.ShowUserPoint=function(){cc.log("==>>\u663e\u793a\u603b\u5206\u6570\uff1a"+this.m_dUserPoint),this.ShowImageNum(this.m_ShowCreditCtrl,this.m_dUserPoint)},t.prototype.ShowMultiple=function(){},t.prototype.ShowImageNum=function(e,t){e.ShowNum1(t,!0,0,!1)},t.prototype.SetStopLine=function(e){this.m_bIsShowLinesFra&&(this.m_bIsCanStopLine=e)},t.prototype.ShowLottery=function(){this.DealWinEff(this.m_dWinScoreCur)},t.prototype.DealWinEff=function(e){if(e>0&&this.m_list_PrizeInfos.length>0){this.m_gLinesMask.active=!0,this.m_list_AnimItemCtrlShowing=[],this.m_list_ItemCtrlShowing=[],this.m_list_gItemFraShowing=[],this.m_bIsShowLinesFra=!0,this.m_eManPullJPState=S.eMPJPS_Timer;var t=0;this.SetLineFAndItemAnimAct(_.eSLM_ShowAllGen,-1,e);var i=this.m_fNextLineToTalTime;this.ShowWinEff(e);var o=function(){this.m_bIsCanStopLine?(this.unschedule(o),cc.log("DealWinEff \u53d6\u6d88\u8ba1\u65f6\u5668",this.m_bIsCanStopLine),this.m_bIsShowLinesFra=!1,e>0&&(this.m_dWinScoreCur=0,this.m_Logic.m_GameTypeCur==c.eGameTypeCur.eGTC_General&&this.ShowGameWin()),this.m_Logic.m_GameState==c.eGameState.eGS_TransGameMode?this.SetLineFAndItemAnimAct(_.eSLM_HideAllGen):this.DealWinEff_Reset()):(this.SetLineFAndItemAnimAct(_.eSLM_HideAll),this.SetLineFAndItemAnimAct(_.eSLM_ShowSingle,this.m_list_PrizeInfos[t].line),++t==this.m_list_PrizeInfos.length&&(t=0))};this.schedule(o,i)}else this.ShowWinEff(e)},t.prototype.ShowWinEff=function(e){if(e>0)switch(this.m_Logic.m_PrizeType){case c.ePrizeType.ePT_None:break;case c.ePrizeType.ePT_General:case c.ePrizeType.ePT_Small:case c.ePrizeType.ePT_Medium:case c.ePrizeType.ePT_Big:case c.ePrizeType.ePT_AllAward:if(e>0){var t;this.m_Logic.m_DealSound&&(t=this.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_GameWinTrans,this.m_Logic.m_iSeatID,!0,!1)),this.m_AddShowNum=this.m_ShowGameWinNumCtrl,this.m_SubShowNum=null,this.m_eTransScoreMode=r.eTSM_GameToWin,this.mTransScoreKey=m.eSK_CanGetScoreFast;var i=function(){var i=this;this.m_eTransScoreMode=r.eTSM_None,this.mTransScoreKey=m.eSK_None,this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEStop(t,this.m_Logic.m_iSeatID),this.m_AddShowNum=this.bigWin_WinNumCtrl,this.ShowTableScore(),this.m_Logic.m_DealSound&&(t=this.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_TotalWinTrans,this.m_Logic.m_iSeatID,!1,!1)),this.ShowWinScoreAnim(1),this.m_Logic.m_GameTypeCur==c.eGameTypeCur.eGTC_General?this.m_Logic.m_PrizeType>c.ePrizeType.ePT_General?this.scheduleOnce(function(){i.m_eTransScoreMode=r.eTSM_MedToWin,i.mTransScoreKey=m.eSK_CanGetScoreFast,i.m_SubShowNum=null;var o="count_glow_start_3s",n="big_win_start_3s";i.m_Logic.m_PrizeType==c.ePrizeType.ePT_Small?(o="count_glow_start_3s",n="big_win_start_3s"):i.m_Logic.m_PrizeType==c.ePrizeType.ePT_Medium?(o="count_glow_start_6s",n="big_win_start_6s"):(cc.log("=====>>\u663e\u793a\u5927\u5956\u754c\u9762"),o="count_glow_start_9s",n="big_win_start_9s"),i.m_Logic.m_DealSound&&(t=i.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_BigWin,i.m_Logic.m_iSeatID,!0,!1)),i.m_PanelBigWin.active=!0,i.m_bigWin_glow.getComponent(sp.Skeleton).setAnimation(0,o,!1),i.m_bigWin_glow.getComponent(sp.Skeleton).addAnimation(0,"count_glow_end_3_6_9",!1),i.m_bigWin_transition.getComponent(sp.Skeleton).setAnimation(0,n,!1),i.scheduleOnce(function(){i.m_bigWin_NumPar.active=!0,i.m_TransScoreCtrl.TransScore(e,0,function(){var o=i.m_bigWin_transition.getComponent(sp.Skeleton).setAnimation(0,"big_win_end_3_6_9",!1);i.m_bigWin_transition.getComponent(sp.Skeleton).setTrackCompleteListener(o,function(){i.m_PanelBigWin.active=!1,i.m_transMidMiddleWinP.active=!1,i.m_transMidSmallWinP.active=!1,i.m_transMidBigWinP.active=!1,i.m_eTransScoreMode=r.eTSM_None,i.mTransScoreKey=m.eSK_None,i.m_Logic.m_DealSound&&i.m_Logic.m_DealSound.SEStop(t,i.m_Logic.m_iSeatID),i.ShowWinEnd(e)}),i.scheduleOnce(function(){i.m_bigWin_NumPar.active=!1},2)})},.2)},l.m_Delay2):this.ShowWinEnd(e):(this.m_dGameWinScoreCur+=e,this.ShowWinEnd(e))};this.m_Logic.m_GameTypeCur==c.eGameTypeCur.eGTC_General?this.m_TransScoreCtrl.TransScore(e,0,i):this.m_TransScoreCtrl.TransScore(e,this.m_dGameWinScoreCur,i)}}else this.ShowWinEnd(e)},t.prototype.ShowWinEnd=function(e){var t=this;cc.log("===ShowWinEnd===dWinScore:",e),!this.m_bIsPullJPAbled&&this.m_iJackpotId>h.e_None&&this.m_iJackpotId<h.MaxValue&&(this.SetLineFAndItemAnimAct(_.eSLM_HideAll),this.GetCJ(this.m_iJackpotId));var i=function(){cc.log("this.m_iFSCountAdd",this.m_iFSCountAdd,this.m_Logic.m_GameTypeCur),this.m_iFSCountAdd>0?this.ShowWinEnd_FSCountAdd(e):this.m_Logic.m_GameTypeNext==c.eGameTypeNext.eGTN_FreeGame&&this.m_Logic.m_GameTypeCur!=c.eGameTypeCur.eGTC_FreeGame?(this.m_playingWinEffect=!1,this.ShowTableScore(),this.m_Logic.sendWaitBound(),cc.log("====ShowWinEff  \u8fdb\u5165\u514d\u8d39\u6e38\u620f"),this.m_Text_LinesScores.string="Click play to start"):this.m_Logic.m_GameTypeNext!=c.eGameTypeNext.eGTN_FreeGame&&this.m_Logic.m_GameTypeCur==c.eGameTypeCur.eGTC_FreeGame?this.ShowWinEnd_FS2General(e):this.m_iFSCountAdd<=0&&(this.m_Logic.m_GameTypeCur!=c.eGameTypeCur.eGTC_FreeGame&&this.ShowTableScore(),this.m_bIsShowLinesFra?this.SetStopLine(!0):this.DealWinEff_Reset())},o=function(){this.m_bIsPullJPAbled||!this.m_bIsPullJPAbled&&this.m_iJackpotId>h.e_None||(this.unschedule(o),i.call(this))};if(this.m_Logic.m_GameTypeCur==c.eGameTypeCur.eGTC_FreeGame){var n=this.ShowFSAddItemAnim();cc.log("\u514d\u8d39\u6e38\u620f\u5f53\u524d\u662f\u5426\u663e\u793a\u676f\u5b50\u52a8\u753b",n),n?(this.m_Logic.m_GameState=c.eGameState.eGS_TransGameMode,this.SetStopLine(!0),this.SetLineFAndItemAnimAct(_.eSLM_HideAll),this.scheduleOnce(function(){t.schedule(o,1)},3)):this.schedule(o,1)}else this.schedule(o,1)},t.prototype.ShowWinEnd_FSCountAdd=function(){cc.log("====ShowWinEff \u514d\u8d39\u6e38\u620f\u589e\u52a0",this.m_iFSCountAdd),this.m_bIsWinFSWaitPlayOver=!1,this.m_Logic.m_eStartKey=c.eStartKey.eSK_WinFSWaitPlay,this.m_Logic.SetTransMode(),this.SetStopLine(!0),this.m_Logic.sendSelectCard(-1)},t.prototype.ShowWinEnd_FS2General=function(){var e,t=this;cc.log("====ShowWinEff  \u5f53\u524d\u514d\u8d39\u6e38\u620f,\u4e0b\u4e00\u8f6e\u4e0d\u662f\u514d\u8d39\u6e38\u620f\uff01--m_dFSTotalWinScore",this.m_dFSTotalWinScore,this.m_iFSTrigLinesCount),this.m_Logic.SetTransMode(),this.SetStopLine(!0),this.m_bIsWinFSWaitPlayOver=!1,this.m_OutFS.active=!0,this.m_gFSParBG.active=!0,this.m_eTransScoreMode=r.eTSM_MedToWin,this.mTransScoreKey=m.eSK_CanGetScoreFast,this.m_SubShowNum=null,e=this.m_dFSTotalWinScore,this.m_gFSUseP.active=!1,this.m_PlayerBG.spriteFrame=this.m_ary_imagBG[0],this.bg_skeleton.active=!0,this.m_BGNode0.active=!0,this.m_BGNode1.active=!1,this.HideFSAddItemAnim(),this.m_Text_LinesScores.string="Congratulation! You won "+this.m_Logic.game.iGameBase.getNum(e,!1),this.Panel_WinEffect.active=!0,this.m_WinEffect_rouge_popup.active=!0,this.m_WinEffect_OKBtn.active=!1,this.m_WinEffect_WinPanel.active=!0,this.m_WinEffect_WinPanel.setScale(0),this.Panel_WinNumCtrl.ShowNum1(e,!0,-1,!1),this.m_Logic.m_DealSound&&(this.FS2GeneralSound=this.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_FreeEnd,this.m_Logic.m_iSeatID,!1,!1)),this.m_WinEffect_rouge_popup.getComponent(sp.Skeleton).setAnimation(0,"bonus_in_bonus",!1),cc.tween(this.m_WinEffect_WinPanel).to(.2,{scale:1}).call(function(){t.m_WinEffect_OKBtn.active=!0,t.m_WinEffect_WinPanel.setScale(1)}).start()},t.prototype.ActiveLoongAnim=function(){this.m_bIsShowJPLoongAnim=!0},t.prototype.ShowCJ=function(e,t){if(!this.m_JcakpotEffBG.active){switch(this.m_JcakpotEffBG.active=!0,this.m_Logic.m_eStartKey){case c.eStartKey.eSK_StopAllItem:this.m_Logic.m_DealItem.AllStopItem()}this.m_gJackpotPre=this.m_Logic.m_GameSlotJcakpot.PullJcakpot(e,t,this.m_VecTargetJP,cc.v3(1,1,1),cc.v3(2,2,2),!0,2,!1)}},t.prototype.TransCJScore=function(){var e,t=this;this.m_Logic.m_DealSound&&(e=this.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_BigWin,this.m_Logic.m_iSeatID,!0,!1)),this.m_bIsJPTransScoreing=!0,this.m_eeTransScoreModeJP=r.eTSM_JPToCredit,this.m_SubShowNumJP=this.m_Logic.m_GameSlotJcakpot.GetShowNum();var i=this.m_dUserPoint;this.m_Logic.game.iGameBase.isNoWin()?(this.m_AddShowNumJP=this.m_ShowCreditCtrl,i=this.m_dUserPoint):(this.m_AddShowNumJP=this.m_ShowTotalWinNumCtrl,i=this.m_dTableScore);var o=100*this.m_dJackpotScore;this.m_TransScoreCtrlJP.TransScore(o,i,function(){t.m_bIsJPTransScoreing=!1,t.m_eeTransScoreModeJP=r.eTSM_None,t.m_Logic.m_DealSound&&t.m_Logic.m_DealSound.SEStop(e,t.m_Logic.m_iSeatID),t.m_Logic.m_GameSlotJcakpot.ColseJcakpot(t.m_gJackpotPre),t.m_Logic.m_GameSlotJcakpot.StopWinJPEff(t.m_iJackpotId,t.m_Logic.m_ary_dJackpot[t.m_iJackpotId],2),t.m_Logic.m_GameSlotJcakpot.ShowJcakpotNum(t.m_Logic.m_ary_dJackpot,2),t.m_JcakpotEffBG.active=!1,t.m_dJackpotScore=0,t.m_iJackpotId=h.e_None,t.m_bIsPullJPAbled=!1,t.m_eManPullJPState=S.eMPJPS_None,t.m_bIsJcakpotOK=!0,t.m_Logic.sendFinishPayJackpot(),t.m_Logic.OnShowMarquee()})},t.prototype.SubTransScore=function(e){switch(this.m_eTransScoreMode){case r.eTSM_GameToWin:case r.eTSM_MedToWin:case r.eTSM_GenWinToCredit:case r.eTSM_FSMedTotalWinToCredit:null!=this.m_SubShowNum&&this.ShowImageNum(this.m_SubShowNum,e)}},t.prototype.AddTransScore=function(e){switch(this.m_eTransScoreMode){case r.eTSM_GameToWin:case r.eTSM_MedToWin:case r.eTSM_GenWinToCredit:case r.eTSM_FSMedTotalWinToCredit:null!=this.m_AddShowNum&&this.ShowImageNum(this.m_AddShowNum,e)}},t.prototype.SubTransScoreJP=function(e){switch(this.m_eeTransScoreModeJP){case r.eTSM_JPToCredit:e>=100*this.m_dJackpotScore&&(this.m_dPreSubNumJP=100*this.m_dJackpotScore),this.m_dSubNumDvaJP=this.m_dPreSubNumJP-e,this.m_dPreSubNumJP=e,this.ShowImageNum(this.m_SubShowNumJP,e),this.m_Logic.game.iGameBase.isNoWin()?this.m_dUserPoint+=this.m_dSubNumDvaJP:this.m_dTableScore+=this.m_dSubNumDvaJP,this.ShowTableScore()}},t.prototype.AddTransScoreJP=function(e){switch(this.m_eeTransScoreModeJP){case r.eTSM_JPToCredit:null!=this.m_AddShowNumJP&&this.ShowImageNum(this.m_AddShowNumJP,e)}},t.prototype.GetWinFast=function(){if(this.m_eTransScoreMode!=r.eTSM_None)switch(this.mTransScoreKey){case m.eSK_None:break;case m.eSK_CanGetScoreFast:this.m_TransScoreCtrl.setScoreState(1),this.mTransScoreKey=m.eSK_CanGetScoreAll,cc.log("\u52a0\u5feb\u8df3\u5206");break;case m.eSK_CanGetScoreAll:this.m_TransScoreCtrl.setScoreState(2),this.mTransScoreKey=m.eSK_None,cc.log("\u505c\u6b62\u8df3\u5206")}},t.prototype.PlayFreeGame=function(e,t,i,o,n,a,m,s,r,S){var h=this;cc.log("\u514d\u8d39\u6e38\u620f\u5f00\u59cb:PlayFreeGame"),this.m_Logic.m_eStartKey=c.eStartKey.eSK_WinFSWaitPlay,this.m_Logic.SetTransMode(),this.SetStopLine(!0),this.ShowGameWin(),this.m_Logic.m_iBetIndex=e,this.m_Logic.m_DealBetRel.m_iBet=t,this.m_Logic.m_DealBetRel.m_iLines=i,this.m_Logic.m_DealBetRel.m_iBetPct=o,this.m_iFSCountTotal=n,this.m_iFSCountUesed=a,this.m_iNextGameSpecialOdds=m,this.m_iFSTrigLinesCount=s,this.m_Logic.m_DealBetRel.m_fTotalBet=r,this.m_iFSCountLave=this.m_iFSCountTotal-this.m_iFSCountUesed,this.m_Logic.m_DealBetRel.ShowAllData(),this.m_dWinScoreCur=0;var u=!0,d=l.m_Delay3;this.m_Logic.m_bIsHasFSFromInit&&(this.m_dFSTotalWinScore=S,this.m_dWinScoreCur=this.m_dFSTotalWinScore,u=!1,d=0),this.ShowTableScore(),this.SetLineFAndItemAnimAct(_.eSLM_ShowFS),this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_FreeEnab,this.m_Logic.m_iSeatID,!1,!0),this.scheduleOnce(function(){h.SetLineFAndItemAnimAct(_.eSLM_HideAll),h.ResetParam(),h.ShowFSTimesUsed(),h.ShowFSTimesTotal(),h.m_dGameWinScoreCur+=h.m_dFSTotalWinScore,h.ShowGameWin(h.m_dGameWinScoreCur),u?(h.m_Logic.m_DealSound&&h.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_FreeEnab1,h.m_Logic.m_iSeatID,!1,!0),h.m_Logic.m_bStartCtrl=!0,h.m_gIntoFS.active=!0,h.m_BeforeFSTimesCtrl.ShowNum1(h.m_iFSCountTotal,!0,-1,!1),h.m_gIntoFS_rouge_popup.active=!0,h.m_gIntoFS_OKBtn.active=!1,h.m_gIntoFS_FSInto.active=!0,h.m_gIntoFS_FSInto.setScale(0),cc.tween(h.m_gIntoFS_FSInto).to(.3,{scale:1}).call(function(){cc.log("=----------this.m_gIntoFS_FSInto"),h.m_gIntoFS_OKBtn.active=!0,h.m_gIntoFS_FSInto.scale=1}).start(),h.m_gIntoFS_rouge_popup.getComponent(sp.Skeleton).setAnimation(0,"bonus_in_bonus",!1)):h.PlayFreeGame2()},d)},t.prototype.PlayFreeGame2=function(){this.m_PlayerBG.spriteFrame=this.m_ary_imagBG[1],this.bg_skeleton.active=!1,this.m_BGNode0.active=!1,this.m_BGNode1.active=!0,this.ShowMultiple(),this.m_gFSPar.active=!0,this.m_gFSUseP.active=!0,this.InitFSAddItem();var e=function(){cc.log("wait========"),this.m_bIsWinFSWaitPlayOver&&(this.unschedule(e),this.m_gIntoFS.active=!1,this.m_gLinesMask.active=!1,this.m_gFSParBG.active=!1,this.m_Logic.m_GameTypeCur=c.eGameTypeCur.eGTC_FreeGame,this.m_Logic.game.iGameBase.setGameTypeCur(this.m_Logic.m_GameTypeCur),this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.BGMPlay(l.eAudioName.BGM_Free),this.m_Logic.m_DealItem.SetGameTypeCurIndex(this.m_Logic.m_GameTypeCur),this.m_Logic.WaitFreeGameSelect(),cc.log("----------------------\x3e>>>this.m_Logic.m_GameTypeCur",this.m_Logic.m_GameTypeCur))};this.schedule(e,l.m_Delay1),this.m_Logic.SetStartWaitPlay(),this.m_iFSCountAdd>0&&(this.m_gIntoFS.active=!1,this.m_gLinesMask.active=!1,this.m_gFSParBG.active=!1,this.m_Logic.SetBtnState(c.eBtnState.eBS_Trans),this.m_Logic.sendSelectCard(-1))},Object.defineProperty(t.prototype,"M_bIsWinFSWaitPlayOver",{get:function(){return this.m_bIsWinFSWaitPlayOver},set:function(e){this.m_bIsWinFSWaitPlayOver=e},enumerable:!1,configurable:!0}),t.prototype.DealWinEff_Reset=function(){this.m_eManPullJPState=S.eMPJPS_None,this.m_gLinesMask.active=!1,this.SetLineFAndItemAnimAct(_.eSLM_HideAll),this.ResetParam(),this.m_Logic.StartIdle()},t.prototype.SetTurntableStop=function(){var e=this;cc.log("\u8bbe\u7f6e\u8f6c\u76d8\u6d41\u7a0b\u5b8c\u6210"),this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEStop(this.m_rotateSound,this.m_Logic.m_iSeatID),this.m_bIsTurntableStoped=!0,this.m_TransTurntableBtn.interactable=!0,this.scheduleOnce(function(){e.m_gPanelTurntable.active=!1,e.m_Logic.sendAskForBeginPayJackpot()},1)},t.prototype.StartTurntableCallBack=function(){this.m_TransTurntableBtn.interactable=!1,this.m_Logic.m_DealSound&&(this.m_rotateSound=this.m_Logic.m_DealSound.SEPlay(l.eAudioName.reel_spining,this.m_Logic.m_iSeatID,!1,!0))},t.prototype.SetTurnOverStop=function(){cc.log("\u8bbe\u7f6e\u7ffb\u724c\u6d41\u7a0b\u5b8c\u6210"),this.m_bIsTurnOverStoped=!0,this.m_Logic.sendAskForBeginPayJackpot()},t.prototype.SetJcakpotMoved=function(){this.TransCJScore()},t.prototype.PlayOnClick=function(){cc.log("\u70b9\u51fb\u94dc\u94b1\u97f3\u6548")},t.prototype.GetCJ=function(e){cc.log("===GetCJ==="+this.m_gPanelTurntable.name),this.m_Logic.m_GameSlotJcakpot.SetTurntableId(e),this.m_Logic.sendAskForBeginPayJackpot()},t.prototype.GetCJ1=function(e){this.m_gPanelTurntable.active=!0,this.m_Logic.m_GameSlotJcakpot.SetTurntableId(e)},t.prototype.TransScoreA=function(e,t,i){if(t>-1&&i>0){var o,n=i;this.m_ary_JackpotNumChange[t].setJackpot(n),this.ShowCJ(t,100*n),this.m_Logic.m_DealSound&&(o=this.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_BigWin,this.m_Logic.m_iSeatID,!0,!1));var a=n/100;a<=0&&(a=1);var m=function(){n>0?((n-=a)<0&&(n=0),this.m_ary_JackpotNumChange[t].setJackpot(n)):(this.unschedule(m),this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEStop(o,this.m_Logic.m_iSeatID))};this.schedule(m,.02)}},t.prototype.onSetClick=function(){var e=this;this.m_Panel_Set.active=!0,this.m_Pos_ButtonSet=this.m_Button_Set.getPosition(),this.m_Width_ButtonSet=this.m_Button_Set.getContentSize().width,this.m_Pos_PanelSet=this.m_Panel_Set.getPosition(),this.m_Width_PanelSet=this.m_Panel_Set.getContentSize().width,cc.tween(this.m_Button_Set).to(.25,{position:cc.v3(this.m_Pos_ButtonSet.x+this.m_Width_ButtonSet,this.m_Pos_ButtonSet.y,0)}).call(function(){e.m_Widget_m_ButtonSet.right=-e.m_Width_ButtonSet,e.m_Button_Set.active=!1,cc.tween(e.m_Panel_Set).to(.25,{position:cc.v3(e.m_Pos_PanelSet.x-e.m_Width_PanelSet,e.m_Pos_PanelSet.y,0)}).call(function(){e.m_Widget_PanelSet.right=0,e.m_Mask_Set.active=!0}).start()}).start()},t.prototype.onMaskClick=function(){var e=this;this.m_Panel_Set.active=!1,this.m_Pos_ButtonSet=this.m_Button_Set.getPosition(),this.m_Width_ButtonSet=this.m_Button_Set.getContentSize().width,this.m_Pos_PanelSet=this.m_Panel_Set.getPosition(),this.m_Width_PanelSet=this.m_Panel_Set.getContentSize().width,cc.tween(this.m_Panel_Set).to(.25,{position:cc.v3(this.m_Pos_PanelSet.x+this.m_Width_PanelSet,this.m_Pos_PanelSet.y,0)}).call(function(){e.m_Mask_Set.active=!1,e.m_Button_Set.active=!0,e.m_Widget_PanelSet.right=-e.m_Width_PanelSet,cc.tween(e.m_Button_Set).to(.25,{position:cc.v3(e.m_Pos_ButtonSet.x-e.m_Width_ButtonSet,e.m_Pos_ButtonSet.y,0)}).call(function(){e.m_Widget_m_ButtonSet.right=0}).start()}).start()},t.prototype.onSoundClick=function(){var e=this.m_Logic.game.iGameBase.SMGlobal_GetOpenSE();this.m_Logic.game.m_SoundSystem&&this.m_Logic.game.m_SoundSystem.SEToggle(!e),this.m_Toggle_SoundOn.active=e,this.m_Toggle_SoundOff.active=!e},t.prototype.InitSound=function(){var e=this.m_Logic.game.iGameBase.SMGlobal_GetOpenSE();this.m_Logic.game.m_SoundSystem&&this.m_Logic.game.m_SoundSystem.SEToggle(e),this.m_Toggle_SoundOn.active=e,this.m_Toggle_SoundOff.active=!e},t.prototype.showGamInfoPanel=function(){this.m_PanelRule.active=!0},t.prototype.hideGameInfo=function(){this.m_PanelRule.active=!1},t.prototype.SetLineFAndItemAnimAct=function(e,t,i){switch(void 0===t&&(t=-1),void 0===i&&(i=0),e){case _.eSLM_HideAll:for(var o=0;o<this.m_list_gAnimItemShowing.length;o++){(h=this.m_list_gAnimItemShowing[o]).active=!1;var n=Number(h.name);this.m_dic_iqPreObjItem.get(n).push(h)}for(o=0;o<this.m_list_gAnimItemBonusShowing.length;o++)(h=this.m_list_gAnimItemBonusShowing[o]).active=!1,this.m_dic_iqPreObj.get(s.ePO_Bouns).push(h);for(this.m_list_gAnimItemShowing=[],this.m_list_gAnimItemBonusShowing=[],o=0;o<this.m_liat_gLinesShowing.length;o++)this.m_liat_gLinesShowing[o].active=!1,this.m_dic_iqPreObj.get(s.ePO_LinesFra).push(this.m_liat_gLinesShowing[o]);this.m_liat_gLinesShowing=[];break;case _.eSLM_ShowAll:for(this.m_Text_LinesScores.string="You won a total of "+this.m_Logic.game.iGameBase.getNum(i,!1),this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_Line,this.m_Logic.m_iSeatID,!1,!0),o=0;o<this.m_list_PrizeInfos.length;o++)for(var a=this.m_list_PrizeInfos[o].line,m=this.m_list_PrizeInfos[o].ary_ilineFrom,r=0;r<m.length;r++)m[r]>-1&&this.ShowLineFAndItemAnim(r,m[r],a);for(o=0;o<this.m_list_ScatterInfos.length;o++)for(m=this.m_list_ScatterInfos[o].ary_ilineFrom,r=0;r<m.length;r++)m[r]>-1&&this.ShowLineFAndItemAnim(r,m[r],0);break;case _.eSLM_ShowAllGen:for(this.m_Text_LinesScores.string="You won a total of "+this.m_Logic.game.iGameBase.getNum(i,!1),this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_Line,this.m_Logic.m_iSeatID,!1,!0),o=0;o<this.m_list_PrizeInfos.length;o++)for(a=this.m_list_PrizeInfos[o].line,m=this.m_list_PrizeInfos[o].ary_ilineFrom,r=0;r<m.length;r++)m[r]>-1&&this.ShowLineFAndItemAnim(r,m[r],a);break;case _.eSLM_HideAllGen:for(o=0;o<this.m_list_gAnimItemShowing.length;o++)(h=this.m_list_gAnimItemShowing[o]).active=!1,n=Number(h.name),this.m_dic_iqPreObjItem.get(n).push(h);for(this.m_list_gAnimItemShowing=[],o=0;o<this.m_liat_gLinesShowing.length;o++)this.m_liat_gLinesShowing[o].active=!1,this.m_dic_iqPreObj.get(s.ePO_LinesFra).push(this.m_liat_gLinesShowing[o]);this.m_liat_gLinesShowing=[];break;case _.eSLM_ShowSingle:if(-1==t)return;for(o=0;o<this.m_list_PrizeInfos.length;o++)if(this.m_list_PrizeInfos[o].line==t){var c=this.m_list_PrizeInfos[o],S=(a=c.line,m=c.ary_ilineFrom,c.point*this.m_Logic.m_DealBetRel.m_iBet);for(this.m_Text_LinesScores.string="You won "+this.m_Logic.game.iGameBase.getNum(S,!1)+" on line "+(a+1).toString(),r=0;r<m.length;r++)m[r]>-1&&this.ShowLineFAndItemAnim(r,m[r],a);break}break;case _.eSLM_HideSingle:for(o=0;o<this.m_list_gAnimItemShowing.length;o++){var h;(h=this.m_list_gAnimItemShowing[o]).active=!1,n=Number(h.name),this.m_dic_iqPreObjItem.get(n).push(h)}for(this.m_list_gAnimItemShowing=[],o=0;o<this.m_liat_gLinesShowing.length;o++)this.m_liat_gLinesShowing[o].active=!1,this.m_dic_iqPreObj.get(s.ePO_LinesFra).push(this.m_liat_gLinesShowing[o]);this.m_liat_gLinesShowing=[];break;case _.eSLM_ShowFS:for(o=0;o<this.m_list_ScatterInfos.length;o++)for(m=this.m_list_ScatterInfos[o].ary_ilineFrom,r=0;r<m.length;r++)m[r]>-1&&this.ShowLineFAndItemAnim(r,m[r],0,!0)}},t.prototype.ShowLineFAndItemAnim=function(e,t,i,o){if(void 0===i&&(i=-1),void 0===o&&(o=!1),o){var n=this.GetPreObj(s.ePO_Bouns);return n.position=this.m_arys_VecItems[e][t],n.active=!0,void this.m_list_gAnimItemBonusShowing.push(n)}var a=this.m_arys_ItemResult[e][t],m=this.GetPreObj2(a);m.position=this.m_arys_VecItems[e][t],m.active=!0,this.IsTumblerIcon(a)&&this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_glassWin,this.m_Logic.m_iSeatID,!1,!0),this.m_list_gAnimItemShowing.push(m)},t.prototype.GetPreObj=function(e){var t=null;if(this.m_dic_iqPreObj.has(e))if(this.m_dic_iqPreObj.get(e).length>0)t=this.m_dic_iqPreObj.get(e).pop();else{var i=null;switch(e){case s.ePO_ItemAnim:break;case s.ePO_LinesFra:(i=cc.instantiate(this.m_gLinesFrame)).setParent(this.m_transLinesFrameP);break;case s.ePO_Bouns:(i=cc.instantiate(this.m_gBounsAnimPrefab)).setParent(this.m_transBounsAnimP);break;case s.ePO_Bouns_1:(i=cc.instantiate(this.m_gFSAddItemAnimPrefab)).setParent(this.m_transFSAddAnimP)}(t=i).active=!1}return t},t.prototype.GetPreObj2=function(e){var t=null;if(this.m_dic_iqPreObjItem.has(e))if(this.m_dic_iqPreObjItem.get(e).length>0)t=this.m_dic_iqPreObjItem.get(e).pop();else{var i=null;(i=cc.instantiate(this.m_gItemAnimPres[e])).setParent(this.m_transItemAnimP),i.name=""+e,(t=i).active=!1}return t},t.prototype.ShowDonateMessage=function(){this.m_Logic.game.iGameBase.ShowDonateMessage()},t.prototype.ShowFSAddSelectItemAnim=function(e){var t=this;cc.log("--------------\x3e>>ShowFSAddSelectItemAnim",e),1==this.m_Logic.FSAddSelectIndex.length&&(this.FS_AddTile.setScale(.3),this.FS_AddTile.position=cc.v3(0,-170,0),this.m_FSAddTimesCtrl.ShowNum1(this.FSaddTimesNum,!0,-1,!1));for(var i=0;i<this.m_Logic.FSAddSelectIndex.length;i++)this.FS_bullets[i].active=!1;var o=this.selectAnimName[e];this.rougeBonus_pistol_Right.getComponent(sp.Skeleton).setAnimation(0,"flipped_shoot",!1),this.rougeBonus_pistol_Left.getComponent(sp.Skeleton).setAnimation(0,"shoot",!1);var n,a=this.m_Logic.FSAddSelectIndex.length;n=a>=6?"react_5_to_4_cycle":"react_"+a,this.rouge_skeleton.setAnimation(0,n,!1);var m=this.m_FSAddSelectItems[e].getComponent(sp.Skeleton),s=m.setAnimation(0,o,!1);this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_bottle,this.m_Logic.m_iSeatID,!1,!0),m.setTrackCompleteListener(s,function(){t.AddFSTimesNumPar.active=!0,t.AddFSTimesNumPar.position=t.m_FSAddSelectItemButtons[e].position,t.AddFSTimesNumCtrl.ShowNum1(t.m_Logic.FSAddSelectItemTimes[e],!0,-1,!1),cc.tween(t.AddFSTimesNumPar).delay(.5).to(.3,{position:cc.v3(955,405,0)}).call(function(){t.AddFSTimesNumPar.active=!1,t.FSaddTimesNum+=t.m_Logic.FSAddSelectItemTimes[e],t.m_FSAddTimesCtrl.ShowNum1(t.FSaddTimesNum,!0,-1,!1),t.rouge_popup_glow.getComponent(sp.Skeleton).setAnimation(0,"glowing_short",!1),cc.tween(t.m_transAddFSTimesP).to(.2,{scale:.7}).to(.2,{scale:.5}).start(),cc.log("\u5f53\u524d\u514d\u8d39\u6e38\u620f\u8ffd\u52a0\u6b21\u6570,zong\u6b21\u6570",t.m_Logic.FSAddSelectItemTimes[e],t.FSaddTimesNum),6==t.m_Logic.FSAddSelectIndex.length&&t.ShowFSAddSelectItemReset(),t.Panel_Item_Button.active=!0}).start()}),this.m_FSAddSelectItemButtons[e].active=!1},t.prototype.IsSelectIndex=function(e){for(var t=0;t<this.m_Logic.FSAddSelectIndex.length;t++)if(e==this.m_Logic.FSAddSelectIndex[t])return!0;return!1},t.prototype.ShowFSAddSelectItemReset=function(){var e=this;this.rougeBonus_pistol_Right.getComponent(sp.Skeleton).setAnimation(0,"flipped_draw_back",!1),this.rougeBonus_pistol_Left.getComponent(sp.Skeleton).setAnimation(0,"draw_back",!1),this.FS_AddTile.active=!1,this.FS_Bullet.active=!1;var t=this.rouge_skeleton.setAnimation(0,"skeleton_stand_up",!1);this.rouge_skeleton.addAnimation(0,"skeleton_shoot",!0),this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_Shoot,this.m_Logic.m_iSeatID,!1,!0),this.rouge_skeleton.setTrackCompleteListener(t,function(){e.m_Logic.m_DealSound&&e.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_Shoot,e.m_Logic.m_iSeatID,!1,!0);for(var t=0;t<e.m_FSAddSelectItems.length;t++)e.IsSelectIndex(t)||(e.m_FSAddSelectItems[t].getComponent(sp.Skeleton).setAnimation(0,e.selectAnimName[t],!1),e.m_FSAddEndItemNumCtrls[t].ShowNum1(e.m_Logic.FSAddSelectItemTimes[t],!0,-1,!1),cc.log("-----\x3e>>>>\u663e\u793a\u5269\u4f59\u74f6\u5b50\u6b21\u6570",e.m_Logic.FSAddSelectItemTimes[t]))}),this.scheduleOnce(function(){e.rouge_skeleton.setAnimation(0,"skeleton_shoot",!1),e.m_Logic.m_DealSound&&e.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_FreeEnab1,e.m_Logic.m_iSeatID,!1,!0),e.rouge_popup_glow.getComponent(sp.Skeleton).addAnimation(0,"glowing_winning",!1),cc.tween(e.m_transAddFSTimesP).to(.7,{scale:.7}).to(.7,{scale:.5}).call(function(){e.rouge_popup_glow.getComponent(sp.Skeleton).setAnimation(0,"glowing_winning",!1)}).delay(.5).to(.7,{scale:.7}).to(.7,{scale:.5}).delay(1).call(function(){e.m_transAddFSTimesP.position=cc.v3(0,-33),e.m_transAddFSTimesP.setScale(.7,.7),e.rouge_popup.active=!0,e.FSAddEnd.active=!0,e.FSAddEnd.setScale(0),cc.tween(e.FSAddEnd).to(.1,{scale:1}).start(),e.rouge_popup.getComponent(sp.Skeleton).setAnimation(0,"bonus_in_bonus",!1),cc.tween(e.m_transAddFSTimesP).delay(.1).to(.2,{scale:1}).to(.2,{scale:.6}).call(function(){e.FSAddEndButton.active=!0}).start()}).start()},2)},t.prototype.InitFSSelectItem=function(){if(cc.log("InitFSSelectItem",this.m_Logic.FSAddSelectIndex.length),this.m_Logic.FSAddSelectIndex.length>0){for(var e=0;e<this.m_FSAddSelectItems.length;e++)this.IsSelectIndex(e)&&(this.m_FSAddSelectItems[e].getComponent(sp.Skeleton).setAnimation(0,this.selectAnimName[e],!1),this.m_FSAddSelectItemButtons[e].active=!1,cc.log("-----\x3e>>>>\u663e\u793achushihua\u74f6\u5b50\u6b21\u6570",this.m_Logic.FSAddSelectItemTimes[e]),this.FSaddTimesNum+=this.m_Logic.FSAddSelectItemTimes[e]);for(this.FS_AddTile.setScale(.3),this.FS_AddTile.position=cc.v3(0,-170,0),this.m_FSAddTimesCtrl.ShowNum1(this.FSaddTimesNum,!0,-1,!1),e=0;e<this.m_Logic.FSAddSelectIndex.length;e++)this.FS_bullets[e].active=!1}},t.prototype.PlayFreeGameAddGame=function(){var e=this;cc.log("------------------\x3e>>>PlayFreeGameAddGame"),this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_FreeAddInto,this.m_Logic.m_iSeatID,!1,!0),this.Panel_FSAddInto.active=!0,this.Panel_FSAddInto.scale=0,this.Panel_Item_Button.active=!1,cc.tween(this.Panel_FSAddInto).to(.5,{scale:1}).delay(2).call(function(){e.Panel_FSAddInto.active=!1,e.HideFSAddItemAnim(),e.FSAddEnd.active=!1,e.rouge_popup.active=!1,e.FSaddTimesNum=0,e.m_FSAddTimesCtrl.ShowNum1(e.FSaddTimesNum,!1,-1,!1),e.m_transAddFSTimesP.position=cc.v3(0,-87),e.m_transAddFSTimesP.setScale(.5,.5),e.panel_top.active=!1,e.panel_below.active=!1,e.FS_AddTile.active=!1,e.FS_Bullet.active=!1,e.m_gFSUseP.active=!1,e.rougeBonus_pistol_Right.active=!1,e.rougeBonus_pistol_Left.active=!1,e.m_gAddFS.active=!0;var t=e.rouge_skeleton.setAnimation(0,"skeleton_in",!1);e.rouge_skeleton.addAnimation(0,"pointing_1",!1),e.rouge_skeleton.addAnimation(0,"pointing_2",!0),e.m_Logic.m_DealSound&&e.m_Logic.m_DealSound.BGMPlay(l.eAudioName.BGM_FreeAdd,!0),e.rouge_skeleton.setTrackCompleteListener(t,function(){e.FS_AddTile.active=!0,e.FS_Bullet.active=!0,e.rougeBonus_pistol_Right.active=!0,e.rougeBonus_pistol_Left.active=!0,e.rougeBonus_pistol_Right.getComponent(sp.Skeleton).setAnimation(0,"flipped_draw",!1),e.rougeBonus_pistol_Left.getComponent(sp.Skeleton).setAnimation(0,"draw",!1),e.InitFSSelectItem(),e.Panel_Item_Button.active=!0})}).start()},t.prototype.FSAddSelectBtnClick=function(e){if(cc.log("FSAddSelectBtnClick"),this.Panel_Item_Button.active=!1,this.m_Logic.FSAddSelectIndex.length<6)if(e.startsWith("FSAddBtn_")){var t=e.split("_"),i=Number(t[1]);this.m_Logic.sendSelectCard(i),this.m_Logic.FSAddSelectIndex.push(i),this.ShowFSAddSelectItemAnim(i)}else cc.log("-------name",e);else cc.log("\u5df2\u7ecf\u9009\u62e96\u6b21\u4e86",this.m_Logic.FSAddSelectIndex)},t.prototype.FSAddEndOKBtnClick=function(){var e=this;this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_OKBtn,this.m_Logic.m_iSeatID,!1,!0),this.FSAddEndButton.active=!1,cc.tween(this.FSAddEnd).to(.5,{scale:0}).start(),cc.tween(this.m_transAddFSTimesP).to(.5,{scale:0}).start();var t=this.rouge_popup.getComponent(sp.Skeleton).setAnimation(0,"close_popup",!1);this.m_gFSParBG.active=!1,this.m_gLinesMask.active=!1,this.rouge_popup.getComponent(sp.Skeleton).setTrackCompleteListener(t,function(){for(var t=0;t<e.m_FSAddEndItemNumCtrls.length;t++)e.m_FSAddEndItemNumCtrls[t].ShowNum1(0,!1,-1,!1);for(t=0;t<e.m_FSAddSelectItems.length;t++)e.m_FSAddSelectItems[t].active=!0,e.m_FSAddSelectItems[t].getComponent(sp.Skeleton).setAnimation(0,e.idleAnimName[t],!1),e.m_FSAddSelectItemButtons[t].active=!0;for(e.m_transAddFSTimesP.position=cc.v3(0,-87),e.m_transAddFSTimesP.setScale(.5),t=0;t<e.FS_bullets.length;t++)e.FS_bullets[t].active=!0;e.FS_AddTile.setScale(.7),e.FS_AddTile.position=cc.v3(0,-130,0),e.m_gAddFS.active=!1,e.rouge_popup.active=!1,e.m_iFSCountTotal=e.m_iFSCountTotal+e.FSaddTimesNum,e.FSaddTimesNum=0,e.m_FSAddTimesCtrl.ShowNum1(e.FSaddTimesNum,!1,-1,!1),e.m_gFSUseP.active=!0,e.ShowFSTimesTotal(),e.panel_top.active=!0,e.panel_below.active=!0,e.m_Logic.m_DealSound&&e.m_Logic.m_DealSound.BGMPlay(l.eAudioName.BGM_Free,!0);var i=function(){this.m_bIsWinFSWaitPlayOver&&(this.unschedule(i),this.m_iFSCountAdd=0,this.ResetParam(),this.m_Logic.WaitFreeGameSelect())};e.schedule(i,l.m_Delay1),e.m_Logic.SetStartWaitPlay()})},t.prototype.IsTumblerIcon=function(e){return e>=l.m_iItem_Tumbler0&&e<=l.m_iItem_Tumbler4},t.prototype.ShowFSAddItemAnim=function(){for(var e=0,t=0;t<l.m_iItemCol;t++)for(var i=0;i<l.m_iItemRow;i++)this.IsTumblerIcon(this.m_arys_ItemResult[t][i])&&(this.ShowFSAddItemAnim2(t,i),e++);return cc.log("ShowFSAddItemAnim",e),0!=e},t.prototype.ShowFSAddItemAnim2=function(e,t){var i=this,o=this.GetPreObj(s.ePO_Bouns_1);o.position=this.m_arys_VecItems[e][t],o.active=!0,o.setSiblingIndex(0);var n=this.glassColors[e];o.getComponent(sp.Skeleton).setAnimation(0,"glass_win_"+n,!0);var a=.2;0==t?a=.3:2==t&&(a=.1),this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_glassWin,this.m_Logic.m_iSeatID,!1,!0),this.scheduleOnce(function(){i.m_Logic.m_DealSound&&i.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_glassWin,i.m_Logic.m_iSeatID,!1,!0)},1),this.scheduleOnce(function(){o.getComponent(sp.Skeleton).setAnimation(0,"glass_win_"+n+"_static",!1),cc.tween(o).delay(.3).to(a,{y:-270}).call(function(){i.m_Logic.m_DealSound&&i.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_glassLoading,i.m_Logic.m_iSeatID,!1,!0),o.getComponent(sp.Skeleton).setAnimation(0,"glass_"+n+"_landing",!1)}).start()},2),this.m_list_gAnimItemTumblerShowing.push(o)},t.prototype.HideFSAddItemAnim=function(){for(var e=0;e<this.m_list_gAnimItemTumblerShowing.length;e++){var t=this.m_list_gAnimItemTumblerShowing[e];t.active=!1,this.m_dic_iqPreObj.get(s.ePO_Bouns_1).push(t)}this.m_list_gAnimItemTumblerShowing=[]},t.prototype.InitFSAddItem=function(){for(var e=0;e<l.m_iItemCol;e++)if(18==this.m_TumblerItemNum[e]){var t=e,i=this.GetPreObj(s.ePO_Bouns_1);i.position=cc.v3(this.m_arys_VecItems[t][0].x,-270),i.active=!0,i.setSiblingIndex(0);var o=this.glassColors[t];i.getComponent(sp.Skeleton).setAnimation(0,"glass_win_"+o+"_static",!1),this.m_list_gAnimItemTumblerShowing.push(i)}},t.prototype.FSIntoOKBtnClick=function(){var e=this;this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_OKBtn,this.m_Logic.m_iSeatID,!1,!0),this.m_gIntoFS_OKBtn.active=!1,cc.tween(this.m_gIntoFS_FSInto).to(.7,{scale:0}).start();var t=this.m_gIntoFS_rouge_popup.getComponent(sp.Skeleton).setAnimation(0,"close_popup",!1);this.m_gIntoFS_rouge_popup.getComponent(sp.Skeleton).setTrackCompleteListener(t,function(){e.m_gIntoFS.active=!1,e.PlayFreeGame2()})},t.prototype.WinEffectOKBtnClick=function(){var e=this;this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEStop(this.FS2GeneralSound,this.m_Logic.m_iSeatID),this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_OKBtn,this.m_Logic.m_iSeatID,!1,!0),cc.log("====>>\u514d\u8d39\u6e38\u620f\u7ed3\u7b97\u7ed3\u675f"),this.m_WinEffect_OKBtn.active=!1,cc.tween(this.m_WinEffect_WinPanel).to(.2,{scale:0}).start();var t=this.m_WinEffect_rouge_popup.getComponent(sp.Skeleton).setAnimation(0,"close_popup",!1);this.m_WinEffect_rouge_popup.getComponent(sp.Skeleton).setTrackCompleteListener(t,function(){cc.log("====>>\u514d\u8d39\u6e38\u620f\u7ed3\u7b97\u7ed3\u675f----002"),e.Panel_WinEffect.active=!1,e.m_eTransScoreMode=r.eTSM_None,e.mTransScoreKey=m.eSK_None,e.ShowTableScore(),e.ShowWinScoreAnim(),e.m_dFSTotalWinScore=0,e.m_dGameWinScoreCur=0,e.m_OutFS.active=!1,e.m_gFSPar.active=!1,e.m_gFSUseP.active=!0,e.m_gFSParBG.active=!1,e.m_gLinesMask.active=!1,e.m_Logic.m_GameTypeCur=c.eGameTypeCur.eGTC_General,e.m_Logic.game.iGameBase.setGameTypeCur(e.m_Logic.m_GameTypeCur),e.m_Logic.m_DealItem.SetGameTypeCurIndex(e.m_Logic.m_GameTypeCur),e.m_Logic.m_DealSound&&e.m_Logic.m_DealSound.BGMPlay(l.eAudioName.BGM_Gen,!0),e.ResetParam(),e.m_Logic.WaitGenGameSelect()})},t.prototype.SetBG_SkeletonAnim=function(){var e=this,t=this.bg_skeleton.getComponent(sp.Skeleton);t.setAnimation(0,"skeleton_appearence",!1),t.addAnimation(0,"skeleton_idle_cycle",!0),this.scheduleOnce(function(){t.setAnimation(0,"skeleton_coin_pull",!1),t.addAnimation(0,"skeleton_coin_through",!0),e.scheduleOnce(function(){t.setAnimation(0,"skeleton_coin_hide",!1),t.addAnimation(0,"skeleton_idle_cycle",!0),e.scheduleOnce(function(){e.bg_skeleton.position=cc.v3(-e.bg_skeleton.position.x,-145),e.bg_skeleton.scaleX=-e.bg_skeleton.scaleX,e.SetBG_SkeletonAnim()},10)},10)},10)},t.prototype.TestTestFun=function(){this.ShowWinEff(200)},t.prototype.ShowID=function(e){this.m_IDLabel.string="ID:"+e},t.prototype.ShowWinScoreAnim=function(e){void 0===e&&(e=0),0==e?this.m_Logic.game.iGameBase.isNoWin()?cc.tween(this.m_transCreditNumP).to(.2,{scale:1.5}).to(.2,{scale:1}).start():cc.tween(this.m_transTotalWinNumP).to(.2,{scale:1.5}).to(.2,{scale:1}).start():this.m_Logic.m_GameTypeCur==c.eGameTypeCur.eGTC_General&&(this.m_Logic.game.iGameBase.isNoWin()?cc.tween(this.m_transCreditNumP).to(.2,{scale:1.5}).to(.2,{scale:1}).start():cc.tween(this.m_transTotalWinNumP).to(.2,{scale:1.5}).to(.2,{scale:1}).start())},a([d],t)}(cc.Component);i.default=p,cc._RF.pop()},{"./DataManager_Skull":"DataManager_Skull","./GameLogic_Skull":"GameLogic_Skull"}],GameLogic_Skull:[function(e,t,i){"use strict";cc._RF.push(t,"82ee0IzbGbROjIT9Au1wtWU","GameLogic_Skull");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.eBtnState=i.eGameState=i.eShowMode=i.eStartKey=i.ePrizeType=i.eGameTypeNext=i.eGameTypeCur=void 0;var a,m,s,_,r,l,c=e("./DataManager_Skull"),S=e("./DealAutoTrans_Skull"),h=e("./DealWinProcess_Skull");(function(e){e[e.eGTC_General=0]="eGTC_General",e[e.eGTC_FreeGame=1]="eGTC_FreeGame"})(a=i.eGameTypeCur||(i.eGameTypeCur={})),function(e){e[e.eGTN_General=0]="eGTN_General",e[e.eGTN_FreeGame=1]="eGTN_FreeGame"}(m=i.eGameTypeNext||(i.eGameTypeNext={})),function(e){e[e.ePT_None=0]="ePT_None",e[e.ePT_General=1]="ePT_General",e[e.ePT_Small=2]="ePT_Small",e[e.ePT_Medium=3]="ePT_Medium",e[e.ePT_Big=4]="ePT_Big",e[e.ePT_AllAward=5]="ePT_AllAward"}(s=i.ePrizeType||(i.ePrizeType={})),function(e){e[e.eSK_None=0]="eSK_None",e[e.eSK_CanSpin=1]="eSK_CanSpin",e[e.eSK_StopAllItem=2]="eSK_StopAllItem",e[e.eSK_WinFSWaitPlay=3]="eSK_WinFSWaitPlay"}(_=i.eStartKey||(i.eStartKey={})),function(e){e[e.eSM_None=-1]="eSM_None",e[e.eSM_Score=0]="eSM_Score",e[e.eSM_Money=1]="eSM_Money",e[e.Max=2]="Max"}(i.eShowMode||(i.eShowMode={})),function(e){e[e.eGS_None=0]="eGS_None",e[e.eGS_CanChangeBet=1]="eGS_CanChangeBet",e[e.eGS_Playing=2]="eGS_Playing",e[e.eGS_TransGameMode=3]="eGS_TransGameMode"}(r=i.eGameState||(i.eGameState={})),function(e){e[e.eBS_None=0]="eBS_None",e[e.eBS_GenIdle=1]="eBS_GenIdle",e[e.eBS_FSIdle=2]="eBS_FSIdle",e[e.eBS_Playing=3]="eBS_Playing",e[e.eBS_Auto=4]="eBS_Auto",e[e.eBS_Manual=5]="eBS_Manual",e[e.eBS_Trans=6]="eBS_Trans"}(l=i.eBtnState||(i.eBtnState={}));var u=function(e){function t(t,i){var o=e.call(this)||this;o.game=null,o.AwardLines=[],o.freeTimes=0,o.totalFreeTimes=0,o.allWinDouble=!1,o.freeTotalWinScore=0,o.iNextGameSpecialOdds=0,o.freeSpinAddTimes=0,o.m_JackpotsCur=[],o.currentWinScore=0,o.m_GameTypeCur=a.eGTC_General,o.m_GameTypeNext=m.eGTN_General,o.m_GameState=r.eGS_None,o.m_PrizeType=s.ePT_None,o.m_eStartKey=_.eSK_None,o.m_iSeatID=0,o.m_iWinType=0,o.m_arys_ItemResult=new Array,o.m_bIsHasFSFromInit=!1,o.m_bIsBSNeedEnab=!1,o.m_bStartCtrl=!1,o.m_bIsIdle=!1,o.m_flgStart=!1,o.m_ary_dJackpot=new Array(c.m_iJackpotCount),o.m_iBetIndex=0,o.m_bBegin=!1,o.isLeave=!1,o.isAccordStand=!1,o.mMarqueelist=[],o.FSAddSelectIndex=[],o.FSAddSelectItemTimes=[],o.m_bIsWinCJ=!1,o.m_Stage=t,o.m_iSeatID=i;for(var n=0;n<c.m_iItemCol;n++){o.m_arys_ItemResult[n]=[];for(var l=0;l<c.m_iItemRow;l++)o.m_arys_ItemResult[n][l]=0}return o}return n(t,e),t.prototype.onJackpots=function(e){this.m_JackpotsCur=e,this.game.onJackpots(e)},t.prototype.onBetFail=function(){},t.prototype.onGameScore=function(e){this.m_DealWinPro.m_dTotalWinScoreCur=Math.round(e),this.game.iGameBase.isNoWin()?this.m_DealWinPro.m_dUserPoint=this.m_DealWinPro.m_dTotalWinScoreCur:this.m_DealWinPro.m_dTableScore=this.m_DealWinPro.m_dTotalWinScoreCur},t.prototype.onUserScore=function(e){var t=Math.round(e);this.m_DealWinPro.m_dUserPoint=t,this.game.iGameBase.isNoWin()&&this.m_DealWinPro.m_iJackpotId>h.eLuckyPrizeID.e_None&&this.m_DealWinPro.m_iJackpotId<h.eLuckyPrizeID.MaxValue&&(this.m_DealWinPro.m_dUserPoint-=100*this.m_DealWinPro.m_dJackpotScore)},t.prototype.OnUpScore=function(e){var t=Math.round(e);this.m_DealWinPro.m_dUserPoint+=t,cc.log("====onUserScore\u4e0a\u5206\uff1a",e),this.m_DealWinPro.ShowUserPoint()},t.prototype.OnShowMarquee=function(){this.game.iGameBase.OnShowMarquee()},t.prototype.showInitResult=function(e){this.SetItemResult_1(e)},t.prototype.onTransScoreInfo=function(e,t){e?(this.m_DealWinPro.m_dTotalWinScoreCur=this.m_DealWinPro.m_dTotalWinScoreCur-t,this.m_DealWinPro.m_dTableScore=this.m_DealWinPro.m_dTotalWinScoreCur,this.m_DealWinPro.ShowTableScore(),this.m_DealWinPro.ShowUserPoint(),cc.log("====>>\u8f6c\u6362\u5206\u6570\u6210\u529f,\u5f53\u524d\u5269\u4f59\u8d62\u5206\uff1a"+this.m_DealWinPro.m_dTotalWinScoreCur+",\u5f53\u524d\u684c\u9762\u5206\uff1a"+this.m_DealWinPro.m_dTableScore)):cc.log("====>>\u8f6c\u6362\u5206\u6570\u5931\u8d25")},t.prototype.sendChangeBet=function(e){this.game.iGameBase.sendChangeBet(e)},t.prototype.sendRun=function(){this.game.iGameBase.sendRun()},t.prototype.sendTransScore=function(e){this.game.iGameBase.sendTransScore(e)},t.prototype.onWinJackpot=function(e,t){if(e>-1&&t>0){this.m_bIsWinCJ=!0,this.m_DealWinPro.m_iJackpotId=e;var i=Math.round(100*t)/100;this.m_DealWinPro.m_dJackpotScore=i,cc.log("this.m_DealWinPro.m_dJackpotScore",this.m_DealWinPro.m_dJackpotScore)}else cc.log("====onWinJackpot====\u8d62\u5f69\u91d1\uff1a"+e+","+t)},t.prototype.onPayJackpot=function(e){var t=this.m_DealWinPro.m_dJackpotScore;cc.log("====onPayJackpot====\u62c9\u5f69\u91d1\uff1a"+t),this.m_DealWinPro.m_dTotalWinScoreCur=this.m_DealWinPro.m_dTotalWinScoreCur+100*t,this.m_DealWinPro.TransScoreA(e,this.m_DealWinPro.m_iJackpotId,Number(t.toFixed(2)))},t.prototype.onWaitBonus=function(e,t,i,o,n,a,m,s,_,r,l,c){this.m_DealWinPro.PlayFreeGame(e,t,i,o,n,a,_,r,l,c)},t.prototype.sendAskForBeginPayJackpot=function(){var e=this.m_DealWinPro.m_dJackpotScore;this.m_DealWinPro.m_dTotalWinScoreCur=this.m_DealWinPro.m_dTotalWinScoreCur+100*e,this.m_DealWinPro.TransScoreA(this.game.iGameBase.getUserID(),this.m_DealWinPro.m_iJackpotId,Number(e.toFixed(2)))},t.prototype.sendFinishPayJackpot=function(){this.m_bIsWinCJ=!1,this.game.iGameBase.sendFinishPayJackpot()},t.prototype.sendWaitBound=function(){cc.log("====sendWaitBound====="),this.game.iGameBase.sendWaitBound()},t.prototype.onSelectCardLast=function(){},t.prototype.onWaitSpecial=function(){},t.prototype.onSelectCard=function(){},t.prototype.SetSpecialResult=function(){},t.prototype.UpdateGameSlot=function(){this.m_bStartCtrl&&(this.m_DealItem.UpdateState(),this.m_bIsIdle&&this.m_DealAutoTrans.m_ePlayMode==S.ePlayMode.ePM_Auto&&(this.m_GameTypeCur==a.eGTC_General?this.m_DealWinPro.m_dUserPoint>=this.m_DealBetRel.m_fTotalBet?(this.m_DealWinPro.m_Text_LinesScores.string="Good Luck",this.OnSpin()):(cc.log("===UpdateGameSlot----\u81ea\u52a8\u53d8\u6210\u624b\u52a8\uff01"),this.m_DealAutoTrans.IsAutoPlay(S.ePlayMode.ePM_Man),this.StartIdle(),this.m_DealWinPro.ShowDonateMessage()):this.m_GameTypeCur==a.eGTC_FreeGame&&this.m_DealWinPro.M_bIsWinFSWaitPlayOver&&(this.m_DealWinPro.m_Text_LinesScores.string="Good Luck",this.OnSpin())),this.m_DealItem.DealTransStop(),this.m_DealWinPro.MyUpdate(),this.m_GameSlotJcakpot.UpdateSlotJcakpot())},t.prototype.OnKeyStartAction=function(){if(this.game.iGameBase.GetConnected())switch(this.m_eStartKey){case _.eSK_None:break;case _.eSK_CanSpin:this.OnManualSpin(),this.m_GameTypeCur!=a.eGTC_FreeGame&&this.m_DealWinPro.ShowGameWin();break;case _.eSK_StopAllItem:this.m_DealItem.AllStopItem();break;case _.eSK_WinFSWaitPlay:this.m_DealWinPro.M_bIsWinFSWaitPlayOver=!0,this.m_eStartKey=_.eSK_None;break;default:cc.log("default")}},t.prototype.OnManualSpin=function(){switch(this.m_GameState){case r.eGS_None:if(this.m_DealAutoTrans.m_ePlayMode!=S.ePlayMode.ePM_Man)return;break;case r.eGS_CanChangeBet:break;default:return}this.OnSpin()},t.prototype.OnSpin=function(){this.ChangeGameState(r.eGS_Playing)},t.prototype.ShowLottery=function(){switch(this.m_GameState){case r.eGS_Playing:this.m_DealItem.ResetParam(),this.m_DealWinPro.ShowLottery()}},t.prototype.StartIdle=function(){this.m_GameState=r.eGS_None,this.ChangeGameState(this.m_GameState),this.m_bIsIdle=!0,this.m_GameTypeCur==a.eGTC_General?this.m_DealAutoTrans.m_ePlayMode==S.ePlayMode.ePM_Man?(this.SetBtnState(l.eBS_GenIdle),this.m_GameState=r.eGS_CanChangeBet):this.m_DealAutoTrans.m_ePlayMode==S.ePlayMode.ePM_Auto&&this.SetBtnState(l.eBS_Auto):this.m_DealAutoTrans.m_ePlayMode==S.ePlayMode.ePM_Man&&this.SetBtnState(l.eBS_Auto)},t.prototype.SetBtnState=function(e){switch(e){case l.eBS_None:break;case l.eBS_GenIdle:this.m_DealAutoTrans.SetBtnStartSpinState(!0),this.m_DealAutoTrans.SetBtnAutoSpinState(!0),this.m_DealBetRel.m_BtnBetAdd.interactable=!0,this.m_DealBetRel.m_BtnBetSub.interactable=!0,this.m_DealWinPro.m_BtnTransScore.interactable=!0;break;case l.eBS_FSIdle:this.m_DealAutoTrans.SetBtnAutoSpinState(!0),this.m_DealAutoTrans.SetBtnStartSpinState(!0),this.m_DealBetRel.m_BtnBetAdd.interactable=!1,this.m_DealBetRel.m_BtnBetSub.interactable=!1;break;case l.eBS_Playing:this.m_DealAutoTrans.m_ePlayMode==S.ePlayMode.ePM_Auto?(this.m_DealAutoTrans.SetBtnAutoSpinState(!0),this.m_DealAutoTrans.SetBtnStartSpinState(!1)):(this.m_DealAutoTrans.SetBtnAutoSpinState(!0,!1),this.m_DealAutoTrans.SetBtnStartSpinState(!1)),this.m_DealBetRel.m_BtnBetAdd.interactable=!1,this.m_DealBetRel.m_BtnBetSub.interactable=!1,this.m_DealWinPro.m_BtnTransScore.interactable=!1;break;case l.eBS_Auto:this.m_DealAutoTrans.SetBtnAutoSpinState(!0);break;case l.eBS_Manual:break;case l.eBS_Trans:this.m_DealAutoTrans.SetBtnAutoSpinState(!0,!1),this.m_DealAutoTrans.SetBtnStartSpinState(!0,!1),this.m_DealBetRel.m_BtnBetAdd.interactable=!1,this.m_DealBetRel.m_BtnBetSub.interactable=!1,this.m_DealWinPro.m_BtnTransScore.interactable=!1}},t.prototype.DataInit=function(e,t,i,o,n,a,s,_,r,l,c,S){this.ResetParam(),this.showInitResult(S),this.m_DealBetRel.m_iBet=t,this.m_DealBetRel.m_iLines=i,this.m_DealBetRel.m_iBetPct=o,this.m_DealWinPro.m_iBonusID=n,this.m_DealWinPro.m_iExplodeMax=a,this.m_DealBetRel.m_fTotalBet=l,this.game.iGameBase.isNoWin()||(this.m_DealWinPro.m_dTableScore=this.m_DealWinPro.m_dTotalWinScoreCur),cc.log("\u521d\u59cb\u5316,this.m_DealWinPro.m_iBonusID\uff1a",this.m_DealWinPro.m_iBonusID),this.m_GameTypeNext=0==this.m_DealWinPro.m_iBonusID?m.eGTN_General:m.eGTN_FreeGame,this.m_GameTypeNext==m.eGTN_FreeGame?this.m_bIsHasFSFromInit=!0:(this.m_bIsHasFSFromInit=!1,this.m_DealWinPro.m_dFSTotalWinScore=0),this.m_DealWinPro.m_dWinScoreCur=0,this.m_DealBetRel.ShowAllData(),this.m_DealWinPro.ShowTableScore(),this.m_DealWinPro.ShowGameWin(),this.m_DealWinPro.ShowUserPoint(),this.m_DealItem.SetAllItemResult(this.m_arys_ItemResult),this.m_DealItem.ShowInitResultSpr(),this.game.iGameBase.EmitEvent("InitSceneComplete",null)},t.prototype.ResetParam=function(){},t.prototype.SetItemResult_1=function(e){for(var t=0,i=0;i<c.m_iItemCol;i++){for(var o=0;o<c.m_iItemRow;o++){var n=e[i][o];n>=7?this.m_arys_ItemResult[i][o]=18==n?n-7+i:n-7:0==n?this.m_arys_ItemResult[i][o]=c.m_iItem_WILD:2==n?this.m_arys_ItemResult[i][o]=c.m_iItem_FREE:3==n?this.m_arys_ItemResult[i][o]=c.m_iItem_Jackpot0:4==n?this.m_arys_ItemResult[i][o]=c.m_iItem_Jackpot1:5==n?this.m_arys_ItemResult[i][o]=c.m_iItem_Jackpot2:6==n&&(this.m_arys_ItemResult[i][o]=c.m_iItem_Jackpot3)}18==e[i][3]&&t++,this.m_DealWinPro.m_TumblerItemNum[i]=e[i][3]}this.m_DealWinPro.m_iFSCountAdd=0,t==c.m_iItemCol&&(this.m_DealWinPro.m_iFSCountAdd=1)},t.prototype.DataInitOk=function(){if(this.m_bIsHasFSFromInit)this.sendWaitBound();else{switch(this.AddAction(),this.m_GameState){case r.eGS_Playing:}this.StartInitIdle(),this.m_GameTypeCur!=a.eGTC_FreeGame&&this.m_DealSound&&this.m_DealSound.BGMPlay(c.eAudioName.BGM_Gen,!0),this.m_bStartCtrl=!0}},t.prototype.SetResult=function(e,t,i,o,n,a,s,_,r,l,c,S,h,u){this.m_DealBetRel.m_iBet=e,this.m_DealBetRel.m_iLines=t,this.m_DealBetRel.m_iBetPct=i,this.m_DealWinPro.m_iBonusID=o,this.m_iWinType=n,this.SetAllAwardsID(a),this.m_DealBetRel.m_fTotalBet=_,this.m_DealWinPro.m_dWinScoreCur=r,this.m_DealWinPro.m_dUserPoint=this.m_DealWinPro.m_dUserPoint-this.m_DealBetRel.m_fTotalBet,0==this.game.iGameBase.isNoWin()&&(this.m_DealWinPro.m_dTotalWinScoreCur+=this.m_DealWinPro.m_dWinScoreCur,this.m_DealWinPro.m_dTableScore=this.m_DealWinPro.m_dTotalWinScoreCur),this.SetItemResult_1(S),this.SetPrizeInfos(h),this.SetScatterInfos(u),this.m_GameTypeNext=0==this.m_DealWinPro.m_iBonusID?m.eGTN_General:m.eGTN_FreeGame,this.m_DealBetRel.ShowAllData(),this.m_DealWinPro.ShowUserPoint(),this.SetWinTypeData(),this.m_DealItem.m_bIsGetResult=!0},t.prototype.SetAllAwardsID=function(e){2==this.m_iWinType?this.m_DealWinPro.m_iAllAwardsID=e>=7?e-7:0==e?c.m_iItem_WILD:2==e?c.m_iItem_FREE:3==e?c.m_iItem_Jackpot0:4==e?c.m_iItem_Jackpot1:5==e?c.m_iItem_Jackpot2:6==e?c.m_iItem_Jackpot3:-1:this.m_DealWinPro.m_iAllAwardsID=-1},t.prototype.SetPrizeInfos=function(e){this.m_DealWinPro.m_list_PrizeInfos=[];for(var t=e.length,i=0;i<t;i++){var o=e[i].id;o>=7?o-=7:0==o?o=c.m_iItem_WILD:2==o?o=c.m_iItem_FREE:3==o?o=c.m_iItem_Jackpot0:4==o?o=c.m_iItem_Jackpot1:5==o?o=c.m_iItem_Jackpot2:6==o&&(o=c.m_iItem_Jackpot3);var n={id:o,line:e[i].line,dir:e[i].dir,num:e[i].num,point:Math.round(e[i].point),ary_ilineFrom:e[i].lineFrom};this.m_DealWinPro.m_list_PrizeInfos.push(n)}for(i=0;i<this.m_DealWinPro.m_list_PrizeInfos.length;i++)n=this.m_DealWinPro.m_list_PrizeInfos[i]},t.prototype.SetScatterInfos=function(e){this.m_DealWinPro.m_list_ScatterInfos=[];for(var t=e.length,i=0;i<t;i++){var o=e[i].id;o>=7?o-=7:0==o?o=c.m_iItem_WILD:2==o?o=c.m_iItem_FREE:3==o?o=c.m_iItem_Jackpot0:4==o?o=c.m_iItem_Jackpot1:5==o?o=c.m_iItem_Jackpot2:6==o&&(o=c.m_iItem_Jackpot3);var n={id:o,line:e[i].line,dir:e[i].dir,num:e[i].num,point:Math.round(e[i].point),ary_ilineFrom:e[i].lineFrom};this.m_DealWinPro.m_list_ScatterInfos.push(n)}},t.prototype.WaitFreeGameSelect=function(){if(this.m_bIsHasFSFromInit)return this.m_bIsHasFSFromInit=!1,void this.DataInitOk();this.StartInitIdle()},t.prototype.SetBonusResult=function(e,t,i,o,n,a,s,_,r,l,c,S,h,u,d){cc.log("iBonusId",e),cc.log("iFSTotalTimes",n),cc.log("iFSTimes",a),this.m_DealWinPro.m_iBonusID=e,this.m_iWinType=t,this.SetAllAwardsID(i),this.m_DealWinPro.m_iFSCountTotal=n,this.m_DealWinPro.m_iFSCountUesed=a,this.m_DealWinPro.m_iFSCountAdd=s,this.m_DealWinPro.m_iNextGameSpecialOdds=_,this.m_DealWinPro.m_dWinScoreCur=l,this.m_DealWinPro.m_dFSTotalWinScore=c,this.m_DealWinPro.m_dTotalWinScoreCur+=this.m_DealWinPro.m_dWinScoreCur,0==e&&(this.game.iGameBase.isNoWin()||(this.m_DealWinPro.m_dTableScore=this.m_DealWinPro.m_dTotalWinScoreCur)),this.SetItemResult_1(h),this.SetPrizeInfos(u),this.SetScatterInfos(d),this.m_GameTypeNext=0==this.m_DealWinPro.m_iBonusID?m.eGTN_General:m.eGTN_FreeGame,this.m_DealWinPro.m_iFSCountLave=this.m_DealWinPro.m_iFSCountTotal-this.m_DealWinPro.m_iFSCountUesed,this.SetWinTypeData(),this.m_DealItem.m_bIsGetResult=!0},t.prototype.ChangeBetResult=function(e,t,i){this.m_DealBetRel.m_iBet=e,this.m_DealBetRel.m_iLines=t,this.m_DealBetRel.m_fTotalBet=i,this.m_DealBetRel.ShowAllData()},t.prototype.ChangeBetPctResult=function(e,t,i,o){this.m_DealBetRel.m_iBetPct=e,this.m_DealBetRel.m_iLines=t,this.m_DealBetRel.m_fTotalBet=i,this.m_DealBetRel.ShowAllData(),this.SetUserScore(o)},t.prototype.ChangeBetReleResult=function(e,t,i,o,n){this.m_DealBetRel.m_iBet=e,this.m_DealBetRel.m_iBetPct=t,this.m_DealBetRel.m_iLines=i,this.m_DealBetRel.m_fTotalBet=o,this.m_DealBetRel.ShowAllData(),this.SetUserScore(n)},t.prototype.SetUserScore=function(e){var t=e-this.m_DealWinPro.m_dUserPoint;this.m_DealWinPro.m_dUserPoint=e,this.m_DealWinPro.UpdateTableScore(t)},t.prototype.SoundVolResult=function(){},t.prototype.SetWinTypeData=function(){this.m_GameTypeCur==a.eGTC_FreeGame?this.m_PrizeType=s.ePT_Medium:this.SetPrizeType1(this.m_DealWinPro.m_dWinScoreCur)},t.prototype.SetPrizeType=function(){this.m_PrizeType=s.ePT_None,-1!=this.m_DealWinPro.m_iAllAwardsID?this.m_PrizeType=s.ePT_AllAward:this.BInTheAward(10,30,!0)?this.m_PrizeType=s.ePT_Medium:this.BInTheAward(5,10)?this.m_PrizeType=s.ePT_Small:this.BInTheAward(30)?this.m_PrizeType=s.ePT_Big:this.m_DealWinPro.m_dWinScoreCur>0&&(this.m_PrizeType=s.ePT_General)},t.prototype.BInTheAward=function(e,t,i){if(void 0===t&&(t=Number.MAX_VALUE),void 0===i&&(i=!1),i&&this.m_GameTypeCur==a.eGTC_FreeGame)return!0;var o=this.m_DealBetRel.m_fTotalBet;return this.m_DealWinPro.m_dWinScoreCur>=e*o&&this.m_DealWinPro.m_dWinScoreCur<t*o},t.prototype.SetPrizeType1=function(e){this.m_PrizeType=s.ePT_None,-1!=this.m_DealWinPro.m_iAllAwardsID?this.m_PrizeType=s.ePT_AllAward:this.BInTheAward1(e,10,30)?this.m_PrizeType=s.ePT_Medium:this.BInTheAward1(e,5,10)?this.m_PrizeType=s.ePT_Small:this.BInTheAward1(e,30)?this.m_PrizeType=s.ePT_Big:e>0&&(this.m_PrizeType=s.ePT_General)},t.prototype.BInTheAward1=function(e,t,i){void 0===i&&(i=Number.MAX_VALUE);var o=this.m_DealBetRel.m_fTotalBet;return e>=t*o&&e<i*o},t.prototype.AddAction=function(){this.m_ActOnKeyStop4=this.m_DealBetRel.SubBet,this.m_ActOnKeyStop5=this.m_DealBetRel.AddBet,this.m_ActOnKeyStart=this.OnKeyStartAction,this.m_ActOnKeyAuto=this.m_DealAutoTrans.OnAutoBtn,this.m_ActOnKeyMaxBet=this.m_DealBetRel.MaxBet},t.prototype.RemoveAction=function(){},t.prototype.ChangeGameState=function(e){switch(e){case r.eGS_None:this.IdleRest();break;case r.eGS_Playing:switch(this.m_GameTypeNext){case m.eGTN_General:if(this.m_DealWinPro.m_dUserPoint<this.m_DealBetRel.m_fTotalBet)return cc.log("====ChangeGameState====eGS_Playing \u5206\u4e0d\u591f"),void this.m_DealWinPro.ShowDonateMessage();break;case m.eGTN_FreeGame:this.m_DealWinPro.m_iFSCountUesed+=1,this.m_DealWinPro.ShowFSTimesUsed(),this.m_DealWinPro.ShowMultiple()}this.m_bIsIdle=!1,this.m_GameState=r.eGS_Playing,this.SetPlayingData()}},t.prototype.IdleRest=function(){this.m_eStartKey=_.eSK_CanSpin},t.prototype.SetPlayingData=function(){switch(this.SetBtnState(l.eBS_Playing),this.m_GameTypeNext){case m.eGTN_General:case m.eGTN_FreeGame:this.sendRun()}this.m_eStartKey=_.eSK_StopAllItem,this.m_DealWinPro.m_Text_LinesScores.string="Good Luck"},t.prototype.OnClickBtn=function(e){if(cc.log("===============>>\u6240\u6709\u6309\u94ae\u70b9\u51fb\u4e8b\u4ef6\uff1a"+e.name),this.m_bStartCtrl)switch(e.name){case"Button_ToLobby":this.isLeave=!0,this.game.iGameBase.onBtnLeaveGame(),this.m_DealWinPro.onDestroy();break;case"Button_RuleClose":this.m_DealWinPro.hideGameInfo();break;case"Button_Rule":this.m_DealWinPro.onMaskClick(),this.m_DealWinPro.showGamInfoPanel();break;case"Button_Sound":this.game.iGameBase.SMGlobal_SoundClick(this.m_DealWinPro.m_Toggle_SoundOn,this.m_DealWinPro.m_Toggle_SoundOff);break;case"Mask_Set":this.m_DealWinPro.onMaskClick();break;case"Button_Set":this.m_DealWinPro.onSetClick();break;case"Button_Spin":if(!this.game.iGameBase.GetConnected())return void this.onBtnLeaveGame();this.m_DealWinPro.GetWinFast(),this.m_GameTypeCur==a.eGTC_General?(this.m_DealSound&&this.m_DealSound.SEPlay(c.eAudioName.Sound_Spin,this.m_iSeatID,!1,!1),this.OnKeyStartAction()):this.m_DealWinPro.M_bIsWinFSWaitPlayOver&&this.m_DealAutoTrans.SetMan2AutoSpin();break;case"Button_Stop":this.m_DealWinPro.GetWinFast(),this.m_GameTypeCur==a.eGTC_General&&this.m_eStartKey==_.eSK_StopAllItem&&this.OnKeyStartAction();break;case"Button_Take":this.m_DealWinPro.GetWinFast();break;case"Button_BetAdd":this.m_DealSound&&this.m_DealSound.SEPlay(c.eAudioName.Sound_Bed,this.m_iSeatID,!1,!1),this.sendChangeBet(1);break;case"Button_BetSub":this.m_DealSound&&this.m_DealSound.SEPlay(c.eAudioName.Sound_Bed,this.m_iSeatID,!1,!1),this.sendChangeBet(-1);break;case"Button_Auto":if(!this.game.iGameBase.GetConnected())return void this.onBtnLeaveGame();if(this.m_DealWinPro.GetWinFast(),this.m_GameTypeCur==a.eGTC_General)if(this.m_DealWinPro.ShowGameWin(),this.m_DealAutoTrans.m_ePlayMode==S.ePlayMode.ePM_Man){if(this.m_eStartKey!=_.eSK_CanSpin)return void cc.log("======>>>return this.m_eStartKey != eStartKey.eSK_CanSpin",this.m_eStartKey);this.m_DealSound&&this.m_DealSound.SEPlay(c.eAudioName.Sound_Auto2Man,this.m_iSeatID,!1,!1),this.m_DealAutoTrans.IsAutoPlay(S.ePlayMode.ePM_Auto)}else this.m_DealAutoTrans.m_ePlayMode==S.ePlayMode.ePM_Auto&&(this.m_DealSound&&this.m_DealSound.SEPlay(c.eAudioName.Sound_Spin,this.m_iSeatID,!1,!1),this.m_DealAutoTrans.IsAutoPlay(S.ePlayMode.ePM_Man),this.SetBtnState(l.eBS_GenIdle));else this.m_DealWinPro.M_bIsWinFSWaitPlayOver?this.m_DealAutoTrans.SetMan2AutoSpin():cc.log("====>>>this.m_DealWinPro.M_bIsWinFSWaitPlayOver = false");break;case"Button_StopAuto":break;case"Button_Turntable":this.m_GameSlotJcakpot.OnRotateTurntable();break;case"Button_TransScore":this.game.iGameBase.ShowDona();break;case"FSAddBtn_0":case"FSAddBtn_1":case"FSAddBtn_2":case"FSAddBtn_3":case"FSAddBtn_4":case"FSAddBtn_5":case"FSAddBtn_6":case"FSAddBtn_7":case"FSAddBtn_8":case"FSAddBtn_9":case"FSAddBtn_10":case"FSAddBtn_11":case"FSAddBtn_12":case"FSAddBtn_13":case"FSAddBtn_14":case"FSAddBtn_15":case"FSAddBtn_16":case"FSAddBtn_17":cc.log("-----------ddddd,",e.name),this.m_DealWinPro.FSAddSelectBtnClick(e.name);break;case"FSAddEndButton":this.m_DealWinPro.FSAddEndOKBtnClick();break;case"FSIntoOKButton":this.m_DealWinPro.FSIntoOKBtnClick();break;case"TotalWinOKButton":this.m_DealWinPro.WinEffectOKBtnClick()}},t.prototype.PlayBtnAudio=function(){},t.prototype.Final=function(){this.RemoveAction(),this.m_bStartCtrl=!1},t.prototype.SetRollEffData=function(){this.m_DealItem.m_list_iColCanShowRollEff=[];for(var e=new Array,t=0;t<c.m_iItemCol;t++)for(var i=0;i<c.m_iItemRow;i++)if(this.m_arys_ItemResult[t][i]==c.m_iItem_FREE){e.push(t);break}if(e.length>0){var o=0;for(i=0;i<e.length&&e[i]==o;i++)this.m_DealItem.m_list_iColCanShowRollEff.push(o),o++}},t.prototype.SetJackpotScore=function(){this.m_GameSlotJcakpot.SetWaitJPWin(this.m_DealWinPro.m_iJackpotId),this.m_GameSlotJcakpot.ShowJcakpotNum(this.m_ary_dJackpot,2)},t.prototype.SetStartWaitPlay=function(){cc.log("SetStartWaitPlay",this.m_eStartKey),this.m_eStartKey!=_.eSK_WinFSWaitPlay||this.OnKeyStartAction()},t.prototype.WaitGenGameSelect=function(){this.StartInitIdle()},t.prototype.StartInitIdle=function(){this.m_GameTypeCur==a.eGTC_General?this.SetBtnState(l.eBS_GenIdle):this.SetBtnState(l.eBS_FSIdle),this.m_GameState=r.eGS_None,this.ChangeGameState(this.m_GameState),this.m_bIsIdle=!0},t.prototype.SetTransMode=function(){this.m_GameState=r.eGS_TransGameMode,this.SetBtnState(l.eBS_Trans),this.m_DealAutoTrans.SetAuto2ManSpin()},t.prototype.onBtnLeaveGame=function(){this.game.iGameBase.onBtnLeaveGame()},t.prototype.sendSelectCard=function(e){cc.log("\u53d1\u9001\u6570\u636e-----sendSelectCard",e),this.game.iGameBase.sendSelectCard2(e)},t.prototype.onSelectCard2=function(e,t,i){cc.log("====onSelectCard====="+e),cc.log("====onSelectCard====="+t),cc.log("====onSelectCard====="+i),this.FSAddSelectItemTimes=[];for(var o=0;o<18;o++)this.FSAddSelectItemTimes[o]=t[o];for(this.FSAddSelectIndex=[],o=0;o<6;o++)i[o]>=0&&this.FSAddSelectIndex.push(i[o]);this.m_DealWinPro.PlayFreeGameAddGame()},t.prototype.updateChangeBet=function(e,t){this.m_DealBetRel.m_iBet=e,this.m_DealBetRel.m_fTotalBet=t,this.m_DealBetRel.ShowAllData()},t.prototype.onGameMaxWinScore=function(){},t.prototype.onEnterBackground=function(){this.m_DealAutoTrans&&this.m_DealAutoTrans.SetAuto2ManSpin(),null!=this.game.iGameBase&&this.game.iGameBase.GetConnected()||this.m_DealWinPro.onDestroy()},t.prototype.onDestroy=function(){this.unscheduleAllCallbacks(),this.m_DealItem.onDestroy()},t.prototype.getWinScore=function(){return this.m_DealWinPro.m_dTotalWinScoreCur},t}(cc.Component);i.default=u,cc._RF.pop()},{"./DataManager_Skull":"DataManager_Skull","./DealAutoTrans_Skull":"DealAutoTrans_Skull","./DealWinProcess_Skull":"DealWinProcess_Skull"}],Game_Skull:[function(e,t,i){"use strict";cc._RF.push(t,"1abb7d0ut47Zkaf0ZmCQC7p","Game_Skull");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,m=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)m=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(m=(a<3?n(m):a>3?n(t,i,m):n(t,i))||m);return a>3&&m&&Object.defineProperty(t,i,m),m};Object.defineProperty(i,"__esModule",{value:!0}),i.AssetType=void 0;var m,s=e("./ItemCtrl_CRSkull"),_=e("./DataManager_Skull"),r=e("./DealAutoTrans_Skull"),l=e("./DealBetRelevant_Skull"),c=e("./DealItemRelevant_Skull"),S=e("./DealWinProcess_Skull"),h=e("./GameLogic_Skull");(function(e){e[e.AT_SpriteFrame=0]="AT_SpriteFrame",e[e.AT_SpriteAtlas=1]="AT_SpriteAtlas",e[e.AT_Prefab=2]="AT_Prefab",e[e.AT_AudioClip=3]="AT_AudioClip"})(m=i.AssetType||(i.AssetType={}));var u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){var t=e.call(this)||this;return t.handlerPriority=2,t.handlerName="SLOT_Skull",t.scriptName="Game_Skull",t.handlerComName="SLOST_COMMON",t.m_bIsStartUpdate=!1,t.m_SoundSystem=null,t.sceneRate=1,t.GameLogic=new h.default(t,0),t.GameLogic.game=t,t}return n(t,e),t.prototype.setIGameBase=function(e){this.iGameBase=e,this.iGameBase.setMyGameLogic(this.GameLogic,this.iGameBase.GetKindID()),this.iGameBase.CommonUI_RootNode(this.node),this.SetSound(),this.SetGameObject(),this.m_bIsStartUpdate=!0,this.GameLogic.isAccordStand=!1,this.iGameBase.AddHandler(),this.GameLogic.m_DealWinPro.ShowID(this.iGameBase.getUserID()),this.GameLogic.m_DealWinPro.SetBG_SkeletonAnim()},t.prototype.netWorkDelay=function(){var e=this;cc.error("===netWorkDelay===="),this.m_Signal.active=!0,this.scheduleOnce(function(){e.m_Signal.active=!1},3)},t.prototype.onLoad=function(){},t.prototype.update=function(){this.StageUpdate()},t.prototype.onDestroy=function(){this.GameLogic.isLeave&&null!=this.iGameBase&&this.iGameBase.GetConnected()||this.GameLogic.m_DealWinPro.onDestroy(),this.iGameBase.RemoveHandler(),this.unscheduleAllCallbacks(),this.m_SoundSystem&&(this.m_SoundSystem.ClearAllSound(),this.m_SoundSystem=null),this.GameLogic.Final(),this.GameLogic=null,this.iGameBase.releaseGameRes()},t.prototype.getGameUINode=function(){return null},t.prototype.onLogonFinish=function(){},t.prototype.onJackpots=function(e){if(null!=this.GameLogic.m_DealWinPro.m_ary_PlayerJP)for(var t=0;t<e.length;t++)this.GameLogic.m_ary_dJackpot[t]=Math.round(100*e[t])/100,this.GameLogic.m_bIsWinCJ?this.GameLogic.m_DealWinPro.m_iJackpotId:this.GameLogic.m_DealWinPro.m_ary_JackpotNumChange[t].setString(this.GameLogic.m_ary_dJackpot[t])},t.prototype.SetGameObject=function(){var e,t,i,o,n,a,h,u,d,p,g,P,f,T,y,I,A,G,L,B,D,W,C,b,F,w,v,k,N,R,M,O,E,J,x,K,U,j,z,H,V,q,X,Y,Q,Z,$,ee,te,ie,oe,ne,ae,me,se,_e,re,le,ce,Se,he,ue,de,pe,ge,Pe,fe,Te,ye,Ie=new Array(_.m_iJackpotCount),Ae=new Array(_.m_iJackpotCount),Ge=new Array,Le=new Array,Be=new Array(_.m_iLinesCount),De=new Array(_.m_iItemRow),We=new Array(2),Ce=null,be=null,Fe=null,we=null,ve=new Array(3),ke=new Array(3),Ne=new Array(3),Re=new Array(_.m_iItemResCount-1),Me=new Array(2),Oe=new Array(10),Ee=new Array(14),Je=new Array(14),xe=new Array(14),Ke=new Array(14),Ue=new Array(14),je=new Array(14),ze=new Array(12),He=new Array(4),Ve=new Map,qe=new Array(_.m_iItemCol),Xe=[];Se=this.GetGameAsset("Res/Texure/Lines_Frame",m.AT_SpriteFrame);for(var Ye=this.GetGameAsset1("Res/Texure/Num/NumberBlue",m.AT_SpriteAtlas),Qe=0;Qe<Oe.length;Qe++)Oe[Qe]=Ye.getSpriteFrame("NumberBlue_"+Qe);var Ze=this.GetGameAsset1("Res/Texure/Num/NumberYellow",m.AT_SpriteAtlas),$e=this.GetGameAsset("Res/Texure/NumberYellow1",m.AT_SpriteAtlas);for(Qe=0;Qe<Ee.length;Qe++)Je[Qe]=Ze.getSpriteFrame("NumberYellow_"+Qe),Ke[Qe]=Ze.getSpriteFrame("NumberYellow_"+Qe),xe[Qe]=$e.getSpriteFrame("NumberYellow1_"+Qe),Ue[Qe]=$e.getSpriteFrame("NumberYellow1_"+Qe);var et=this.GetGameAsset1("Res/Texure/Num/NumberWhite1",m.AT_SpriteAtlas);for(Qe=0;Qe<je.length;Qe++)je[Qe]=et.getSpriteFrame("NumberWhite1_"+Qe);for(Qe=0;Qe<ze.length;Qe++)ze[Qe]=et.getSpriteFrame("NumberWhite1_"+Qe);var tt=this.GetGameAsset1("Res/Texure/Jcakpot/Jcakpot",m.AT_SpriteAtlas);for(Qe=0;Qe<He.length;Qe++)He[Qe]=tt.getSpriteFrame("JackpotTitle_"+Qe);var it=this.GetGameAsset("Res/Texure/Icon",m.AT_SpriteAtlas);for(Qe=0;Qe<=_.m_iItemResCount;Qe++)Qe!=_.m_iItemResCount?Re[Qe]=it.getSpriteFrame("Item_0_"+Qe):Re[Qe]=this.GetGameAsset("Res/Texure/Item_0_"+Qe,m.AT_SpriteFrame);for(Qe=0;Qe<We.length;Qe++)We[Qe]=this.GetGameAsset("Res/Texure/background_"+Qe,m.AT_SpriteFrame);var ot=this.GetGameAsset("Res/Texure/FS_NumberFSAdd",m.AT_SpriteAtlas),nt=[];for(Qe=0;Qe<14;Qe++)nt[Qe]=ot.getSpriteFrame(""+Qe);var at,mt=this.GetGameAsset("Res/Texure/Jcakpot/jackpot_Num",m.AT_SpriteAtlas),st=[];for(Qe=0;Qe<14;Qe++)st[Qe]=mt.getSpriteFrame(""+Qe);for(pe=this.GetGameAsset("Res/Texure/Icon_Mask",m.AT_SpriteFrame),he=this.GetGameAsset1("Res/Prefab/Prefab_Num",m.AT_Prefab),ue=this.GetGameAsset("Res/Prefab/Prefab_NumGameWin",m.AT_Prefab),this.GetGameAsset1("Res/Prefab/Prefab_NumFreeSpinTime",m.AT_Prefab),fe=this.GetGameAsset("Res/Prefab/Prefab_LinesFrame",m.AT_Prefab),Te=this.GetGameAsset("Res/Prefab/Prefab_BonusAnim",m.AT_Prefab),ye=this.GetGameAsset("Res/Prefab/Prefab_tequila",m.AT_Prefab),Qe=0;Qe<17;Qe++)Xe[Qe]=this.GetGameAsset("Res/Prefab/symbol_"+Qe,m.AT_Prefab);Ve.set(10,"."),Ve.set(11,","),Ve.set(12,":"),Ve.set(13,"$"),Ve.set(14,"k"),Ve.set(15,"m");var _t=cc.find("GamePlay",this.node.parent);at=cc.find("GamePlay/Panel_Baground",this.node.parent),e=cc.find("Image_Baground",at).getComponent(cc.Sprite);var rt=cc.find("Image_Baground/bg_skeleton",at),lt=[];at=cc.find("GamePlay/Panel_Top",this.node.parent);var ct=cc.find("GamePlay/Panel_Top",this.node.parent);for(Qe=0;Qe<Ie.length;Qe++)Ie[Qe]=cc.find("Jackpot_"+Qe,at);at=cc.find("GamePlay/Panel_Middle",this.node.parent),t=cc.find("Panel_Trans",at);var St=cc.find("BagroundImage0",at),ht=cc.find("BagroundImage1",at);for(Qe=0;Qe<_.m_iItemCol;Qe++){var ut=cc.find("SlogCol_"+Qe,t);Ge[Qe]=[],Le[Qe]=[];for(var dt=0;dt<_.m_iItemRow+2;dt++)if(Ge[Qe][dt]=cc.find("SlotItem_"+dt,ut).getComponent(cc.Sprite),dt>0&&dt<_.m_iItemRow+1){var pt=Ge[Qe][dt].node.position;pt.x=ut.position.x,Le[Qe][_.m_iItemRow-dt]=pt}}i=cc.find("Panel_Lines",at),a=cc.find("Image_LinesMask",i),L=cc.find("Panel_TransAnim/Panel_ItemAnim",at),D=cc.find("Panel_TransAnim/Panel_ItemAnim_Bonus",at),B=cc.find("Panel_TransAnim/Panel_LinesFrame",at);var gt=cc.find("Panel_FSAddAnim",at);for(n=cc.find("Panel_TransAnim/Panel_RollerEff",at),Qe=0;Qe<qe.length;Qe++)qe[Qe]=cc.find("Vec_RollerEff_"+Qe,n).position;ge=(Pe=cc.find("Image_RollEff",n)).getComponent(cc.Animation),u=cc.find("Panel_FreeSpinPar",at),P=cc.find("Panel_AddFreeSpin",u),f=cc.find("Panel_AddFSTimesNumPar",P);var Pt=[],ft=[],Tt=[];for(Qe=0;Qe<18;Qe++){Pt[Qe]=cc.find("Background/Panel_Item/Item_"+Qe,P),ft[Qe]=cc.find("Background/Panel_Item_Button/FSAddBtn_"+Qe,P),this.SetBtnEvent(ft[Qe].getComponent(cc.Button),!0,!0);var yt=cc.find("EndNumPar",Pt[Qe]);Tt[Qe]=this.iGameBase.NewShowNum(yt,he,nt,Ve,!1,!1)}var It=cc.find("Background/Panel_Item_Button",P),At=cc.find("Background/rougeBonus_pistol_Right",P),Gt=cc.find("Background/rougeBonus_pistol_Left",P),Lt=cc.find("Background/AddFSTimesNumPar",P),Bt=cc.find("Background/rouge_skeleton",P).getComponent(sp.Skeleton),Dt=cc.find("FS_AddTile",P),Wt=cc.find("FS_Bullet",P),Ct=[];for(Qe=0;Qe<6;Qe++)Ct[Qe]=cc.find("FS_Bullet/FS_bullet_"+Qe,P);var bt=cc.find("Background/rouge_popup_glow",P),Ft=cc.find("Background/rouge_popup",P),wt=cc.find("FSAddEnd/FSAddEndButton",P);this.SetBtnEvent(wt.getComponent(cc.Button),!1,!0);var vt=cc.find("FSAddEnd",P);y=cc.find("Bg",u),T=cc.find("Panel_OutFreeSpin",u),ve[0]=cc.find("Panel_SmallWinScorePar",T),ke[0]=cc.find("Image_BGWin/Panel_NumPar",ve[0]),Ne[0]=cc.find("WinFontCopy",ve[0]),ve[1]=cc.find("Panel_MiddleWinScorePar",T),ke[1]=cc.find("Image_BGWin/Panel_NumPar",ve[1]),Ne[1]=cc.find("WinFontCopy",ve[1]),ve[2]=cc.find("Panel_BigWinScorePar",T),ke[2]=cc.find("Image_BGWin/Panel_NumPar",ve[2]),Ne[2]=cc.find("WinFontCopy",ve[2]),d=cc.find("Panel_FSTimesUsed",u),I=cc.find("Panel_FSTimesUsedNumPar",d),A=cc.find("Panel_FSTimesTotalNumPar",d);var kt=cc.find("Panel_FSAddInto",this.node);p=cc.find("Panel_IntoFreeSpin",this.node),g=cc.find("FSInto/Panel_WinFSTimesNumPar",p);var Nt=cc.find("FSInto/FSIntoOKButton",p);this.SetBtnEvent(Nt.getComponent(cc.Button),!0,!0);var Rt=cc.find("FSInto",p),Mt=cc.find("rouge_popup",p);cc.log("test----------------------------------"),G=cc.find("Panel_Effect",at),ee=cc.find("Panel_SmallWinScorePar",G),Q=cc.find("Image_BGWin/Panel_NumPar",ee),$=cc.find("Panel_MiddleWinScorePar",G),Y=cc.find("Image_BGWin/Panel_NumPar",$),te=cc.find("Panel_BigWinScorePar",G),Z=cc.find("Image_BGWin/Panel_NumPar",te);var Ot=cc.find("GamePlay/Panel_FSWinEffect",this.node.parent),Et=cc.find("WinPanel",Ot),Jt=cc.find("TotalWinOKButton",Et);this.SetBtnEvent(Jt.getComponent(cc.Button),!0,!0);var xt=cc.find("rouge_popup",Ot),Kt=cc.find("Panel_WinNumPar",Et),Ut=cc.find("GamePlay/Panel_BigWin",this.node.parent),jt=cc.find("bigwin_glow",Ut),zt=cc.find("bigwin_transition",Ut),Ht=cc.find("Panel_WinNumPar",Ut);at=cc.find("GamePlay/Panel_Below",this.node.parent);var Vt=cc.find("GamePlay/Panel_Below",this.node.parent);ie=cc.find("Image_BGGameWin/Panel_NumPar",at),V=cc.find("Image_BGCredit/Panel_NumPar",at),q=cc.find("Image_BGTotalBet/Panel_NumPar",at),X=cc.find("Image_BGWin/Panel_NumPar",at),cc.find("Image_BGJP/Panel_NumPar",at);var qt=cc.find("IDLabel",at).getComponent(cc.Label);oe=cc.find("Button_Spin",at).getComponent(cc.Button),this.SetBtnEvent(oe,!0,!0),ne=cc.find("Button_Stop",at).getComponent(cc.Button),this.SetBtnEvent(ne,!1,!0),ae=cc.find("Button_Take",at).getComponent(cc.Button),this.SetBtnEvent(ae,!1,!0),_e=cc.find("Button_Auto",at).getComponent(cc.Button),this.SetBtnEvent(_e,!0,!0),re=cc.find("Effect_Auto",_e.node),h=this.GetGameAsset("Res/Texure/Button_Auto_Normal",m.AT_SpriteFrame),(le=cc.find("auto",_e.node).getComponent(cc.Sprite)).node.active=!1,ce=_e.getComponent(cc.Animation),me=cc.find("Button_BetAdd",at).getComponent(cc.Button),this.SetBtnEvent(me,!0,!0),se=cc.find("Button_BetSub",at).getComponent(cc.Button),this.SetBtnEvent(se,!0,!0),O=cc.find("Button_TransScore",at).getComponent(cc.Button),this.SetBtnEvent(O,!this.iGameBase.isNoWin(),!0),o=cc.find("Panel_LinesScore",at),de=cc.find("Text_LinesScores",o).getComponent(cc.Label);var Xt=cc.find("GamePlay/Panel_Page",this.node.parent);at=cc.find("GamePlay/Panel_Page",this.node.parent);var Yt=this.GetGameAsset1("Res/Prefab/Panel_SettingH",m.AT_Prefab);(be=cc.instantiate(Yt)).setParent(Xt);var Qt=cc.find("Panel_Set",be),Zt=cc.find("Button_FullScreen/Switch",Qt),$t=cc.find("fullScreenOn",Zt),ei=cc.find("fullScreenOff",Zt);this.iGameBase.AddSetSystem(Qt,$t,ei),W=cc.find("Panel_PlayerJackpot/Panel_PrizePool",at),(C=cc.find("Image_EffBG",W)).active=!1,F=cc.find("Frame/PanelJPNumber",C),w=cc.find("Title",C).getComponent(cc.Sprite);var ti=cc.find("Panel_PalyerJP",W);b=cc.find("TargetPos",ti).position,v=cc.find("Panel_Turntable",W),k=cc.find("Image_Turntable",v),N=cc.find("Anim_WaitRoulette",k).getComponent(cc.Animation),R=cc.find("Image_Hand/Anim_EffRouFrame",v).getComponent(cc.Animation),M=cc.find("Button_Turntable",v).getComponent(cc.Button),this.SetBtnEvent(M,!0,!0),be=cc.find("Panel_Setting",at),Ce=cc.find("Button_Set",be),this.SetBtnEvent(Ce.getComponent(cc.Button),!0,!0),Fe=cc.find("Panel_Set",be),we=cc.find("Mask_Set",Fe),this.SetBtnEvent(we.getComponent(cc.Button),!1,!0),K=cc.find("Button_Rule",Fe).getComponent(cc.Button),this.SetBtnEvent(K,!0,!0),E=cc.find("Button_Sound",Fe).getComponent(cc.Button),this.SetBtnEvent(E,!0,!0),J=cc.find("Switch/soundOn",E.node),x=cc.find("Switch/soundOff",E.node),U=cc.find("Button_ToLobby",Fe).getComponent(cc.Button),this.SetBtnEvent(U,!0,!0),(z=cc.find("Panel_Rule",at)).setSiblingIndex(at.childrenCount-1),j=cc.find("Button_RuleClose",z).getComponent(cc.Button),this.SetBtnEvent(j,!0,!0);var ii=this.GetGameAsset1("Res/Prefab/Panel_LoadingH",m.AT_Prefab);(H=cc.instantiate(ii)).setParent(Xt),H.active=!1,this.m_Signal=cc.find("signal",at),this.m_Signal.active=!1;var oi=this.GetGameAsset1("Res/Texure/Num/NumberWhite",m.AT_SpriteAtlas);for(Qe=0;Qe<_.m_iJackpotCount;Qe++){for(lt[Qe]=[],dt=0;dt<13;dt++)lt[Qe][dt]=oi.getSpriteFrame("NumberWhite_"+dt);lt[Qe][12]=oi.getSpriteFrame("NumberWhite_13")}for(Qe=0;Qe<Ie.length;Qe++)Ae[Qe]=this.iGameBase.NewJackpotNumChange(Ie[Qe]),Ae[Qe].setNumSpriteFrame(lt[Qe]);this.GameLogic.m_DealAutoTrans=new r.default(this.GameLogic),this.GameLogic.m_DealAutoTrans.m_BtnAutoSpin=_e,this.GameLogic.m_DealAutoTrans.m_SPBtnAutoSpin=le,this.GameLogic.m_DealAutoTrans.m_AnimationBtnAuto=ce,this.GameLogic.m_DealAutoTrans.m_EffectBtnAutoSpin=re,this.GameLogic.m_DealAutoTrans.m_BtnSpin=oe,this.GameLogic.m_DealAutoTrans.m_BtnStop=ne,this.GameLogic.m_DealAutoTrans.m_BtnTake=ae,this.GameLogic.m_DealAutoTrans.m_SPButtonAuto=h,oe.node.on(cc.Node.EventType.TOUCH_START,this.GameLogic.m_DealAutoTrans.onSpinBtnTouchStart,this.GameLogic.m_DealAutoTrans),oe.node.on(cc.Node.EventType.TOUCH_END,this.GameLogic.m_DealAutoTrans.onSpinBtnTouchEnd,this.GameLogic.m_DealAutoTrans),oe.node.on(cc.Node.EventType.TOUCH_CANCEL,this.GameLogic.m_DealAutoTrans.onSpinBtnTouchCancel,this.GameLogic.m_DealAutoTrans),this.GameLogic.m_DealItem=new c.default(this.GameLogic),this.GameLogic.m_DealItem.m_ItemCtrl=new s.default(Re,Ge,this,this.GameLogic.ShowLottery.bind(this.GameLogic),this.GameLogic.m_DealItem.AColStopEvn.bind(this.GameLogic.m_DealItem),2200,!0,40,.3),this.GameLogic.m_DealItem.m_VecRollerEff=qe,this.GameLogic.m_DealItem.m_AnimRollerEff=ge,this.GameLogic.m_DealItem.m_RollerEff=Pe,this.GameLogic.m_DealBetRel=new l.default(this.GameLogic),this.GameLogic.m_DealBetRel.m_BtnBetAdd=me,this.GameLogic.m_DealBetRel.m_BtnBetSub=se,this.GameLogic.m_DealBetRel.m_ShowTotalBetCtrl=this.iGameBase.NewShowNum(q,he,je,Ve,!0,!0),this.GameLogic.m_DealWinPro=new S.default(this.GameLogic),this.GameLogic.m_DealWinPro.m_JcakpotEffBG=C,this.GameLogic.m_DealWinPro.m_VecTargetJP=b,this.GameLogic.m_DealWinPro.m_transCreditNumP=V,this.GameLogic.m_DealWinPro.m_transTotalWinNumP=X,this.GameLogic.m_DealWinPro.m_transMidMiddleWinP=$,this.GameLogic.m_DealWinPro.m_transMidSmallWinP=ee,this.GameLogic.m_DealWinPro.m_transMidBigWinP=te,this.GameLogic.m_DealWinPro.m_AnimPlayerBG=void 0,this.GameLogic.m_DealWinPro.m_PlayerBG=e,this.GameLogic.m_DealWinPro.m_ary_imagBG=We,this.GameLogic.m_DealWinPro.m_transLinesP=void 0,this.GameLogic.m_DealWinPro.m_ary_transLines=Be,this.GameLogic.m_DealWinPro.m_gLinesMask=a,this.GameLogic.m_DealWinPro.m_transLinesCacheP=void 0,this.GameLogic.m_DealWinPro.m_ary_VecLinesScoreNum=De,this.GameLogic.m_DealWinPro.m_transLinesScoreNumP=void 0,this.GameLogic.m_DealWinPro.m_Text_LinesScores=de,this.GameLogic.m_DealWinPro.m_gFSPar=u,this.GameLogic.m_DealWinPro.m_gFSUseP=d,this.GameLogic.m_DealWinPro.m_gIntoFS=p,this.GameLogic.m_DealWinPro.m_gIntoFS.active=!1,this.GameLogic.m_DealWinPro.m_gAddFS=P,this.GameLogic.m_DealWinPro.m_OutFS=T,this.GameLogic.m_DealWinPro.m_OutFSWinP=ve,this.GameLogic.m_DealWinPro.m_OutFSWinFontCopy=Ne,this.GameLogic.m_DealWinPro.m_gFSParBG=y,this.GameLogic.m_DealWinPro.m_ary_SprItems=Re,this.GameLogic.m_DealWinPro.m_SprItems11=pe,this.GameLogic.m_DealWinPro.m_ary_SprLinesFra=Se,this.GameLogic.m_DealWinPro.m_ary_SprItemPanel=Me,this.GameLogic.m_DealWinPro.m_ShowCreditCtrl=this.iGameBase.NewShowNum(V,ue,je,Ve,!0,!0),this.GameLogic.m_DealWinPro.m_ShowTotalWinNumCtrl=this.iGameBase.NewShowNum(X,ue,je,Ve,!0,!0),this.GameLogic.m_DealWinPro.m_ShowGameWinNumCtrl=this.iGameBase.NewShowNum(ie,ue,je,Ve,!0,!0),this.GameLogic.m_DealWinPro.m_MedMiddleWinScoreNumCtrl=this.iGameBase.NewShowNum(Y,he,Je,Ve,!0,!0),this.GameLogic.m_DealWinPro.m_MedSmallWinScoreNumCtrl=this.iGameBase.NewShowNum(Q,he,xe,Ve,!0,!0),this.GameLogic.m_DealWinPro.m_MedBigWinScoreNumCtrl=this.iGameBase.NewShowNum(Z,he,Ke,Ve,!0,!0),this.GameLogic.m_DealWinPro.m_BeforeFSTimesCtrl=this.iGameBase.NewShowNum(g,he,nt,Ve,!1,!1),this.GameLogic.m_DealWinPro.m_FSAddTimesCtrl=this.iGameBase.NewShowNum(f,he,nt,Ve,!1,!1),this.GameLogic.m_DealWinPro.m_FSTimesUsedCtrl=this.iGameBase.NewShowNum(I,he,je,Ve,!1,!1),this.GameLogic.m_DealWinPro.m_FSTotalTimes=this.iGameBase.NewShowNum(A,he,je,Ve,!1,!1),this.GameLogic.m_DealWinPro.m_OutWinScoreNumCtrl[0]=this.iGameBase.NewShowNum(ke[0],he,xe,Ve,!0,!0),this.GameLogic.m_DealWinPro.m_OutWinScoreNumCtrl[1]=this.iGameBase.NewShowNum(ke[1],he,Je,Ve,!0,!0),this.GameLogic.m_DealWinPro.m_OutWinScoreNumCtrl[2]=this.iGameBase.NewShowNum(ke[2],he,Ke,Ve,!0,!0),this.GameLogic.m_DealWinPro.m_ary_PlayerJP=Ie,this.GameLogic.m_DealWinPro.m_TransScoreCtrl=this.iGameBase.NewTransScoreCtrl(this.GameLogic.m_DealWinPro,this.GameLogic.m_DealWinPro.SubTransScore.bind(this.GameLogic.m_DealWinPro),this.GameLogic.m_DealWinPro.AddTransScore.bind(this.GameLogic.m_DealWinPro),2,2),this.GameLogic.m_DealWinPro.m_TransScoreCtrlJP=this.iGameBase.NewTransScoreCtrl(this.GameLogic.m_DealWinPro,this.GameLogic.m_DealWinPro.SubTransScoreJP.bind(this.GameLogic.m_DealWinPro),this.GameLogic.m_DealWinPro.AddTransScoreJP.bind(this.GameLogic.m_DealWinPro),2,2),this.GameLogic.m_DealWinPro.m_gPanelTurntable=v,this.GameLogic.m_DealWinPro.m_AnimWaitRoulette=N,this.GameLogic.m_DealWinPro.m_AnimRouPointer=R,this.GameLogic.m_DealWinPro.m_TransTurntableBtn=M,this.GameLogic.m_GameSlotJcakpot=this.iGameBase.NewGameSlotJcakpot_Item(w,He),this.GameLogic.m_GameSlotJcakpot.InitPlayerJcakpotScale(null,this.GameLogic.m_DealWinPro,this.GameLogic.m_DealWinPro.SetJcakpotMoved.bind(this.GameLogic.m_DealWinPro)),this.GameLogic.m_GameSlotJcakpot.NewShowNum(F,he,xe,Ve,!0,!0),this.GameLogic.m_GameSlotJcakpot.InitTurntable(k,this.GetTurntableInitData(),this.GameLogic.m_DealWinPro,this.GameLogic.m_DealWinPro.SetTurntableStop.bind(this.GameLogic.m_DealWinPro),90,this.GameLogic.m_DealWinPro,this.GameLogic.m_DealWinPro.StartTurntableCallBack.bind(this.GameLogic.m_DealWinPro)),this.GameLogic.m_DealWinPro.m_offLineLodingPanel=H,this.GameLogic.m_DealWinPro.m_BtnTransScore=O,this.GameLogic.m_DealWinPro.m_PanelRule=z,this.GameLogic.m_DealWinPro.m_Button_Set=Ce,this.GameLogic.m_DealWinPro.m_Panel_Set=Fe,this.GameLogic.m_DealWinPro.m_Mask_Set=we,this.GameLogic.m_DealWinPro.m_Widget_PanelSet=Fe.getComponent(cc.Widget),this.GameLogic.m_DealWinPro.m_Widget_m_ButtonSet=Ce.getComponent(cc.Widget),this.GameLogic.m_DealWinPro.m_Toggle_SoundOn=J,this.GameLogic.m_DealWinPro.m_Toggle_SoundOff=x,this.GameLogic.m_DealWinPro.InitSound(),this.GameLogic.m_DealWinPro.m_arys_VecItems=Le,this.GameLogic.m_DealWinPro.m_gItemAnim=void 0,this.GameLogic.m_DealWinPro.m_gLinesFrame=fe,this.GameLogic.m_DealWinPro.m_gBounsAnimPrefab=Te,this.GameLogic.m_DealWinPro.m_gFSAddItemAnimPrefab=ye,this.GameLogic.m_DealWinPro.m_transItemAnimP=L,this.GameLogic.m_DealWinPro.m_transLinesFrameP=B,this.GameLogic.m_DealWinPro.m_transBounsAnimP=D,this.GameLogic.m_DealWinPro.m_transFSAddAnimP=gt,this.GameLogic.m_DealWinPro.m_FSAddSelectItems=Pt,this.GameLogic.m_DealWinPro.m_FSAddSelectItemButtons=ft,this.GameLogic.m_DealWinPro.rougeBonus_pistol_Right=At,this.GameLogic.m_DealWinPro.rougeBonus_pistol_Left=Gt,this.GameLogic.m_DealWinPro.AddFSTimesNumCtrl=this.iGameBase.NewShowNum(Lt,he,nt,Ve,!1,!1),this.GameLogic.m_DealWinPro.AddFSTimesNumPar=Lt,this.GameLogic.m_DealWinPro.rouge_skeleton=Bt,this.GameLogic.m_DealWinPro.FS_AddTile=Dt,this.GameLogic.m_DealWinPro.FS_Bullet=Wt,this.GameLogic.m_DealWinPro.FS_bullets=Ct,this.GameLogic.m_DealWinPro.panel_top=ct,this.GameLogic.m_DealWinPro.panel_below=Vt,this.GameLogic.m_DealWinPro.m_transAddFSTimesP=f,this.GameLogic.m_DealWinPro.m_FSAddEndItemNumCtrls=Tt,this.GameLogic.m_DealWinPro.rouge_popup_glow=bt,this.GameLogic.m_DealWinPro.rouge_popup=Ft,this.GameLogic.m_DealWinPro.FSAddEndButton=wt,this.GameLogic.m_DealWinPro.FSAddEnd=vt,this.GameLogic.m_DealWinPro.m_gItemAnimPres=Xe,this.GameLogic.m_DealWinPro.m_gIntoFS_OKBtn=Nt,this.GameLogic.m_DealWinPro.m_gIntoFS_FSInto=Rt,this.GameLogic.m_DealWinPro.m_gIntoFS_rouge_popup=Mt,this.GameLogic.m_DealWinPro.m_BGNode0=St,this.GameLogic.m_DealWinPro.m_BGNode1=ht,this.GameLogic.m_DealWinPro.Panel_FSAddInto=kt,this.GameLogic.m_DealWinPro.Panel_WinEffect=Ot,this.GameLogic.m_DealWinPro.m_WinEffect_WinPanel=Et,this.GameLogic.m_DealWinPro.m_WinEffect_OKBtn=Jt,this.GameLogic.m_DealWinPro.m_WinEffect_rouge_popup=xt,this.GameLogic.m_DealWinPro.Panel_WinNumCtrl=this.iGameBase.NewShowNum(Kt,he,nt,Ve,!0,!0),this.GameLogic.m_DealWinPro.m_PanelBigWin=Ut,this.GameLogic.m_DealWinPro.m_bigWin_glow=jt,this.GameLogic.m_DealWinPro.m_bigWin_transition=zt,this.GameLogic.m_DealWinPro.bigWin_WinNumCtrl=this.iGameBase.NewShowNum(Ht,he,nt,Ve,!0,!0),this.GameLogic.m_DealWinPro.m_bigWin_NumPar=Ht,this.GameLogic.m_DealWinPro.bg_skeleton=rt,this.GameLogic.m_DealWinPro.Panel_Item_Button=It,this.GameLogic.m_DealWinPro.m_ary_JackpotNumChange=Ae,this.GameLogic.m_DealWinPro.m_IDLabel=qt,cc.log("----------------------------\x3e>>00000"),this.iGameBase.isNoWin()?(cc.find("Panel_Below/Image_BGWin",this.node).active=!1,O.node.active=!1):(cc.find("Panel_Below/Image_BGWin",this.node).active=!0,O.node.active=!0),Xt.setSiblingIndex(_t.childrenCount-1)},t.prototype.StageUpdate=function(){this.m_bIsStartUpdate&&this.GameLogic.UpdateGameSlot()},t.prototype.Leave=function(){cc.log("====Leave====",this.m_bIsStartUpdate),this.m_bIsStartUpdate=!1,this.GameLogic.Final(),this.GameLogic=null,this.m_SoundSystem&&this.m_SoundSystem.ClearAllSound()},t.prototype.SetSound=function(){if(this.m_SoundSystem=this.iGameBase.NewSoundSystem(),this.GameLogic.m_DealSound=this.m_SoundSystem,this.m_SoundSystem)for(var e=new _.AudioData,t=0;t<e.ary_AudioNames.length;t++){var i=this.GetGameAsset("Res/Sounds/"+e.ary_AudioNames[t],m.AT_AudioClip);this.m_SoundSystem.SEAdd(i,e.ary_AudioVolume[t]),t<3&&this.m_SoundSystem.BGMAdd(i,e.ary_AudioVolume[t])}},t.prototype.SetBtnEvent=function(e,t,i){if(void 0===t&&(t=!0),void 0===i&&(i=!0),null!=e){var o=new cc.Component.EventHandler;o.target=this.node,o.component=this.scriptName,o.handler="BtnEventCallback",e.clickEvents.push(o),e.node.active=t,e.interactable=i}},t.prototype.BtnEventCallback=function(e){var t=e.target;this.GameLogic.OnClickBtn(t)},t.prototype.GetGameAsset=function(e,t){return this.iGameBase.GetGameAsset(this.handlerName,e,t)},t.prototype.GetGameAsset1=function(e,t){return this.iGameBase.GetGameAsset1(e,t)},t.prototype.tesstFun=function(){this.GameLogic.m_DealWinPro.TestTestFun()},t.prototype.GetTurntableInitData=function(){var e=new Map,t=[];t.push(1),t.push(4),t.push(7),t.push(10),e.set(0,t);var i=[];i.push(2),i.push(5),i.push(8),i.push(11),e.set(1,i);var o=[];o.push(3),o.push(6),o.push(9),e.set(2,o);var n=[];return n.push(0),e.set(3,n),e},a([d],t)}(cc.Component));i.default=p,cc._RF.pop()},{"./DataManager_Skull":"DataManager_Skull","./DealAutoTrans_Skull":"DealAutoTrans_Skull","./DealBetRelevant_Skull":"DealBetRelevant_Skull","./DealItemRelevant_Skull":"DealItemRelevant_Skull","./DealWinProcess_Skull":"DealWinProcess_Skull","./GameLogic_Skull":"GameLogic_Skull","./ItemCtrl_CRSkull":"ItemCtrl_CRSkull"}],ItemCtrl_CRSkull:[function(e,t,i){"use strict";cc._RF.push(t,"8ca3dBFC1tPYa/T9kddWoGT","ItemCtrl_CRSkull");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,m=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)m=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(m=(a<3?n(m):a>3?n(t,i,m):n(t,i))||m);return a>3&&m&&Object.defineProperty(t,i,m),m};Object.defineProperty(i,"__esModule",{value:!0});var m,s=cc._decorator,_=s.ccclass;s.property,function(e){e[e.TC_NONR=0]="TC_NONR",e[e.TC_Trans=1]="TC_Trans",e[e.TC_End=2]="TC_End"}(m||(m={}));var r=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var o=e.call(this)||this;o.m_iTransCtrl=m.TC_NONR,o.caller=null,o.AllStopBackEvn=null,o.AColStopBackEvn=null,o.m_fImageHeight=0,o.m_ary_fTransSpeed=[],o.m_ary_fTransSpeedNow=[],o.m_arys_iItemResult=new Array,o.m_ary_iShowResultIdTemp=[],o.m_ary_bIsCanStop=[],o.m_ary_bIsStoped=[],o.m_fX1=0,o.m_fX2=0,o.m_fParabolaHeight=0,o.m_iParabolaReboundSpeed=0,o.m_ary_fParabolaXTemp=[],o.m_ary_bIsCanShowParabola=[],o.m_iStopedCount=0,o.m_ary_SpItemRes=[],o.m_dic_ListImage=null,o.m_ary_VecStartAncPos=[],o.m_GameTypeCurIndex=0;var n=t[0],a=t[1],s=t[2],_=t[3],r=t[4],l=t[5],c=t[6],S=t[7],h=t[8];if(null==n||null==a||l<0)return o;S<=0&&(S=40),o.m_ary_SpItemRes=n,o.m_dic_ListImage=new Map;for(var u=0;u<a.length;u++){for(var d=new Array(a[0].length),p=0;p<a[0].length;p++)d[p]=a[u][p];o.m_dic_ListImage.set(u,d)}for(u=0;u<a[0].length;u++){var g=a[0][u].node.position;o.m_ary_VecStartAncPos[u]=cc.v2(g.x,g.y)}o.m_fImageHeight=Math.abs(o.m_ary_VecStartAncPos[1].y-o.m_ary_VecStartAncPos[0].y),o.caller=s,o.AllStopBackEvn=_,o.AColStopBackEvn=r,o.m_bIsShowParabola=c,o.m_iParabolaReboundSpeed=S,o.m_fParabolaHeight=o.m_fImageHeight*h;var P=a.length,f=a[0].length-2;for(o.m_ary_fTransSpeed=new Array(P),o.m_ary_fTransSpeedNow=new Array(P),u=0;u<o.m_ary_fTransSpeed.length;u++)o.m_ary_fTransSpeed[u]=l,o.m_ary_fTransSpeedNow[u]=l;for(o.m_ary_iShowResultIdTemp=new Array(P),u=0;u<P;u++)for(o.m_arys_iItemResult[u]=[],p=0;p<f;p++)o.m_arys_iItemResult[u][p]=0;return o.m_ary_bIsCanStop=new Array(P),o.m_ary_bIsStoped=new Array(P),o.m_ary_fParabolaXTemp=new Array(P),o.m_ary_bIsCanShowParabola=new Array(P),o.m_fX1=-Math.sqrt(o.m_fParabolaHeight),o.m_fX2=-o.m_fX1,o}return n(t,e),t.prototype.StateItemCtrl=function(){switch(this.m_iTransCtrl){case m.TC_NONR:break;case m.TC_Trans:this.m_iStopedCount=0;for(var e=0;e<this.m_ary_bIsStoped.length;e++)this.m_ary_bIsStoped[e]&&this.m_iStopedCount++;if(this.m_iStopedCount==this.m_ary_bIsStoped.length)return void(this.m_iTransCtrl=m.TC_End);for(e=0;e<this.m_ary_bIsCanStop.length;e++)this.m_ary_bIsStoped[e]||this.OnTransing(e,this.m_ary_bIsCanStop[e],this.m_bIsShowParabola);break;case m.TC_End:this.m_iTransCtrl=m.TC_NONR,null!=this.AllStopBackEvn&&this.AllStopBackEvn.call(this.caller)}},t.prototype.ShowInitResultSpr=function(){for(var e=0;e<this.m_dic_ListImage.size;e++)for(var t=0;t<this.m_dic_ListImage.get(e).length;t++)if(t>0&&t<this.m_dic_ListImage.get(e).length-1)(i=this.m_dic_ListImage.get(e))[t].spriteFrame=this.m_ary_SpItemRes[this.m_arys_iItemResult[e][this.m_arys_iItemResult[0].length-t]],this.m_dic_ListImage.set(e,i);else{var i=this.m_dic_ListImage.get(e),o=Math.floor(Math.random()*(this.m_ary_SpItemRes.length-1))+1;i[t].spriteFrame=this.m_ary_SpItemRes[o],this.m_dic_ListImage.set(e,i)}},t.prototype.OnTrans=function(){if(this.m_iTransCtrl==m.TC_NONR){for(var e=0;e<this.m_arys_iItemResult.length;e++){for(var t=0;t<this.m_arys_iItemResult[0].length;t++)this.m_arys_iItemResult[e][t]=-1;this.m_ary_iShowResultIdTemp[e]=0,this.m_ary_fParabolaXTemp[e]=0,this.m_ary_bIsCanStop[e]=!1,this.m_ary_bIsStoped[e]=!1,this.m_ary_bIsCanShowParabola[e]=!1,this.m_ary_fTransSpeedNow[e]=this.m_ary_fTransSpeed[e]}this.m_iTransCtrl=m.TC_Trans}},t.prototype.SetAllItemResult=function(e){if(null!=e&&e.length==this.m_arys_iItemResult.length)for(var t=0;t<e.length;t++)for(var i=0;i<e[0].length;i++)this.m_arys_iItemResult[t][i]=e[t][i];else cc.log("[ItemCtrl_CR]-> SetAllItemResult() \u8bbe\u7f6e\u7ed3\u679c\u5931\u8d25")},t.prototype.SetOneItemResult=function(e,t,i){e<0||e>=this.m_arys_iItemResult.length||t<0||t>=this.m_arys_iItemResult[0].length||i<0||i>=this.m_ary_SpItemRes.length?cc.log("[ItemCtrl_CR]-> SetOneResultImage() \u4f20\u5165\u53c2\u6570\u6709\u8bef\uff01col\uff1a"+e+"    row"+t+"  iResult\uff1a"+i):(this.m_arys_iItemResult[e][t]=i,this.m_dic_ListImage[e][this.m_dic_ListImage[e].Count-2-t].sprite=this.m_ary_SpItemRes[this.m_arys_iItemResult[e][t]])},t.prototype.SetAllItemStop=function(){if(this.m_iTransCtrl==m.TC_Trans)for(var e=0;e<this.m_ary_bIsCanStop.length;e++)this.m_ary_bIsCanStop[e]=!0},t.prototype.SetAColItemStop=function(e){this.m_iTransCtrl!=m.TC_Trans||e<0||e>=this.m_ary_bIsCanStop.length?cc.log("[ItemCtrl_CR]-> SetAColItemStop() \u5931\u8d25\uff01m_iTransCtrl= "+this.m_iTransCtrl+"   col\uff1a"+e):this.m_ary_bIsCanStop[e]=!0},t.prototype.Get_m_ary_bIsCanStop=function(e){return!(e<0||e>=this.m_ary_bIsCanStop.length)&&this.m_ary_bIsCanStop[e]},t.prototype.Get_m_ary_bIsStoped=function(e){return!(e<0||e>=this.m_ary_bIsStoped.length)&&this.m_ary_bIsStoped[e]},t.prototype.GetImage=function(e,t){return e<0||e>=this.m_arys_iItemResult.length||t<0||t>=this.m_arys_iItemResult[0].length?null:this.m_dic_ListImage.get(e)[this.m_dic_ListImage.get(e).length-2-t]},t.prototype.Get_IsAllItemTransEnd=function(){return this.m_iTransCtrl==m.TC_NONR},t.prototype.SetModifySpeed=function(e,t){void 0===t&&(t=.5),e<0||e>this.m_ary_fTransSpeedNow.length||t<=0||(this.m_ary_fTransSpeedNow[e]=this.m_ary_fTransSpeed[e]*t)},t.prototype.OnTransing=function(e,t,i){this.m_ary_iShowResultIdTemp[e]<this.m_arys_iItemResult[0].length?this.OnTransLogic(e,t):this.m_ary_bIsCanShowParabola[e]?i?this.ShowParabolaEff(e,this.ParabolaLogic(e,this.m_fParabolaHeight)):(this.m_ary_bIsStoped[e]=!0,this.ShowParabolaEff(e,0),null!=this.AColStopBackEvn&&this.AColStopBackEvn.call(this.caller,e)):this.OnTransLogic(e,!1)},t.prototype.OnTransLogic=function(e,t){for(var i=this.m_ary_fTransSpeedNow[e]*cc.director.getDeltaTime(),o=this.m_dic_ListImage.get(e),n=0;n<this.m_dic_ListImage.get(e).length;n++)o[n].node.position=cc.v3(o[n].node.position.x,o[n].node.y-i,0);var a=o[0],m=o[0].node.getChildByName("freespin_symbol_fire");if(a.node.position.y<=this.m_ary_VecStartAncPos[0].y-this.m_fImageHeight){this.m_ary_iShowResultIdTemp[e]>=this.m_arys_iItemResult[0].length&&(this.m_ary_bIsCanShowParabola[e]=!0,t=!1);var s=0;t?-1!=this.m_arys_iItemResult[e][this.m_arys_iItemResult[0].length-1]&&(s=this.m_arys_iItemResult[e][this.m_arys_iItemResult[0].length-1-this.m_ary_iShowResultIdTemp[e]],a.spriteFrame=this.m_ary_SpItemRes[s],this.m_ary_iShowResultIdTemp[e]++,1==this.m_GameTypeCurIndex&&(m.getComponent(sp.Skeleton).setAnimation(0,"freespin_symbol_fire",!1),m.getComponent(sp.Skeleton).timeScale=1.1)):(s=Math.floor(10*Math.random()),a.spriteFrame=this.m_ary_SpItemRes[s]);var _=a.node.position.y-this.m_ary_VecStartAncPos[0].y+this.m_fImageHeight;a.node.position=cc.v3(this.m_ary_VecStartAncPos[this.m_ary_VecStartAncPos.length-1].x,this.m_ary_VecStartAncPos[this.m_ary_VecStartAncPos.length-1].y+_,0),o.shift(),o.push(a),this.m_dic_ListImage.set(e,o)}},t.prototype.ParabolaLogic=function(e,t){this.m_ary_fParabolaXTemp[e]+=cc.director.getDeltaTime()*this.m_iParabolaReboundSpeed;var i=this.m_fX1+this.m_ary_fParabolaXTemp[e];return(i=(i=i<this.m_fX1?this.m_fX1:i)>this.m_fX2?this.m_fX2:i)>=this.m_fX2&&(this.m_ary_bIsStoped[e]=!0,null!=this.AColStopBackEvn&&this.AColStopBackEvn.call(this.caller,e)),i*i-t},t.prototype.ShowParabolaEff=function(e,t){for(var i=this.m_dic_ListImage.get(e),o=0;o<i.length;o++)this.m_ary_bIsStoped[e]?i[o].node.position=cc.v3(this.m_ary_VecStartAncPos[o].x,this.m_ary_VecStartAncPos[o].y,0):i[o].node.position=cc.v3(this.m_ary_VecStartAncPos[o].x,this.m_ary_VecStartAncPos[o].y+t,0);this.m_dic_ListImage.set(e,i)},a([_],t)}(cc.Component);i.default=r,cc._RF.pop()},{}]},{},["DataManager_Skull","DealAutoTrans_Skull","DealBetRelevant_Skull","DealItemRelevant_Skull","DealWinProcess_Skull","GameLogic_Skull","Game_Skull","ItemCtrl_CRSkull"]);