window.__require=function e(t,a,s){function n(o,r){if(!a[o]){if(!t[o]){var l=o.split("/");if(l=l[l.length-1],!t[l]){var c="function"==typeof __require&&__require;if(!r&&c)return c(l,!0);if(i)return i(l,!0);throw new Error("Cannot find module '"+o+"'")}o=l}var d=a[o]={exports:{}};t[o][0].call(d.exports,function(e){return n(t[o][1][e]||e)},d,d.exports,e,t,a,s)}return a[o].exports}for(var i="function"==typeof __require&&__require,o=0;o<s.length;o++)n(s[o]);return n}({BelowBarV:[function(e,t,a){"use strict";cc._RF.push(t,"10d8cLcxdxJ5JrHBE9XpCTo","BelowBarV");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0});const n=e("../GameBaseSlot"),i=e("./ShowImageNumCtrl"),{ccclass:o,property:r}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.handlerComName="SLOST_COMMON"}onLoad(){this.setGameObject()}GetGameAsset1(e,t){switch(t){case n.AssetType.AT_SpriteFrame:return cc.assetManager.getBundle(this.handlerComName).get(e,cc.SpriteFrame);case n.AssetType.AT_SpriteAtlas:return cc.assetManager.getBundle(this.handlerComName).get(e,cc.SpriteAtlas);case n.AssetType.AT_Prefab:return cc.assetManager.getBundle(this.handlerComName).get(e,cc.Prefab);case n.AssetType.AT_AudioClip:return cc.assetManager.getBundle(this.handlerComName).get(e,cc.AudioClip)}}setText_Lines(e){this.m_Text_LinesScores.string=e}ShowID(e){this.m_IDLabel.string=e}GetShowGameWinNumCtrl(){return this.m_ShowGameWinNumCtrl}GetShowTotalBetCtrl(){return this.m_ShowTotalBetCtrl}Final(){cc.error("BelowBarV==Final  "),this.m_ShowGameWinNumCtrl=null,this.m_ShowTotalBetCtrl=null}setGameObject(){let e,t,a,s,o=new Map,r=new Array(13),l=new Array(12);this.m_IDLabel=cc.find("IDLabel",this.node).getComponent(cc.Label),e=cc.find("Image_BGGameWin/Panel_NumPar",this.node),t=cc.find("Image_BGTotalBet/Panel_NumPar",this.node),this.m_Text_LinesScores=cc.find("Panel_LinesScore/Text_LinesScores",this.node).getComponent(cc.Label),a=this.GetGameAsset1("Res/Prefab/Prefab_NumGameWin",n.AssetType.AT_Prefab),s=this.GetGameAsset1("Res/Prefab/Prefab_Num",n.AssetType.AT_Prefab);let c=this.GetGameAsset1("Res/Texure/Num/NumberWhite",n.AssetType.AT_SpriteAtlas);for(let n=0;n<r.length;n++)r[n]=c.getSpriteFrame("NumberWhite_"+n);let d=this.GetGameAsset1("Res/Texure/Num/NumberBlue1",n.AssetType.AT_SpriteAtlas);for(let n=0;n<l.length;n++)l[n]=d.getSpriteFrame("NumberBlue1_"+n);o.set(10,"."),o.set(11,","),o.set(12,":"),this.m_ShowGameWinNumCtrl=new i.default(e,s,r,o,!0,!0),this.m_ShowTotalBetCtrl=new i.default(t,s,l,o,!0,!0)}};l=s([o],l),a.default=l,cc._RF.pop()},{"../GameBaseSlot":"GameBaseSlot","./ShowImageNumCtrl":"ShowImageNumCtrl"}],CMD:[function(e,t,a){"use strict";cc._RF.push(t,"9e5ebE6eFpPPqFWJANqLqxm","CMD"),Object.defineProperty(a,"__esModule",{value:!0}),a.FreeSpinData=a.ExceptionID=a.GameNo=a.WinType=a.WayType=a.BonusID=void 0,function(e){e[e.Bonus_Normal=0]="Bonus_Normal",e[e.Bonus_FreeSpin=1]="Bonus_FreeSpin",e[e.Bonus_Special=2]="Bonus_Special"}(a.BonusID||(a.BonusID={})),function(e){e[e.WayType_Left=0]="WayType_Left",e[e.WayType_Right=1]="WayType_Right",e[e.WayType_TwoSide=2]="WayType_TwoSide"}(a.WayType||(a.WayType={})),function(e){e[e.WinType_None=0]="WinType_None",e[e.WinType_Normal=1]="WinType_Normal",e[e.WinType_AllSame=2]="WinType_AllSame"}(a.WinType||(a.WinType={})),function(e){e[e.GameNo_NONE=-1]="GameNo_NONE",e[e.GameNo_Bird=0]="GameNo_Bird",e[e.GameNo_TWHX=1]="GameNo_TWHX",e[e.GameNo_BL=2]="GameNo_BL",e[e.GameNo_XYLin=3]="GameNo_XYLin",e[e.GameNo_XYLong=4]="GameNo_XYLong",e[e.GameNo_BL2=5]="GameNo_BL2"}(a.GameNo||(a.GameNo={})),function(e){e[e.NOT_ENOUGH_MONEY=-101]="NOT_ENOUGH_MONEY",e[e.DOUBLE_GAME_ERROR=-110]="DOUBLE_GAME_ERROR",e[e.DOUBLE_GAME_EXPLODE=-111]="DOUBLE_GAME_EXPLODE",e[e.DOUBLE_GAME_SCORE_ZERO=-112]="DOUBLE_GAME_SCORE_ZERO",e[e.COMMU_CONNECT_FAIL=-201]="COMMU_CONNECT_FAIL"}(a.ExceptionID||(a.ExceptionID={})),function(e){e[e.TotalTimes=0]="TotalTimes",e[e.UsedTimes=1]="UsedTimes",e[e.TotalWin=2]="TotalWin",e[e.AddTimes=3]="AddTimes"}(a.FreeSpinData||(a.FreeSpinData={}));class s{static SUB_C_ADD_SCORE(e,t,a){throw new Error("Method not implemented.")}}a.default=s,s.SUB_S_JACKCPOTS=101,s.SUB_S_AWARD_LINES=103,s.SUB_S_INIT_REEL=106,s.SUB_S_SCORE=107,s.SUB_S_LAST_SLOT=109,s.SUB_S_BETFAIL=201,s.SUB_S_PAY_TIP=202,s.SUB_S_PLAYER_DATA=203,s.SUB_S_RUN_RECORD_BEGIN=204,s.SUB_S_PRIZE_INFO=205,s.SUB_S_SCATTER_INFO=206,s.SUB_S_RUN_RECORD_END=207,s.SUB_S_TRANSITION_SCORE_SUCCEED=208,s.SUB_S_WIN_JACKPOT=209,s.SUB_S_PAY_JACKPOT=210,s.SUB_S_WAIT_BONUS_DATA=211,s.SUB_S_WAIT_SPECIAL_DATA=212,s.SUB_S_SPECIAL_REEL=213,s.SUB_S_CHOICE_CARD=214,s.SUB_S_SELECT_CARD_LIST=301,s.SUB_S_MAXWIN=302,s.SUB_S_SELECT_CARD_LAST=303,s.SUB_S_COIN_TOSSING=304,s.SUB_S_QUERY_COIN_TOSSING_RECORD=305,s.CMD_S_Transition_Score=[{k:"bTransition",t:"bool"}],s.tagSystemConfig=[{k:"iCoinInRatio",t:"int"},{k:"iExplodeMax",t:"int"},{k:"iRefundMode",t:"int"}],s.LastSlot=[{k:"iBonusID",t:"int"},{k:"iFreeSpinTotalTimes",t:"int"},{k:"iFreeSpinTimes",t:"int"},{k:"iFreeSpinAddTimes",t:"int"},{k:"iFreeSpinAgainTimes",t:"int"},{k:"iFreeSpinPlusOdd",t:"int"},{k:"dFSTotalWinScore",t:"double"}],s.CMD_S_PayTip=[{k:"dOwn",t:"double"},{k:"dNeed",t:"double"}],s.PlayerData=[{k:"Credit",t:"double"},{k:"BetIndex",t:"int"},{k:"Bet",t:"double"},{k:"Line",t:"int"},{k:"BetPctIndex",t:"int"},{k:"BetPct",t:"double"},{k:"TotalBet",t:"double"},{k:"BonusId",t:"int"}],s.PlayerAlgRunRecord=[{k:"fCredit",t:"double"},{k:"iBetIndex",t:"int"},{k:"iBet",t:"int"},{k:"iTotalLine",t:"int"},{k:"iBetLine",t:"int"},{k:"iBetPctIndex",t:"int"},{k:"iBetPct",t:"int"},{k:"fTotalBet",t:"double"},{k:"iBonusId",t:"int"},{k:"iWinType",t:"int"},{k:"iAwardCount",t:"int"},{k:"fCurWinScore",t:"double"},{k:"iJackpotId",t:"int"},{k:"iJackpotScore",t:"int"},{k:"iWinAllId",t:"int"},{k:"fWinAllScore",t:"double"},{k:"iFreeSpinTotalTimes",t:"int"},{k:"iFreeSpinTimes",t:"int"},{k:"iFreeSpinAddTimes",t:"int"},{k:"iFreeSpinPlusOdd",t:"int"},{k:"iNextGameSpecialOdds",t:"int"},{k:"iFreeGameMode",t:"int"},{k:"iFreeGameAgainTime",t:"int"},{k:"fFreeSpinTotalWinScore",t:"double"},{k:"bChangeAward",t:"bool"},{k:"ary2_Reels",t:"int",l:[5,10]},{k:"iIsAddFreeGame",t:"int"}],s.PrizeInfo=[{k:"id",t:"int"},{k:"line",t:"int"},{k:"dir",t:"int"},{k:"num",t:"int"},{k:"point",t:"double"},{k:"reward",t:"int"},{k:"lineFrom",t:"vint"}],s.CMD_S_WinJackpot=[{k:"pid",t:"int"},{k:"jp_id",t:"int"},{k:"jpScore",t:"double"}],s.CMD_S_PayJackpot=[{k:"pid",t:"int"},{k:"jp_id",t:"int"},{k:"jpScore",t:"double"},{k:"jpUnpay",t:"double"}],s.CMD_S_WaitBonusData=[{k:"iBetIndex",t:"int"},{k:"iBet",t:"int"},{k:"iLines",t:"int"},{k:"iBetPct",t:"int"},{k:"iFreeSpinTotalTimes",t:"int"},{k:"iFreeSpinTimes",t:"int"},{k:"iFSAddTimes",t:"int"},{k:"iFSAgainTimes",t:"int"},{k:"iNextGameSpecialOdds",t:"int"},{k:"iFreeSpinPlusOdd",t:"int"},{k:"fTotalBet",t:"double"},{k:"fFreeSpinTotalWinScore",t:"double"}],s.CMD_S_Choice_Card=[{k:"cbCardIndex",t:"byte"}],s.CMD_S_SelectCardList=[{k:"pid",t:"int"},{k:"allList",t:"int",l:[18,0]},{k:"selectList",t:"int",l:[6,0]}],s.CMD_S_TurnDataList=[{k:"pid",t:"int"},{k:"allList",t:"int",l:[13,0]},{k:"selectList",t:"int",l:[13,0]}],s.CMD_S_CoinRecord=[{k:"m_iCoinTossingRecord",t:"int",l:[10,0]}],s.CMD_S_CardRecord=[{k:"m_iCoinTossingRecord",t:"int",l:[5,0]}],s.CMD_S_Coin_Tossing=[{k:"iIndex",t:"int"},{k:"fScore",t:"double"}],s.SUB_C_BET=101,s.SUB_C_BETPCT=102,s.SUB_C_RUN=103,s.SUB_C_QUERY_SCORE=104,s.SUB_C_SET_VOL=105,s.SUB_C_TRANSITION_SCORE=106,s.SUB_C_PAY_JACKPOT=107,s.SUB_C_GET_JACKPOT=108,s.SUB_C_GET_WAIT_BONUS_DATA=109,s.SUB_C_GET_WAIT_Special_DATA=110,s.SUB_C_CHOICE_CARD=111,s.SUB_C_COIN_TOSSING=112,s.SUB_C_QUERY_COIN_TOSSING_RECORD=113,s.SUB_C_BACKSTAGE_START=16,s.SUB_C_BACKSTAGE_END=17,s.CMD_C_Bet=[{k:"nDir",t:"int"}],s.CMD_C_BetPct=[{k:"bAdd",t:"bool"}],s.CMD_C_Transition_Score=[{k:"fScore",t:"double"}],s.CMD_C_Choice_Card=[{k:"cbCardIndex",t:"byte"}],s.CMD_C_Select_Card=[{k:"cbCardIndex",t:"int"}],s.CMD_C_Coin_Tossing=[{k:"iIndex",t:"int"},{k:"fScore",t:"double"}],cc._RF.pop()},{}],DealTurntable:[function(e,t,a){"use strict";cc._RF.push(t,"fb663aje0tJQbnrUBamAK6M","DealTurntable");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0}),a.eRotateState=void 0;const n=e("./SMGlobal"),{ccclass:i,property:o}=cc._decorator;var r;(function(e){e[e.e_None=-1]="e_None",e[e.e_FirstNegaSlow=0]="e_FirstNegaSlow",e[e.e_Acc=1]="e_Acc",e[e.e_Uniform=2]="e_Uniform",e[e.e_Slow=3]="e_Slow",e[e.e_End=4]="e_End",e[e.MaxValue=5]="MaxValue"})(r=a.eRotateState||(a.eRotateState={}));let l=class extends cc.Component{constructor(...e){super(),this.m_eRotateState=r.e_None,this.m_dic_TurntableInitData=new Map,this.m_fFirstNegaTime=.5,this.m_fUniformTime=3,this.m_fTimer=0,this.m_fSpeedMax=15,this.m_fSpeedMin=5,this.m_fSpeedNow=0,this.m_fTrim=10,this.m_fSingleAareAverage=0,this.m_fSlowAngleMin=0,this.m_fSlowAngleMax=0,this.m_rotateSound=null,this.m_pointOffsetAngle=0;let t=e[0],a=e[1],s=e[2],n=e[3],i=e[4],o=e[5],l=e[6];this.m_TransTurntable=t,this.m_TransTurntable.active=!0,this.m_dic_TurntableInitData=a,this.m_caller=s,this.EndBackEvn=n,this.m_TargetDirVec=new cc.Vec3(0,1,0);let c=0;this.m_dic_TurntableInitData.forEach(e=>{c+=e.length}),this.m_fSingleAareAverage=360/c,this.m_fSlowAngleMin=2*this.m_fSingleAareAverage,this.m_fSlowAngleMax=4*this.m_fSingleAareAverage,this.m_pointOffsetAngle=i,this.m_startCaller=o,this.m_startBackEvn=l}UpdateState(){switch(this.m_eRotateState){case r.e_None:break;case r.e_FirstNegaSlow:this.FirstNegaSlowLogic();break;case r.e_Acc:this.AccLogic();break;case r.e_Uniform:this.UniformLogic();break;case r.e_Slow:this.SlowLogic();break;case r.e_End:this.m_fSpeedNow=0,this.m_fTimer=0,this.m_eRotateState=r.e_None,null!=this.EndBackEvn&&this.EndBackEvn.call(this.m_caller)}}get IsEnd(){return this.m_eRotateState==r.e_None}get StopId(){return this.m_iStopId}set StopId(e){this.m_iStopId=e}get FirstNegaTime(){return this.m_fFirstNegaTime}set FirstNegaTime(e){e>0&&(this.m_fFirstNegaTime=e)}get UniformTime(){return this.m_fUniformTime}set UniformTime(e){e>0&&(cc.log("====UniformTime===",e),this.m_fUniformTime=e)}get SpeedMax(){return this.m_fSpeedMax}set SpeedMax(e){e>0&&e>this.m_fSpeedMin&&(this.m_fSpeedMax=e)}get SpeedMin(){return this.m_fSpeedMin}set SpeedMin(e){e>0&&e<this.m_fSpeedMax&&(this.m_fSpeedMin=e)}get FTrimAngle(){return this.m_fTrim}set FTrimAngle(e){this.m_fTrim=e}SlowSingleAarePre(e,t){e=Math.abs(e*this.m_fSingleAareAverage),t=Math.abs(t*this.m_fSingleAareAverage),(e%=360)>(t%=360)&&(e=t),this.m_fSlowAngleMin=e,this.m_fSlowAngleMax=t}OnRotate(){if(this.m_eRotateState!=r.e_None)return;let e=this.GetTurntableArea;if(-1==e)return;let t=this.GetTargetAngle(e);this.m_TargetDirVec=this.GetDirVec(t),this.m_fSpeedNow=this.m_fSpeedMax,this.m_fTimer=0,this.m_eRotateState=r.e_FirstNegaSlow,null!=this.m_startBackEvn&&this.m_startBackEvn.call(this.m_startCaller)}get GetTurntableArea(){let e=-1;if(this.m_dic_TurntableInitData.has(this.m_iStopId)){let t=this.m_dic_TurntableInitData.get(this.m_iStopId);t.length>0&&(e=t[n.default.Random(0,t.length)])}return e}GetTargetAngle(e){return this.m_fSingleAareAverage*e-this.m_fTrim}GetDirVec(e){let t=Math.cos(Math.PI*(e+this.m_pointOffsetAngle)/180),a=Math.sin(Math.PI*(e+this.m_pointOffsetAngle)/180);return new cc.Vec3(t,a,0)}FirstNegaSlowLogic(){this.m_fTimer+=cc.director.getDeltaTime(),this.m_fTimer<=this.m_fFirstNegaTime?(this.SetRototion(!0),this.m_fSpeedNow>this.m_fSpeedMin?this.m_fSpeedNow-=2*this.m_fSpeedNow/10:this.m_fSpeedNow=this.m_fSpeedMin):(this.m_fSpeedNow=this.m_fSpeedMin,this.m_fTimer=0,this.m_eRotateState=r.e_Acc)}AccLogic(){this.SetRototion(!1),this.m_fSpeedNow<this.m_fSpeedMax?this.m_fSpeedNow+=2*this.m_fSpeedNow/10:(this.m_fSpeedNow=this.m_fSpeedMax,this.m_eRotateState=r.e_Uniform)}UniformLogic(){this.m_fTimer+=cc.director.getDeltaTime(),this.m_fTimer<this.m_fUniformTime||this.GetAngle()<this.m_fSlowAngleMin||this.GetAngle()>this.m_fSlowAngleMax?(this.SetRototion(!1),this.m_fSpeedNow<this.m_fSpeedMax&&(this.m_fSpeedNow+=1,this.m_fSpeedNow>this.m_fSpeedMax&&(this.m_fSpeedNow=this.m_fSpeedMax))):(this.m_fSpeedNow=this.m_fSpeedMax,this.m_fTimer=0,this.m_eRotateState=r.e_Slow)}SlowLogic(){this.m_fSpeedNow>this.m_fSpeedMin&&(this.m_fSpeedNow-=2*this.m_fSpeedNow/10,this.m_fSpeedNow<this.m_fSpeedMin&&(this.m_fSpeedNow=this.m_fSpeedMin)),this.GetAngle(),this.GetAngle()>this.m_fTrim?this.SetRototion(!1):(this.m_fSpeedNow=this.m_fSpeedMin,this.m_eRotateState=r.e_End)}EndNegaAccLogic(){cc.log("====EndNegaAccLogic==="),this.GetAngle()>0?this.SetRototion(!0):(cc.log("==EndNegaAccLogic==End==="),this.m_eRotateState=r.e_End)}GetAngle(){return this.CalAngle(this.m_TargetDirVec,this.m_TransTurntable.right)}CalAngle(e,t){return 180*cc.Vec3.angle(e,t)/Math.PI}SetRototion(e){if(this.m_TransTurntable.angle<-360){let e=this.m_TransTurntable.angle%360;this.m_TransTurntable.angle=e}e?this.m_TransTurntable.angle+=this.m_fSpeedNow:this.m_TransTurntable.angle-=this.m_fSpeedNow}};l=s([i],l),a.default=l,cc._RF.pop()},{"./SMGlobal":"SMGlobal"}],FISHO_CMD:[function(e,t,a){"use strict";cc._RF.push(t,"bc70a4okitNII9Kz2NtIJoN","FISHO_CMD"),Object.defineProperty(a,"__esModule",{value:!0}),a.SceneStatus_DEMO=a.FishKind_DEMO=void 0,function(e){e[e.FISH_DAYANYU=0]="FISH_DAYANYU",e[e.FISH_XIAOLVYU=1]="FISH_XIAOLVYU",e[e.FISH_XIAOHONGYU=2]="FISH_XIAOHONGYU",e[e.FISH_XIAOHUANGYU=3]="FISH_XIAOHUANGYU",e[e.FISH_XIAOLANYU=4]="FISH_XIAOLANYU",e[e.FISH_XIAOKEDOU=5]="FISH_XIAOKEDOU",e[e.FISH_LVHETUN=6]="FISH_LVHETUN",e[e.FISH_SHUIMU=7]="FISH_SHUIMU",e[e.FISH_XIAOHAIGUI=8]="FISH_XIAOHAIGUI",e[e.FISH_HUDIEYU=9]="FISH_HUDIEYU",e[e.FISH_QUNDAIYU=10]="FISH_QUNDAIYU",e[e.FISH_PANGHONGYU=11]="FISH_PANGHONGYU",e[e.FISH_DENGLONGYU=12]="FISH_DENGLONGYU",e[e.FISH_JIANYU=13]="FISH_JIANYU",e[e.FISH_PANGXIE=14]="FISH_PANGXIE",e[e.FISH_MOGUIYU=15]="FISH_MOGUIYU",e[e.FISH_LANBIANFU=16]="FISH_LANBIANFU",e[e.FISH_LANCHUISHA=17]="FISH_LANCHUISHA",e[e.FISH_LANSHA=18]="FISH_LANSHA",e[e.FISH_50ZUHE=19]="FISH_50ZUHE",e[e.FISH_60ZUHE=20]="FISH_60ZUHE",e[e.FISH_JINCHUISHA=21]="FISH_JINCHUISHA",e[e.FISH_70ZUHE=22]="FISH_70ZUHE",e[e.FISH_JINSHA=23]="FISH_JINSHA",e[e.FISH_80ZUHE=24]="FISH_80ZUHE",e[e.FISH_JINBIANFU=25]="FISH_JINBIANFU",e[e.FISH_JINWUGUI=26]="FISH_JINWUGUI",e[e.FISH_JINHAMA=27]="FISH_JINHAMA",e[e.FISH_MEIRENYU=28]="FISH_MEIRENYU",e[e.FISH_ZHANGYU=29]="FISH_ZHANGYU",e[e.FISH_JINLONG=30]="FISH_JINLONG",e[e.FISH_YIWANG1=31]="FISH_YIWANG1",e[e.FISH_YIWANG2=32]="FISH_YIWANG2",e[e.FISH_YIWANG3=33]="FISH_YIWANG3",e[e.FISH_YIWANG4=34]="FISH_YIWANG4",e[e.FISH_YIWANG5=35]="FISH_YIWANG5",e[e.FISH_KIND_COUNT=36]="FISH_KIND_COUNT"}(a.FishKind_DEMO||(a.FishKind_DEMO={})),function(e){e[e.SCENE_NONE=0]="SCENE_NONE",e[e.SCENE_WAIT_TIDE=1]="SCENE_WAIT_TIDE",e[e.SCENE_RUNNING=2]="SCENE_RUNNING"}(a.SceneStatus_DEMO||(a.SceneStatus_DEMO={}));class s{}a.default=s,s.GAME_PLAYER=4,s.SUB_S_ANDROID_BANKOPERATOR=511,s.SUB_S_FISH=2002,s.SUB_S_USER_FIRE=2003,s.SUB_S_EXCHANGE_BULLET=2004,s.SUB_S_SWITCH_SCENE=2005,s.SUB_S_CATCH_CHAIN=2006,s.SUB_S_TIMER_SYNC=2007,s.SUB_S_LOCK_FISH=2008,s.SUB_S_PLAYER_SYNC=2010,s.SUB_S_FISH_SYNC=2011,s.SUB_S_BULLET_SYNC=2012,s.SUB_S_REPLACE_CATCH=2013,s.SUB_S_SWITCH_CANNON=2009,s.SUB_S_BULLET_OVER=2014,s.SUB_S_THUNDER_CATCH_CHAIN=2015,s.SUB_S_TRANSITION_SCORE=2016,s.SUB_S_ZUAN_TOU=2017,s.SUB_S_BACKSTAGE=2018,s.SUB_S_LAST_EFFECTS=2020,s.SUB_S_TREASURE_BOX_END=2021,s.SUB_S_INGOT=2022,s.SUB_S_INGOT_END=2023,s.SUB_S_CATCH_BOSS=2024,s.CMD_S_GameScene=[{k:"nSceneID",t:"int"},{k:"lBaseScore",t:"score"},{k:"nStyleID",t:"int"},{k:"wPlayerCount",t:"word"},{k:"wFishCount",t:"word"},{k:"wBulletCount",t:"word"},{k:"dwServerTicket",t:"dword"}],s.CMD_S_CatchBoss=[{k:"nPlayerID",t:"word"},{k:"wTimes",t:"word"}],s.CMD_S_PlayerInfo=[{k:"nPlayerID",t:"int"},{k:"wChairID",t:"word"},{k:"lPlayerScore",t:"score"},{k:"dwPlayerMultiple",t:"dword"},{k:"dwLockFishIndex",t:"dword"},{k:"cbCannonType",t:"byte"},{k:"fWinScore",t:"score"}],s.CMD_S_FishInfo=[{k:"dwFishIndex",t:"dword"},{k:"nFishKindID",t:"int"},{k:"wPathID",t:"word"},{k:"wPath_Index",t:"word"},{k:"dwCreteTicket",t:"dword"},{k:"nSpecialFishKindID",t:"int"}],s.CMD_S_FishInfo_FISHR=[{k:"dwFishIndex",t:"dword"},{k:"nFishKindID",t:"int"},{k:"wPathID",t:"word"},{k:"wPath_Index",t:"word"},{k:"dwCreteTicket",t:"dword"},{k:"nSpecialFishKindID",t:"int",l:[5,0]}],s.CMD_S_FishInfo_FISHZ=[{k:"dwFishIndex",t:"dword"},{k:"nFishKindID",t:"int"},{k:"wPathID",t:"word"},{k:"wPath_Index",t:"word"},{k:"dwCreteTicket",t:"dword"},{k:"nSpecialFishKindID",t:"int"},{k:"fSpeed",t:"float"}],s.CMD_S_FishInfo_FISHHaiXiang=[{k:"dwFishIndex",t:"dword"},{k:"nFishKindID",t:"int"},{k:"wPathID",t:"word"},{k:"wPath_Index",t:"word"},{k:"dwCreteTicket",t:"dword"},{k:"nSpecialFishKindID",t:"int",l:[3,0]},{k:"fSpeed",t:"float"}],s.CMD_S_FishInfo_FISHW=[{k:"dwFishIndex",t:"dword"},{k:"nFishKindID",t:"int"},{k:"wPathID",t:"word"},{k:"wPath_Index",t:"word"},{k:"dwCreteTicket",t:"dword"},{k:"nSpecialFishKindID",t:"int",l:[5,0]},{k:"fSpeed",t:"float"}],s.CMD_S_FishInfo_FISHCrab=[{k:"dwFishIndex",t:"dword"},{k:"nFishKindID",t:"int"},{k:"wPathID",t:"word"},{k:"wPath_Index",t:"word"},{k:"dwCreteTicket",t:"dword"},{k:"nSpecialFishKindID",t:"int",l:[3,0]}],s.CMD_S_BulletInfo=[{k:"dwBulletIndex",t:"dword"},{k:"nPlayerID",t:"int"},{k:"dBulletAngle",t:"double"},{k:"dwBulletTicket",t:"dword"},{k:"cbBulletDefine",t:"byte"}],s.CMD_S_UserFire=[{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"},{k:"nBulletMultiple",t:"int"},{k:"dBulletAngle",t:"double"},{k:"lPlayerScore",t:"score"},{k:"dwCreateTicket",t:"dword"},{k:"dwFishIndex",t:"dword"},{k:"cbBulletDefine",t:"byte"}],s.CMD_S_PlayerExchangeBullet=[{k:"nPlayerID",t:"int"},{k:"nPlayerMultiple",t:"int"}],s.CMD_S_PlayerCatchFish=[{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"},{k:"cbBulletDefine",t:"byte"},{k:"dwFishIndex",t:"dword"},{k:"lFishScore",t:"score"},{k:"lGongNengScore",t:"score"},{k:"fWinScore",t:"score"},{k:"iBulletMultiple",t:"int"},{k:"cbMeiRenYu",t:"byte"}],s.CMD_S_PlayerCatchFish_FISHT=[{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"},{k:"cbBulletDefine",t:"byte"},{k:"dwFishIndex",t:"dword"},{k:"lFishScore",t:"score"},{k:"lGongNengScore",t:"score"},{k:"fWinScore",t:"score"},{k:"iBulletMultiple",t:"int"},{k:"cbSpecial",t:"byte"}],s.CMD_S_CatchMuchFish=[{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"},{k:"cbBulletDefine",t:"byte"},{k:"dwFishIndex",t:"dword",l:[40,0]},{k:"lFishScore",t:"score",l:[40,0]},{k:"lGongNengScore",t:"score"},{k:"fWinScore",t:"score"},{k:"fFirePower",t:"double"}],s.CMD_S_CatchMuchFish_FISHR=[{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"},{k:"cbBulletDefine",t:"byte"},{k:"dwFishIndex",t:"dword",l:[50,0]},{k:"lFishScore",t:"score",l:[50,0]},{k:"lGongNengScore",t:"score"},{k:"fWinScore",t:"score"},{k:"fFirePower",t:"double"}],s.CMD_S_BulletInfoSyn=[{k:"dwBulletIndex",t:"dword"},{k:"dCol",t:"double"},{k:"dRow",t:"double"}],s.CMD_S_CHANGE_SCENE=[{k:"nSceneID",t:"int"}],s.CMD_S_LockFish=[{k:"nPlayerID",t:"int"},{k:"dwLockFishIndex",t:"dword"}],s.CMD_S_SynTime=[{k:"dwServerTicket",t:"dword"}],s.CMD_S_Replace_Catch=[{k:"dwMaxReplaceGameID",t:"dword",l:[3,0]}],s.CMD_S_SwitchCannon=[{k:"wChairID",t:"word"},{k:"cbCannonType",t:"byte"}],s.CMD_S_GongNengBulletOver=[{k:"wChairID",t:"word"},{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"},{k:"cbBulletDefine",t:"byte"},{k:"lGongNengScore",t:"score"}],s.CMD_S_GongNengBulletLast=[{k:"nPlayerID",t:"int"},{k:"cbBulletDefine",t:"byte"}],s.CMD_S_Transition_Score=[{k:"bTransition",t:"bool"},{k:"fScore",t:"double"},{k:"fTransitionScore",t:"double"}],s.CMD_S_ZuanTouBulletOver=[{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"}],s.CMD_S_BackStage=[{k:"nPlayerID",t:"int"}],s.CMD_S_CatchTreasureBox=[{k:"wChairID",t:"word"},{k:"fScore",t:"score"}],s.CMD_S_CatchIngot=[{k:"wChairID",t:"word"},{k:"fIngotScore",t:"score"},{k:"iFirePower",t:"int"}],s.CMD_S_CatchPanda=[{k:"wChairID",t:"word"},{k:"cbIndex",t:"byte"},{k:"fScore",t:"score"},{k:"iFirePower",t:"int"},{k:"iPandaMul",t:"int",l:[3,0]}],s.SUB_C_USER_FIRE=1,s.SUB_C_EXCHANGE_BULLET=2,s.SUB_C_CATCH_FISH=3,s.SUB_C_TIMER_SYNC=4,s.SUB_C_LOCK_FISH=5,s.SUB_C_SWITCH_CANNON=6,s.SUB_C_SHAN_DIAN_CATCH_FISH=7,s.SUB_C_ZUAN_TOU_CATCH_FISH=9,s.SUB_C_TRANSITION_SCORE=15,s.SUB_C_BACKSTAGE_START=16,s.SUB_C_BACKSTAGE_END=17,s.SUB_C_GONG_NENG_CATCH_FISH=19,s.SUB_C_CATCH_TREASURE_BOX=20,s.SUB_C_CATCH_INGOT=21,s.SUB_C_CATCH_BOSS=22,s.CMD_C_PlayerCatchBoss=[{k:"dwBulletIndex",t:"dword"}],s.CMD_C_UserFire=[{k:"dwBulletIndex",t:"dword"},{k:"dBulletAngle",t:"double"},{k:"dwFishIndex",t:"dword"},{k:"cbUserDefine",t:"byte"}],s.CMD_C_Transition_Score=[{k:"fScore",t:"double"}],s.CMD_C_PlayerExchangeBullet=[{k:"bMultiple",t:"bool"}],s.CMD_C_PlayerCatchFish=[{k:"wChairID",t:"word"},{k:"dwBulletIndex",t:"dword"},{k:"dwFishIndex",t:"dword"}],s.CMD_C_PlayerShanDianCatchFish=[{k:"wChairID",t:"word"},{k:"dwBulletIndex",t:"dword"},{k:"dwFishIndex",t:"dword"}],s.CMD_C_PlayerGongNengCatchFish=[{k:"wChairID",t:"word"},{k:"dwBulletIndex",t:"dword"},{k:"cbFishCount",t:"byte"},{k:"dwFishIndex",t:"dword",l:[40,0]}],s.CMD_C_PlayerGongNengCatchFish_FISHR=[{k:"wChairID",t:"word"},{k:"dwBulletIndex",t:"dword"},{k:"cbFishCount",t:"byte"},{k:"dwFishIndex",t:"dword",l:[50,0]}],s.CMD_C_PlayerZuanTouCatchFish=[{k:"wChairID",t:"word"},{k:"dwBulletIndex",t:"dword"},{k:"dwFishIndex",t:"dword"}],s.CMD_C_LockFish=[{k:"dwLockFishIndex",t:"dword"}],s.CMD_C_SwitchCannon=[{k:"wChairID",t:"word"},{k:"cbCannonType",t:"byte"}],s.CMD_C_PlayerCatchPanda=[{k:"cbIndex",t:"byte"}],cc._RF.pop()},{}],FISHT_CMD:[function(e,t,a){"use strict";cc._RF.push(t,"e9fdeUZdXp0yZFN1vvHalef","FISHT_CMD"),Object.defineProperty(a,"__esModule",{value:!0}),a.SceneStatus_DEMO=a.FishKind_DEMO=void 0,function(e){e[e.FISH_DAYANYU=0]="FISH_DAYANYU",e[e.FISH_XIAOLVYU=1]="FISH_XIAOLVYU",e[e.FISH_XIAOHONGYU=2]="FISH_XIAOHONGYU",e[e.FISH_XIAOHUANGYU=3]="FISH_XIAOHUANGYU",e[e.FISH_XIAOLANYU=4]="FISH_XIAOLANYU",e[e.FISH_XIAOKEDOU=5]="FISH_XIAOKEDOU",e[e.FISH_LVHETUN=6]="FISH_LVHETUN",e[e.FISH_SHUIMU=7]="FISH_SHUIMU",e[e.FISH_XIAOHAIGUI=8]="FISH_XIAOHAIGUI",e[e.FISH_HUDIEYU=9]="FISH_HUDIEYU",e[e.FISH_QUNDAIYU=10]="FISH_QUNDAIYU",e[e.FISH_PANGHONGYU=11]="FISH_PANGHONGYU",e[e.FISH_DENGLONGYU=12]="FISH_DENGLONGYU",e[e.FISH_JIANYU=13]="FISH_JIANYU",e[e.FISH_PANGXIE=14]="FISH_PANGXIE",e[e.FISH_MOGUIYU=15]="FISH_MOGUIYU",e[e.FISH_LANBIANFU=16]="FISH_LANBIANFU",e[e.FISH_LANCHUISHA=17]="FISH_LANCHUISHA",e[e.FISH_LANSHA=18]="FISH_LANSHA",e[e.FISH_50ZUHE=19]="FISH_50ZUHE",e[e.FISH_60ZUHE=20]="FISH_60ZUHE",e[e.FISH_JINCHUISHA=21]="FISH_JINCHUISHA",e[e.FISH_70ZUHE=22]="FISH_70ZUHE",e[e.FISH_JINSHA=23]="FISH_JINSHA",e[e.FISH_80ZUHE=24]="FISH_80ZUHE",e[e.FISH_JINBIANFU=25]="FISH_JINBIANFU",e[e.FISH_JINWUGUI=26]="FISH_JINWUGUI",e[e.FISH_JINHAMA=27]="FISH_JINHAMA",e[e.FISH_MEIRENYU=28]="FISH_MEIRENYU",e[e.FISH_ZHANGYU=29]="FISH_ZHANGYU",e[e.FISH_JINLONG=30]="FISH_JINLONG",e[e.FISH_YIWANG1=31]="FISH_YIWANG1",e[e.FISH_YIWANG2=32]="FISH_YIWANG2",e[e.FISH_YIWANG3=33]="FISH_YIWANG3",e[e.FISH_YIWANG4=34]="FISH_YIWANG4",e[e.FISH_YIWANG5=35]="FISH_YIWANG5",e[e.FISH_KIND_COUNT=36]="FISH_KIND_COUNT"}(a.FishKind_DEMO||(a.FishKind_DEMO={})),function(e){e[e.SCENE_NONE=0]="SCENE_NONE",e[e.SCENE_WAIT_TIDE=1]="SCENE_WAIT_TIDE",e[e.SCENE_RUNNING=2]="SCENE_RUNNING"}(a.SceneStatus_DEMO||(a.SceneStatus_DEMO={}));class s{}a.default=s,s.GAME_PLAYER=4,s.SUB_S_ANDROID_BANKOPERATOR=511,s.SUB_S_FISH=2002,s.SUB_S_USER_FIRE=2003,s.SUB_S_EXCHANGE_BULLET=2004,s.SUB_S_SWITCH_SCENE=2005,s.SUB_S_CATCH_CHAIN=2006,s.SUB_S_TIMER_SYNC=2007,s.SUB_S_LOCK_FISH=2008,s.SUB_S_PLAYER_SYNC=2010,s.SUB_S_FISH_SYNC=2011,s.SUB_S_BULLET_SYNC=2012,s.SUB_S_REPLACE_CATCH=2013,s.SUB_S_SWITCH_CANNON=2009,s.SUB_S_BULLET_OVER=2014,s.SUB_S_THUNDER_CATCH_CHAIN=2015,s.SUB_S_TRANSITION_SCORE=2016,s.SUB_S_ZUAN_TOU=2017,s.SUB_S_BACKSTAGE=2018,s.CMD_S_GameScene=[{k:"nSceneID",t:"int"},{k:"lBaseScore",t:"score"},{k:"nStyleID",t:"int"},{k:"wPlayerCount",t:"word"},{k:"wFishCount",t:"word"},{k:"wBulletCount",t:"word"},{k:"dwServerTicket",t:"dword"}],s.CMD_S_PlayerInfo=[{k:"nPlayerID",t:"int"},{k:"wChairID",t:"word"},{k:"lPlayerScore",t:"score"},{k:"dwPlayerMultiple",t:"dword"},{k:"dwLockFishIndex",t:"dword"},{k:"cbCannonType",t:"byte"},{k:"fWinScore",t:"score"}],s.CMD_S_FishInfo=[{k:"dwFishIndex",t:"dword"},{k:"nFishKindID",t:"int"},{k:"wPathID",t:"word"},{k:"wPath_Index",t:"word"},{k:"dwCreteTicket",t:"dword"},{k:"nSpecialFishKindID",t:"int"}],s.CMD_S_BulletInfo=[{k:"dwBulletIndex",t:"dword"},{k:"nPlayerID",t:"int"},{k:"dBulletAngle",t:"double"},{k:"dwBulletTicket",t:"dword"},{k:"cbBulletDefine",t:"byte"}],s.CMD_S_UserFire=[{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"},{k:"nBulletMultiple",t:"int"},{k:"dBulletAngle",t:"double"},{k:"lPlayerScore",t:"score"},{k:"dwCreateTicket",t:"dword"},{k:"dwFishIndex",t:"dword"},{k:"cbBulletDefine",t:"byte"}],s.CMD_S_PlayerExchangeBullet=[{k:"nPlayerID",t:"int"},{k:"nPlayerMultiple",t:"int"}],s.CMD_S_PlayerCatchFish=[{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"},{k:"cbBulletDefine",t:"byte"},{k:"dwFishIndex",t:"dword"},{k:"lFishScore",t:"score"},{k:"lGongNengScore",t:"score"},{k:"fWinScore",t:"score"},{k:"iBulletMultiple",t:"int"},{k:"cbSpecial",t:"byte"}],s.CMD_S_CatchMuchFish=[{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"},{k:"cbBulletDefine",t:"byte"},{k:"dwFishIndex",t:"dword",l:[40,0]},{k:"lFishScore",t:"score",l:[40,0]},{k:"lGongNengScore",t:"score"},{k:"fWinScore",t:"score"},{k:"fFirePower",t:"double"}],s.CMD_S_BulletInfoSyn=[{k:"dwBulletIndex",t:"dword"},{k:"dCol",t:"double"},{k:"dRow",t:"double"}],s.CMD_S_CHANGE_SCENE=[{k:"nSceneID",t:"int"}],s.CMD_S_LockFish=[{k:"nPlayerID",t:"int"},{k:"dwLockFishIndex",t:"dword"}],s.CMD_S_SynTime=[{k:"dwServerTicket",t:"dword"}],s.CMD_S_Replace_Catch=[{k:"dwMaxReplaceGameID",t:"dword",l:[3,0]}],s.CMD_S_SwitchCannon=[{k:"wChairID",t:"word"},{k:"cbCannonType",t:"byte"}],s.CMD_S_GongNengBulletOver=[{k:"wChairID",t:"word"},{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"},{k:"cbBulletDefine",t:"byte"},{k:"lGongNengScore",t:"score"}],s.CMD_S_Transition_Score=[{k:"bTransition",t:"bool"},{k:"fScore",t:"double"},{k:"fTransitionScore",t:"double"}],s.CMD_S_ZuanTouBulletOver=[{k:"nPlayerID",t:"int"},{k:"dwBulletIndex",t:"dword"}],s.CMD_S_BackStage=[{k:"nPlayerID",t:"int"}],s.SUB_C_USER_FIRE=1,s.SUB_C_EXCHANGE_BULLET=2,s.SUB_C_CATCH_FISH=3,s.SUB_C_TIMER_SYNC=4,s.SUB_C_LOCK_FISH=5,s.SUB_C_SWITCH_CANNON=6,s.SUB_C_SHAN_DIAN_CATCH_FISH=7,s.SUB_C_ZUAN_TOU_CATCH_FISH=9,s.SUB_C_TRANSITION_SCORE=15,s.SUB_C_BACKSTAGE_START=16,s.SUB_C_BACKSTAGE_END=17,s.SUB_C_GONG_NENG_CATCH_FISH=19,s.CMD_C_UserFire=[{k:"dwBulletIndex",t:"dword"},{k:"dBulletAngle",t:"double"},{k:"dwFishIndex",t:"dword"},{k:"cbUserDefine",t:"byte"}],s.CMD_C_Transition_Score=[{k:"fScore",t:"double"}],s.CMD_C_PlayerExchangeBullet=[{k:"bMultiple",t:"bool"}],s.CMD_C_PlayerCatchFish=[{k:"wChairID",t:"word"},{k:"dwBulletIndex",t:"dword"},{k:"dwFishIndex",t:"dword"}],s.CMD_C_PlayerShanDianCatchFish=[{k:"wChairID",t:"word"},{k:"dwBulletIndex",t:"dword"},{k:"dwFishIndex",t:"dword"}],s.CMD_C_PlayerGongNengCatchFish=[{k:"wChairID",t:"word"},{k:"dwBulletIndex",t:"dword"},{k:"cbFishCount",t:"byte"},{k:"dwFishIndex",t:"dword",l:[40,0]}],s.CMD_C_PlayerZuanTouCatchFish=[{k:"wChairID",t:"word"},{k:"dwBulletIndex",t:"dword"},{k:"dwFishIndex",t:"dword"}],s.CMD_C_LockFish=[{k:"dwLockFishIndex",t:"dword"}],s.CMD_C_SwitchCannon=[{k:"wChairID",t:"word"},{k:"cbCannonType",t:"byte"}],cc._RF.pop()},{}],FishResMgrBase:[function(e,t,a){"use strict";cc._RF.push(t,"8bdf3QxFNNOEZHXDSTKBDrU","FishResMgrBase");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0}),a.CommonResType=void 0;const n=e("../../../ClientBase/BundleManager"),{ccclass:i,property:o}=cc._decorator;var r,l;(function(e){e[e.fishPath=0]="fishPath",e[e.font=1]="font",e[e.fishIcon=2]="fishIcon",e[e.fishSkeleton=3]="fishSkeleton",e[e.fishPrefab=4]="fishPrefab",e[e.Prefab=5]="Prefab",e[e.font_Cannon=6]="font_Cannon",e[e.font_function=7]="font_function",e[e.DragonDie=8]="DragonDie",e[e.imgs=9]="imgs",e[e.function=10]="function",e[e.Laser=11]="Laser"})(r=a.CommonResType||(a.CommonResType={})),function(e){e.fishPath="Res/fishPath/",e.font="Res/imgs/Common/font/",e.fishIcon="Preload/fishselect/",e.fishSkeleton="Res/fishTexture/",e.fishPrefab="Res/fishPrefab/",e.Prefab="Res/Prefabs/",e.font_Cannon="Res/imgs/Cannon/Font/",e.font_function="Res/function/font/",e.DragonDie="Preload/DragonDie/",e.imgs="Res/imgs/",e.function="Res/function/",e.Laser="Preload/Laser/"}(l||(l={}));let c=class{constructor(){this.currBundle=null,this.commonBundle=null,this.LoadingResourceMap=null,this.resMap=null,this._loadCompleteMap=null,this.preloadResArray=null,this.preloadIndex=0,this.isDestroy=!1,this.commonBundle=cc.assetManager.getBundle("FISHCOMMON"),this._loadCompleteMap=new Map,this.LoadingResourceMap=new Map,this.resMap=new Map,this.preloadIndex=0,this.isDestroy=!1}preloadRes(){var e=this;if(this.isDestroy)cc.error("\u5df2\u7ecf\u9500\u6bc1\u573a\u666f");else if(this.preloadIndex>=this.preloadResArray.length)cc.log("\u9884\u52a0\u8f7d\u5b8c\u6210");else{var t=this.preloadResArray[this.preloadIndex];this.load(t.path,cc.Prefab,()=>{e.preloadIndex++,e.preloadRes()})}}getCommonRes(e,t,a){var s=l[r[t]]+e;return this.commonBundle.get(s,a)}loadCommonRes(e,t,a,s){var n=l[r[a]]+e;this._load(n,t,s,!0)}load(e,t,a,s=!1){this._load(e,t,a,!1,s)}_load(e,t,a,s=!1,n=!1){if(this.isDestroy)a&&a(null);else{var i=s?this.commonBundle:this.currBundle,o=i.getInfoWithPath(e).uuid,r=this,l=this.LoadingResourceMap.has(o);a&&(n&&l||(this._loadCompleteMap.has(o)?this._loadCompleteMap.get(o).push(a):this._loadCompleteMap.set(o,[a]))),l?cc.error("\u6b63\u5728\u52a0\u8f7d\u4e2d\uff1a",e):this.resMap.has(o)?this._loadComplete(o):this._loadRes(i,e,t,o,e=>{e&&r._loadComplete(o)})}}_loadComplete(e){for(var t=this._loadCompleteMap.get(e),a=0;a<t.length;a++){var s=t[a],n=this.resMap.get(e);s&&s(n),t.splice(a,1),a--}this._loadCompleteMap.delete(e)}_loadRes(e,t,a,s,n){var i=this;this.LoadingResourceMap.set(s,!0),e.load(t,a,(e,t)=>{i.isDestroy?n&&n(null):e?(cc.error("\u52a0\u8f7d\u8d44\u6e90\u5f02\u5e38\uff1a",e.message),i.LoadingResourceMap.delete(s),n&&n(null)):(i.resMap.set(s,t),i.LoadingResourceMap.delete(s),n&&n(t))})}release(){cc.error("release FishResMgrBase "),this.isDestroy=!0,this.resMap.forEach((e,t)=>{cc.assetManager.releaseAsset(e),this.resMap.delete(t)}),this.resMap.clear(),this.resMap=null,this.LoadingResourceMap.clear(),this.LoadingResourceMap=null,this._loadCompleteMap.clear(),this._loadCompleteMap=null,this.currBundle=null,this.commonBundle&&(n.default.getInstance().IsNeedSpecial()||(cc.error("release FishResMgrBase \u6e05\u9664\u516c\u5171\u8d44\u6e90 "),this.commonBundle.releaseAll(),cc.assetManager.removeBundle(this.commonBundle),this.commonBundle=null))}setGameBundle(e){this.currBundle=e}setPreloadArray(e){this.preloadResArray=e}};c=s([i],c),a.default=c,cc._RF.pop()},{"../../../ClientBase/BundleManager":void 0}],GameBaseCasion:[function(e,t,a){"use strict";cc._RF.push(t,"5a50cbsPR9LLYSoehMJ6R7e","GameBaseCasion");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0}),a.GameStatu=a.EventCode=a.AssetType=void 0;const n=e("../../../BaseRes/PopMessage/PopMessage"),i=e("../../../ClientBase/BundleManager"),o=e("../../../ClientBase/UI/CommonUI"),r=e("../../../ClientCommon/CData"),l=e("../../../ClientCommon/EventCenter"),c=e("../../../ClientFrame/GameFrame"),d=e("../../../ClientFrame/GameServerManager"),h=e("../../../ClientFrame/Header/CMD_GameServer"),_=e("../../../ClientFrame/Header/GameMacro"),m=e("../../../ClientFrame/LogonFrame"),u=e("./ROULETTE_CMD"),S=e("./GameLogicBaseCasion"),g=e("../../../ClientBase/util"),f=e("../../../ClientBase/audioplayer"),I=e("../../../ClientFrame/UserManager"),C=e("../../../ClientBase/GameUtils"),p=e("../../../ClientFrame/GlobalUserItem"),y=e("../../../BaseRes/PopWait/PopWait"),B=e("../PayCommon"),M=e("../../../BaseRes/DonatoAmount/DonatoAmount1");var G,T,P;(function(e){e[e.AT_SpriteFrame=0]="AT_SpriteFrame",e[e.AT_SpriteAtlas=1]="AT_SpriteAtlas",e[e.AT_Prefab=2]="AT_Prefab",e[e.AT_AudioClip=3]="AT_AudioClip",e[e.AT_Material=4]="AT_Material"})(G=a.AssetType||(a.AssetType={})),function(e){e.cancelLast="cancelLast",e.cancelAll="cancelAll",e.ready="ready",e.repeatLast="repeatLast",e.bet="bet",e.SendAddScore="SendAddScore",e.sendPassCard="sendPassCard",e.sendGiveUP="sendGiveUP",e.sendTransScore="sendTransScore",e.converScore="converScore",e.initComplete="initComplete",e.C2SBet="C2SBet",e.C2STalk="C2STalk",e.C2SInsure="C2SInsure",e.sendAddScoreDeal="sendAddScoreDeal"}(T=a.EventCode||(a.EventCode={})),function(e){e[e.none=0]="none",e[e.bet=1]="bet",e[e.lottery=2]="lottery",e[e.free=3]="free"}(P=a.GameStatu||(a.GameStatu={}));const{ccclass:D,property:A}=cc._decorator;let b=class extends cc.Component{constructor(){super(),this.handlerPriority=10,this.handlerName="ROULETTE",this.scriptName="GameBaseCasion",this.handlerComName="SLOST_COMMON",this.isAccordStand=!1,this.isGameing=!1,this.isClickSelect=!0,this.currGameState=P.free,this.isBackground=!1,this.m_IsComTransScore=!1,this.m_WinScore=0,this.m_transScore=0,this.m_IsShowDonateMessage=!1,this.GameLogic=new S.default,this.GameLogic.setGame(this),this.iAudioPlayer=f.AudioPlayer.Instance}getIAudioPlayer(){return this.iAudioPlayer}setMyGameLogic(e,t){cc.error("Casion setMyGameLogic",t),this.GameLogic.myGameLogic=e,this.KindID=t,cc.view.setResizeCallback(this.windowSizeChange.bind(this)),l.EventCenter.AddHandler(this),c.default.getInstance().controlGame(this)}windowSizeChange(){this.GameLogic.myGameLogic.windowSizeChange()}handleEvent(e,t){switch(e){case T.ready:this.sendReady();break;case T.cancelAll:this.sendCalcelAllBet();break;case T.cancelLast:this.sendCalcelLastBet();break;case T.bet:30==this.KindID?this.sendBet_BT(t):40==this.KindID?this.sendBet_100(t):this.sendBet(t);break;case T.SendAddScore:this.sendAddScore(t);break;case T.sendPassCard:this.sendPassCard();break;case T.sendGiveUP:this.sendGiveUP();break;case T.converScore:this.sendConverScore(t);break;case T.sendTransScore:this.sendTransScore(t);break;case T.initComplete:cc.error("EventCode.initComplete"),41==this.KindID&&(this.isClickSelect=!0,this.setWait(!1),this.setGameStatu(!0));break;case m.LogonEvent[m.LogonEvent.LogonSuccess]:cc.error("\u767b\u5f55\u670d\u767b\u5f55\u6210\u529f");break;case T.C2STalk:this.sendTalk(t);break;case T.C2SInsure:this.sendInsure(t);break;case T.sendAddScoreDeal:this.sendAddScoreDeal()}}onDestroy(){l.EventCenter.RemoveHandler(this),c.default.getInstance().relieveBind()}CommonUI_RootNode(e){o.default.RootNode=e}getGameUINode(){return this.node}onEnterBackground(){return console.log("\u8fdb\u5165\u540e\u53f0\uff0c\u6211\u7684\u72b6\u6001\uff1a",c.default.getInstance().getGameFrameController().MyStatus),41==this.KindID?(c.default.getInstance().getGameFrameController().MyStatus==_.GameMacro.US_PLAYING&&this.sendEnterBackground(),cc.audioEngine.pauseMusic(),cc.audioEngine.pauseAllEffects()):this.sendEnterBackground(),!1}onEnterForeground(){return console.log("\u8fdb\u5165\u524d\u53f0\uff0c\u6211\u7684\u72b6\u6001\uff1a",c.default.getInstance().getGameFrameController().MyStatus),41==this.KindID?(cc.audioEngine.resumeMusic(),cc.audioEngine.resumeAllEffects(),this.isGameing&&(c.default.getInstance().getGameFrameController().MyStatus!=_.GameMacro.US_PLAYING?n.default.ShowMessage(n.messageType.newWork,o.default.RootNode,()=>{this.setGameStatu(!1)}):this.sendEnterForeground())):this.sendEnterForeground(),!1}onLogonFinish(){}onEnterRoom(){c.default.getInstance().sendSitDown(_.GameMacro.INVALID_TABLE,_.GameMacro.INVALID_CHAIR)}onExitRoom(){this.exitGame()}onEnterTable(e){this.isGameing=!0,c.default.getInstance().sendGameOption()}onExitTable(){}onUserEnter(e,t){this.GameLogic.myGameLogic.userEnter(e,t)}onUserLeave(e){this.GameLogic.myGameLogic.userLeave(e)}onUserScore(e,t){}onUserStatus(e,t,a){}netWorkDelay(){}onSocketClose(){if(!this.isAccordStand)if(cc.error("\u88ab\u5176\u4ed6\u73a9\u5bb6\u6324\u4e0b\u7ebf\u6216\u662f\u670d\u52a1\u5668\u4e3b\u52a8\u5173\u95ed"),cc.director.getScene().getComponentInChildren("LoadingBase"),i.default.getInstance().IsNeedSpecial()){var e=cc.find("Loading",this.node.parent);cc.error("\u9690\u85cf\u8fdb\u5ea6\u6761",e),e&&(e.active=!1),n.default.ShowMessage(n.messageType.newWork,o.default.RootNode,()=>{this.backPalaze()})}else n.default.ShowMessage(n.messageType.newWork,o.default.RootNode,()=>{cc.error("\u7406\u5e94\u8e22\u51fa\u53bb\uff01"),this.backPalaze()})}onBtnStandUp(e,t){this.PrepareLoding(!0)}showMessagewindow(){this.isAccordStand||n.default.ShowMessage(n.messageType.newWork,o.default.RootNode,()=>{this.setGameStatu(!1)})}setWait(e){}setGameStatu(e){this.GameLogic.myGameLogic.setGameStatu(e)}enterGame(e){if(cc.error("enterGame===",this.KindID,this.isClickSelect),41==this.KindID){if(!this.isClickSelect)return;this.setWait(!0),this.isClickSelect=!1;var t=Number(e);cc.error("fileMultiple=",t),this.GameLogic.myGameLogic.setFileMultiple(t),c.default.getInstance().getGameFrameController().GoldGame.enterGameByCellScore(t)||(this.setWait(!1),this.isClickSelect=!0)}else p.default.IsReconnect?c.default.getInstance().getGameFrameController().GoldGame.enterReconnectGameByCellScore(1,p.default.UserInfo.dwKindID,p.default.UserInfo.dwLockServerID):c.default.getInstance().getGameFrameController().GoldGame.enterGameByCellScore(1)}exitGame(){this.isAccordStand&&this.setGameStatu(!1)}backPalaze(){this.PrepareLoding()}PrepareLoding(e=!1){this.isAccordStand=!0,f.AudioPlayer.Instance.stop_sound(),f.AudioPlayer.Instance.stop_music(),e&&c.default.getInstance().sendStandUp(1),l.EventCenter.RemoveHandler(this);let t=cc.find("Loading",this.node.parent);if(c.default.getInstance().intermitConnect("\u4e3b\u52a8\u79bb\u5f00"),c.default.getInstance().relieveBind(),I.default.getInstance().onUserClear(),t){let e=cc.director.getScene().getComponentInChildren("LoadingBase");i.default.getInstance().IsNeedSpecial()?e.getBackToPlaze():(cc.error("===",e),d.default.getInstance().KindID=0,e.startLoad())}else i.default.getInstance().IsNeedSpecial()?cc.director.getScene().getComponentInChildren("LoadingBase").getBackToPlaze():i.default.getInstance().Loadloading(()=>{d.default.getInstance().KindID=0})}sendEnterBackground(){if(41==this.KindID){let e=new r.default;e.initForSend(h.default.MDM_GF_GAME,u.default.SUB_C_BACKSTAGE_START,0),c.default.getInstance().sendData(e)}else{let e=new r.default;e.initForSend(h.default.MDM_GF_GAME,u.default.SUB_C_TRANSITION_SCORE,0),c.default.getInstance().sendData(e),this.isBackground=!0}}sendEnterForeground(){if(41==this.KindID){let e=new r.default;e.initForSend(h.default.MDM_GF_GAME,u.default.SUB_C_BACKSTAGE_END,0),c.default.getInstance().sendData(e)}else{let e=new r.default;e.initForSend(h.default.MDM_GF_GAME,u.default.SUB_C_BACKSTAGE_START,0),c.default.getInstance().sendData(e),this.isBackground=!1,this.GameLogic.sendEnterForeground()}}sendReady(){let e=new r.default;e.initForSend(h.default.MDM_GF_GAME,u.default.SUB_C_ADD_SCORE_DEAL,0),c.default.getInstance().sendData(e)}sendCalcelLastBet(){let e=new r.default;e.initForSend(h.default.MDM_GF_GAME,u.default.SUB_C_ADD_SCORE_CLEAR_LAST,0),c.default.getInstance().sendData(e)}sendCalcelAllBet(){let e=new r.default;e.initForSend(h.default.MDM_GF_GAME,u.default.SUB_C_ADD_SCORE_CLEAR_LAST,0),c.default.getInstance().sendData(e)}sendRepeatLast(){let e=new r.default;e.initForSend(h.default.MDM_GF_GAME,u.default.SUB_C_ADD_SCORE_CLEAR,0),c.default.getInstance().sendData(e)}sendBet(e){if(41==this.KindID){let n=new r.default;n.initForSend(h.default.MDM_GF_GAME,u.default.SUB_C_ADD_SCORE,r.default.getStructLen(u.default.CMD_C_AddScore)),n.pushbyte(e.cbBetCount);for(var t=0;t<u.MAX_BET_COUNT;t++){var a=e.BetData[t];n.pushbyte(a.cbBetType);for(var s=0;s<u.MAX_BET_NUMBER_COUNT;s++)n.pushbyte(a.cbBetNumber[s]);n.pushint(a.iScore)}n.pushbool(e.bLastBet),c.default.getInstance().sendData(n)}}sendBet_100(e){let t=new r.default;t.initForSend(h.default.MDM_GF_GAME,u.default.SUB_C_ADD_SCORE,r.default.getStructLen(u.default.CMD_C_AddScore_100));for(let a=0;a<u.AREA_MAX_100;a++)t.pushint(e[a]);c.default.getInstance().sendData(t)}sendBet_BT(e){cc.error("\u53d1\u9001\u4e0b\u6ce8\uff1a",e);let t=new r.default;t.initForSend(h.default.MDM_GF_GAME,u.default.SUB_C_ADD_SCORE,r.default.getStructLen(u.default.CMD_C_XIAZHU)),t.pushdword(e.chairId),t.pushdword(e.money),c.default.getInstance().sendData(t)}sendAddScore(e){if(41==this.KindID){let t=new r.default;t.initForSend(h.default.MDM_GF_GAME,u.default.SUB_C_ADD_SCORE,r.default.getStructLen(u.default.CMD_C_AddScore)),t.pushint(e.score),t.pushbyte(e.cbStatus),c.default.getInstance().sendData(t)}else{cc.error("sendAddScore====",e.score,e.cbStatus);let t=new r.default;t.initForSend(h.default.MDM_GF_GAME,u.default.SUB_C_ADD_SCORE,r.default.getStructLen(u.default.CMD_C_AddScore_Texas)),t.pushint(e.score),t.pushbyte(e.cbStatus),c.default.getInstance().sendData(t)}}sendConverScore(e){let t=new r.default;t.initForSend(h.default.MDM_GF_GAME,u.default.SUB_C_ADD_SCORE_CLEAR,r.default.getStructLen(u.default.CMD_C_Transition_Score)),t.pushscore(e.fScore),c.default.getInstance().sendData(t)}sendPassCard(){let e=new r.default;e.initForSend(h.default.MDM_GF_GAME,u.default.SUB_C_ADD_SCORE_DEAL,0),c.default.getInstance().sendData(e)}sendGiveUP(){let e=new r.default;e.initForSend(h.default.MDM_GF_GAME,u.default.SUB_C_ADD_SCORE_CLEAR_LAST,0),c.default.getInstance().sendData(e)}sendTransScore(e){this.m_transScore=e.score;let t=new r.default;t.initForSend(h.default.MDM_GF_GAME,u.default.SUB_C_ADD_SCORE_CLEAR,r.default.getStructLen(u.default.CMD_C_Transition_Score)),t.pushdouble(e.score),c.default.getInstance().sendData(t)}sendTalk(e){cc.error("\u53d1\u9001\u8bf4\u8bdd\uff1a",e);let t=new r.default;t.initForSend(h.default.MDM_GF_GAME,u.default.SUB_C_ADD_SCORE_DEAL,r.default.getStructLen(u.default.CMD_C_TALK)),t.pushbyte(e.talk),t.pushword(e.curChairId),c.default.getInstance().sendData(t)}sendInsure(e){cc.error("\u53d1\u9001\u4e70\u4fdd\u9669\uff1a",e);let t=new r.default;t.initForSend(h.default.MDM_GF_GAME,u.default.SUB_C_ADD_SCORE_CLEAR_LAST,r.default.getStructLen(u.default.CMD_C_Insurance)),t.pushbyte(e.chairId),t.pushbool(e.isBuy),c.default.getInstance().sendData(t)}sendAddScoreDeal(){cc.log("\u53d1\u9001\u786e\u8ba4\u4e0b\u6ce8");let e=new r.default;e.initForSend(h.default.MDM_GF_GAME,u.default.SUB_C_ADD_SCORE_DEAL,0),c.default.getInstance().sendData(e)}EmitEvent(e,t=null){l.EventCenter.EmitEvent(e,t)}utils_gen_handler(e,t,...a){return g.gen_handler(e,t,...a)}utils_random(e=0,t=0,a){return g.random(e,t,a)}releaseGameRes(e){cc.error("releaseGameRes=",e),i.default.getInstance().releaseGameRes(e)}UserManager_getChairID(){return I.default.getInstance().getMeUserItem().getChairID()}UserManager_getTableUserItems(){return I.default.getInstance().getTableUserItems()}updatenNumberAnim(e,t,a=1,s){C.GameUtils.updatenNumberAnim(e,t,a,s)}getUserID(){return p.default.getUserID}getszAccounts(){return p.default.UserInfo.szAccounts}getlUserScore(){return p.default.UserInfo.lUserScore.toFixed()}GetGameAsset(e,t,a){switch(a){case G.AT_SpriteFrame:return i.default.getInstance().GameBundle[e].get(t,cc.SpriteFrame);case G.AT_SpriteAtlas:return i.default.getInstance().GameBundle[e].get(t,cc.SpriteAtlas);case G.AT_Prefab:return i.default.getInstance().GameBundle[e].get(t,cc.Prefab);case G.AT_AudioClip:return i.default.getInstance().GameBundle[e].get(t,cc.AudioClip);case G.AT_Material:return i.default.getInstance().GameBundle[e].get(t,cc.Material)}}onBtnLeaveGame(){this.onBtnStandUp()}PopMessage_ShowMessage(e){e!=n.messageType.integral?this.m_IsShowDonateMessage||(this.m_IsShowDonateMessage=!0,n.default.ShowMessage(e,o.default.RootNode,()=>{cc.log("ok callback"),this.m_IsShowDonateMessage=!1})):"HotFrog"==i.default.getInstance().PlatformName?this.showPayInternal():"MantaRays"==i.default.getInstance().PlatformName?(this.m_WinScore=this.GameLogic.myGameLogic.getWinScore(),this.m_WinScore>=100?this.ShowDonaInternal():this.showPayInternal()):this.m_IsShowDonateMessage||(this.m_IsShowDonateMessage=!0,n.default.ShowMessage(e,o.default.RootNode,()=>{cc.log("ok callback"),this.m_IsShowDonateMessage=!1}))}ShowDona(){"MantaRays"==i.default.getInstance().PlatformName?(this.m_WinScore=this.GameLogic.myGameLogic.getWinScore(),this.m_WinScore>=100?this.ShowDonaInternal():this.showPayInternal()):this.showPayInternal()}showPayInternal(){if(!this.m_IsShowDonateMessage){this.m_IsShowDonateMessage=!0;let e=i.default.getInstance().ClientGamesList[this.KindID];B.default.getInstance().ShowPay(e.IsPortrait,()=>{cc.log("ok callback"),this.m_IsShowDonateMessage=!1})}}ShowDonaInternal(){if(!this.m_IsShowDonateMessage){this.m_IsShowDonateMessage=!0,this.m_WinScore=this.GameLogic.myGameLogic.getWinScore();let e=i.default.getInstance().ClientGamesList[this.KindID],t=this.m_WinScore;M.default.ShowDona(t,o.default.RootNode,e.IsPortrait,()=>{cc.error("\u8f6c\u5206\u754c\u9762\u5173\u95ed:"),this.m_IsShowDonateMessage=!1},e=>{cc.error("\u8f6c\u5206:",this.m_WinScore,e),this.m_IsComTransScore=!0,this.sendTransScore(e),this.m_IsShowDonateMessage=!1})}}PopWait_show(){y.default.ShowPopWait(o.default.RootNode)}PopWait_hide(){y.default.HidePopWait(o.default.RootNode)}IsReconnect(){return p.default.IsReconnect}GetKindID(){return d.default.getInstance().KindID}getNum(e,t){return C.GameUtils.getNum(e,t)}RemoveHandler(){l.EventCenter.RemoveHandler(this)}isNoWin(){return C.GameUtils.m_eUserScoreMode==C.eUserScoreMode.eSM_NoWin}};b=s([D],b),a.default=b,cc._RF.pop()},{"../../../BaseRes/DonatoAmount/DonatoAmount1":void 0,"../../../BaseRes/PopMessage/PopMessage":void 0,"../../../BaseRes/PopWait/PopWait":void 0,"../../../ClientBase/BundleManager":void 0,"../../../ClientBase/GameUtils":void 0,"../../../ClientBase/UI/CommonUI":void 0,"../../../ClientBase/audioplayer":void 0,"../../../ClientBase/util":void 0,"../../../ClientCommon/CData":void 0,"../../../ClientCommon/EventCenter":void 0,"../../../ClientFrame/GameFrame":void 0,"../../../ClientFrame/GameServerManager":void 0,"../../../ClientFrame/GlobalUserItem":void 0,"../../../ClientFrame/Header/CMD_GameServer":void 0,"../../../ClientFrame/Header/GameMacro":void 0,"../../../ClientFrame/LogonFrame":void 0,"../../../ClientFrame/UserManager":void 0,"../PayCommon":"PayCommon","./GameLogicBaseCasion":"GameLogicBaseCasion","./ROULETTE_CMD":"ROULETTE_CMD"}],GameBaseFish:[function(e,t,a){"use strict";cc._RF.push(t,"bbc3bZMmQJGd7JoWCx2Klu4","GameBaseFish");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0}),a.EventCode=a.AssetType=void 0;const n=e("../../../ClientBase/BundleManager"),i=e("../../../ClientCommon/EventCenter"),o=e("../../../ClientFrame/GameFrame"),r=e("../../../ClientFrame/GlobalUserItem"),l=e("../../../ClientFrame/Header/GameMacro"),c=e("../../../ClientCommon/CData"),d=e("../../../ClientFrame/Header/CMD_GameServer"),h=e("../../../ClientFrame/GameServerManager"),_=e("../../../ClientCommon/EventCommonCode"),m=e("../../../ClientBase/SettingSystem"),u=e("./GameLogicBaseFish"),S=e("../../../BaseRes/PopMessage/PopMessage"),g=e("../../../ClientBase/UI/CommonUI"),f=e("../../../ClientFrame/UserManager"),I=e("../../../ClientBase/GameUtils"),C=e("../../../ClientBase/Device"),p=e("../../../ClientBase/audioplayer"),y=e("../../../ClientBase/util"),B=e("./FISHO_CMD"),M=e("./FishResMgrBase"),G=e("./MyFishSetting"),T=e("../PayCommon"),P=e("../../../BaseRes/DonatoAmount/DonatoAmount1"),{ccclass:D,property:A}=cc._decorator;var b,R;(function(e){e[e.AT_SpriteFrame=0]="AT_SpriteFrame",e[e.AT_SpriteAtlas=1]="AT_SpriteAtlas",e[e.AT_Prefab=2]="AT_Prefab",e[e.AT_AudioClip=3]="AT_AudioClip",e[e.AT_Material=4]="AT_Material"})(b=a.AssetType||(a.AssetType={})),function(e){e.ShowGamePlaza="ShowGamePlaza",e.SendCatchFish="SendCatchFish",e.DrillCatchFishs="DrillCatchFishs",e.FunctionCatchFishs="FunctionCatchFishs",e.MyFire="MyFire",e.sendEnterGame="sendEnterGame",e.changeGun="changeGun",e.autoScendlockFish="autoScendlockFish",e.converProperty="converProperty",e.treasurBox="treasurBox",e.ingot="ingot",e.sendCatchPanda="sendCatchPanda",e.sendCatchBoss="sendCatchBoss"}(R=a.EventCode||(a.EventCode={}));let E=class extends cc.Component{constructor(){super(),this.handlerPriority=2,this.handlerName="GameBaseFish",this.scriptName="GameBaseFish",this.handlerComName="FISHCOMMON",this.isLeave=!1,this.isAccordStand=!1,this.mMarqueelist=[],this.isExectUpdate=!1,this.sceneRate=1,this.mSettingSystem=null,this.UpSideDown=!1,this.m_IsComTransScore=!1,this.m_WinScore=0,this.m_transScore=0,this.m_IsShowDonateMessage=!1,this.GameLogic=new u.default,this.GameLogic.setGame(this),this.iAudioPlayer=p.AudioPlayer.Instance}getIAudioPlayer(){return this.iAudioPlayer}getFishResMgrBase(){return this.iFishResMgrBase}newFishResMgrBase(){this.iFishResMgrBase=new M.default}setMyGameLogic(e,t,a){this.GameLogic.setMyGameLogic(e,t,a),i.EventCenter.AddHandler(this),o.default.getInstance().controlGame(this)}enterGame(){o.default.getInstance().getGameFrameController().GoldGame.enterGameByCellScore(1)}netWorkDelay(){cc.error("===netWorkDelay====")}onSocketClose(){this.isAccordStand||(cc.error("\u88ab\u5176\u4ed6\u73a9\u5bb6\u6324\u4e0b\u7ebf\u6216\u662f\u670d\u52a1\u5668\u4e3b\u52a8\u5173\u95ed"),this.isLeave=!0,S.default.ShowMessage(S.messageType.newWork,g.default.RootNode,()=>{console.log("\u56de\u5230\u5927\u5385"),this.backPalaze()}))}start(){}AddSetSystem(e,t,a){this.mSettingSystem=e.addComponent(m.default),this.mSettingSystem.soundOn=t,this.mSettingSystem.soundOff=a,this.mSettingSystem.initSound()}onDestroy(){cc.log("==onDestroy== GameBaseFish"),o.default.getInstance().relieveBind()}getGameUINode(){return null}onEnterBackground(){return console.log("\u8fdb\u5165\u540e\u53f0\uff0c\u6211\u7684\u72b6\u6001\uff1a",o.default.getInstance().getGameFrameController().MyStatus),o.default.getInstance().getGameFrameController().MyStatus==l.GameMacro.US_PLAYING&&this.sendEnterBackground(),cc.audioEngine.pauseMusic(),cc.audioEngine.pauseAllEffects(),!1}onEnterForeground(){return console.log("\u8fdb\u5165\u524d\u53f0\uff0c\u6211\u7684\u72b6\u6001\uff1a",o.default.getInstance().getGameFrameController().MyStatus),cc.audioEngine.resumeMusic(),cc.audioEngine.resumeAllEffects(),o.default.getInstance().getGameFrameController().MyStatus!=l.GameMacro.US_PLAYING?(cc.error("\u8fdb\u5165\u524d\u53f0\uff0c\u73a9\u5bb6\u72b6\u6001\u4e0d\u5bf9\uff01"),S.default.ShowMessage(S.messageType.newWork,g.default.RootNode,()=>{this.backPalaze()})):(this.sendEnterForeground(),0!=this.GameLogic.ServerTick&&(this.GameLogic.isEnterForeground=!0,this.sendTimerSync())),!1}onLogonFinish(){0!=this.GameLogic.ServerTick&&this.sendTimerSync()}onEnterRoom(){o.default.getInstance().sendSitDown(l.GameMacro.INVALID_TABLE,l.GameMacro.INVALID_CHAIR)}onExitRoom(){}showGamePlaying(){}onEnterTable(e){this.UpSideDown=!(e<2),this.showGamePlaying(),this.GameLogic.myGameLogic.setGameViewUpSideDown(this.UpSideDown),o.default.getInstance().sendGameOption()}onExitTable(){}onUserEnter(e,t){this.GameLogic.myGameLogic.userEnter(e,t)}onUserLeave(e){this.GameLogic.myGameLogic.userLeave(e)}onUserScore(e,t){}onUserStatus(e,t,a){}handleEvent(e,t){switch(e){case R.MyFire:this.sendUserFire(t);break;case R.SendCatchFish:this.sendCatchFish(t);break;case R.DrillCatchFishs:this.sendDrillCatchFish(t);break;case R.FunctionCatchFishs:this.sendFunctionCatchFish(t);break;case R.converProperty:this.sendConverProperty(t);break;case _.EventCommonCode.screenSizeChange:this.GameLogic.myGameLogic.fullScreenSetcontentSize();break;case R.changeGun:this.sendSwitchCannon(t.chairId,t.gunIndex);break;case R.autoScendlockFish:this.GameLogic.myGameLogic.autoScendLockFish(t);break;case R.treasurBox:this.sendTreasureBox();break;case R.ingot:this.sendIngot();break;case R.sendCatchPanda:this.sendCatchPanda(t.index);break;case R.sendCatchBoss:this.sendCatchBoss(t.index)}}onBtnLeaveGame(){cc.error("onBtnLeaveGame"),this.isAccordStand=!0,this.onBtnStandUp()}onBtnStandUp(e,t){if(this.isLeave=!0,o.default.getInstance().getGameFrameController().MyStatus<l.GameMacro.US_PLAYING)return cc.error("\u5f53\u524d\u73a9\u5bb6\u5df2\u4e0d\u5728\u6e38\u620f\u72b6\u6001"),void this.backPalaze();this.PrepareLoding(!0)}getUserID(){return r.default.UserInfo.dwUserID}GetConnected(){return o.default.getInstance().GetConnected()}showMessagewindow(){this.isAccordStand||S.default.ShowMessage(S.messageType.newWork,g.default.RootNode,()=>{this.backPalaze()})}showGamePlaza(e=!1){e&&(this.isExectUpdate=!0,o.default.getInstance().getGameFrameController().GoldGame.enterGameByCellScore(1))}backPalaze(){this.PrepareLoding()}PrepareLoding(e=!1){this.isAccordStand=!0,this.isExectUpdate=!1,this.GameLogic&&this.GameLogic.myLeave(),p.AudioPlayer.Instance.stop_music(),p.AudioPlayer.Instance.stop_sound(),e&&o.default.getInstance().sendStandUp(1),i.EventCenter.RemoveHandler(this);let t=cc.find("Loading",this.node.parent);if(o.default.getInstance().relieveBind(),o.default.getInstance().intermitConnect("\u4e3b\u52a8\u79bb\u5f00"),f.default.getInstance().onUserClear(),cc.error("\u8fdb\u5ea6\u6761 ",this.isAccordStand),t){let e=cc.director.getScene().getComponentInChildren("LoadingBase");n.default.getInstance().IsNeedSpecial()?e.getBackToPlaze():(h.default.getInstance().KindID=0,e.startLoad())}else n.default.getInstance().IsNeedSpecial()?cc.director.getScene().getComponentInChildren("LoadingBase").getBackToPlaze():n.default.getInstance().Loadloading(()=>{h.default.getInstance().KindID=0})}GetKindID(){return h.default.getInstance().KindID}sendUserFire(e){let t=new c.default;t.initForSend(d.default.MDM_GF_GAME,B.default.SUB_C_USER_FIRE,c.default.getStructLen(B.default.CMD_C_UserFire)),t.pushdword(e.dwBulletIndex),t.pushdouble(e.dBulletAngle),t.pushdword(e.dwFishIndex),t.pushbyte(e.cbUserDefine),o.default.getInstance().sendData(t)}sendPlayerExchangeBullet(e){let t=new c.default;t.initForSend(d.default.MDM_GF_GAME,B.default.SUB_C_EXCHANGE_BULLET,c.default.getStructLen(B.default.CMD_C_PlayerExchangeBullet)),t.pushbool(e),o.default.getInstance().sendData(t)}sendCatchFish(e){let t=new c.default;t.initForSend(d.default.MDM_GF_GAME,B.default.SUB_C_CATCH_FISH,c.default.getStructLen(B.default.CMD_C_PlayerCatchFish)),t.pushword(e.wChairID),t.pushdword(e.dwBulletIndex),t.pushdword(e.dwFishIndex),o.default.getInstance().sendData(t)}sendDrillCatchFish(e){let t=new c.default;t.initForSend(d.default.MDM_GF_GAME,B.default.SUB_C_ZUAN_TOU_CATCH_FISH,c.default.getStructLen(B.default.CMD_C_PlayerZuanTouCatchFish)),t.pushword(e.wChairID),t.pushdword(e.dwBulletIndex),t.pushdword(e.dwFishIndex),o.default.getInstance().sendData(t)}sendFunctionCatchFish(e){if(106==this.GameLogic.KindID||113==this.GameLogic.KindID||115==this.GameLogic.KindID||114==this.GameLogic.KindID||116==this.GameLogic.KindID){let a=new c.default;a.initForSend(d.default.MDM_GF_GAME,B.default.SUB_C_GONG_NENG_CATCH_FISH,c.default.getStructLen(B.default.CMD_C_PlayerGongNengCatchFish_FISHR)),a.pushword(e.wChairID),a.pushdword(e.dwBulletIndex),a.pushbyte(e.cbFishCount);for(var t=0;t<e.dwFishIndex.length;t++)a.pushdword(e.dwFishIndex[t]);o.default.getInstance().sendData(a)}else{let a=new c.default;for(a.initForSend(d.default.MDM_GF_GAME,B.default.SUB_C_GONG_NENG_CATCH_FISH,c.default.getStructLen(B.default.CMD_C_PlayerGongNengCatchFish)),a.pushword(e.wChairID),a.pushdword(e.dwBulletIndex),a.pushbyte(e.cbFishCount),t=0;t<e.dwFishIndex.length;t++)a.pushdword(e.dwFishIndex[t]);o.default.getInstance().sendData(a)}}sendConverProperty(e){this.m_transScore=e;let t=new c.default;t.initForSend(d.default.MDM_GF_GAME,B.default.SUB_C_TRANSITION_SCORE,c.default.getStructLen(B.default.CMD_C_Transition_Score)),t.pushdouble(e),o.default.getInstance().sendData(t)}sendTimerSync(){let e=new c.default;e.initForSend(d.default.MDM_GF_GAME,B.default.SUB_C_TIMER_SYNC,0),o.default.getInstance().sendData(e)}sendLockFish(e){let t=new c.default;t.initForSend(d.default.MDM_GF_GAME,B.default.SUB_C_LOCK_FISH,c.default.getStructLen(B.default.CMD_C_LockFish)),t.pushdword(e),o.default.getInstance().sendData(t)}sendSwitchCannon(e,t){let a=new c.default;a.initForSend(d.default.MDM_GF_GAME,B.default.SUB_C_SWITCH_CANNON,c.default.getStructLen(B.default.CMD_C_SwitchCannon)),a.pushword(e),a.pushbyte(t),o.default.getInstance().sendData(a)}sendEnterBackground(){cc.error("\u53d1\u9001\u8fdb\u5165\u540e\u53f0");let e=new c.default;e.initForSend(d.default.MDM_GF_GAME,B.default.SUB_C_BACKSTAGE_START,0),o.default.getInstance().sendData(e)}sendEnterForeground(){cc.error("\u53d1\u9001\u8fdb\u5165\u524d\u53f0");let e=new c.default;e.initForSend(d.default.MDM_GF_GAME,B.default.SUB_C_BACKSTAGE_END,0),o.default.getInstance().sendData(e)}sendTreasureBox(){cc.error("sendTreasureBox",B.default.SUB_C_CATCH_TREASURE_BOX);let e=new c.default;e.initForSend(d.default.MDM_GF_GAME,B.default.SUB_C_CATCH_TREASURE_BOX,0),o.default.getInstance().sendData(e)}sendIngot(){cc.error("sendIngot",B.default.SUB_C_CATCH_INGOT);let e=new c.default;e.initForSend(d.default.MDM_GF_GAME,B.default.SUB_C_CATCH_INGOT,0),o.default.getInstance().sendData(e)}fullScreenSetcontentSize(){}sendCatchPanda(e){cc.error("sendCatchPanda",e);let t=new c.default;t.initForSend(d.default.MDM_GF_GAME,B.default.SUB_C_CATCH_TREASURE_BOX,c.default.getStructLen(B.default.CMD_C_PlayerCatchPanda)),t.pushbyte(e),o.default.getInstance().sendData(t)}sendCatchBoss(e){cc.error("sendCatchBoss",e);let t=new c.default;t.initForSend(d.default.MDM_GF_GAME,B.default.SUB_C_CATCH_BOSS,c.default.getStructLen(B.default.CMD_C_PlayerCatchBoss)),t.pushdword(e),o.default.getInstance().sendData(t)}GetGameAsset(e,t,a){switch(a){case b.AT_SpriteFrame:return n.default.getInstance().GameBundle[e].get(t,cc.SpriteFrame);case b.AT_SpriteAtlas:return n.default.getInstance().GameBundle[e].get(t,cc.SpriteAtlas);case b.AT_Prefab:return n.default.getInstance().GameBundle[e].get(t,cc.Prefab);case b.AT_AudioClip:return n.default.getInstance().GameBundle[e].get(t,cc.AudioClip);case b.AT_Material:return n.default.getInstance().GameBundle[e].get(t,cc.Material)}}onUpdate(e){return null!=this.GameLogic&&!this.isLeave&&this.GameLogic.onUpdate(e)}GetServerTick(){return this.GameLogic.GetServerTick()}SetServerTick(e){this.GameLogic.SetServerTick(e)}updatenNumberAnim(e,t,a=1,s){I.GameUtils.updatenNumberAnim(e,t,a,s)}getNum(e,t){return I.GameUtils.getNum(e,t)}isScoreShowMode(){return I.GameUtils.m_eShowMode==I.eShowMode.eSM_Score}setShowMode(e){I.GameUtils.m_eShowMode=e}setScoreMode(e){I.GameUtils.m_eUserScoreMode=e}isNoWin(){return I.GameUtils.m_eUserScoreMode==I.eUserScoreMode.eSM_NoWin}AddHandler(){i.EventCenter.AddHandler(this)}RemoveHandler(){i.EventCenter.RemoveHandler(this)}EmitEvent(e,t=null){i.EventCenter.EmitEvent(e,t)}getDeviceWIDTH(){return C.default.WIDTH}getDeviceHEIGHT(){return C.default.HEIGHT}FitScreen(e){C.default.FitScreen(e.getComponent(cc.Canvas))}FitBackground(e){C.default.FitBackground(e)}PopMessage_ShowMessage(e){e!=S.messageType.integral?this.m_IsShowDonateMessage||(this.m_IsShowDonateMessage=!0,S.default.ShowMessage(e,g.default.RootNode,()=>{cc.log("ok callback"),this.m_IsShowDonateMessage=!1})):"HotFrog"==n.default.getInstance().PlatformName?this.showPayInternal():"MantaRays"==n.default.getInstance().PlatformName?(this.m_WinScore=this.GameLogic.myGameLogic.getWinScore(),this.m_WinScore>=100?this.ShowDonaInternal():this.showPayInternal()):this.m_IsShowDonateMessage||(this.m_IsShowDonateMessage=!0,S.default.ShowMessage(e,g.default.RootNode,()=>{cc.log("ok callback"),this.m_IsShowDonateMessage=!1}))}ShowDona(){"MantaRays"==n.default.getInstance().PlatformName?(this.m_WinScore=this.GameLogic.myGameLogic.getWinScore(),this.m_WinScore>=100?this.ShowDonaInternal():this.showPayInternal()):this.ShowDonaInternal()}showPayInternal(){if(!this.m_IsShowDonateMessage){this.m_IsShowDonateMessage=!0;let e=n.default.getInstance().ClientGamesList[this.GameLogic.KindID];T.default.getInstance().ShowPay(e.IsPortrait,()=>{cc.log("ok callback"),this.m_IsShowDonateMessage=!1})}}ShowDonaInternal(){if(!this.m_IsShowDonateMessage){this.m_IsShowDonateMessage=!0,this.m_WinScore=this.GameLogic.myGameLogic.getWinScore();let e=n.default.getInstance().ClientGamesList[this.GameLogic.KindID],t=this.m_WinScore;P.default.ShowDona(t,g.default.RootNode,e.IsPortrait,()=>{cc.error("\u8f6c\u5206\u754c\u9762\u5173\u95ed:"),this.m_IsShowDonateMessage=!1},e=>{cc.error("\u8f6c\u5206:",this.m_WinScore,e),this.m_IsComTransScore=!0,this.sendConverProperty(e),this.m_IsShowDonateMessage=!1})}}GlobalUserItem_account(){return r.default.account}GlobalUserItem_gameId(){return r.default.gameId}UserManager_getChairID(){return f.default.getInstance().getMeUserItem().getChairID()}UserManager_getTableUserItems(){return f.default.getInstance().getTableUserItems()}GetClientVersion(){return l.GameMacro.ClientVersion}utils_gen_handler(e,t,...a){return y.gen_handler(e,t,...a)}utils_random(e=0,t=0,a){return y.random(e,t,a)}releaseGameRes(e){n.default.getInstance().releaseGameRes(e)}setExectUpdate(e){this.isExectUpdate=e,e&&i.EventCenter.EmitEvent(_.EventCommonCode.InitSceneComplete)}getExectUpdate(){return this.isExectUpdate}SettingClick(){this.mSettingSystem.onSoundClick()}CommonUI_RootNode(e){g.default.RootNode=e}AddMySetting(e){return e.addComponent(G.default)}};E=s([D],E),a.default=E,cc._RF.pop()},{"../../../BaseRes/DonatoAmount/DonatoAmount1":void 0,"../../../BaseRes/PopMessage/PopMessage":void 0,"../../../ClientBase/BundleManager":void 0,"../../../ClientBase/Device":void 0,"../../../ClientBase/GameUtils":void 0,"../../../ClientBase/SettingSystem":void 0,"../../../ClientBase/UI/CommonUI":void 0,"../../../ClientBase/audioplayer":void 0,"../../../ClientBase/util":void 0,"../../../ClientCommon/CData":void 0,"../../../ClientCommon/EventCenter":void 0,"../../../ClientCommon/EventCommonCode":void 0,"../../../ClientFrame/GameFrame":void 0,"../../../ClientFrame/GameServerManager":void 0,"../../../ClientFrame/GlobalUserItem":void 0,"../../../ClientFrame/Header/CMD_GameServer":void 0,"../../../ClientFrame/Header/GameMacro":void 0,"../../../ClientFrame/UserManager":void 0,"../PayCommon":"PayCommon","./FISHO_CMD":"FISHO_CMD","./FishResMgrBase":"FishResMgrBase","./GameLogicBaseFish":"GameLogicBaseFish","./MyFishSetting":"MyFishSetting"}],GameBaseKeno:[function(e,t,a){"use strict";cc._RF.push(t,"c8d37j3txlM37ESU0bvc8+P","GameBaseKeno");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0}),a.EventCode=void 0;const n=e("../../../BaseRes/PopMessage/PopMessage"),i=e("../../../ClientBase/BundleManager"),o=e("../../../ClientBase/GameUtils"),r=e("../../../ClientBase/UI/CommonUI"),l=e("../../../ClientCommon/CData"),c=e("../../../ClientCommon/EventCenter"),d=e("../../../ClientFrame/GameFrame"),h=e("../../../ClientFrame/GameServerManager"),_=e("../../../ClientFrame/GlobalUserItem"),m=e("../../../ClientFrame/Header/CMD_GameServer"),u=e("../../../ClientFrame/Header/GameMacro"),S=e("./SHOTKENO_CMD"),g=e("./GameLogicBaseKeno"),f=e("../../../ClientCommon/EventCommonCode"),I=e("../../../ClientBase/audioplayer"),C=e("../../../ClientBase/util"),p=e("../../../ClientFrame/UserManager"),y=e("../PayCommon"),B=e("../../../BaseRes/DonatoAmount/DonatoAmount1"),{ccclass:M,property:G}=cc._decorator;var T;(function(e){e.revealPlus="revealPlus",e.changeMultiple="changeMultiple",e.converScore="converScore"})(T=a.EventCode||(a.EventCode={}));let P=class extends cc.Component{constructor(){super(),this.handlerPriority=2,this.handlerName="SLOT_FIRE",this.scriptName="GameBaseKeno",this.handlerComName="SLOST_COMMON",this.isExectUpdate=!1,this.isAccordStand=!1,this.m_IsComTransScore=!1,this.m_WinScore=0,this.m_transScore=0,this.m_IsShowDonateMessage=!1,this.GameLogic=new g.default,this.GameLogic.setGame(this),this.iAudioPlayer=I.AudioPlayer.Instance}getIAudioPlayer(){return this.iAudioPlayer}setMyGameLogic(e,t){cc.error("setMyGameLogic",t),this.GameLogic.myGameLogic=e,this.KindID=t,c.EventCenter.AddHandler(this),d.default.getInstance().controlGame(this),d.default.getInstance().getGameFrameController().GoldGame.enterGameByCellScore(1)}onLoad(){cc.view.setResizeCallback(this.windowSizeChange.bind(this)),this.initCanvas(),cc.game.setFrameRate(60)}onDestroy(){c.EventCenter.RemoveHandler(this),d.default.getInstance().relieveBind()}windowSizeChange(){cc.error("\u7a97\u53e3\u5927\u5c0f\u53d8\u5316:",cc.winSize.width,cc.winSize.height),this.initCanvas(),this.GameLogic.windowSizeChange()}initCanvas(){}onEnterBackground(){return d.default.getInstance().getGameFrameController().MyStatus==u.GameMacro.US_PLAYING&&this.sendEnterBackground(),cc.audioEngine.pauseMusic(),cc.audioEngine.pauseAllEffects(),!1}onEnterForeground(){return cc.audioEngine.resumeMusic(),cc.audioEngine.resumeAllEffects(),d.default.getInstance().getGameFrameController().MyStatus!=u.GameMacro.US_PLAYING?n.default.ShowMessage(n.messageType.newWork,r.default.RootNode,()=>{this.backPalaze()}):this.sendEnterForeground(),!1}onLogonFinish(){}onEnterRoom(){d.default.getInstance().sendSitDown(u.GameMacro.INVALID_TABLE,u.GameMacro.INVALID_CHAIR)}onExitRoom(){}onEnterTable(e){d.default.getInstance().sendGameOption()}onExitTable(){}onUserEnter(e,t){}onUserLeave(e){}onUserScore(e,t){}onUserStatus(e,t,a){}netWorkDelay(){this.GameLogic.netWorkDelay()}onSocketClose(){if(!this.isAccordStand)if(cc.error("\u88ab\u5176\u4ed6\u73a9\u5bb6\u6324\u4e0b\u7ebf\u6216\u662f\u670d\u52a1\u5668\u4e3b\u52a8\u5173\u95ed"),cc.director.getScene().getComponentInChildren("LoadingBase"),i.default.getInstance().IsNeedSpecial()){var e=cc.find("Loading",this.node.parent);cc.error("\u9690\u85cf\u8fdb\u5ea6\u6761",e),e&&(e.active=!1),n.default.ShowMessage(n.messageType.newWork,r.default.RootNode,()=>{this.backPalaze()})}else n.default.ShowMessage(n.messageType.newWork,r.default.RootNode,()=>{this.backPalaze()})}exitGame(){this.isAccordStand&&this.backPalaze()}backPalaze(){this.PrepareLoding()}showMessagewindow(){this.isAccordStand||n.default.ShowMessage(n.messageType.newWork,r.default.RootNode,()=>{this.backPalaze()})}onBtnStandUp(e,t){if(d.default.getInstance().getGameFrameController().MyStatus<u.GameMacro.US_PLAYING)return cc.error("\u5f53\u524d\u73a9\u5bb6\u5df2\u4e0d\u5728\u6e38\u620f\u72b6\u6001"),void this.backPalaze();this.isAccordStand=!0,this.PrepareLoding(!0)}PrepareLoding(e=!1){this.isAccordStand=!0,this.isExectUpdate=!1,I.AudioPlayer.Instance.stop_sound(),I.AudioPlayer.Instance.stop_music(),e&&d.default.getInstance().sendStandUp(1),c.EventCenter.RemoveHandler(this);let t=cc.find("Loading",this.node.parent);if(d.default.getInstance().intermitConnect("\u4e3b\u52a8\u79bb\u5f00"),d.default.getInstance().relieveBind(),p.default.getInstance().onUserClear(),t){let e=cc.director.getScene().getComponentInChildren("LoadingBase");i.default.getInstance().IsNeedSpecial()?e.getBackToPlaze():(h.default.getInstance().KindID=0,e.startLoad())}else i.default.getInstance().IsNeedSpecial()?cc.director.getScene().getComponentInChildren("LoadingBase").getBackToPlaze():i.default.getInstance().Loadloading(()=>{h.default.getInstance().KindID=0})}getGameUINode(){return this.node}sendEnterBackground(){let e=new l.default;e.initForSend(m.default.MDM_GF_GAME,S.default.SUB_C_BACKSTAGE_START,0),d.default.getInstance().sendData(e)}sendEnterForeground(){let e=new l.default;e.initForSend(m.default.MDM_GF_GAME,S.default.SUB_C_BACKSTAGE_END,0),d.default.getInstance().sendData(e)}handleEvent(e,t){switch(e){case T.revealPlus:this.GameLogic.sendRevealPlus(t);break;case T.changeMultiple:this.GameLogic.sendChangeMultiple(t);break;case T.converScore:this.GameLogic.sendConverScore(t)}}EmitEvent(e,t=null){c.EventCenter.EmitEvent(e,t)}updatenNumberAnim(e,t,a=1,s){o.GameUtils.updatenNumberAnim(e,t,a,s)}PopMessage_ShowMessage(e){e!=n.messageType.integral?this.m_IsShowDonateMessage||(this.m_IsShowDonateMessage=!0,n.default.ShowMessage(e,r.default.RootNode,()=>{cc.log("ok callback"),this.m_IsShowDonateMessage=!1})):"HotFrog"==i.default.getInstance().PlatformName?this.showPayInternal():"MantaRays"==i.default.getInstance().PlatformName?this.ShowDona():n.default.ShowMessage(e,r.default.RootNode)}ShowDona(){"MantaRays"==i.default.getInstance().PlatformName?(this.m_WinScore=this.GameLogic.myGameLogic.getWinScore(),this.m_WinScore>=100?this.ShowDonaInternal():this.showPayInternal()):this.ShowDonaInternal()}ShowPay(){cc.error("=ShowDona:",this.m_IsShowDonateMessage),this.m_IsShowDonateMessage||(this.m_IsShowDonateMessage=!0,"HotFrog"==i.default.getInstance().PlatformName?this.showPayInternal():"MantaRays"==i.default.getInstance().PlatformName?this.ShowDona():this.showPayInternal())}showPayInternal(){if(cc.error("=ShowDona:",this.m_IsShowDonateMessage),!this.m_IsShowDonateMessage){this.m_IsShowDonateMessage=!0;let e=i.default.getInstance().ClientGamesList[this.KindID];y.default.getInstance().ShowPay(e.IsPortrait,()=>{cc.log("ok callback"),this.m_IsShowDonateMessage=!1})}}ShowDonaInternal(){if(cc.error("=ShowDona:",this.m_IsShowDonateMessage),!this.m_IsShowDonateMessage){this.m_IsShowDonateMessage=!0,this.m_WinScore=this.GameLogic.myGameLogic.getWinScore();let e=i.default.getInstance().ClientGamesList[this.KindID],t=this.m_WinScore;B.default.ShowDona(t,r.default.RootNode,e.IsPortrait,()=>{cc.error("\u8f6c\u5206\u754c\u9762\u5173\u95ed:"),this.m_IsShowDonateMessage=!1},e=>{cc.error("\u8f6c\u5206:",this.m_WinScore,e),this.m_IsComTransScore=!0,this.m_transScore=e,this.GameLogic.sendConverScore({fScore:e}),this.m_IsShowDonateMessage=!1})}}GlobalUserItem_getUserID(){return _.default.getUserID}GlobalUserItem_account(){return _.default.account}GlobalUserItem_gameId(){return _.default.gameId}releaseGameRes(e){i.default.getInstance().releaseGameRes(e)}onBtnLeaveGame(){this.onBtnStandUp()}utils_random(e=0,t=0,a){return C.random(e,t,a)}CommonUI_RootNode(e){r.default.RootNode=e}getNum(e,t){return o.GameUtils.getNum(e,t)}isScoreShowMode(){return o.GameUtils.m_eShowMode==o.eShowMode.eSM_Score}setShowMode(e){o.GameUtils.m_eShowMode=e}setScoreMode(e){o.GameUtils.m_eUserScoreMode=e}isNoWin(){return o.GameUtils.m_eUserScoreMode==o.eUserScoreMode.eSM_NoWin}GetKindID(){return h.default.getInstance().KindID}setExectUpdate(e){this.isExectUpdate=e,e&&c.EventCenter.EmitEvent(f.EventCommonCode.InitSceneComplete)}};P=s([M],P),a.default=P,cc._RF.pop()},{"../../../BaseRes/DonatoAmount/DonatoAmount1":void 0,"../../../BaseRes/PopMessage/PopMessage":void 0,"../../../ClientBase/BundleManager":void 0,"../../../ClientBase/GameUtils":void 0,"../../../ClientBase/UI/CommonUI":void 0,"../../../ClientBase/audioplayer":void 0,"../../../ClientBase/util":void 0,"../../../ClientCommon/CData":void 0,"../../../ClientCommon/EventCenter":void 0,"../../../ClientCommon/EventCommonCode":void 0,"../../../ClientFrame/GameFrame":void 0,"../../../ClientFrame/GameServerManager":void 0,"../../../ClientFrame/GlobalUserItem":void 0,"../../../ClientFrame/Header/CMD_GameServer":void 0,"../../../ClientFrame/Header/GameMacro":void 0,"../../../ClientFrame/UserManager":void 0,"../PayCommon":"PayCommon","./GameLogicBaseKeno":"GameLogicBaseKeno","./SHOTKENO_CMD":"SHOTKENO_CMD"}],GameBaseSlot:[function(e,t,a){"use strict";cc._RF.push(t,"c4bdbzOIMdM5Iv/oDL9aEkH","GameBaseSlot");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0}),a.AssetType=void 0;const n=e("../../../ClientBase/BundleManager"),i=e("../../../ClientCommon/EventCenter"),o=e("../../../ClientFrame/GameFrame"),r=e("../../../ClientFrame/GlobalUserItem"),l=e("../../../ClientFrame/Header/GameMacro"),c=e("../../../ClientCommon/CData"),d=e("../../../ClientFrame/Header/CMD_GameServer"),h=e("./CMD"),_=e("../../../ClientFrame/GameServerManager"),m=e("./GameLogicBaseSlot"),u=e("../../../ClientBase/UI/CommonUI"),S=e("./Script/ShowImageNumCtrl"),g=e("./Script/ItemCtrl_CR"),f=e("./Script/ItemCtrl_CR_FireRes_Spe"),I=e("./Script/SMGlobal"),C=e("./Script/TransScoreCtrl"),p=e("./Script/GameSlotJcakpot_Item"),y=e("./Script/SoundSystem"),B=e("../../../ClientBase/GameUtils"),M=e("./Script/JackpotNumChange"),G=e("../../../BaseRes/PopMessage/PopMessage"),T=e("../../../ClientBase/orientation"),P=e("../../../ClientFrame/UserManager"),D=e("../PayCommon"),A=e("../../../BaseRes/DonatoAmount/DonatoAmount1"),{ccclass:b,property:R}=cc._decorator;var E;(function(e){e[e.AT_SpriteFrame=0]="AT_SpriteFrame",e[e.AT_SpriteAtlas=1]="AT_SpriteAtlas",e[e.AT_Prefab=2]="AT_Prefab",e[e.AT_AudioClip=3]="AT_AudioClip",e[e.AT_Material=4]="AT_Material"})(E=a.AssetType||(a.AssetType={}));let N=class extends cc.Component{constructor(){super(),this.handlerPriority=2,this.handlerName="SLOT_FIRE",this.scriptName="GameBaseSlot",this.handlerComName="SLOST_COMMON",this.isLeave=!1,this.isAccordStand=!1,this.mMarqueelist=[],this.sceneRate=1,this.mSettingSystem=null,this.isBackfround=!1,this.m_bIsWinCJ=!1,this.m_IsComTransScore=!1,this.m_WinScore=0,this.m_transScore=0,this.m_IsShowDonateMessage=!1,this.GameLogic=new m.default,this.GameLogic.setGame(this)}setMyGameLogic(e,t){this.GameLogic.myGameLogic=e,this.GameLogic.KindID=t,o.default.getInstance().controlGame(this),o.default.getInstance().getGameFrameController().GoldGame.enterGameByCellScore(1)}netWorkDelay(){cc.error("===netWorkDelay====")}onSocketClose(){console.log("soket\u5173\u95ed"),this.isLeave||(this.isLeave=!0),this.isAccordStand||(cc.error("\u88ab\u5176\u4ed6\u73a9\u5bb6\u6324\u4e0b\u7ebf\u6216\u662f\u670d\u52a1\u5668\u4e3b\u52a8\u5173\u95ed1"),G.default.ShowMessage(G.messageType.newWork,this.node.parent,()=>{this.backPalaze()}))}onLoad(){}start(){}AddSetSystem(e,t,a){}onDestroy(){cc.log("==onDestroy== GameBaseSlot"),o.default.getInstance().relieveBind()}getGameUINode(){return null}onEnterBackground(){return console.log("\u8fdb\u5165\u540e\u53f0"),this.isLeave||this.sendEnterBackground(),this.isBackfround=!0,!1}onEnterForeground(){return console.log("\u8fdb\u5165\u524d\u53f0"),this.isBackfround&&(this.isBackfround=!1,o.default.getInstance().getGameFrameController().MyStatus!=l.GameMacro.US_PLAYING?G.default.ShowMessage(G.messageType.newWork,u.default.RootNode,()=>{this.backPalaze()}):this.sendEnterForeground()),!1}onLogonFinish(){}onEnterRoom(){o.default.getInstance().sendSitDown(l.GameMacro.INVALID_TABLE,l.GameMacro.INVALID_CHAIR)}onExitRoom(){}onEnterTable(e){o.default.getInstance().sendGameOption()}onExitTable(){this.showMessagewindow()}onUserEnter(e,t){}onUserLeave(e){}onUserScore(e,t){this.GameLogic.myGameLogic.onUserScore(t.lScore)}onUserStatus(e,t,a){}handleEvent(e,t){}GetGameAsset(e,t,a){switch(a){case E.AT_SpriteFrame:return n.default.getInstance().GameBundle[e].get(t,cc.SpriteFrame);case E.AT_SpriteAtlas:return n.default.getInstance().GameBundle[e].get(t,cc.SpriteAtlas);case E.AT_Prefab:return n.default.getInstance().GameBundle[e].get(t,cc.Prefab);case E.AT_AudioClip:return n.default.getInstance().GameBundle[e].get(t,cc.AudioClip)}}GetGameAsset1(e,t){switch(t){case E.AT_SpriteFrame:return cc.assetManager.getBundle(this.handlerComName).get(e,cc.SpriteFrame);case E.AT_SpriteAtlas:return cc.assetManager.getBundle(this.handlerComName).get(e,cc.SpriteAtlas);case E.AT_Prefab:return cc.assetManager.getBundle(this.handlerComName).get(e,cc.Prefab);case E.AT_AudioClip:return cc.assetManager.getBundle(this.handlerComName).get(e,cc.AudioClip)}}OnRewardNotice(e,t){e==r.default.UserInfo.dwUserID&&this.mMarqueelist.push(t)}OnShowMarquee(){this.mMarqueelist.length>0&&this.mMarqueelist.pop()}onBtnLeaveGame(){cc.error("onBtnLeaveGame"),this.onBtnStandUp()}sendEnterBackground(){let e=new c.default;e.initForSend(d.default.MDM_GF_GAME,h.default.SUB_C_BACKSTAGE_START,0),o.default.getInstance().sendData(e),this.GameLogic.myGameLogic.onEnterBackground()}sendEnterForeground(){let e=new c.default;e.initForSend(d.default.MDM_GF_GAME,h.default.SUB_C_BACKSTAGE_END,0),o.default.getInstance().sendData(e)}onBtnStandUp(){if(o.default.getInstance().getGameFrameController().MyStatus<l.GameMacro.US_PLAYING)return cc.error("\u5f53\u524d\u73a9\u5bb6\u5df2\u4e0d\u5728\u6e38\u620f\u72b6\u6001"),void this.backPalaze();cc.error("\u5f3a\u884c\u8d77\u7acb:"),this.PrepareLoding(!0)}showMessagewindow(){this.isAccordStand}backPalaze(){this.PrepareLoding()}showGamePlaza(){this.isAccordStand?this.backPalaze():cc.error("====>>>>")}PrepareLoding(e=!1){cc.error("====>>>>PrepareLoding===",e),this.isAccordStand=!0,this.m_SoundSystem.ClearAllSound(),this.GameLogic.myGameLogic.onEnterBackground(),e&&o.default.getInstance().sendStandUp(1),i.EventCenter.RemoveHandler(this);let t=cc.find("Loading",this.node.parent);if(o.default.getInstance().intermitConnect("\u4e3b\u52a8\u79bb\u5f00"),o.default.getInstance().relieveBind(),P.default.getInstance().onUserClear(),t){let e=cc.director.getScene().getComponentInChildren("LoadingBase");n.default.getInstance().IsNeedSpecial()?e.getBackToPlaze():(_.default.getInstance().KindID=0,e.startLoad())}else n.default.getInstance().IsNeedSpecial()?(t.active=!1,cc.director.getScene().getComponentInChildren("LoadingBase").getBackToPlaze()):n.default.getInstance().Loadloading(()=>{_.default.getInstance().KindID=0})}sendWaitBound(){let e=new c.default;e.initForSend(d.default.MDM_GF_GAME,h.default.SUB_C_GET_WAIT_BONUS_DATA,0),o.default.getInstance().sendData(e)}sendWaitSpecial(){let e=new c.default;e.initForSend(d.default.MDM_GF_GAME,h.default.SUB_C_GET_WAIT_Special_DATA,0),o.default.getInstance().sendData(e)}sendAskForBeginPayJackpot(){let e=new c.default;e.initForSend(d.default.MDM_GF_GAME,h.default.SUB_C_PAY_JACKPOT,0),o.default.getInstance().sendData(e)}sendFinishPayJackpot(){this.m_bIsWinCJ=!1;let e=new c.default;e.initForSend(d.default.MDM_GF_GAME,h.default.SUB_C_GET_JACKPOT,0),o.default.getInstance().sendData(e)}sendChangeBet(e){this.GameLogic.m_flgChangeBet=!0;let t=new c.default;t.initForSend(d.default.MDM_GF_GAME,h.default.SUB_C_BET,c.default.getStructLen(h.default.CMD_C_Bet)),t.pushint(e),o.default.getInstance().sendData(t)}sendRun(){let e=new c.default;e.initForSend(d.default.MDM_GF_GAME,h.default.SUB_C_RUN,0),o.default.getInstance().sendData(e)}sendTransScore(e){this.m_transScore=e;let t=new c.default;t.initForSend(d.default.MDM_GF_GAME,h.default.SUB_C_TRANSITION_SCORE,c.default.getStructLen(h.default.CMD_C_Transition_Score)),t.pushdouble(e),o.default.getInstance().sendData(t)}sendSelectCard(e){cc.log("\u53d1\u9001\u6570\u636e-----sendSelectCard",e);let t=new c.default;t.initForSend(d.default.MDM_GF_GAME,h.default.SUB_C_CHOICE_CARD,c.default.getStructLen(h.default.CMD_C_Choice_Card)),t.pushbyte(e),o.default.getInstance().sendData(t)}sendSelectCard2(e){cc.log("\u53d1\u9001\u6570\u636e-----sendSelectCard2",e);let t=new c.default;t.initForSend(d.default.MDM_GF_GAME,h.default.SUB_C_CHOICE_CARD,c.default.getStructLen(h.default.CMD_C_Select_Card)),t.pushint(e),o.default.getInstance().sendData(t)}sendGetRecord(){let e=new c.default;e.initForSend(d.default.MDM_GF_GAME,h.default.SUB_C_QUERY_COIN_TOSSING_RECORD,0),o.default.getInstance().sendData(e)}sendSelectDoubleCard(e,t){let a=new c.default;a.initForSend(d.default.MDM_GF_GAME,h.default.SUB_C_COIN_TOSSING,c.default.getStructLen(h.default.CMD_C_Coin_Tossing)),a.pushint(e),a.pushdouble(t),o.default.getInstance().sendData(a)}ShowDonateMessage(){cc.error("ShowDonateMessage=====>>",this.m_IsShowDonateMessage,this.m_WinScore),"HotFrog"==n.default.getInstance().PlatformName?this.showPayInternal():"MantaRays"==n.default.getInstance().PlatformName?this.ShowDona():this.m_IsShowDonateMessage||(this.m_IsShowDonateMessage=!0,G.default.ShowMessage(G.messageType.integral,u.default.RootNode,()=>{cc.log("ok callback"),this.m_IsShowDonateMessage=!1}))}ShowDona(){"MantaRays"==n.default.getInstance().PlatformName?(this.m_WinScore=this.GameLogic.myGameLogic.getWinScore(),this.m_WinScore>=100?this.ShowDonaInternal():this.showPayInternal()):this.ShowDonaInternal()}showPayInternal(){if(!this.m_IsShowDonateMessage){this.m_IsShowDonateMessage=!0;let e=n.default.getInstance().ClientGamesList[this.GameLogic.KindID];D.default.getInstance().ShowPay(e.IsPortrait,()=>{cc.log("ok callback"),this.m_IsShowDonateMessage=!1})}}ShowDonaInternal(){if(!this.m_IsShowDonateMessage){this.m_IsShowDonateMessage=!0,this.m_WinScore=this.GameLogic.myGameLogic.getWinScore();let e=n.default.getInstance().ClientGamesList[this.GameLogic.KindID],t=this.m_WinScore;A.default.ShowDona(t,u.default.RootNode,e.IsPortrait,()=>{cc.error("\u8f6c\u5206\u754c\u9762\u5173\u95ed:"),this.m_IsShowDonateMessage=!1},e=>{cc.error("\u8f6c\u5206:",this.m_WinScore,e),this.m_IsComTransScore=!0,this.sendTransScore(e),this.m_IsShowDonateMessage=!1})}}getUserID(){return r.default.UserInfo.dwUserID}getszAccounts(){return r.default.UserInfo.szAccounts}GetConnected(){return o.default.getInstance().GetConnected()}SettingClick(){this.mSettingSystem.onFullScreenClick()}CommonUI_RootNode(e){u.default.RootNode=e}AddHandler(){i.EventCenter.AddHandler(this)}RemoveHandler(){i.EventCenter.RemoveHandler(this)}releaseGameRes(){n.default.getInstance().releaseGameRes(_.default.getInstance().KindID);let e=cc.assetManager.getBundle("SLOST_COMMON");e&&(n.default.getInstance().IsNeedSpecial()||(cc.error("==currBundle==",e),e.releaseAll(),cc.assetManager.removeBundle(e)))}SMGlobal_GetOpenSE(){return I.default.M_bOpenSE}SMGlobal_GetSaveOpenSE(){return I.default.GetSaveOpenSE()}SMGlobal_Clamp(e,t,a){return I.default.Clamp(e,t,a)}SMGlobal_Random(e,t){return I.default.Random(e,t)}NewShowNum(e,t,a,s,n,i){return new S.default(e,t,a,s,n,i)}DestroyNewShowNum(e){e&&e.Final()}NewItemCtrl_CR(e,t,a,s=null,n=null,i=100,o=!0,r=40,l=.3){return new g.default(e,t,a,s,n,i,o,r,l)}DestroyItemCtrl_CR(e){e&&e.Final()}NewItemCtrl_CR_FireRes_Spe(e,t,a,s,n,i,o,r,l,c,d){return new f.default(e,t,a,s,n,i,o,r,l,c,d)}DestroyItemCtrl_CR_FireRes_Spe(e){e&&e.Final()}NewTransScoreCtrl(e,t,a=null,s=3,n=9){return new C.default(e,t,a,s,n)}DestroyTransScoreCtrl(e){e&&e.Final()}NewGameSlotJcakpot_Item(e,t){return new p.default(e,t)}DestroyGameSlotJcakpot_Item(e){e&&e.Final()}NewSoundSystem(){return this.m_SoundSystem=new y.default,this.m_SoundSystem}getNum(e,t){return B.GameUtils.getNum(e,t)}isScoreShowMode(){return B.GameUtils.m_eShowMode==B.eShowMode.eSM_Score}setShowMode(e){B.GameUtils.m_eShowMode=e}setScoreMode(e){B.GameUtils.m_eUserScoreMode=e}isNoWin(){return B.GameUtils.m_eUserScoreMode==B.eUserScoreMode.eSM_NoWin}NewJackpotNumChange(e){return e.addComponent(M.default)}GetKindID(){return _.default.getInstance().KindID}setGameTypeCur(e){this.GameLogic.m_GameTypeCur=e}setOrientation(e){T.setOrientation(e)}SMGlobal_SoundClick(e,t){let a=this.SMGlobal_GetOpenSE();a=!a,this.m_SoundSystem.SEToggle(a),e.active=a,t.active=!a}EmitEvent(e,t){i.EventCenter.EmitEvent(e,t)}IsLeave(){return this.isLeave}IsNeedSpecial(){return n.default.getInstance().IsNeedSpecial()}};N=s([b],N),a.default=N,cc._RF.pop()},{"../../../BaseRes/DonatoAmount/DonatoAmount1":void 0,"../../../BaseRes/PopMessage/PopMessage":void 0,"../../../ClientBase/BundleManager":void 0,"../../../ClientBase/GameUtils":void 0,"../../../ClientBase/UI/CommonUI":void 0,"../../../ClientBase/orientation":void 0,"../../../ClientCommon/CData":void 0,"../../../ClientCommon/EventCenter":void 0,"../../../ClientFrame/GameFrame":void 0,"../../../ClientFrame/GameServerManager":void 0,"../../../ClientFrame/GlobalUserItem":void 0,"../../../ClientFrame/Header/CMD_GameServer":void 0,"../../../ClientFrame/Header/GameMacro":void 0,"../../../ClientFrame/UserManager":void 0,"../PayCommon":"PayCommon","./CMD":"CMD","./GameLogicBaseSlot":"GameLogicBaseSlot","./Script/GameSlotJcakpot_Item":"GameSlotJcakpot_Item","./Script/ItemCtrl_CR":"ItemCtrl_CR","./Script/ItemCtrl_CR_FireRes_Spe":"ItemCtrl_CR_FireRes_Spe","./Script/JackpotNumChange":"JackpotNumChange","./Script/SMGlobal":"SMGlobal","./Script/ShowImageNumCtrl":"ShowImageNumCtrl","./Script/SoundSystem":"SoundSystem","./Script/TransScoreCtrl":"TransScoreCtrl"}],GameLogicBaseCasion:[function(e,t,a){"use strict";cc._RF.push(t,"2bacdatonhK975qOkFSgLxG","GameLogicBaseCasion");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0});const n=e("../../../ClientCommon/DataUtils"),i=e("./ROULETTE_CMD"),{ccclass:o,property:r}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.m_Stage=null,this.myGameLogic=null}setGame(e){this.m_Stage=e}OnEventSocketGame(e,t){switch(e){case i.default.SUB_S_GAME_START:cc.error("\u6536\u5230\u6e38\u620f\u5f00\u59cb\u4e0b\u6ce8\u6d88\u606f"),this.OnStartBet(t);break;case i.default.SUB_S_FIRST_TALK:this.OnTalk(t);break;case i.default.SUB_S_XIAZHU_PUSH:this.OnUserBetResult(t);break;case i.default.SUB_S_SEND_ALL_CARD:this.OnDealPoker(t);break;case i.default.SUB_S_INSURE:cc.error("\u89e6\u53d1\u4fdd\u9669"),this.OnTriggerInsure(t);break;case i.default.SUB_S_TALK_PUSH:this.OnTalkResult(t);break;case i.default.SUB_S_GAME_END_BT:this.OnGameEnd(t);break;case i.default.SUB_S_TALK_SPLIT:this.OnSplitPoker(t);break;case i.default.SUB_S_INSURE_RESULT:this.OnInsureResult(t);break;case i.default.SUB_S_TRANSITION_SCORE_BT:this.OnConverScore(t);break;case i.default.SUB_S_ADD_SCORE_START:this.onStartGame(t);break;case i.default.SUB_S_ADD_SCORE:42==this.m_Stage.KindID&&this.m_Stage.isBackground||this.OnBet(t);break;case i.default.SUB_S_ADD_SCORE_DEAL:40==this.m_Stage.KindID?this.onSubAddScoreDeal(t):41==this.m_Stage.KindID?this.onReady(t):42==this.m_Stage.KindID&&(this.m_Stage.isBackground||this.onSubPassCard(t));break;case i.default.SUB_S_ADD_SCORE_CLEAR_LAST:40==this.m_Stage.KindID?this.OnClearAllBet(t):41==this.m_Stage.KindID?this.OnClearLastBet(t):42==this.m_Stage.KindID&&(this.m_Stage.isBackground||this.onSubGiveUp(t));break;case i.default.SUB_S_ADD_SCORE_CLEAR:40==this.m_Stage.KindID?this.OnEnd(t):41==this.m_Stage.KindID?this.OnClearAllBet(t):42==this.m_Stage.KindID&&(this.m_Stage.isBackground||this.onSubSendCard(t));break;case i.default.SUB_S_GAME_END:40==this.m_Stage.KindID?this.onTransScoreInfo(t):41==this.m_Stage.KindID?this.OnEnd(t):42==this.m_Stage.KindID&&(this.m_Stage.isBackground||this.onSubSendPublicCard(t));break;case i.default.SUB_S_TRANSITION_SCORE:40==this.m_Stage.KindID?this.onStartBetTimer(t):41==this.m_Stage.KindID?this.OnConverScore(t):42==this.m_Stage.KindID&&this.OnEnd(t);break;case i.default.SUB_S_ADD_SCORE_DOWN:40==this.m_Stage.KindID||41==this.m_Stage.KindID||42==this.m_Stage.KindID&&this.onTransScoreInfo(t);break;case i.default.SUB_S_BET_INFO:40==this.m_Stage.KindID||42==this.m_Stage.KindID||this.onPlayerBetInfo(t)}}OnStartBet(e){this.myGameLogic.onStartBet(e)}OnTriggerInsure(e){cc.error("OnTriggerInsure"),this.myGameLogic.OnTriggerInsure()}OnSplitPoker(e){cc.error("OnSplitPoker");var t=n.default.readNetData(i.default.CMS_S_TALK_SPLIT,e);cc.error("\u6536\u5230\u5206\u724c\uff1a",t);for(var a=0;a<t.card.length;a++)cc.error("\u724c\u503c:",t.card[a]);this.myGameLogic.OnSplitPoker(t)}OnInsureResult(e){cc.error("OnInsureResult");var t=n.default.readNetData(i.default.CDM_S_Insurance,e);cc.error("\u6536\u5230\u4fdd\u9669\u7ed3\u679c:",t),this.myGameLogic.OnInsureResult(t)}OnTalk(e){cc.error("OnTalk");var t=n.default.readNetData(i.default.CMD_S_FRIST_TALK,e);cc.error("\u8f6e\u5230\u7b2c\u4e00\u4e2a\u4eba\u8bf4\u8bdd:",t),this.myGameLogic.OnFirstTalk(t.firstTalk)}OnUserBetResult(e){cc.error("\u6536\u5230\u73a9\u5bb6\u4e0b\u6ce8\u7ed3\u679c:");var t=n.default.readNetData(i.default.CMD_S_XIAZHU,e);cc.error("\u6536\u5230\u73a9\u5bb6\u4e0b\u6ce8\u7ed3\u679c:",t),this.myGameLogic.onBetInfo(t)}OnDealPoker(e){var t=n.default.readNetData(i.default.CMD_S_SEND_ALL_CARD,e);cc.error("\u6536\u5230\u53d1\u9001\u521d\u59cb\u6251\u514b\u6570\u636e\uff1a",t),this.myGameLogic.onReady(t)}OnTalkResult(e){var t=n.default.readNetData(i.default.CMD_S_TALK_PUSH,e);cc.error("\u6536\u5230\u8bf4\u8bdd\u7ed3\u679c\uff1a",t),this.myGameLogic.OnTalkResult(t)}OnGameEnd(e){var t=n.default.readNetData(i.default.CMD_S_Game_End_BT,e);cc.error("\u6536\u5230\u6e38\u620f\u7ed3\u675f\uff1a",t),this.myGameLogic.onGameEnd(t)}onStartGame(e){if(40==this.m_Stage.KindID){let t=n.default.readNetData(i.default.CMD_S_ScoreStart,e);this.myGameLogic.onStartBet(t.cbAddScoreTime)}else if(41==this.m_Stage.KindID)this.myGameLogic.onStartBet(e);else if(42==this.m_Stage.KindID){let t=n.default.readNetData(i.default.CMD_S_GameStart,e);this.myGameLogic.onStartBet(t)}}onPlayerBetInfo(e){let t=n.default.readNetData(i.default.CMD_S_BetInfo,e);this.myGameLogic.onBetInfo(t)}OnConverScore(e){let t=n.default.readNetData(i.default.CMD_S_Transition_Score,e);this.myGameLogic.onConverScore(t)}OnEventSceneMessage(e,t){if(cc.error("\u6536\u5230\u573a\u666f\u4fe1\u606f"),30==this.m_Stage.KindID){let e=n.default.readNetData(i.default.CMD_S_GameScene_BT,t);cc.log("OnEventSceneMessage",e);for(var a=0;a<e.betBaseMoney.length;a++)cc.error("\u5e95\u6ce8["+a+"]="+e.betBaseMoney[a]);this.myGameLogic.onGameScene(e)}else if(40==this.m_Stage.KindID){let e=n.default.readNetData(i.default.CMD_S_GameScene_100,t);cc.error("\u6536\u5230\u573a\u666f\u4fe1\u606f=",e),this.myGameLogic.onGameScene(e)}else if(41==this.m_Stage.KindID){let e=n.default.readNetData(i.default.CMD_S_GameScene,t);cc.error("\u6536\u5230\u573a\u666f\u4fe1\u606f",e),this.myGameLogic.onGameScene(e)}else{let e=n.default.readNetData(i.default.CMD_S_GameScene_TexasPoker,t);cc.error("\u6536\u5230\u573a\u666f\u4fe1\u606f",e),this.myGameLogic.onGameScene(e)}}onReady(e){let t=n.default.readNetData(i.default.CMD_S_AddScoreDeal,e);this.myGameLogic.onReady(t.wChairID)}OnBet(e){if(40==this.m_Stage.KindID){let t=n.default.readNetData(i.default.CMD_S_AddScore_100,e);cc.log("\u6536\u5230\u73a9\u5bb6\u4e0b\u6ce8",t.wChairID,t.iScore),this.myGameLogic.onBet(t)}else if(41==this.m_Stage.KindID){let t=n.default.readNetData(i.default.CMD_S_AddScore,e);this.myGameLogic.onBet(t)}else if(42==this.m_Stage.KindID){let t=n.default.readNetData(i.default.CMD_S_AddScore_TexasPoker,e);this.myGameLogic.onBet(t)}}OnClearLastBet(e){let t=n.default.readNetData(i.default.CMD_S_AddScoreClearLast,e);this.myGameLogic.onCancelLastBet(t)}OnClearAllBet(e){if(40==this.m_Stage.KindID){let t=n.default.readNetData(i.default.CMD_S_AddScoreClear,e);this.myGameLogic.onCancelAllBet(t.wChairID)}else if(41==this.m_Stage.KindID){let t=n.default.readNetData(i.default.CMD_S_AddScoreClear,e);this.myGameLogic.onCancelAllBet(t)}}OnEnd(e){if(40==this.m_Stage.KindID){let t=n.default.readNetData(i.default.CMD_S_GameEnd_100,e);this.myGameLogic.onGameEnd(t)}else if(41==this.m_Stage.KindID){let t=n.default.readNetData(i.default.CMD_S_GameEnd,e);this.myGameLogic.onGameEnd(t)}else if(42==this.m_Stage.KindID){let t=n.default.readNetData(i.default.CMD_S_GameEnd_TexasPoker,e);this.myGameLogic.onGameEnd(t)}}OnUpScore(e){this.myGameLogic.onUpScore(e)}OnRewardNotice(e,t){}onSubPassCard(e){let t=n.default.readNetData(i.default.CMD_S_PassCard,e);this.myGameLogic.OnPassCard(t)}onTransScoreInfo(e){40==this.m_Stage.KindID?n.default.readNetData(i.default.CMD_S_Transition_Score_100,e).bTransition&&(cc.error("\u8f6c\u6362\u5206\u6570\u6210\u529f",this.m_Stage.m_transScore),this.m_Stage.m_WinScore>=this.m_Stage.m_transScore&&(this.m_Stage.m_WinScore-=this.m_Stage.m_transScore)):42==this.m_Stage.KindID&&(n.default.readNetData(i.default.CMD_S_Transition_Score,e).bTransition?(cc.log("\u8f6c\u6362\u5206\u6570\u6210\u529f",this.m_Stage.m_transScore),this.m_Stage.m_WinScore>=this.m_Stage.m_transScore&&(this.m_Stage.m_WinScore-=this.m_Stage.m_transScore)):cc.log("====>>\u8f6c\u6362\u5206\u6570\u5931\u8d25"))}onSubGiveUp(e){let t=n.default.readNetData(i.default.CMD_S_GiveUp,e);this.myGameLogic.onCancelLastBet(t)}onSubSendCard(e){let t=n.default.readNetData(i.default.CMD_S_SendCard,e);this.myGameLogic.onSendCard(t)}onSubSendPublicCard(e){let t=n.default.readNetData(i.default.CMD_S_SendPublicCard,e);this.myGameLogic.OnSendPublicCard(t)}onSubAddScoreDeal(e){let t=n.default.readNetData(i.default.CMD_S_AddScoreDeal_100,e);this.myGameLogic.onPlayerDeal(t)}sendEnterForeground(){this.myGameLogic.sendEnterForeground()}onStartBetTimer(e){let t=n.default.readNetData(i.default.CMD_S_ScoreStart,e);this.myGameLogic.StartBetTimer(t)}};l=s([o],l),a.default=l,cc._RF.pop()},{"../../../ClientCommon/DataUtils":void 0,"./ROULETTE_CMD":"ROULETTE_CMD"}],GameLogicBaseFish:[function(e,t,a){"use strict";cc._RF.push(t,"27f4bOxaMpPiqX1eOOwoeML","GameLogicBaseFish");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0}),a.SupportedFish=void 0;const n=e("../../../ClientCommon/CData"),i=e("../../../ClientCommon/DataUtils"),o=e("./FISHO_CMD"),r=e("../../../ClientBase/UI/CommonUI"),l=e("../../../BaseRes/Marquee/Marquee"),c=e("../../../ClientFrame/GameServerManager"),d=e("../../../ClientFrame/GlobalUserItem");a.SupportedFish=[101,102,103,104,105,106,107,108,109,110,201,202,203,204,205,206,207,208,209,301,302,303,304,305,306,307,308,309,401,501,601];const{ccclass:h,property:_}=cc._decorator;let m=class extends cc.Component{constructor(){super(),this.myGameLogic=null,this.ServerTick=0,this.ReplaceCatchAndroids=[],this.KindID=0,this.isExpedite=!1,this.isEnterForeground=!1}GetServerTick(){return this.ServerTick}SetServerTick(e){this.ServerTick=e}setGame(e){this.m_Stage=e}setMyGameLogic(e,t,s){this.myGameLogic=e,this.KindID=t,cc.error("===setMyGameLogic==>",this.KindID),a.SupportedFish.splice(0,a.SupportedFish.length);for(let n of s)a.SupportedFish.push(n)}OnUpScore(e){this.myGameLogic.onUpScore(e)}OnEventSocketGame(e,t){this.m_Stage.isLeave||this.handleMessage(e,t)}handleMessage(e,t){switch(e){case o.default.SUB_S_ANDROID_BANKOPERATOR:this.onAndroidBankOperator();break;case o.default.SUB_S_FISH:this.onFish(t);break;case o.default.SUB_S_USER_FIRE:this.onUserFire(t);break;case o.default.SUB_S_EXCHANGE_BULLET:this.onExchangeBullet(t);break;case o.default.SUB_S_SWITCH_SCENE:this.onSwitchScene(t);break;case o.default.SUB_S_CATCH_CHAIN:this.onCatchFish(t);break;case o.default.SUB_S_THUNDER_CATCH_CHAIN:this.onCatchMuchFish(t);break;case o.default.SUB_S_TIMER_SYNC:this.onTimerSync(t);break;case o.default.SUB_S_LOCK_FISH:this.onLockFish(t);break;case o.default.SUB_S_PLAYER_SYNC:this.onPlayerSync(t);break;case o.default.SUB_S_FISH_SYNC:this.onFishSync(t);break;case o.default.SUB_S_BULLET_SYNC:this.onBulletSync(t);break;case o.default.SUB_S_REPLACE_CATCH:this.onReplaceCatch(t);break;case o.default.SUB_S_SWITCH_CANNON:this.onSwitchCannon(t);break;case o.default.SUB_S_BULLET_OVER:this.onBulletOver(t);break;case o.default.SUB_S_TRANSITION_SCORE:this.OnConverProperty(t);break;case o.default.SUB_S_ZUAN_TOU:this.onDrillStartBomb(t);break;case o.default.SUB_S_BACKSTAGE:this.onChangeBackground(t);break;case o.default.SUB_S_LAST_EFFECTS:112==this.KindID?this.onTreasureBox(t):this.onBulletLast(t);break;case o.default.SUB_S_TREASURE_BOX_END:102==this.KindID||101==this.KindID||100==this.KindID||99==this.KindID?this.onCatchPanda(t):this.onTreasureBoxEnd(t);break;case o.default.SUB_S_INGOT:102==this.KindID?this.onTreasureBox(t):this.onIngot(t);break;case o.default.SUB_S_INGOT_END:102==this.KindID?this.onTreasureBoxEnd(t):this.onIngotEnd(t);break;case o.default.SUB_S_CATCH_BOSS:this.onCatchBoss(t)}}onChangeBackground(e){let t=i.default.readNetData(o.default.CMD_S_BackStage,e);t.nPlayerID,d.default.gameId,this.myGameLogic.onChangeBackGround(d.default.gameId,t.nPlayerID)}onDrillStartBomb(e){let t=i.default.readNetData(o.default.CMD_S_ZuanTouBulletOver,e);this.myGameLogic.onDrillBomb(t.dwBulletIndex,t.nPlayerID)}OnConverProperty(e){let t=i.default.readNetData(o.default.CMD_S_Transition_Score,e);t.bTransition?(cc.error("\u8f6c\u6362\u6210\u529f",t.fTransitionScore,t.fScore,this.m_Stage.m_transScore,d.default.UserInfo.lUserScore),this.m_Stage.m_WinScore>=this.m_Stage.m_transScore&&(this.m_Stage.m_WinScore-=this.m_Stage.m_transScore),this.myGameLogic.setProperty(t.fTransitionScore,t.fScore)):cc.error("\u8f6c\u6362\u5931\u8d25")}OnRewardNotice(e,t){l.default.ShowMarquee(r.default.RootNode,t,c.default.getInstance().KindID,l.marqueeType.rewardNotice)}OnEventSceneMessage(e,t){let a=i.default.readNetData(o.default.CMD_S_GameScene,t);this.m_Stage.isLeave||(this.myGameLogic.onGameScene(a.nSceneID),this.ServerTick=a.dwServerTicket)}onAndroidBankOperator(){}onFish(e){if(106==this.KindID||115==this.KindID||114==this.KindID||116==this.KindID){let t=e.getDataLen()/n.default.getStructLen(o.default.CMD_S_FishInfo_FISHR),s=[];for(let n=0;n<t;n++){let t=i.default.readNetData(o.default.CMD_S_FishInfo_FISHR,e);a.SupportedFish.indexOf(t.nFishKindID)<0||s.push(t)}this.myGameLogic.onFishInfo(s)}else if(111==this.KindID||104==this.KindID||103==this.KindID||102==this.KindID||101==this.KindID||99==this.KindID){let t=e.getDataLen()/n.default.getStructLen(o.default.CMD_S_FishInfo_FISHZ),s=[];for(let n=0;n<t;n++){let t=i.default.readNetData(o.default.CMD_S_FishInfo_FISHZ,e);a.SupportedFish.indexOf(t.nFishKindID)<0||s.push(t)}this.myGameLogic.onFishInfo(s)}else if(100==this.KindID){let t=e.getDataLen()/n.default.getStructLen(o.default.CMD_S_FishInfo_FISHHaiXiang),s=[];for(let n=0;n<t;n++){let t=i.default.readNetData(o.default.CMD_S_FishInfo_FISHHaiXiang,e);a.SupportedFish.indexOf(t.nFishKindID)<0||s.push(t)}this.myGameLogic.onFishInfo(s)}else if(113==this.KindID){let t=e.getDataLen();if(0==t)return;let s=t/n.default.getStructLen(o.default.CMD_S_FishInfo_FISHW),r=[];for(let n=0;n<s;n++){let t=i.default.readNetData(o.default.CMD_S_FishInfo_FISHW,e);a.SupportedFish.indexOf(t.nFishKindID)<0||r.push(t)}this.myGameLogic.onFishInfo(r)}else if(112==this.KindID){let t=e.getDataLen();if(0==t)return;let s=t/n.default.getStructLen(o.default.CMD_S_FishInfo_FISHCrab),r=[];for(let n=0;n<s;n++){let t=i.default.readNetData(o.default.CMD_S_FishInfo_FISHCrab,e);a.SupportedFish.indexOf(t.nFishKindID)<0||r.push(t)}this.myGameLogic.onFishInfo(r)}else{let t=e.getDataLen()/n.default.getStructLen(o.default.CMD_S_FishInfo),s=[];for(let n=0;n<t;n++){let t=i.default.readNetData(o.default.CMD_S_FishInfo,e);a.SupportedFish.indexOf(t.nFishKindID)<0||s.push(t)}this.myGameLogic.onFishInfo(s)}}onUserFire(e){let t=i.default.readNetData(o.default.CMD_S_UserFire,e);this.myGameLogic.onUserFire(d.default.gameId,t.nPlayerID,t.cbBulletDefine,t.dBulletAngle,t.dwBulletIndex,t.lPlayerScore,t.nBulletMultiple,t.dwCreateTicket,t.dwFishIndex)}onExchangeBullet(e){let t=i.default.readNetData(o.default.CMD_S_PlayerExchangeBullet,e);this.myGameLogic.onExchangeMultiple(d.default.gameId,t.nPlayerID,t.nPlayerMultiple)}onSwitchScene(e){let t=i.default.readNetData(o.default.CMD_S_CHANGE_SCENE,e);cc.log("\u5207\u6362\u573a\u666f:"+t.nSceneID),this.myGameLogic.changeScene(t.nSceneID)}onCatchFish(e){if(108==this.KindID||106==this.KindID||111==this.KindID||112==this.KindID||104==this.KindID||103==this.KindID||115==this.KindID||110==this.KindID||114==this.KindID||116==this.KindID){let t=i.default.readNetData(o.default.CMD_S_PlayerCatchFish_FISHT,e);this.myGameLogic.onCatchFish(d.default.gameId,t.nPlayerID,t.lGongNengScore,t.lFishScore,t.cbBulletDefine,t.dwFishIndex,t.iBulletMultiple,t.cbSpecial)}else{let t=i.default.readNetData(o.default.CMD_S_PlayerCatchFish,e);this.myGameLogic.onCatchFish(d.default.gameId,t.nPlayerID,t.lGongNengScore,t.lFishScore,t.cbBulletDefine,t.dwFishIndex,t.iBulletMultiple,t.cbMeiRenYu)}}onCatchMuchFish(e){if(106==this.KindID||113==this.KindID||114==this.KindID||115==this.KindID||116==this.KindID){let t=i.default.readNetData(o.default.CMD_S_CatchMuchFish_FISHR,e);this.myGameLogic.onCatchMushFish(t.nPlayerID,t.dwFishIndex,t.lGongNengScore,t.cbBulletDefine,t.lFishScore,t.fFirePower)}else{let t=i.default.readNetData(o.default.CMD_S_CatchMuchFish,e);this.myGameLogic.onCatchMushFish(t.nPlayerID,t.dwFishIndex,t.lGongNengScore,t.cbBulletDefine,t.lFishScore,t.fFirePower)}}onTimerSync(e){let t=i.default.readNetData(o.default.CMD_S_SynTime,e);this.ServerTick=t.dwServerTicket,this.isEnterForeground=!1,cc.log("onTimerSync",t),cc.log("\u5f53\u524d\u65f6\u95f4\uff1a"+t.dwServerTicket)}onLockFish(e){let t=i.default.readNetData(o.default.CMD_S_LockFish,e);this.myGameLogic.onLockFish(t.nPlayerID,t.dwLockFishIndex)}onPlayerSync(e){cc.error("\u73a9\u5bb6\u540c\u6b65=");let t=e.getDataLen();if(0==t)return;let a=t/n.default.getStructLen(o.default.CMD_S_PlayerInfo),s=[];for(let n=0;n<a;n++){let t=i.default.readNetData(o.default.CMD_S_PlayerInfo,e);s.push(t)}for(let n of s)this.myGameLogic.onPlayerInfo(n.nPlayerID,n.wChairID,n.dwPlayerMultiple,n.lPlayerScore,n.cbCannonType,n.fWinScore,n.dwLockFishIndex)}onFishSync(e){let t=e.getDataLen();if(0!=t)if(106==this.KindID||115==this.KindID||114==this.KindID||116==this.KindID){let s=t/n.default.getStructLen(o.default.CMD_S_FishInfo_FISHR),r=[];for(let t=0;t<s;t++){let t=i.default.readNetData(o.default.CMD_S_FishInfo_FISHR,e);a.SupportedFish.indexOf(t.nFishKindID)<0||r.push(t)}this.myGameLogic.onFishInfo(r)}else if(111==this.KindID||104==this.KindID||103==this.KindID||102==this.KindID||101==this.KindID||99==this.KindID){let s=t/n.default.getStructLen(o.default.CMD_S_FishInfo_FISHZ),r=[];for(let t=0;t<s;t++){let t=i.default.readNetData(o.default.CMD_S_FishInfo_FISHZ,e);a.SupportedFish.indexOf(t.nFishKindID)<0||r.push(t)}this.myGameLogic.onFishInfo(r)}else if(100==this.KindID){let s=t/n.default.getStructLen(o.default.CMD_S_FishInfo_FISHHaiXiang),r=[];for(let t=0;t<s;t++){let t=i.default.readNetData(o.default.CMD_S_FishInfo_FISHHaiXiang,e);a.SupportedFish.indexOf(t.nFishKindID)<0||r.push(t)}this.myGameLogic.onFishInfo(r)}else if(113==this.KindID){let s=t/n.default.getStructLen(o.default.CMD_S_FishInfo_FISHW),r=[];for(let t=0;t<s;t++){let t=i.default.readNetData(o.default.CMD_S_FishInfo_FISHW,e);a.SupportedFish.indexOf(t.nFishKindID)<0||r.push(t)}this.myGameLogic.onFishInfo(r)}else if(112==this.KindID){let s=t/n.default.getStructLen(o.default.CMD_S_FishInfo_FISHCrab),r=[];for(let t=0;t<s;t++){let t=i.default.readNetData(o.default.CMD_S_FishInfo_FISHCrab,e);a.SupportedFish.indexOf(t.nFishKindID)<0||r.push(t)}this.myGameLogic.onFishInfo(r)}else{let s=t/n.default.getStructLen(o.default.CMD_S_FishInfo),r=[];for(let t=0;t<s;t++){let t=i.default.readNetData(o.default.CMD_S_FishInfo,e);a.SupportedFish.indexOf(t.nFishKindID)<0||r.push(t)}this.myGameLogic.onFishInfo(r)}}onBulletSync(e){let t=e.getDataLen();if(0==t)return;let a=t/n.default.getStructLen(o.default.CMD_S_BulletInfo),s=[];for(let n=0;n<a;n++){let t=i.default.readNetData(o.default.CMD_S_BulletInfo,e);s.push(t)}if(cc.log("\u5b50\u5f39\u540c\u6b65\uff0c\u6570\u91cf\uff1a"+a),a>0)for(var r=0;r<s.length;r++)this.myGameLogic.bulletSync(s[r].dwBulletIndex,s[r].nPlayerID,s[r].dBulletAngle,s[r].dwBulletTicket)}onReplaceCatch(e){let t=i.default.readNetData(o.default.CMD_S_Replace_Catch,e);this.ReplaceCatchAndroids=t.dwMaxReplaceGameID.slice()}onSwitchCannon(e){let t=i.default.readNetData(o.default.CMD_S_SwitchCannon,e);this.myGameLogic.onSwitchCannon(d.default.gameId,t.wChairID,t.cbCannonType)}onBulletOver(e){let t=i.default.readNetData(o.default.CMD_S_GongNengBulletOver,e);this.myGameLogic.onGongNengBulletOver(t.nPlayerID,t.lGongNengScore,t.cbBulletDefine)}onUpdate(e){return this.ServerTick>0&&(this.ServerTick+=1e3*e,!0)}onBulletLast(e){let t=i.default.readNetData(o.default.CMD_S_GongNengBulletLast,e);this.myGameLogic.onLastTimeBullet(t.nPlayerID,t.cbBulletDefine)}onIngot(e){let t=i.default.readNetData(o.default.CMD_S_CatchIngot,e);this.myGameLogic.onIngot(t.wChairID,t.fIngotScore)}onIngotEnd(e){let t=i.default.readNetData(o.default.CMD_S_CatchIngot,e);this.myGameLogic.onIngotEnd(t.wChairID,t.fIngotScore)}onCatchBoss(e){let t=i.default.readNetData(o.default.CMD_S_CatchBoss,e);this.myGameLogic.onCatchBoss(t)}onTreasureBox(e){cc.error("onTreasureBox:",e);let t=i.default.readNetData(o.default.CMD_S_CatchTreasureBox,e);this.myGameLogic.onUpdateTreasureBox(t.wChairID,t.fScore)}onTreasureBoxEnd(e){cc.error("onTreasureBoxEnd:",e);let t=i.default.readNetData(o.default.CMD_S_CatchTreasureBox,e);this.myGameLogic.onTreasureBoxEnd(t.wChairID,t.fScore)}onCatchPanda(e){let t=i.default.readNetData(o.default.CMD_S_CatchPanda,e);cc.error("onCatchPanda:",t),this.myGameLogic.onCatchPanda(t)}myLeave(){this.myGameLogic.myLeave()}};m=s([h],m),a.default=m,cc._RF.pop()},{"../../../BaseRes/Marquee/Marquee":void 0,"../../../ClientBase/UI/CommonUI":void 0,"../../../ClientCommon/CData":void 0,"../../../ClientCommon/DataUtils":void 0,"../../../ClientFrame/GameServerManager":void 0,"../../../ClientFrame/GlobalUserItem":void 0,"./FISHO_CMD":"FISHO_CMD"}],GameLogicBaseKeno:[function(e,t,a){"use strict";cc._RF.push(t,"89041ylx+lFdb678resc9Eh","GameLogicBaseKeno");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0});const n=e("../../../BaseRes/Marquee/Marquee"),i=e("../../../ClientBase/UI/CommonUI"),o=e("../../../ClientCommon/CData"),r=e("../../../ClientCommon/DataUtils"),l=e("../../../ClientFrame/GameFrame"),c=e("../../../ClientFrame/GameServerManager"),d=e("../../../ClientFrame/Header/CMD_GameServer"),h=e("./SHOTKENO_CMD"),{ccclass:_,property:m}=cc._decorator;let u=class extends cc.Component{constructor(){super(),this.game=null,this.myGameLogic=null}setGame(e){this.m_Stage=e}setMyGameLogic(e){this.myGameLogic=e}OnEventSocketGame(e,t){switch(e){case h.default.SUB_S_RESULT_INFO:this.OnResultInfo(t);break;case h.default.SUB_S_CHANGE_MULRIPLE:this.OnChangeMultiple(t);break;case h.default.SUB_S_TRANSITION_SCORE:this.OnConverScore(t);break;case h.default.SUB_S_BALLMAXWIN:this.OnProgressiveScore(t);break;case h.default.SUB_S_JACKCPOTS:this.OnJackpot(t);break;case h.default.SUB_S_WIN_JACKPOT:this.OnWinJackpot(t);break;case h.default.SUB_S_JACKPOT_STATUS:this.OnJackpotStatus(t)}}OnEventSceneMessage(e,t){if(cc.error("OnEventSceneMessage:",this.m_Stage.KindID),12==this.m_Stage.KindID){let e=r.default.readNetData(h.default.CMD_S_GameScene1,t);cc.error("\u6536\u5230\u573a\u666f\u4fe1\u606f"),cc.log("OnEventSceneMessage",e),this.myGameLogic.onGameScene(e.nBallMulriple,e.fBallScore,e.fWinScore,0,e.fJackpots)}else{let e=r.default.readNetData(h.default.CMD_S_GameScene,t);this.myGameLogic.onGameScene(e.nBallMulriple,e.fBallScore,e.fWinScore,e.iMaxWinScore,e.fJackpots)}}OnUpScore(e){this.myGameLogic.OnUpScore(e)}OnRewardNotice(e,t){n.default.ShowMarquee(i.default.RootNode,t,c.default.getInstance().KindID,n.marqueeType.rewardNotice)}OnJackpotStatus(e){let t=r.default.readNetData(h.default.CMD_S_JackpotStatus,e);this.myGameLogic.OnJackpotStatu(t.bStatus)}OnWinJackpot(e){let t=r.default.readNetData(h.default.CMD_S_WinJackpot,e);this.myGameLogic.OnJackpotAward(t.cbWinIndex,t.jackpotScore)}OnJackpot(e){let t=r.default.readNetData(h.default.CMD_S_Jackpot,e);this.myGameLogic.UpdateJackPot(t.m_fJackpots)}OnChangeMultiple(e){let t=r.default.readNetData(h.default.CMD_S_ChangeMultiple,e);this.myGameLogic.handleChangeMultiple(t.nMultiple)}OnResultInfo(e){let t=r.default.readNetData(h.default.CMD_S_ResultInfo,e);this.myGameLogic.handleResult(t.fBallScore,t.fTotalWinScore,t.cbWinNumber,t.cbUserWinNumber,t.fWinScore)}OnConverScore(e){let t=r.default.readNetData(h.default.CMD_S_Transition_Score,e);this.myGameLogic.handleConverScore(t.bTransition,t.fTransitionScore,t.fScore)}OnProgressiveScore(e){let t=r.default.readNetData(h.default.CMD_S_MaxWin,e);this.myGameLogic.updateProgressiveScore(t.iMaxWinScore)}sendRevealPlus(e){let t=new o.default;t.initForSend(d.default.MDM_GF_GAME,h.default.SUB_C_PICK_NUMBER,o.default.getStructLen(h.default.CMD_C_PlayerPickNumber));for(var a=0,s=e.cbPickNumber.length;a<s;a++)t.pushbyte(e.cbPickNumber[a]);t.pushbyte(e.cbPickCount),l.default.getInstance().sendData(t)}sendChangeMultiple(e){let t=new o.default;t.initForSend(d.default.MDM_GF_GAME,h.default.SUB_C_CHANGE_MULRIPLE,o.default.getStructLen(h.default.CMD_C_ChangeMultiple)),t.pushbool(e.bMultiple),t.pushbool(e.bMax),l.default.getInstance().sendData(t)}sendConverScore(e){let t=new o.default;t.initForSend(d.default.MDM_GF_GAME,h.default.SUB_C_TRANSITION_SCORE,o.default.getStructLen(h.default.CMD_C_Transition_Score)),t.pushscore(e.fScore),l.default.getInstance().sendData(t)}windowSizeChange(){this.myGameLogic.windowSizeChange()}netWorkDelay(){this.myGameLogic.netWorkDelay()}};u=s([_],u),a.default=u,cc._RF.pop()},{"../../../BaseRes/Marquee/Marquee":void 0,"../../../ClientBase/UI/CommonUI":void 0,"../../../ClientCommon/CData":void 0,"../../../ClientCommon/DataUtils":void 0,"../../../ClientFrame/GameFrame":void 0,"../../../ClientFrame/GameServerManager":void 0,"../../../ClientFrame/Header/CMD_GameServer":void 0,"./SHOTKENO_CMD":"SHOTKENO_CMD"}],GameLogicBaseSlot:[function(e,t,a){"use strict";cc._RF.push(t,"d25eeoT4HdFCoNeK70cXqIt","GameLogicBaseSlot");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0}),a.eStartKey=a.ePrizeType=a.eGameTypeNext=a.eGameTypeCur=void 0;const n=e("../../../ClientCommon/DataUtils"),i=e("../../../ClientFrame/GlobalUserItem"),o=e("../../../ClientFrame/UserManager"),r=e("./CMD");var l;(function(e){e[e.eGTC_General=0]="eGTC_General",e[e.eGTC_FreeGame=1]="eGTC_FreeGame",e[e.eGTN_SpecialGame=2]="eGTN_SpecialGame"})(l=a.eGameTypeCur||(a.eGameTypeCur={})),function(e){e[e.eGTN_General=0]="eGTN_General",e[e.eGTN_FreeGame=1]="eGTN_FreeGame"}(a.eGameTypeNext||(a.eGameTypeNext={})),function(e){e[e.ePT_None=0]="ePT_None",e[e.ePT_General=1]="ePT_General",e[e.ePT_Small=2]="ePT_Small",e[e.ePT_Medium=3]="ePT_Medium",e[e.ePT_Big=4]="ePT_Big",e[e.ePT_AllAward=5]="ePT_AllAward"}(a.ePrizeType||(a.ePrizeType={})),function(e){e[e.eSK_None=0]="eSK_None",e[e.eSK_CanSpin=1]="eSK_CanSpin",e[e.eSK_StopAllItem=2]="eSK_StopAllItem",e[e.eSK_WinFSWaitPlay=3]="eSK_WinFSWaitPlay"}(a.eStartKey||(a.eStartKey={}));const{ccclass:c,property:d}=cc._decorator;let h=class extends cc.Component{constructor(){super(),this.game=null,this.myGameLogic=null,this.runRecord=null,this.m_playerData=null,this.BonusID=r.BonusID.Bonus_Normal,this.freeTimes=0,this.totalFreeTimes=0,this.allWinDouble=!1,this.freeTotalWinScore=0,this.iNextGameSpecialOdds=0,this.freeSpinAddTimes=0,this.m_flgStart=!1,this.m_flgChangeBet=!1,this.currentWinScore=0,this.m_freeReels=[],this.m_bIsHasSpecialFromInit=!1,this.KindID=0,this.m_GameTypeCur=l.eGTC_General,this.m_reels=[],this.m_bBegin=!1}setGame(e){this.game=e}OnEventSocketGame(e,t){switch(new Date,t.getDataLen(),e){case r.default.SUB_S_JACKCPOTS:let a=[],s=t.getDataLen();for(let e=0;e<s/8;e++)a.push(t.readdouble());this.myGameLogic.onJackpots(a);break;case r.default.SUB_S_AWARD_LINES:break;case r.default.SUB_S_INIT_REEL:cc.error("\u4e0a\u6b21\u8bb0\u5f55:");let l=[];for(let e=0;e<5;e++){l[e]=[];for(let a=0;a<10;a++)l[e][a]=t.readint();cc.error("  ",e,l[e])}this.m_reels=l;break;case r.default.SUB_S_LAST_SLOT:this.onLastSlot(t);break;case r.default.SUB_S_SCORE:if(143==this.KindID){let e=t.readdouble(),a=(t.readdouble(),t.readdouble());this.myGameLogic.onGameScore(e),this.myGameLogic.onGameMaxWinScore(a),cc.log("gameMaxWinScore1\uff1a",a)}else{let e=t.readdouble();cc.error("SUB_S_SCORE:this.KindID,",this.KindID,e),this.myGameLogic.onGameScore(e)}break;case r.default.SUB_S_BETFAIL:this.myGameLogic.onBetFail();break;case r.default.SUB_S_PAY_TIP:let c=n.default.readNetData(r.default.CMD_S_PayTip,t);cc.log("\u8d22\u5bcc\u4e0d\u8db3\uff01\uff01\uff01",c);break;case r.default.SUB_S_PLAYER_DATA:let d=n.default.readNetData(r.default.PlayerData,t);this.m_playerData=d,this.m_flgChangeBet&&(this.myGameLogic.updateChangeBet(this.m_playerData.Bet,this.m_playerData.TotalBet,this.m_playerData.BetIndex),this.m_flgChangeBet=!1);break;case r.default.SUB_S_RUN_RECORD_BEGIN:this.onRunRecordBegin(t);break;case r.default.SUB_S_PRIZE_INFO:let h=n.default.readNetData(r.default.PrizeInfo,t);this.runRecord.list_PrizeInfos.push(h);break;case r.default.SUB_S_SCATTER_INFO:let _=n.default.readNetData(r.default.PrizeInfo,t);this.runRecord.list_ScatterInfos.push(_);break;case r.default.SUB_S_RUN_RECORD_END:this.onRunRecordEnd();break;case r.default.SUB_S_TRANSITION_SCORE_SUCCEED:let m=n.default.readNetData(r.default.CMD_S_Transition_Score,t);cc.error("\u8f6c\u6362===",this.game.m_IsComTransScore,m.bTransition),this.game.m_IsComTransScore?(this.game.m_IsComTransScore=!1,m.bTransition?(cc.error("\u8f6c\u6362\u6210\u529f",this.game.m_WinScore,this.game.m_transScore,i.default.UserInfo.lUserScore,o.default.getInstance().getMeUserItem().UserInfo.lScore),this.game.m_WinScore>=this.game.m_transScore&&(this.game.m_WinScore-=this.game.m_transScore,cc.error("\u8f6c\u6362\u5206\u6570==",this.game.m_transScore),this.myGameLogic.onTransScoreInfo(m.bTransition,this.game.m_transScore))):cc.error("\u8f6c\u6362\u5931\u8d25")):(m.bTransition&&(cc.error("\u8f6c\u6362\u6210\u529f",this.game.m_WinScore,i.default.UserInfo.lUserScore,o.default.getInstance().getMeUserItem().UserInfo.lScore),this.game.m_WinScore>=this.game.m_transScore&&(this.game.m_WinScore-=this.game.m_transScore)),this.myGameLogic.onTransScoreInfo(m.bTransition,this.game.m_transScore));break;case r.default.SUB_S_WIN_JACKPOT:cc.log("====\u8d62\u5f69\u91d1\uff1a");let u=n.default.readNetData(r.default.CMD_S_WinJackpot,t);u.pid==i.default.UserInfo.dwUserID&&(u.jp_id>-1&&u.jpScore>0?this.myGameLogic.onWinJackpot(u.jp_id,u.jpScore):cc.log("====onWinJackpot====\u8d62\u5f69\u91d1\uff1a"+u.jp_id+","+u.jpScore));break;case r.default.SUB_S_PAY_JACKPOT:cc.log("====\u62c9\u5f69\u91d1\uff1a");let S=n.default.readNetData(r.default.CMD_S_PayJackpot,t);S.pid==i.default.UserInfo.dwUserID&&this.myGameLogic.onPayJackpot(S.pid);break;case r.default.SUB_S_WAIT_BONUS_DATA:let g=n.default.readNetData(r.default.CMD_S_WaitBonusData,t);g.iFreeSpinTimes<1&&(null!=this.runRecord?this.m_freeReels=this.runRecord.ary2_Reels:this.m_freeReels=this.m_reels),this.myGameLogic.onWaitBonus(g.iBetIndex,g.iBet,g.iLines,g.iBetPct,g.iFreeSpinTotalTimes,g.iFreeSpinTimes,g.iFSAddTimes,g.iFSAgainTimes,g.iNextGameSpecialOdds,g.iFreeSpinPlusOdd,g.fTotalBet,g.fFreeSpinTotalWinScore,this.m_freeReels);break;case r.default.SUB_S_WAIT_SPECIAL_DATA:let f=n.default.readNetData(r.default.CMD_S_WaitBonusData,t);this.m_bIsHasSpecialFromInit?this.m_bIsHasSpecialFromInit=!1:null!=this.runRecord?this.m_freeReels=this.runRecord.ary2_Reels:this.m_freeReels=this.m_reels,this.myGameLogic.onWaitSpecial(f.iBetIndex,f.iBet,f.iLines,f.iBetPct,f.iFreeSpinTotalTimes,f.iFreeSpinTimes,f.iFreeSpinPlusOdd,f.fTotalBet,f.fFreeSpinTotalWinScore,this.m_freeReels);break;case r.default.SUB_S_SPECIAL_REEL:let I=[];for(let e=0;e<5;e++){I[e]=[];for(let a=0;a<10;a++)I[e][a]=t.readint()}this.m_freeReels=I;break;case r.default.SUB_S_CHOICE_CARD:cc.log("====\u9009\u62e9\u5361\u7247\u56de\u8c031\uff1a");let C=n.default.readNetData(r.default.CMD_S_Choice_Card,t);this.myGameLogic.onSelectCard(C.cbCardIndex);break;case r.default.SUB_S_SELECT_CARD_LIST:cc.log("====\u9009\u62e9\u5361\u7247\u56de\u8c032\uff1a");let p=n.default.readNetData(r.default.CMD_S_SelectCardList,t);this.myGameLogic.onSelectCard2(p.pid,p.allList,p.selectList);break;case r.default.SUB_S_SELECT_CARD_LAST:let y=t.readint();cc.log("====\u6700\u540e\u4e00\u6b21\u5361\u7247\u5206\u6570:",y),this.myGameLogic.onSelectCardLast(y);break;case r.default.SUB_S_MAXWIN:let B=t.readdouble();cc.log("\u706b\u71307\u989d\u5916\u5f69\u91d1\u5206\u6570\uff1a",B),this.myGameLogic.onGameMaxWinScore(B);break;case r.default.SUB_S_QUERY_COIN_TOSSING_RECORD:let M=n.default.readNetData(r.default.CMD_S_CardRecord,t);this.myGameLogic.onShowRecord(M.m_iCoinTossingRecord);break;case r.default.SUB_S_COIN_TOSSING:let G=n.default.readNetData(r.default.CMD_S_Coin_Tossing,t);this.myGameLogic.ShowDoubleCard(G.iIndex,G.fScore)}}onLastSlot(e){let t=n.default.readNetData(r.default.LastSlot,e);this.BonusID=t.iBonusID,this.freeTimes=t.iFreeSpinTimes,this.totalFreeTimes=t.iFreeSpinTotalTimes,this.freeTotalWinScore=t.dFSTotalWinScore,this.allWinDouble=2==t.iFreeSpinPlusOdd,this.freeSpinAddTimes=t.iFreeSpinAddTimes,this.myGameLogic.onUserScore(o.default.getInstance().getMeUserItem().UserInfo.lScore),this.m_flgStart||(this.m_flgStart=!0,2==this.m_playerData.BonusId?this.m_bIsHasSpecialFromInit=!0:this.m_bIsHasSpecialFromInit=!1,cc.error("pct==",this.m_playerData.BetPct),this.myGameLogic.DataInit(this.m_playerData.BetIndex,this.m_playerData.Bet,this.m_playerData.Line,this.m_playerData.BetPct,this.m_playerData.BonusId,null,null,null,null,this.m_playerData.TotalBet,this.freeTotalWinScore,this.m_reels),this.myGameLogic.DataInitOk())}onRunRecordBegin(e){this.runRecord=n.default.readNetData(r.default.PlayerAlgRunRecord,e),this.runRecord.list_PrizeInfos=[],this.runRecord.list_ScatterInfos=[],this.callbackBegin=function(){cc.log("-----------\x3e>onRunRecordPrizeInfo \u8d85\u65f6"),this.m_bBegin&&(cc.log("-----------\x3e>onRunRecordPrizeInfo \u8d85\u65f6----End"),this.onRunRecordEnd())},this.unschedule(this.callbackBegin),this.m_bBegin=!0,this.scheduleOnce(this.callbackBegin,2)}onRunRecordEnd(){if(this.m_bBegin){if(this.m_bBegin=!1,this.unschedule(this.callbackBegin),300==this.KindID&&!this.m_flgStart)return this.m_flgStart=!0,this.myGameLogic.onUserScore(o.default.getInstance().getMeUserItem().UserInfo.lScore),this.myGameLogic.DataInit_1(this.runRecord.iBetIndex,this.runRecord.iBet,this.runRecord.iBetPct,this.runRecord.iBonusId,this.runRecord.iFreeSpinTotalTimes,this.runRecord.iFreeSpinTimes,this.runRecord.iFreeSpinAddTimes,this.runRecord.iFreeGameAgainTime,this.runRecord.iNextGameSpecialOdds,this.runRecord.iFreeSpinPlusOdd,this.runRecord.fTotalBet,this.runRecord.fCurWinScore,this.runRecord.fFreeSpinTotalWinScore,this.runRecord.iJackpotId,this.runRecord.iJackpotScore,this.runRecord.ary2_Reels,this.runRecord.list_PrizeInfos,this.runRecord.list_ScatterInfos),void this.myGameLogic.DataInitOk();this.BonusID=this.runRecord.iBonusId,this.freeTimes=this.runRecord.iFreeSpinTimes,this.totalFreeTimes=this.runRecord.iFreeSpinTotalTimes,this.allWinDouble=2==this.runRecord.iFreeSpinPlusOdd,this.freeTotalWinScore=this.runRecord.fFreeSpinTotalWinScore,this.freeSpinAddTimes=this.runRecord.iFreeSpinAddTimes,this.currentWinScore=this.runRecord.fCurWinScore,this.m_GameTypeCur==l.eGTC_FreeGame?this.myGameLogic.SetBonusResult(this.runRecord.iBonusId,this.runRecord.iWinType,this.runRecord.iWinAllId,this.runRecord.iJackpotId,this.totalFreeTimes,this.freeTimes,this.freeSpinAddTimes,this.runRecord.iNextGameSpecialOdds,this.runRecord.iFreeSpinPlusOdd,this.runRecord.fCurWinScore,this.freeTotalWinScore,this.runRecord.iJackpotScore,this.runRecord.ary2_Reels,this.runRecord.list_PrizeInfos,this.runRecord.list_ScatterInfos):this.m_GameTypeCur==l.eGTN_SpecialGame?this.myGameLogic.SetSpecialResult(this.runRecord.iBonusId,this.runRecord.iWinType,this.runRecord.iWinAllId,this.runRecord.iJackpotId,this.totalFreeTimes,this.freeTimes,this.freeSpinAddTimes,this.runRecord.fCurWinScore,this.freeTotalWinScore,this.runRecord.iJackpotScore,this.runRecord.ary2_Reels,this.runRecord.list_PrizeInfos,this.runRecord.list_ScatterInfos):this.myGameLogic.SetResult(this.runRecord.iBet,this.runRecord.iTotalLine,this.runRecord.iBetPct,this.runRecord.iBonusId,this.runRecord.iWinType,this.runRecord.iWinAllId,this.runRecord.iJackpotId,this.runRecord.fTotalBet,this.currentWinScore,this.runRecord.iJackpotScore,this.runRecord.iNextGameSpecialOdds,this.runRecord.ary2_Reels,this.runRecord.list_PrizeInfos,this.runRecord.list_ScatterInfos)}else cc.error("onRunRecordEnd,this.m_bBegin = false,\u6ca1\u6709\u7ecf\u8fc7\u6b63\u5e38\u7684\u6d41\u7a0b")}OnRewardNotice(e,t){this.game.OnRewardNotice(e,t)}OnEventSceneMessage(e,t){}OnUpScore(e){this.myGameLogic.OnUpScore(e)}};h=s([c],h),a.default=h,cc._RF.pop()},{"../../../ClientCommon/DataUtils":void 0,"../../../ClientFrame/GlobalUserItem":void 0,"../../../ClientFrame/UserManager":void 0,"./CMD":"CMD"}],GameSlotJcakpot_Item:[function(e,t,a){"use strict";cc._RF.push(t,"d20b3+ClJhJ+ZEe5yWmhGDV","GameSlotJcakpot_Item");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0});const n=e("./DealTurntable"),i=e("./ShowImageNumCtrl"),o=e("./SlotJcakpotScale_Item"),{ccclass:r,property:l}=cc._decorator;let c=class extends cc.Component{constructor(...e){super(),this.list_JPWining=new Array;let t=e[0],a=e[1];this.m_ObjTitle=t,this.m_ary_SprNumJcakpotTitle=a}InitPlayerJcakpotScale(e=null,t=null,a=null){this.m_JcakpotLogic=new o.default(t,a,this.m_ObjTitle,this.m_ary_SprNumJcakpotTitle)}InitTurntable(e,t,a=null,s=null,i=90,o=null,r=null){this.m_DealTurntable=new n.default(e,t,a,s,i,o,r)}InitFlop(e,t,a,s,n,i,o,r=null,l=null,c=null){this.m_SlotJcakpot_Flop.Init(e,t,a,s,n,i,o,r,l,c)}UpdateSlotJcakpot(){null!=this.m_JcakpotLogic&&this.m_JcakpotLogic.MyUpdate(),null!=this.m_DealTurntable&&this.m_DealTurntable.UpdateState(),null!=this.m_SlotJcakpot_Flop&&this.m_SlotJcakpot_Flop.UpdateJPMove()}ShowJcakpotNum(e,t=-1){for(let a=0;a<e.length;a++)this.list_JPWining.indexOf(a)||this.ShowJPNum(a,e[a],t)}SetWaitJPWin(e){this.list_JPWining.indexOf(e)||this.list_JPWining.push(e)}ShowWinJcakpot(e,t,a=-1,s=!0){this.ShowJPNum(e,t,a),s&&this.ShowWinJPEff(e)}ShowJPNum(e,t,a=-1){}ShowWinJPEff(e){}StopWinJPEff(e,t,a=-1){this.ShowJPNum(e,t,a)}PullJcakpot(e,t,a,s,n,i=!1,o=-1,r=!1){return null==this.m_JcakpotLogic?null:this.m_JcakpotLogic.OnPlay(e,t,a,s,n,i,o,r)}ShowJPNumPlayer(e,t,a=-1){null!=this.m_JcakpotLogic&&this.m_JcakpotLogic.ShowNum(e,t,a)}ColseJcakpot(e){null!=this.m_JcakpotLogic&&this.m_JcakpotLogic.ColseJP(e)}SetTurntableId(e){null!=this.m_DealTurntable&&(this.m_DealTurntable.StopId=e)}OnRotateTurntable(){null!=this.m_DealTurntable&&this.m_DealTurntable.OnRotate()}SetTurntableParam(e,t,a,s,n,i,o){null!=this.m_DealTurntable&&(this.m_DealTurntable.FirstNegaTime=e,this.m_DealTurntable.UniformTime=t,this.m_DealTurntable.SpeedMax=a,this.m_DealTurntable.SpeedMin=s,this.m_DealTurntable.FTrimAngle=n,this.m_DealTurntable.SlowSingleAarePre(i,o))}ShowAnimsStart(e){this.m_SlotJcakpot_Flop.ShowAnimsImage(e)}ShowJackpotEff(e,t,a=-1){let s=function(){this.m_SlotJcakpot_Flop.m_bIsDrawEnd&&(this.unschedule(s),this.ShowWinJcakpot(e,t,a))};this.schedule(s,1)}HideCoinWinEff(){this.m_SlotJcakpot_Flop.HideCoinWinEff()}GetShowNum(){return this.m_JcakpotLogic.m_ShowNum}NewShowNum(e,t,a,s,n,o){this.m_JcakpotLogic.m_ShowNum=new i.default(e,t,a,s,n,o)}Final(){this.m_JcakpotLogic.m_ShowNum.Final()}NewSlotJcakpot_Flop(e){this.m_SlotJcakpot_Flop=e.addComponent("SlotJcakpot_Flop")}};c=s([r],c),a.default=c,cc._RF.pop()},{"./DealTurntable":"DealTurntable","./ShowImageNumCtrl":"ShowImageNumCtrl","./SlotJcakpotScale_Item":"SlotJcakpotScale_Item"}],IBelowBarV:[function(e,t,a){"use strict";cc._RF.push(t,"c60a8QhT/NNZIPsXcj+YNGK","IBelowBarV"),Object.defineProperty(a,"__esModule",{value:!0}),cc._RF.pop()},{}],IFishResMgrBase:[function(e,t){"use strict";cc._RF.push(t,"21e27UCR5dO5YUUteoOcMsl","IFishResMgrBase"),cc._RF.pop()},{}],IGameBaseCasion:[function(e,t,a){"use strict";cc._RF.push(t,"acf01XGeDRORoekTGe6kfP4","IGameBaseCasion"),Object.defineProperty(a,"__esModule",{value:!0}),cc._RF.pop()},{}],IGameBaseFish:[function(e,t,a){"use strict";cc._RF.push(t,"1285b2zA4JDsbNZGM/W9akk","IGameBaseFish"),Object.defineProperty(a,"__esModule",{value:!0}),cc._RF.pop()},{}],IGameBaseKeno:[function(e,t,a){"use strict";cc._RF.push(t,"f2610rWXutD3YyT9XFBEvM0","IGameBaseKeno"),Object.defineProperty(a,"__esModule",{value:!0}),cc._RF.pop()},{}],IGameBaseSlot:[function(e,t,a){"use strict";cc._RF.push(t,"49526NpiydFn6vdwLE7FQ+r","IGameBaseSlot"),Object.defineProperty(a,"__esModule",{value:!0}),cc._RF.pop()},{}],IGameLogicCasion:[function(e,t,a){"use strict";cc._RF.push(t,"7662c6o2uBPubNR4f6tBT8S","IGameLogicCasion"),Object.defineProperty(a,"__esModule",{value:!0}),cc._RF.pop()},{}],IGameLogicFish:[function(e,t){"use strict";cc._RF.push(t,"237f9pzTSZA16l9C2BbIxPr","IGameLogicFish"),cc._RF.pop()},{}],IGameLogicKeno:[function(e,t,a){"use strict";cc._RF.push(t,"ae5543dANtMKKNp9qwnoBnd","IGameLogicKeno"),Object.defineProperty(a,"__esModule",{value:!0}),cc._RF.pop()},{}],IGameLogicSlot:[function(e,t,a){"use strict";cc._RF.push(t,"e2851oFelFKrIPcO9BZ+zbF","IGameLogicSlot"),Object.defineProperty(a,"__esModule",{value:!0}),cc._RF.pop()},{}],IGameSlotJcakpot_Item:[function(e,t,a){"use strict";cc._RF.push(t,"28481brdB9HY6wzEqpMYyzB","IGameSlotJcakpot_Item"),Object.defineProperty(a,"__esModule",{value:!0}),cc._RF.pop()},{}],IItemCtrl_CR_FireRes_Spe:[function(e,t,a){"use strict";cc._RF.push(t,"85da6bTitZHOrIWp0ex2GLO","IItemCtrl_CR_FireRes_Spe"),Object.defineProperty(a,"__esModule",{value:!0}),cc._RF.pop()},{}],IItemCtrl_CR:[function(e,t,a){"use strict";cc._RF.push(t,"d710fdLrCxDXZC/qwxuYSiZ","IItemCtrl_CR"),Object.defineProperty(a,"__esModule",{value:!0}),cc._RF.pop()},{}],IJackpotNumChange:[function(e,t,a){"use strict";cc._RF.push(t,"fcc2dEme+VMErXROgd92Q+L","IJackpotNumChange"),Object.defineProperty(a,"__esModule",{value:!0}),cc._RF.pop()},{}],ILoadingBase:[function(e,t,a){"use strict";cc._RF.push(t,"3677b2Be7VKeLi1W+RWYylx","ILoadingBase"),Object.defineProperty(a,"__esModule",{value:!0}),cc._RF.pop()},{}],IMainController:[function(e,t,a){"use strict";cc._RF.push(t,"2e9fcLjfHBO36Goo+zUeayV","IMainController"),Object.defineProperty(a,"__esModule",{value:!0}),cc._RF.pop()},{}],IMyFishSetting:[function(e,t,a){"use strict";cc._RF.push(t,"332ad78K1tJgb2oejavmWxr","IMyFishSetting"),Object.defineProperty(a,"__esModule",{value:!0}),cc._RF.pop()},{}],IPlazaBase:[function(e,t,a){"use strict";cc._RF.push(t,"dce89T6+MRP9IDrcB9Ler7D","IPlazaBase"),Object.defineProperty(a,"__esModule",{value:!0}),cc._RF.pop()},{}],IShowImageNumCtrl:[function(e,t,a){"use strict";cc._RF.push(t,"a0a0f9s9QpLdbcqJBrYRTd+","IShowImageNumCtrl"),Object.defineProperty(a,"__esModule",{value:!0}),cc._RF.pop()},{}],ISoundSystem:[function(e,t,a){"use strict";cc._RF.push(t,"2e964Tjk75JaqdQxw8Sf+DT","ISoundSystem"),Object.defineProperty(a,"__esModule",{value:!0}),cc._RF.pop()},{}],ITopBarH:[function(e,t,a){"use strict";cc._RF.push(t,"7e1951Lu7lBFbVcnjHw48n4","ITopBarH"),Object.defineProperty(a,"__esModule",{value:!0}),cc._RF.pop()},{}],ITopBarV:[function(e,t,a){"use strict";cc._RF.push(t,"433c7eWkrNHlI2NEdMtuH4D","ITopBarV"),Object.defineProperty(a,"__esModule",{value:!0}),cc._RF.pop()},{}],ITransScoreCtrl:[function(e,t,a){"use strict";cc._RF.push(t,"1503aw8hKJKS5FlU0hkBVSk","ITransScoreCtrl"),Object.defineProperty(a,"__esModule",{value:!0}),cc._RF.pop()},{}],IUserItem:[function(e,t,a){"use strict";cc._RF.push(t,"f809bAYcvhPErKk1KJJlXqM","IUserItem"),Object.defineProperty(a,"__esModule",{value:!0}),cc._RF.pop()},{}],ItemCtrl_CR_FireRes_Spe:[function(e,t,a){"use strict";cc._RF.push(t,"cfbb4eV7m1ElrRywHuX8Qhj","ItemCtrl_CR_FireRes_Spe");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0});const{ccclass:n,property:i}=cc._decorator;var o;(function(e){e[e.TC_NONR=0]="TC_NONR",e[e.TC_Trans=1]="TC_Trans",e[e.TC_End=2]="TC_End"})(o||(o={}));let r=class extends cc.Component{constructor(...e){super(),this.m_iTransCtrl=o.TC_NONR,this.caller=null,this.AllStopBackEvn=null,this.AColStopBackEvn=null,this.AShowNumBackEvn=null,this.m_fImageHeight=0,this.m_ary_fTransSpeed=[],this.m_ary_fTransSpeedNow=[],this.m_arys_iItemResult=new Array,this.m_ary_iShowResultIdTemp=[],this.m_ary_bIsCanStop=[],this.m_ary_bIsStoped=[],this.m_fX1=0,this.m_fX2=0,this.m_fParabolaHeight=0,this.m_iParabolaReboundSpeed=0,this.m_ary_fParabolaXTemp=[],this.m_ary_bIsCanShowParabola=[],this.m_iStopedCount=0,this.m_ary_SpItemRes=[],this.m_dic_ListImage=null,this.m_ary_VecStartAncPos=[],this.m_iBet=1,this.m_GameTypeCurIndex=0,this.m_dic_ListItemNum=null,this.m_iItem_WILD=9,this.m_iItem_FREE=10,this.m_iItem_JackpotBegain=11,this.m_iItem_FireBegain=12,this.m_iItem_FireEnd=115,this.m_iItem_NornalEnd=8,this.m_animationFire=0;let t=e[0],a=e[1],s=e[2],n=e[3],i=e[4],r=e[5],l=e[6],c=e[7],d=e[8],h=e[9],_=e[10];if(null==t||null==a||c<0)return void cc.log("[ItemCtrl]-> \u521d\u59cb\u5316\u5931\u8d25\uff01\uff01");h<=0&&(h=40),this.m_ary_SpItemRes=t,this.m_dic_ListImage=new Map;for(let o=0;o<a.length;o++){let e=new Array(a[0].length);for(let t=0;t<a[0].length;t++)e[t]=a[o][t];this.m_dic_ListImage.set(o,e)}this.m_dic_ListItemNum=new Map;for(let o=0;o<s.length;o++){let e=new Array(s[0].length);for(let t=0;t<s[0].length;t++)e[t]=s[o][t];this.m_dic_ListItemNum.set(o,e)}for(let o=0;o<a[0].length;o++){let e=a[0][o].node.position;this.m_ary_VecStartAncPos[o]=cc.v2(e.x,e.y)}this.m_fImageHeight=Math.abs(this.m_ary_VecStartAncPos[1].y-this.m_ary_VecStartAncPos[0].y),this.caller=n,this.AllStopBackEvn=i,this.AColStopBackEvn=r,this.AShowNumBackEvn=l,this.m_bIsShowParabola=d,this.m_iParabolaReboundSpeed=h,this.m_fParabolaHeight=this.m_fImageHeight*_;let m=a.length,u=a[0].length-2;this.m_ary_fTransSpeed=new Array(m),this.m_ary_fTransSpeedNow=new Array(m);for(let o=0;o<this.m_ary_fTransSpeed.length;o++)this.m_ary_fTransSpeed[o]=c,this.m_ary_fTransSpeedNow[o]=c;this.m_ary_iShowResultIdTemp=new Array(m);for(let o=0;o<m;o++){this.m_arys_iItemResult[o]=[];for(let e=0;e<u;e++)this.m_arys_iItemResult[o][e]=0}this.m_ary_bIsCanStop=new Array(m),this.m_ary_bIsStoped=new Array(m),this.m_ary_fParabolaXTemp=new Array(m),this.m_ary_bIsCanShowParabola=new Array(m),this.m_fX1=-Math.sqrt(this.m_fParabolaHeight),this.m_fX2=-this.m_fX1}StateItemCtrl(){switch(this.m_iTransCtrl){case o.TC_NONR:break;case o.TC_Trans:this.m_iStopedCount=0;for(let e=0;e<this.m_ary_bIsStoped.length;e++)this.m_ary_bIsStoped[e]&&this.m_iStopedCount++;if(this.m_iStopedCount==this.m_ary_bIsStoped.length)return void(this.m_iTransCtrl=o.TC_End);for(let e=0;e<this.m_ary_bIsCanStop.length;e++)this.m_ary_bIsStoped[e]||this.OnTransing(e,this.m_ary_bIsCanStop[e],this.m_bIsShowParabola);break;case o.TC_End:this.m_iTransCtrl=o.TC_NONR,null!=this.AllStopBackEvn&&this.AllStopBackEvn.call(this.caller)}}ShowInitResultSpr(){for(let e=0;e<this.m_dic_ListImage.size;e++)for(let t=0;t<this.m_dic_ListImage.get(e).length;t++)if(t>0&&t<this.m_dic_ListImage.get(e).length-1){let a=this.m_dic_ListImage.get(e),s=cc.find("Item",a[t].node).getComponent(cc.Sprite),n=cc.find("Panel_NumPar",a[t].node),i=this.m_arys_iItemResult[e][this.m_arys_iItemResult[0].length-t],o=this.m_dic_ListItemNum.get(e);this.isFireNum(i)?(a[t].enabled=!0,0==this.m_animationFire?a[t].node.getComponent(cc.Animation).play():a[t].node.getComponent(cc.Animation).play("Anim_SlotItem"),s.node.active=!1,n.active=!0,o[t].ShowNum2(this.GetFireNumStr(i))):this.isJackPotNum(i)?(a[t].enabled=!0,0==this.m_animationFire?a[t].node.getComponent(cc.Animation).play():a[t].node.getComponent(cc.Animation).play("Anim_SlotItem_jackpot"),s.node.active=!0,n.active=!1,s.spriteFrame=this.m_ary_SpItemRes[this.m_arys_iItemResult[e][this.m_arys_iItemResult[0].length-t]]):(a[t].enabled=!1,a[t].node.getComponent(cc.Animation).stop(),s.node.active=!0,n.active=!1,s.spriteFrame=this.m_ary_SpItemRes[this.m_arys_iItemResult[e][this.m_arys_iItemResult[0].length-t]]),this.m_dic_ListImage.set(e,a),this.m_dic_ListItemNum.set(e,o)}else{let a=this.m_dic_ListImage.get(e),s=this.GetNormalResult(),n=cc.find("Item",a[t].node).getComponent(cc.Sprite);a[t].enabled=!1,n.node.active=!0,n.spriteFrame=this.m_ary_SpItemRes[s],this.m_dic_ListImage.set(e,a)}}OnTrans(){if(cc.log("----------OnTrans------------"),this.m_iTransCtrl==o.TC_NONR){for(let e=0;e<this.m_arys_iItemResult.length;e++){for(let t=0;t<this.m_arys_iItemResult[0].length;t++)this.m_arys_iItemResult[e][t]=-1;this.m_ary_iShowResultIdTemp[e]=0,this.m_ary_fParabolaXTemp[e]=0,this.m_ary_bIsCanStop[e]=!1,this.m_ary_bIsStoped[e]=!1,this.m_ary_bIsCanShowParabola[e]=!1,this.m_ary_fTransSpeedNow[e]=this.m_ary_fTransSpeed[e]}this.m_iTransCtrl=o.TC_Trans}}SetAllItemResult(e){if(null!=e&&e.length==this.m_arys_iItemResult.length)for(let t=0;t<e.length;t++)for(let a=0;a<e[0].length;a++)this.m_arys_iItemResult[t][a]=e[t][a];else cc.log("[ItemCtrl_CR_MulRes_SpeRoute]-> SetAllItemResult() \u8bbe\u7f6e\u7ed3\u679c\u5931\u8d25")}SetOneItemResult(e,t,a){e<0||e>=this.m_arys_iItemResult.length||t<0||t>=this.m_arys_iItemResult[0].length||a<0||a>=this.m_ary_SpItemRes.length?cc.log("[ItemCtrl_CR_MulRes_SpeRoute]-> SetOneResultImage() \u4f20\u5165\u53c2\u6570\u6709\u8bef\uff01col\uff1a"+e+"    row"+t+"  iResult\uff1a"+a):(this.m_arys_iItemResult[e][t]=a,cc.find("Item",this.m_dic_ListImage[e][this.m_dic_ListImage[e].Count-2-t].node).getComponent(cc.Sprite).spriteFrame=this.m_ary_SpItemRes[this.m_arys_iItemResult[e][t]])}SetAllItemStop(){if(this.m_iTransCtrl==o.TC_Trans)for(let e=0;e<this.m_ary_bIsCanStop.length;e++)this.m_ary_bIsCanStop[e]=!0}SetAColItemStop(e){this.m_iTransCtrl!=o.TC_Trans||e<0||e>=this.m_ary_bIsCanStop.length?cc.log("[ItemCtrl_CR_MulRes_SpeRoute]-> SetAColItemStop() \u5931\u8d25\uff01m_iTransCtrl= "+this.m_iTransCtrl+"   col\uff1a"+e):this.m_ary_bIsCanStop[e]=!0}Get_m_ary_bIsCanStop(e){return!(e<0||e>=this.m_ary_bIsCanStop.length)&&this.m_ary_bIsCanStop[e]}Get_m_ary_bIsStoped(e){return!(e<0||e>=this.m_ary_bIsStoped.length)&&this.m_ary_bIsStoped[e]}GetImage(e,t){return e<0||e>=this.m_arys_iItemResult.length||t<0||t>=this.m_arys_iItemResult[0].length?null:this.m_dic_ListImage.get(e)[this.m_dic_ListImage.get(e).length-2-t]}Get_IsAllItemTransEnd(){return this.m_iTransCtrl==o.TC_NONR}SetModifySpeed(e,t=.5){e<0||e>this.m_ary_fTransSpeedNow.length||t<=0||(this.m_ary_fTransSpeedNow[e]=this.m_ary_fTransSpeed[e]*t)}OnTransing(e,t,a){this.m_ary_iShowResultIdTemp[e]<this.m_arys_iItemResult[0].length?this.OnTransLogic(e,t):this.m_ary_bIsCanShowParabola[e]?a?this.ShowParabolaEff(e,this.ParabolaLogic(e,this.m_fParabolaHeight)):(this.m_ary_bIsStoped[e]=!0,this.ShowParabolaEff(e,0),null!=this.AColStopBackEvn&&this.AColStopBackEvn.call(this.caller,e)):this.OnTransLogic(e,!1)}OnTransLogic(e,t){let a=this.m_ary_fTransSpeedNow[e]*cc.director.getDeltaTime(),s=this.m_dic_ListImage.get(e),n=this.m_dic_ListItemNum.get(e);for(let r=0;r<this.m_dic_ListImage.get(e).length;r++)s[r].node.position=cc.v3(s[r].node.position.x,s[r].node.y-a,0);let i=s[0],o=n[0];if(i.node.position.y<=this.m_ary_VecStartAncPos[0].y-this.m_fImageHeight){this.m_ary_iShowResultIdTemp[e]>=this.m_arys_iItemResult[0].length&&(this.m_ary_bIsCanShowParabola[e]=!0,t=!1);let a=0;if(t){if(-1!=this.m_arys_iItemResult[e][this.m_arys_iItemResult[0].length-1]){a=this.m_arys_iItemResult[e][this.m_arys_iItemResult[0].length-1-this.m_ary_iShowResultIdTemp[e]];let t=cc.find("Item",i.node).getComponent(cc.Sprite),s=cc.find("Panel_NumPar",i.node);this.isFireNum(a)?(i.enabled=!0,s.active=!0,t.node.active=!1,o.ShowNum2(this.GetFireNumStr(a)),0==this.m_animationFire?i.node.getComponent(cc.Animation).play():i.node.getComponent(cc.Animation).play("Anim_SlotItem")):this.isJackPotNum(a)?(i.enabled=!0,s.active=!1,t.node.active=!0,t.spriteFrame=this.m_ary_SpItemRes[a],0==this.m_animationFire?i.node.getComponent(cc.Animation).play():i.node.getComponent(cc.Animation).play("Anim_SlotItem_jackpot")):(i.enabled=!1,t.node.active=!0,s.active=!1,t.spriteFrame=this.m_ary_SpItemRes[a],i.node.getComponent(cc.Animation).stop()),this.m_ary_iShowResultIdTemp[e]++}}else{a=this.GetRandomItemSpIndex();let e=cc.find("Item",i.node).getComponent(cc.Sprite),t=cc.find("Panel_NumPar",i.node);this.isFireNum(a)?(i.enabled=!0,e.node.active=!1,t.active=!0,o.ShowNum2(this.GetFireNumStr(a))):this.isJackPotNum(a)?(i.enabled=!0,e.node.active=!0,t.active=!1,e.spriteFrame=this.m_ary_SpItemRes[a]):(i.enabled=!1,e.node.active=!0,t.active=!1,e.spriteFrame=this.m_ary_SpItemRes[a])}let r=i.node.position.y-this.m_ary_VecStartAncPos[0].y+this.m_fImageHeight;i.node.position=cc.v3(this.m_ary_VecStartAncPos[this.m_ary_VecStartAncPos.length-1].x,this.m_ary_VecStartAncPos[this.m_ary_VecStartAncPos.length-1].y+r,0),s.shift(),s.push(i),n.shift(),n.push(o),this.m_dic_ListImage.set(e,s),this.m_dic_ListItemNum.set(e,n)}}ParabolaLogic(e,t){this.m_ary_fParabolaXTemp[e]+=cc.director.getDeltaTime()*this.m_iParabolaReboundSpeed;let a=this.m_fX1+this.m_ary_fParabolaXTemp[e];return(a=(a=a<this.m_fX1?this.m_fX1:a)>this.m_fX2?this.m_fX2:a)>=this.m_fX2&&(this.m_ary_bIsStoped[e]=!0,null!=this.AColStopBackEvn&&this.AColStopBackEvn.call(this.caller,e)),a*a-t}ShowParabolaEff(e,t){let a=this.m_dic_ListImage.get(e);for(let s=0;s<a.length;s++)this.m_ary_bIsStoped[e]?a[s].node.position=cc.v3(this.m_ary_VecStartAncPos[s].x,this.m_ary_VecStartAncPos[s].y,0):a[s].node.position=cc.v3(this.m_ary_VecStartAncPos[s].x,this.m_ary_VecStartAncPos[s].y+t,0);this.m_dic_ListImage.set(e,a)}GetNormalResult(){return Math.floor(Math.random()*this.m_iItem_NornalEnd)}GetRandomItemSpIndex(){let e=Math.floor(Math.random()*(this.m_iItem_NornalEnd+2));if(e==this.m_iItem_NornalEnd+1)if(1==this.m_GameTypeCurIndex)e=Math.floor(Math.random()*this.m_iItem_NornalEnd);else{let t=Math.floor(Math.random()*(this.m_iItem_FireEnd-this.m_iItem_FireBegain));e=this.m_iItem_FireBegain+t}else e==this.m_iItem_NornalEnd+2&&(e=this.m_iItem_WILD);return e>=this.m_ary_SpItemRes.length&&(e=0),e}isFireNum(e){return e>=this.m_iItem_FireBegain}GetFireNumStr(e){return null!=this.AShowNumBackEvn?this.AShowNumBackEvn.call(this.caller,e):this.GetFireNumStr_Normal(e)}GetFireNumStr_Normal(e){let t=0;if(this.isFireNum(e)){let a=e-this.m_iItem_FireBegain;e<this.m_iItem_FireEnd-1?t=25*(a+2)*this.m_iBet:e==this.m_iItem_FireEnd-1?t=2500*this.m_iBet:e==this.m_iItem_FireEnd&&(t=5e3*this.m_iBet)}return t}isJackPotNum(e){return e>=this.m_iItem_JackpotBegain&&e<this.m_iItem_JackpotBegain+4}GetmIBet(){return this.m_iBet}SetmIBet(e){this.m_iBet=e}GetGameTypeCurIndex(){return this.m_GameTypeCurIndex}SetGameTypeCurIndex(e){this.m_GameTypeCurIndex=e}Init(e,t,a,s,n){cc.error("Init==ItemCtrl_CR_FireRes_Spe"),this.m_iItem_WILD=e,this.m_iItem_FREE=t,this.m_iItem_JackpotBegain=a,this.m_iItem_FireBegain=s,this.m_iItem_FireEnd=n}Final(){cc.error("Final==ItemCtrl_CR_FireRes_Spe"),this.unscheduleAllCallbacks();for(let e=0;e<this.m_dic_ListImage.size;e++)for(let t=0;t<this.m_dic_ListImage.get(e).length;t++){let t=this.m_dic_ListItemNum.get(e);for(let e=0;e<t.length;e++)t[e].Final()}this.m_dic_ListImage.clear(),this.AllStopBackEvn=null,this.AColStopBackEvn=null,this.AShowNumBackEvn=null,this.m_ary_SpItemRes=null}};r=s([n],r),a.default=r,cc._RF.pop()},{}],ItemCtrl_CR_MulRes_Spe:[function(e,t,a){"use strict";cc._RF.push(t,"4c5160YTtZHj6RH4YEH+N0P","ItemCtrl_CR_MulRes_Spe");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0});const{ccclass:n,property:i}=cc._decorator;var o;(function(e){e[e.TC_NONR=0]="TC_NONR",e[e.TC_Trans=1]="TC_Trans",e[e.TC_End=2]="TC_End"})(o||(o={}));let r=class extends cc.Component{constructor(...e){super(),this.m_iTransCtrl=o.TC_NONR,this.caller=null,this.AllStopBackEvn=null,this.AColStopBackEvn=null,this.m_fImageHeight=0,this.m_ary_fTransSpeed=[],this.m_ary_fTransSpeedNow=[],this.m_arys_iItemResult=new Array,this.m_ary_iShowResultIdTemp=[],this.m_ary_bIsCanStop=[],this.m_ary_bIsStoped=[],this.m_fX1=0,this.m_fX2=0,this.m_fParabolaHeight=0,this.m_iParabolaReboundSpeed=0,this.m_ary_fParabolaXTemp=[],this.m_ary_bIsCanShowParabola=[],this.m_iStopedCount=0,this.m_ary_SpItemRes=[],this.m_dic_ListImage=null,this.m_ary_VecStartAncPos=[],this.m_SpItemResIndex=0;let t=e[0],a=e[1],s=e[2],n=e[3],i=e[4],r=e[5],l=e[6],c=e[7],d=e[8];if(null==t||null==a||r<0)return;c<=0&&(c=40),this.m_ary_SpItemRes=t,this.m_dic_ListImage=new Map;for(let o=0;o<a.length;o++){let e=new Array(a[0].length);for(let t=0;t<a[0].length;t++)e[t]=a[o][t];this.m_dic_ListImage.set(o,e)}for(let o=0;o<a[0].length;o++){let e=a[0][o].node.position;this.m_ary_VecStartAncPos[o]=cc.v2(e.x,e.y)}this.m_fImageHeight=Math.abs(this.m_ary_VecStartAncPos[1].y-this.m_ary_VecStartAncPos[0].y),this.caller=s,this.AllStopBackEvn=n,this.AColStopBackEvn=i,this.m_bIsShowParabola=l,this.m_iParabolaReboundSpeed=c,this.m_fParabolaHeight=this.m_fImageHeight*d;let h=a.length,_=a[0].length-2;this.m_ary_fTransSpeed=new Array(h),this.m_ary_fTransSpeedNow=new Array(h);for(let o=0;o<this.m_ary_fTransSpeed.length;o++)this.m_ary_fTransSpeed[o]=r,this.m_ary_fTransSpeedNow[o]=r;this.m_ary_iShowResultIdTemp=new Array(h);for(let o=0;o<h;o++){this.m_arys_iItemResult[o]=[];for(let e=0;e<_;e++)this.m_arys_iItemResult[o][e]=0}this.m_ary_bIsCanStop=new Array(h),this.m_ary_bIsStoped=new Array(h),this.m_ary_fParabolaXTemp=new Array(h),this.m_ary_bIsCanShowParabola=new Array(h),this.m_fX1=-Math.sqrt(this.m_fParabolaHeight),this.m_fX2=-this.m_fX1}StateItemCtrl(){switch(this.m_iTransCtrl){case o.TC_NONR:break;case o.TC_Trans:this.m_iStopedCount=0;for(let e=0;e<this.m_ary_bIsStoped.length;e++)this.m_ary_bIsStoped[e]&&this.m_iStopedCount++;if(this.m_iStopedCount==this.m_ary_bIsStoped.length)return void(this.m_iTransCtrl=o.TC_End);for(let e=0;e<this.m_ary_bIsCanStop.length;e++)this.m_ary_bIsStoped[e]||this.OnTransing(e,this.m_ary_bIsCanStop[e],this.m_bIsShowParabola);break;case o.TC_End:this.m_iTransCtrl=o.TC_NONR,null!=this.AllStopBackEvn&&this.AllStopBackEvn.call(this.caller)}}ShowInitResultSpr(){for(let e=0;e<this.m_dic_ListImage.size;e++)for(let t=0;t<this.m_dic_ListImage.get(e).length;t++)if(t>0&&t<this.m_dic_ListImage.get(e).length-1){let a=this.m_dic_ListImage.get(e);a[t].spriteFrame=this.m_ary_SpItemRes[this.m_SpItemResIndex][this.m_arys_iItemResult[e][this.m_arys_iItemResult[0].length-t]],this.m_dic_ListImage.set(e,a)}else{let a=this.m_dic_ListImage.get(e),s=Math.floor(Math.random()*(this.m_ary_SpItemRes.length-1))+1;a[t].spriteFrame=this.m_ary_SpItemRes[this.m_SpItemResIndex][s],this.m_dic_ListImage.set(e,a)}}OnTrans(){if(this.m_iTransCtrl==o.TC_NONR){for(let e=0;e<this.m_arys_iItemResult.length;e++){for(let t=0;t<this.m_arys_iItemResult[0].length;t++)this.m_arys_iItemResult[e][t]=-1;this.m_ary_iShowResultIdTemp[e]=0,this.m_ary_fParabolaXTemp[e]=0,this.m_ary_bIsCanStop[e]=!1,this.m_ary_bIsStoped[e]=!1,this.m_ary_bIsCanShowParabola[e]=!1,this.m_ary_fTransSpeedNow[e]=this.m_ary_fTransSpeed[e]}this.m_iTransCtrl=o.TC_Trans}}SetAllItemResult(e){if(null!=e&&e.length==this.m_arys_iItemResult.length)for(let t=0;t<e.length;t++)for(let a=0;a<e[0].length;a++)this.m_arys_iItemResult[t][a]=e[t][a];else cc.log("[ItemCtrl_CR_MulRes_Spe]-> SetAllItemResult() \u8bbe\u7f6e\u7ed3\u679c\u5931\u8d25")}SetOneItemResult(e,t,a){e<0||e>=this.m_arys_iItemResult.length||t<0||t>=this.m_arys_iItemResult[0].length||a<0||a>=this.m_ary_SpItemRes.length?cc.log("[ItemCtrl_CR_MulRes_Spe]-> SetOneResultImage() \u4f20\u5165\u53c2\u6570\u6709\u8bef\uff01col\uff1a"+e+"    row"+t+"  iResult\uff1a"+a):(this.m_arys_iItemResult[e][t]=a,this.m_dic_ListImage[e][this.m_dic_ListImage[e].Count-2-t].sprite=this.m_ary_SpItemRes[this.m_arys_iItemResult[e][t]])}SetAllItemStop(){if(this.m_iTransCtrl==o.TC_Trans)for(let e=0;e<this.m_ary_bIsCanStop.length;e++)this.m_ary_bIsCanStop[e]=!0}SetAColItemStop(e){this.m_iTransCtrl!=o.TC_Trans||e<0||e>=this.m_ary_bIsCanStop.length?cc.log("[ItemCtrl_CR_MulRes_Spe]-> SetAColItemStop() \u5931\u8d25\uff01m_iTransCtrl= "+this.m_iTransCtrl+"   col\uff1a"+e):this.m_ary_bIsCanStop[e]=!0}Get_m_ary_bIsCanStop(e){return!(e<0||e>=this.m_ary_bIsCanStop.length)&&this.m_ary_bIsCanStop[e]}Get_m_ary_bIsStoped(e){return!(e<0||e>=this.m_ary_bIsStoped.length)&&this.m_ary_bIsStoped[e]}GetImage(e,t){return e<0||e>=this.m_arys_iItemResult.length||t<0||t>=this.m_arys_iItemResult[0].length?null:this.m_dic_ListImage.get(e)[this.m_dic_ListImage.get(e).length-2-t]}Get_IsAllItemTransEnd(){return this.m_iTransCtrl==o.TC_NONR}SetModifySpeed(e,t=.5){e<0||e>this.m_ary_fTransSpeedNow.length||t<=0||(this.m_ary_fTransSpeedNow[e]=this.m_ary_fTransSpeed[e]*t)}OnTransing(e,t,a){this.m_ary_iShowResultIdTemp[e]<this.m_arys_iItemResult[0].length?this.OnTransLogic(e,t):this.m_ary_bIsCanShowParabola[e]?a?this.ShowParabolaEff(e,this.ParabolaLogic(e,this.m_fParabolaHeight)):(this.m_ary_bIsStoped[e]=!0,this.ShowParabolaEff(e,0),null!=this.AColStopBackEvn&&this.AColStopBackEvn.call(this.caller,e)):this.OnTransLogic(e,!1)}OnTransLogic(e,t){let a=this.m_ary_fTransSpeedNow[e]*cc.director.getDeltaTime(),s=this.m_dic_ListImage.get(e);for(let i=0;i<this.m_dic_ListImage.get(e).length;i++)s[i].node.position=cc.v3(s[i].node.position.x,s[i].node.y-a,0);let n=s[0];if(n.node.position.y<=this.m_ary_VecStartAncPos[0].y-this.m_fImageHeight){this.m_ary_iShowResultIdTemp[e]>=this.m_arys_iItemResult[0].length&&(this.m_ary_bIsCanShowParabola[e]=!0,t=!1);let a=0;t?-1!=this.m_arys_iItemResult[e][this.m_arys_iItemResult[0].length-1]&&(a=this.m_arys_iItemResult[e][this.m_arys_iItemResult[0].length-1-this.m_ary_iShowResultIdTemp[e]],n.spriteFrame=this.m_ary_SpItemRes[this.m_SpItemResIndex][a],this.m_ary_iShowResultIdTemp[e]++):(a=Math.floor(Math.random()*(this.m_ary_SpItemRes.length-1)),n.spriteFrame=this.m_ary_SpItemRes[this.m_SpItemResIndex][a]);let i=n.node.position.y-this.m_ary_VecStartAncPos[0].y+this.m_fImageHeight;n.node.position=cc.v3(this.m_ary_VecStartAncPos[this.m_ary_VecStartAncPos.length-1].x,this.m_ary_VecStartAncPos[this.m_ary_VecStartAncPos.length-1].y+i,0),s.shift(),s.push(n),this.m_dic_ListImage.set(e,s)}}ParabolaLogic(e,t){this.m_ary_fParabolaXTemp[e]+=cc.director.getDeltaTime()*this.m_iParabolaReboundSpeed;let a=this.m_fX1+this.m_ary_fParabolaXTemp[e];return(a=(a=a<this.m_fX1?this.m_fX1:a)>this.m_fX2?this.m_fX2:a)>=this.m_fX2&&(this.m_ary_bIsStoped[e]=!0,null!=this.AColStopBackEvn&&this.AColStopBackEvn.call(this.caller,e)),a*a-t}ShowParabolaEff(e,t){let a=this.m_dic_ListImage.get(e);for(let s=0;s<a.length;s++)this.m_ary_bIsStoped[e]?a[s].node.position=cc.v3(this.m_ary_VecStartAncPos[s].x,this.m_ary_VecStartAncPos[s].y,0):a[s].node.position=cc.v3(this.m_ary_VecStartAncPos[s].x,this.m_ary_VecStartAncPos[s].y+t,0);this.m_dic_ListImage.set(e,a)}};r=s([n],r),a.default=r,cc._RF.pop()},{}],ItemCtrl_CR:[function(e,t,a){"use strict";cc._RF.push(t,"fdf675rmt9PFonod679z3sC","ItemCtrl_CR");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0});const{ccclass:n,property:i}=cc._decorator;var o;(function(e){e[e.TC_NONR=0]="TC_NONR",e[e.TC_Trans=1]="TC_Trans",e[e.TC_End=2]="TC_End"})(o||(o={}));let r=class extends cc.Component{constructor(...e){super(),this.m_iTransCtrl=o.TC_NONR,this.caller=null,this.AllStopBackEvn=null,this.AColStopBackEvn=null,this.m_fImageHeight=0,this.m_ary_fTransSpeed=[],this.m_ary_fTransSpeedNow=[],this.m_arys_iItemResult=new Array,this.m_ary_iShowResultIdTemp=[],this.m_ary_bIsCanStop=[],this.m_ary_bIsStoped=[],this.m_fX1=0,this.m_fX2=0,this.m_fParabolaHeight=0,this.m_iParabolaReboundSpeed=0,this.m_ary_fParabolaXTemp=[],this.m_ary_bIsCanShowParabola=[],this.m_iStopedCount=0,this.m_ary_SpItemRes=[],this.m_dic_ListImage=null,this.m_ary_VecStartAncPos=[];let t=e[0],a=e[1],s=e[2],n=e[3],i=e[4],r=e[5],l=e[6],c=e[7],d=e[8];if(null==t||null==a||r<0)return;c<=0&&(c=40),this.m_ary_SpItemRes=t,this.m_dic_ListImage=new Map;for(let o=0;o<a.length;o++){let e=new Array(a[0].length);for(let t=0;t<a[0].length;t++)e[t]=a[o][t];this.m_dic_ListImage.set(o,e)}for(let o=0;o<a[0].length;o++){let e=a[0][o].node.position;this.m_ary_VecStartAncPos[o]=cc.v2(e.x,e.y)}this.m_fImageHeight=Math.abs(this.m_ary_VecStartAncPos[1].y-this.m_ary_VecStartAncPos[0].y),this.caller=s,this.AllStopBackEvn=n,this.AColStopBackEvn=i,this.m_bIsShowParabola=l,this.m_iParabolaReboundSpeed=c,this.m_fParabolaHeight=this.m_fImageHeight*d;let h=a.length,_=a[0].length-2;this.m_ary_fTransSpeed=new Array(h),this.m_ary_fTransSpeedNow=new Array(h);for(let o=0;o<this.m_ary_fTransSpeed.length;o++)this.m_ary_fTransSpeed[o]=r,this.m_ary_fTransSpeedNow[o]=r;this.m_ary_iShowResultIdTemp=new Array(h);for(let o=0;o<h;o++){this.m_arys_iItemResult[o]=[];for(let e=0;e<_;e++)this.m_arys_iItemResult[o][e]=0}this.m_ary_bIsCanStop=new Array(h),this.m_ary_bIsStoped=new Array(h),this.m_ary_fParabolaXTemp=new Array(h),this.m_ary_bIsCanShowParabola=new Array(h),this.m_fX1=-Math.sqrt(this.m_fParabolaHeight),this.m_fX2=-this.m_fX1}StateItemCtrl(){switch(this.m_iTransCtrl){case o.TC_NONR:break;case o.TC_Trans:this.m_iStopedCount=0;for(let e=0;e<this.m_ary_bIsStoped.length;e++)this.m_ary_bIsStoped[e]&&this.m_iStopedCount++;if(this.m_iStopedCount==this.m_ary_bIsStoped.length)return void(this.m_iTransCtrl=o.TC_End);for(let e=0;e<this.m_ary_bIsCanStop.length;e++)this.m_ary_bIsStoped[e]||this.OnTransing(e,this.m_ary_bIsCanStop[e],this.m_bIsShowParabola);break;case o.TC_End:this.m_iTransCtrl=o.TC_NONR,null!=this.AllStopBackEvn&&this.AllStopBackEvn.call(this.caller)}}ShowInitResultSpr(){for(let e=0;e<this.m_dic_ListImage.size;e++)for(let t=0;t<this.m_dic_ListImage.get(e).length;t++)if(t>0&&t<this.m_dic_ListImage.get(e).length-1){let a=this.m_dic_ListImage.get(e);a[t].spriteFrame=this.m_ary_SpItemRes[this.m_arys_iItemResult[e][this.m_arys_iItemResult[0].length-t]],this.m_dic_ListImage.set(e,a)}else{let a=this.m_dic_ListImage.get(e),s=Math.floor(Math.random()*(this.m_ary_SpItemRes.length-1))+1;a[t].spriteFrame=this.m_ary_SpItemRes[s],this.m_dic_ListImage.set(e,a)}}OnTrans(){if(this.m_iTransCtrl==o.TC_NONR){for(let e=0;e<this.m_arys_iItemResult.length;e++){for(let t=0;t<this.m_arys_iItemResult[0].length;t++)this.m_arys_iItemResult[e][t]=-1;this.m_ary_iShowResultIdTemp[e]=0,this.m_ary_fParabolaXTemp[e]=0,this.m_ary_bIsCanStop[e]=!1,this.m_ary_bIsStoped[e]=!1,this.m_ary_bIsCanShowParabola[e]=!1,this.m_ary_fTransSpeedNow[e]=this.m_ary_fTransSpeed[e]}this.m_iTransCtrl=o.TC_Trans}}SetAllItemResult(e){if(null!=e&&e.length==this.m_arys_iItemResult.length)for(let t=0;t<e.length;t++)for(let a=0;a<e[0].length;a++)this.m_arys_iItemResult[t][a]=e[t][a];else cc.log("[ItemCtrl_CR]-> SetAllItemResult() \u8bbe\u7f6e\u7ed3\u679c\u5931\u8d25")}SetOneItemResult(e,t,a){e<0||e>=this.m_arys_iItemResult.length||t<0||t>=this.m_arys_iItemResult[0].length||a<0||a>=this.m_ary_SpItemRes.length?cc.log("[ItemCtrl_CR]-> SetOneResultImage() \u4f20\u5165\u53c2\u6570\u6709\u8bef\uff01col\uff1a"+e+"    row"+t+"  iResult\uff1a"+a):(this.m_arys_iItemResult[e][t]=a,this.m_dic_ListImage[e][this.m_dic_ListImage[e].Count-2-t].sprite=this.m_ary_SpItemRes[this.m_arys_iItemResult[e][t]])}SetAllItemStop(){if(this.m_iTransCtrl==o.TC_Trans)for(let e=0;e<this.m_ary_bIsCanStop.length;e++)this.m_ary_bIsCanStop[e]=!0}SetAColItemStop(e){this.m_iTransCtrl!=o.TC_Trans||e<0||e>=this.m_ary_bIsCanStop.length?cc.log("[ItemCtrl_CR]-> SetAColItemStop() \u5931\u8d25\uff01m_iTransCtrl= "+this.m_iTransCtrl+"   col\uff1a"+e):this.m_ary_bIsCanStop[e]=!0}Get_m_ary_bIsCanStop(e){return!(e<0||e>=this.m_ary_bIsCanStop.length)&&this.m_ary_bIsCanStop[e]}Get_m_ary_bIsStoped(e){return!(e<0||e>=this.m_ary_bIsStoped.length)&&this.m_ary_bIsStoped[e]}GetImage(e,t){return e<0||e>=this.m_arys_iItemResult.length||t<0||t>=this.m_arys_iItemResult[0].length?null:this.m_dic_ListImage.get(e)[this.m_dic_ListImage.get(e).length-2-t]}Get_IsAllItemTransEnd(){return this.m_iTransCtrl==o.TC_NONR}SetModifySpeed(e,t=.5){e<0||e>this.m_ary_fTransSpeedNow.length||t<=0||(this.m_ary_fTransSpeedNow[e]=this.m_ary_fTransSpeed[e]*t)}OnTransing(e,t,a){this.m_ary_iShowResultIdTemp[e]<this.m_arys_iItemResult[0].length?this.OnTransLogic(e,t):this.m_ary_bIsCanShowParabola[e]?a?this.ShowParabolaEff(e,this.ParabolaLogic(e,this.m_fParabolaHeight)):(this.m_ary_bIsStoped[e]=!0,this.ShowParabolaEff(e,0),null!=this.AColStopBackEvn&&this.AColStopBackEvn.call(this.caller,e)):this.OnTransLogic(e,!1)}OnTransLogic(e,t){let a=this.m_ary_fTransSpeedNow[e]*cc.director.getDeltaTime(),s=this.m_dic_ListImage.get(e);for(let i=0;i<this.m_dic_ListImage.get(e).length;i++)s[i].node.position=cc.v3(s[i].node.position.x,s[i].node.y-a,0);let n=s[0];if(n.node.position.y<=this.m_ary_VecStartAncPos[0].y-this.m_fImageHeight){this.m_ary_iShowResultIdTemp[e]>=this.m_arys_iItemResult[0].length&&(this.m_ary_bIsCanShowParabola[e]=!0,t=!1);let a=0;t?-1!=this.m_arys_iItemResult[e][this.m_arys_iItemResult[0].length-1]&&(a=this.m_arys_iItemResult[e][this.m_arys_iItemResult[0].length-1-this.m_ary_iShowResultIdTemp[e]],n.spriteFrame=this.m_ary_SpItemRes[a],this.m_ary_iShowResultIdTemp[e]++):(a=Math.floor(Math.random()*(this.m_ary_SpItemRes.length-1)),n.spriteFrame=this.m_ary_SpItemRes[a]);let i=n.node.position.y-this.m_ary_VecStartAncPos[0].y+this.m_fImageHeight;n.node.position=cc.v3(this.m_ary_VecStartAncPos[this.m_ary_VecStartAncPos.length-1].x,this.m_ary_VecStartAncPos[this.m_ary_VecStartAncPos.length-1].y+i,0),s.shift(),s.push(n),this.m_dic_ListImage.set(e,s)}}ParabolaLogic(e,t){this.m_ary_fParabolaXTemp[e]+=cc.director.getDeltaTime()*this.m_iParabolaReboundSpeed;let a=this.m_fX1+this.m_ary_fParabolaXTemp[e];return(a=(a=a<this.m_fX1?this.m_fX1:a)>this.m_fX2?this.m_fX2:a)>=this.m_fX2&&(this.m_ary_bIsStoped[e]=!0,null!=this.AColStopBackEvn&&this.AColStopBackEvn.call(this.caller,e)),a*a-t}ShowParabolaEff(e,t){let a=this.m_dic_ListImage.get(e);for(let s=0;s<a.length;s++)this.m_ary_bIsStoped[e]?a[s].node.position=cc.v3(this.m_ary_VecStartAncPos[s].x,this.m_ary_VecStartAncPos[s].y,0):a[s].node.position=cc.v3(this.m_ary_VecStartAncPos[s].x,this.m_ary_VecStartAncPos[s].y+t,0);this.m_dic_ListImage.set(e,a)}Final(){cc.error("Final==1"),this.unscheduleAllCallbacks(),this.caller=null,this.AllStopBackEvn=null,this.AColStopBackEvn=null,this.m_dic_ListImage.clear(),this.m_ary_SpItemRes=null}};r=s([n],r),a.default=r,cc._RF.pop()},{}],JackpotNumChange:[function(e,t,a){"use strict";cc._RF.push(t,"8b18e/ydJFCcY6pPempBJ8m","JackpotNumChange");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0});const n=e("./JackpotNum"),{ccclass:i,property:o}=cc._decorator;let r=class extends cc.Component{constructor(){super(...arguments),this.numPrefab=null,this.numNodeList=[],this.isImmediately=!1,this.numSpriteFrames=null}onLoad(){this.numPrefab=this.node.getChildByName("JackpotNum")}start(){}setJackpot(e){this.isImmediately=!0,this.setString(e)}setString(e){if(null==this.numSpriteFrames||this.numSpriteFrames.length<=0)return void cc.log("\u5f69\u91d1\u6570\u5b57\u56fe\u7247\u4e3anull");let t=e.toFixed(2),a=[],s=0;for(let n=t.length-1;n>=0;n--)s>3&&s%3==0&&a.push(","),a.push(t[n]),s++;let i=[];i.push("$");for(let n=a.length-1;n>=0;n--)i.push(a[n]);if(this.numNodeList.length<i.length)for(let o=this.numNodeList.length;o<i.length;o++){let e=cc.instantiate(this.numPrefab);e.setParent(this.node),e.addComponent(n.default).initNum(this.numSpriteFrames),this.numNodeList.push(e)}else if(this.numNodeList.length>i.length)for(let n=i.length;n<this.numNodeList.length;n++)this.numNodeList[n].active=!1;for(let o=0;o<i.length;o++)this.numNodeList[o].active=!0,","!=i[o]&&"."!=i[o]&&"$"!=i[o]?this.isImmediately?this.numNodeList[o].getComponent(n.default).setNum(Number(i[o])):this.numNodeList[o].getComponent(n.default).changeNum(Number(i[o])):this.numNodeList[o].getComponent(n.default).setOther(i[o]);this.isImmediately=!1}setNumSpriteFrame(e){this.numSpriteFrames=e}};r=s([i],r),a.default=r,cc._RF.pop()},{"./JackpotNum":"JackpotNum"}],JackpotNum:[function(e,t,a){"use strict";cc._RF.push(t,"3d928txDMBH96jiLUOHWjSa","JackpotNum");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0});const{ccclass:n,property:i}=cc._decorator;let o=class extends cc.Component{constructor(){super(...arguments),this.listCount=3,this.numList=[],this.numListStartPosition=[],this.tagNum=0,this.curNum=0,this.isPlus=!0,this.changeTimeStep=.2,this.numHeight=0,this.isPlaying=!1,this.numSpriteFrames=null}start(){}initNum(e){for(let t=0;t<this.listCount;t++){let e=this.node.getChildByName("Num_"+t);this.numList.push(e),this.numListStartPosition.push(e.getPosition())}this.numHeight=this.numList[0].height,this.numSpriteFrames=e}setNum(e){for(let t=0;t<this.listCount;t++)cc.tween(this.numList[t]).stop(),this.numList[t].setPosition(this.numListStartPosition[t]);this.curNum=e,this.curNum-1<0?this.numList[2].getComponent(cc.Sprite).spriteFrame=this.numSpriteFrames[this.curNum-1+10]:this.numList[2].getComponent(cc.Sprite).spriteFrame=this.numSpriteFrames[this.curNum-1],this.numList[1].getComponent(cc.Sprite).spriteFrame=this.numSpriteFrames[this.curNum],this.curNum+1>9?this.numList[0].getComponent(cc.Sprite).spriteFrame=this.numSpriteFrames[this.curNum+1-10]:this.numList[0].getComponent(cc.Sprite).spriteFrame=this.numSpriteFrames[this.curNum+1]}setOther(e){for(let t=0;t<this.listCount;t++)cc.tween(this.numList[t]).stop(),this.numList[t].setPosition(this.numListStartPosition[t]);"."==e?this.numList[1].getComponent(cc.Sprite).spriteFrame=this.numSpriteFrames[10]:","==e?this.numList[1].getComponent(cc.Sprite).spriteFrame=this.numSpriteFrames[11]:"$"==e&&(this.numList[1].getComponent(cc.Sprite).spriteFrame=this.numSpriteFrames[12]),this.curNum=0}changeNumAnimation(){if(this.isPlaying=!0,this.isPlus){let e=0;for(let t=0;t<this.listCount;t++)this.numList[t].position.y>=this.numHeight&&(this.numList[t].setPosition(0,2*-this.numHeight),this.curNum+2>9?this.numList[t].getComponent(cc.Sprite).spriteFrame=this.numSpriteFrames[this.curNum+2-10]:this.numList[t].getComponent(cc.Sprite).spriteFrame=this.numSpriteFrames[this.curNum+2]),cc.tween(this.numList[t]).by(this.changeTimeStep,{y:this.numHeight}).call(()=>{3==(e+=1)&&(this.curNum+=1,this.curNum>9&&(this.curNum-=10,this.tagNum-=10),this.curNum<this.tagNum?this.changeNumAnimation():this.isPlaying=!1)}).start()}}changeNum(e){this.tagNum=e,this.tagNum!=this.curNum?(this.tagNum>this.curNum?this.isPlus=!0:this.tagNum+=10,this.isPlaying||(this.setNum(this.curNum),this.changeNumAnimation())):this.setNum(this.curNum)}};o=s([n],o),a.default=o,cc._RF.pop()},{}],LoadingBase1:[function(e,t,a){"use strict";cc._RF.push(t,"b7ca0zjmdNOYaXdWPmUJ9eQ","LoadingBase1");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0}),a.AssetType=void 0;const n=e("../../ClientBase/audioplayer"),i=e("../../ClientBase/BundleManager"),o=e("../../ClientBase/GameConfig"),r=e("../../ClientCommon/EventCenter"),l=e("../../ClientCommon/EventCommonCode"),c=e("../../ClientFrame/GameServerManager"),d=e("../../ClientFrame/LogonFrame"),h=e("./Fish/GameBaseFish"),_=e("./Slot/GameBaseSlot"),m=e("./Keno/GameBaseKeno"),u=e("./Casion/GameBaseCasion"),S=e("../../ClientBase/Tool"),g=e("../../ClientBase/UI/CommonUI"),{ccclass:f,property:I}=cc._decorator;var C;(function(e){e[e.AT_None=0]="AT_None",e[e.AT_Start=1]="AT_Start",e[e.AT_AB=2]="AT_AB",e[e.AT_Common=3]="AT_Common",e[e.AT_CommonRes=4]="AT_CommonRes",e[e.AT_Game=5]="AT_Game",e[e.AT_GameRes=6]="AT_GameRes",e[e.AT_GameResFinish=7]="AT_GameResFinish",e[e.AT_gamePlay=8]="AT_gamePlay",e[e.AT_gameNode=9]="AT_gameNode",e[e.AT_End=10]="AT_End",e[e.AT_Err=11]="AT_Err"})(C=a.AssetType||(a.AssetType={}));let p=class extends cc.Component{constructor(){super(...arguments),this.handlerPriority=4,this.handlerName="LoadingBase1",this.callerLoading=null,this.SetProgressEvn=null,this.ShowLogoEvn=null,this.SetLastProgressEvn=null,this.HideBtnReturnEvn=null,this.callerPlaze=null,this.Back2PlazeEvn=null,this.HideMaskBtnEvn=null,this.ShowMaskEvn=null,this.CompleteEnterGameEvn=null,this.isGoBack=!1,this.stop=!1,this.labelDes=null,this.kindID=0,this.isCom=!1,this.canGoBack=!0,this.myGamePlay=[],this.mAssetType=C.AT_None,this.mIsGoBack=!1,this.currProgress=0}addRootNode(e){}AddHandler(){}startLoad(e){this.kindID=e,cc.error("1====startLoad==="),this.mAssetType=C.AT_Start,this.isGoBack=!1,this.stop=!1,this.mIsGoBack=!1,this.currProgress=0,this.SetLastProgressEvn&&this.SetLastProgressEvn.call(this.callerLoading,this.currProgress),this.SetProgressEvn&&this.SetProgressEvn.call(this.callerLoading,this.currProgress),this.loadGameBundleHandle(this.kindID)}RemoveHandler(){this.unscheduleAllCallbacks(),this.callerLoading=null,this.SetProgressEvn=null,this.ShowLogoEvn=null,this.SetLastProgressEvn=null,this.HideBtnReturnEvn=null}handleEvent(e,t){switch(e){case l.EventCommonCode.InitSceneComplete:cc.log("ok \u5b8c\u6210"),console.error("==========",this.kindID),r.EventCenter.RemoveHandler(this)}}BundleInit(e,t,a,s,n,i){this.callerLoading=e,this.SetProgressEvn=a,this.ShowLogoEvn=s,this.SetLastProgressEvn=n,this.HideBtnReturnEvn=i,this.labelDes=t,this.isGoBack=!1,this.stop=!1}SetGameUrl(e){i.default.getInstance().SetUrl(e)}getGameUrl(){return cc.error("getGameUrl "),i.default.getInstance().getUrl()}loadGameBundleHandle(e){if(this.mAssetType=C.AT_AB,e>0){var t=i.default.getInstance().ClientGamesList[e].Category;if(o.CommonRes[t]&&(!o.CommonRes[t].NotLoadIds||o.CommonRes[t].NotLoadIds.indexOf(e)<0)){var a=o.CommonRes[t].bundleName;if(this.isCom=!0,this.labelDes&&(this.labelDes.string="Loading Common resources \u2026\u2026"),n=cc.assetManager.getBundle(a))cc.log("loadGameBundleHandle==\u516c\u5171bundle\u5982\u679c\u5b58\u5728\uff0c\u5219\u76f4\u63a5\u52a0\u8f7d\u901a\u7528\u8d44\u6e90load"),this.loadCommonPackage(a,e);else{cc.log("loadGameBundleHandle==\u516c\u5171bundle\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5219\u5148load"),this.mAssetType=C.AT_Common;let t=0;null!=this.SetProgressEvn&&this.SetProgressEvn.call(this.callerLoading,0);let n={version:globalThis.BundlerVerions[a],onFileProgress:(e,a)=>{a&&e/a>t&&(t=e/a),null!=this.SetProgressEvn&&this.SetProgressEvn.call(this.callerLoading,t/2)}};var s=a;""!=globalThis.mUrl&&globalThis.BundlerVerions[a]&&(cc.error("loadOptions.version::::",n.version,globalThis.useMainUrl),s=(1==globalThis.useMainUrl?globalThis.mUrl:"")+a),cc.assetManager.loadBundle(s,n,t=>{t?(cc.error("Common err",t.message),this.showMessage()):this.loadCommonPackage(a,e)})}}else{let t=i.default.getInstance().ClientGamesList[e];if(!t)return;var n;(n=cc.assetManager.getBundle(t.Bundle))?(i.default.getInstance().GameBundle[t.Bundle]=n,cc.error("1-\u8be5\u6e38\u620f\u7684\u8d44\u6e90\u5305\u5df2\u7ecf\u5b58\u5728\uff1a",e),this.onGameBundleLoaded(e,!0)):this.loadGameBundle(e)}}else i.default.getInstance().IsNeedSpecial()?this.ShowMask(!1):this.loadPlaza(0==e)}loadCommonPackage(e,t){this.mAssetType=C.AT_CommonRes;let a=50;this.isCom=!0,cc.assetManager.getBundle(e).loadDir("Res",(e,t)=>{if(t>0)if(this.stop)this.HideBtnReturnEvn&&this.HideBtnReturnEvn.call(this.callerLoading),a==t?(this.labelDes&&(this.labelDes.string=""),a--):(this.labelDes&&(this.labelDes.string="Waiting \u2026\u2026 "),0==--a&&(a=t));else{var s=e/t/2;null!=this.SetProgressEvn&&this.SetProgressEvn.call(this.callerLoading,s)}},e=>{e?this.stop?cc.error("stop loadCommonPackage error"):(cc.error("loadPlazaBaseRes Base",e),this.showMessage()):this.stop?this.goBack(!0):this.loadGameBundle(t,!0)})}loadGameBundle(e,t=!1){this.isCom=!1,this.mAssetType=C.AT_Game,i.default.getInstance().loadGameBundle(e,e=>{this.stop?this.goBack():(this.labelDes&&(this.labelDes.string="Loading Bundle \u2026\u2026"),null!=this.SetProgressEvn&&this.SetProgressEvn.call(this.callerLoading,e))},a=>{a?(cc.error("loadGameBundle===",a),this.stop?cc.error("stop loadGameBundle error"):(this.labelDes&&(this.labelDes.string="Loading Bundle error\u2026\u2026"),this.showMessage())):this.onGameBundleLoaded(e,t)})}showMessage(){}onGameBundleLoaded(e,t=!1){let a=50;this.mAssetType=C.AT_GameRes,i.default.getInstance().loadGameRes(e,e=>{this.stop?i.default.getInstance().IsNeedSpecial()?this.mIsGoBack||(this.mIsGoBack=!0):(this.HideBtnReturnEvn&&this.HideBtnReturnEvn.call(this.callerLoading),50==a?(this.labelDes&&(this.labelDes.string=""),a--):(this.labelDes&&(this.labelDes.string="Waiting \u2026\u2026 "),0==--a&&(a=50))):(t&&(e=.5+e/2),this.labelDes&&(this.labelDes.string="Loading resources \u2026\u2026"),null!=this.SetProgressEvn&&this.SetProgressEvn.call(this.callerLoading,e))},t=>{this.mAssetType=C.AT_GameResFinish,t?(cc.error("1----\u52a0\u8f7d\u6e38\u620f\u8d44\u6e90\u4e2d \u5f02\u5e38====",this.stop),this.stop?this.goBack():(this.labelDes&&(this.labelDes.string="Loading resources error \u2026\u2026 "),this.showMessage())):this.stop?(cc.error(" onGameResLoaded \u9000\u51fa",e),this.goBack()):(this.labelDes&&(this.labelDes.string="Loading Scene \u2026\u2026"),i.default.getInstance().IsNeedSpecial()?this.onGameResLoaded1(e):this.onGameResLoaded(e))})}onGameResLoaded(e){let t=i.default.getInstance().ClientGamesList[e];i.default.getInstance().GameBundle[t.Bundle].loadScene("GameScene"+t.Scene,(t,a)=>{t?this.stop?cc.log("stop onGameResLoaded error"):(cc.error("loadScene",t),this.labelDes&&(this.labelDes.string="Loading Scene error \u2026\u2026 "),this.showMessage()):this.stop?this.goBack():(this.addPrefComponent(e),cc.director.runSceneImmediate(a,()=>{},()=>{this.labelDes&&(this.labelDes.string="Run Scene \u2026\u2026 ")}))})}onGameResLoaded1(e){if(this.stop)return cc.error("stop onGameResLoaded1"),void this.goBack();this.canGoBack=!1;let t=i.default.getInstance().ClientGamesList[e];i.default.getInstance().ClientGamesList[e].Category,i.default.getInstance().ClientGamesList[e].Scene;let a=i.default.getInstance().GameBundle[t.Bundle];this.mAssetType=C.AT_gamePlay,a.load("Res/Prefab/GamePlay",cc.Prefab,(s,n)=>{if(!s)if(this.stop)this.getBackToPlaze();else{var i=cc.instantiate(n);if(i){let s=cc.director.getScene().getComponentInChildren("cc.Canvas");if(42==e||41==e||30==e?i.scale=1:t.IsPortrait?(i.scale=.4,null!=this.HideMaskBtnEvn&&this.HideMaskBtnEvn.call(this.callerPlaze)):i.scale=.9,this.myGamePlay.push(i),!this.stop)if(41==e){cc.error("\u8fd9\u662f\u8f6e\u76d8\uff01\uff01"),this.node.parent.addChild(i),cc.find("Main Camera",i).active=!1;var o="Res/Prefab/3dRoot";a.load(o,cc.Prefab,(t,s)=>{var n=cc.instantiate(s);this.node.parent.addChild(n),this.myGamePlay.push(n),a.load("Res/Prefab/CameraCtrl",cc.Prefab,(t,a)=>{var s=cc.instantiate(a);this.node.parent.addChild(s),this.myGamePlay.push(s),cc.find("Loading",this.node.parent).setSiblingIndex(5),this.addPrefComponent(e)})})}else 30==e?(this.node.parent.addChild(i),o="Res/Prefab/3dRoot",a.load(o,cc.Prefab,(t,a)=>{var s=cc.instantiate(a);this.node.parent.addChild(s),this.myGamePlay.push(s),cc.find("Loading",this.node.parent).setSiblingIndex(5),this.addPrefComponent(e)})):(s.node.addChild(i),cc.find("Loading",this.node.parent).setSiblingIndex(6),this.addPrefComponent(e))}else cc.error("gamePlay \u6e38\u620f\u9884\u5236\u4f53\u95ee\u9898==="),this.showMessage()}})}loadPlaza(e=!0){cc.error("loadPlaza>>>"),this.labelDes&&(this.labelDes.string="Loading Bundle \u2026\u2026");let t="Login";e&&(t="Plaza","CEPHEUS.STAR"==i.default.getInstance().PlatformName&&(t="Plaza1"),cc.error("loadPlaza>>>\u573a\u666f\u540d\u79f0:",t),d.default.getInstance().connectLogonServer(1)),null!=this.SetProgressEvn&&this.SetProgressEvn.call(this.callerLoading,0);{var a="Plaza";let s={onFileProgress:()=>{}};""!=globalThis.mUrl&&globalThis.BundlerVerions.Plaza&&(s.version=globalThis.BundlerVerions.Plaza,console.error("======loadOptions.version::::",s.version,globalThis.mUrl),a=(1==globalThis.useMainUrl?globalThis.mUrl:"")+"Plaza"),cc.assetManager.loadBundle(a,s,(a,s)=>{a?(this.labelDes&&(this.labelDes.string="Loading Bundle error \u2026\u2026"),cc.error("\u9519\u8bef\u4fe1\u606f\uff1a",a.message),console.log("\u9519\u8bef\u4fe1\u606f\uff1a",a.message),this.showMessage()):(i.default.getInstance().initBundles(),this.labelDes&&(this.labelDes.string="Loading resources \u2026\u2026"),s.loadDir("Res",(e,t)=>{t>0&&null!=this.SetProgressEvn&&this.SetProgressEvn.call(this.callerLoading,e/t)},a=>{a?(this.labelDes&&(this.labelDes.string="Loading resources error \u2026\u2026"),this.showMessage()):cc.director.loadScene(t,t=>{t?(this.labelDes&&(this.labelDes.string="Run Scene error\u2026\u2026 "),this.showMessage()):(cc.log("isPlaze",e),console.error("======isPlaze",e),this.labelDes&&(this.labelDes.string="Run Scene \u2026\u2026 "),cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE))})}))})}}goBack(e=!1){if(this.isGoBack)return;this.isGoBack=!0;let t=c.default.getInstance().KindID;if(this.getBackToPlaze(),this.HideBtnReturnEvn&&this.HideBtnReturnEvn.call(this.callerLoading),e)a=i.default.getInstance().ClientGamesList[t].Category,o.CommonRes[a]&&(s=o.CommonRes[a].bundleName,(n=cc.assetManager.getBundle(s))?i.default.getInstance().IsNeedSpecial()||(n.releaseAll(),cc.assetManager.removeBundle(n),this.ShowLogoEvn&&this.ShowLogoEvn.call(this.callerLoading,0),this.SetLastProgressEvn&&this.SetLastProgressEvn.call(this.callerLoading,0),this.loadPlaza(!0)):cc.error("common bundle \u4e0d\u5b58\u5728"));else{var a=i.default.getInstance().ClientGamesList[t].Category;if(o.CommonRes[a]){var s=o.CommonRes[a].bundleName;(n=cc.assetManager.getBundle(s))&&(i.default.getInstance().IsNeedSpecial()||(n.releaseAll(),cc.assetManager.removeBundle(n)))}let e=i.default.getInstance().ClientGamesList[t];if(!e)return void cc.error("!gameInfo");var n;(n=cc.assetManager.getBundle(e.Bundle))?(cc.error("\u6e38\u620f bundle \u5b58\u5728"),i.default.getInstance().IsNeedSpecial()?(n.releaseAll(),cc.assetManager.removeBundle(n),i.default.getInstance().GameBundle[e.Bundle]=null):(this.ShowLogoEvn&&this.ShowLogoEvn.call(this.callerLoading,0),this.SetLastProgressEvn&&this.SetLastProgressEvn.call(this.callerLoading,0),n.releaseAll(),cc.assetManager.removeBundle(n),i.default.getInstance().GameBundle[e.Bundle]=null,this.loadPlaza(!0))):cc.error("bundle \u4e0d\u5b58\u5728")}}onExit(){return cc.error("onExit==",this.canGoBack,this.mAssetType,this.mIsGoBack),this.mAssetType==C.AT_Common||this.mAssetType==C.AT_CommonRes?(cc.error("1------onExit==\u516c\u5171\u8d44\u6e90=="),!1):this.mAssetType==C.AT_Game?(cc.error("1------onExit==\u6e38\u620fbundle\u52a0\u8f7d \u4e0d\u9000\u51fa=="),!1):this.mAssetType==C.AT_End?(cc.error("1------onExit==\u6b63\u5e38\u8fdb\u6e38\u620f=="),i.default.getInstance().stopGameRes(this.kindID),!0):this.mAssetType==C.AT_GameResFinish||this.mAssetType==C.AT_gamePlay||this.mAssetType==C.AT_gameNode?(cc.error("1------onExit==\u6700\u540e\u9636\u6bb5 GamePlay==\u4e0d\u7ed9\u8fd4\u56de=="),!1):this.mAssetType<C.AT_GameRes?(cc.error("1------onExit==< AssetType.AT_GameRes==\u4e0d\u7ed9\u8fd4\u56de=="),!1):(cc.log("\u540e\u9000KindID=",this.kindID),i.default.getInstance().stopGameRes(this.kindID),this.mAssetType==C.AT_GameRes?(this.stop=!0,this.unscheduleAllCallbacks(),this.CompleteEnterGame(this.kindID),!1):this.mIsGoBack?(cc.error("onExit==>>>mAssetType:",this.mAssetType),!1):this.canGoBack?(cc.error("onExit===mAssetType:",this.mAssetType),this.stop=!0,this.unscheduleAllCallbacks(),this.CompleteEnterGame(this.kindID),!0):void 0)}GetGoBackStatue(){return this.isGoBack}addPrefComponent(e){var t=i.default.getInstance().ClientGamesList[e].Category;let a=i.default.getInstance().ClientGamesList[e].Scene,s=cc.assetManager.getBundle("Game1");this.mAssetType=C.AT_gameNode,s.load("prefab/NodeGame",cc.Prefab,(s,r)=>{if(!s&&!this.stop){let s=cc.instantiate(r);if(this.myNodeGame=s,o.GameCategory.Slot==t){let e=s.addComponent(_.default);this.node.parent.addChild(s),cc.director.getScene().getComponentInChildren("Game_"+a).setIGameBase(e)}else if(o.GameCategory.Fish==t){let t=s.addComponent(h.default);this.node.parent.addChild(s),n.AudioPlayer.Instance.setCurrBundle(i.default.getInstance().GameBundle[i.default.getInstance().ClientGamesList[e].Bundle]),cc.director.getScene().getComponentInChildren(a+"_Game").setIGameBase(t)}else if(o.GameCategory.Keno==t){let t=s.addComponent(m.default);this.node.parent.addChild(s),n.AudioPlayer.Instance.setCurrBundle(i.default.getInstance().GameBundle[i.default.getInstance().ClientGamesList[e].Bundle]),cc.director.getScene().getComponentInChildren(a+"_Game").setIGameBase(t)}else if(o.GameCategory.Casion==t){let t=s.addComponent(u.default);this.node.parent.addChild(s),n.AudioPlayer.Instance.setCurrBundle(i.default.getInstance().GameBundle[i.default.getInstance().ClientGamesList[e].Bundle]),cc.director.getScene().getComponentInChildren(a+"_Game").setIGameBase(t)}this.canGoBack=!0,this.mAssetType=C.AT_End}})}SetGameVersion(e){i.default.getInstance().SetGameVersion(e)}LogoImage(e){this.mLogoImage=e}getLogoImage(){return this.mLogoImage}getKindID(){return this.kindID}setfulleScreen(){S.fulleScreen(!0)}SetBack2PlazeFuction(e,t,a,s,n){this.callerPlaze=e,this.Back2PlazeEvn=t,this.HideMaskBtnEvn=a,this.ShowMaskEvn=s,this.CompleteEnterGameEvn=n}ShowMask(e){null!=this.ShowMaskEvn&&this.ShowMaskEvn.call(this.callerPlaze,e)}CompleteEnterGame(e){cc.error("CompleteEnterGame",e),null!=this.CompleteEnterGameEvn&&this.CompleteEnterGameEvn.call(this.callerPlaze,e)}getBackToPlaze(){null!=this.Back2PlazeEvn&&this.Back2PlazeEvn.call(this.callerPlaze);let e=cc.director.getScene().getComponentInChildren("PlazaBase");e&&e.goback(),this.deleteGamePlay(),d.default.getInstance().connectLogonServer(1)}checkGamePlay(){return!!(this.myGamePlay&&this.myGamePlay.length>0)}deleteGamePlay(){if(this.myGamePlay){for(let e=0;e<this.myGamePlay.length;e++)this.myGamePlay[e].destroy();this.myGamePlay=[]}this.myNodeGame&&this.myNodeGame.destroy()}setLastProgressEvn(){this.SetLastProgressEvn&&this.SetLastProgressEvn.call(this.callerLoading,0)}IsNeedSpecial(){return i.default.getInstance().IsNeedSpecial()}CommonUI_RootNode(e){g.default.RootNode=e}};p=s([f],p),a.default=p,cc._RF.pop()},{"../../ClientBase/BundleManager":void 0,"../../ClientBase/GameConfig":void 0,"../../ClientBase/Tool":void 0,"../../ClientBase/UI/CommonUI":void 0,"../../ClientBase/audioplayer":void 0,"../../ClientCommon/EventCenter":void 0,"../../ClientCommon/EventCommonCode":void 0,"../../ClientFrame/GameServerManager":void 0,"../../ClientFrame/LogonFrame":void 0,"./Casion/GameBaseCasion":"GameBaseCasion","./Fish/GameBaseFish":"GameBaseFish","./Keno/GameBaseKeno":"GameBaseKeno","./Slot/GameBaseSlot":"GameBaseSlot"}],LoadingBase:[function(e,t,a){"use strict";cc._RF.push(t,"8cbf0aXAmBKw6SBatKRQhz+","LoadingBase");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0}),a.AssetType=void 0;const n=e("../../ClientBase/audioplayer"),i=e("../../ClientBase/BundleManager"),o=e("../../ClientBase/GameConfig"),r=e("../../ClientCommon/EventCenter"),l=e("../../ClientCommon/EventCommonCode"),c=e("../../ClientFrame/GameServerManager"),d=e("../../ClientFrame/LogonFrame"),h=e("./Fish/GameBaseFish"),_=e("./Slot/GameBaseSlot"),m=e("./Keno/GameBaseKeno"),u=e("./Casion/GameBaseCasion"),S=e("../../BaseRes/PopMessage/PopMessage"),g=e("../../ClientBase/Tool"),f=e("../../ClientBase/UI/CommonUI"),{ccclass:I,property:C}=cc._decorator;var p;(function(e){e[e.AT_None=0]="AT_None",e[e.AT_Start=1]="AT_Start",e[e.AT_AB=2]="AT_AB",e[e.AT_Common=3]="AT_Common",e[e.AT_CommonRes=4]="AT_CommonRes",e[e.AT_Game=5]="AT_Game",e[e.AT_GameRes=6]="AT_GameRes",e[e.AT_GameResFinish=7]="AT_GameResFinish",e[e.AT_gamePlay=8]="AT_gamePlay",e[e.AT_gameNode=9]="AT_gameNode",e[e.AT_End=10]="AT_End",e[e.AT_Err=11]="AT_Err"})(p=a.AssetType||(a.AssetType={}));let y=class extends cc.Component{constructor(){super(...arguments),this.handlerPriority=4,this.handlerName="LoadingBase",this.callerLoading=null,this.SetProgressEvn=null,this.ShowLogoEvn=null,this.SetLastProgressEvn=null,this.HideBtnReturnEvn=null,this.callerPlaze=null,this.Back2PlazeEvn=null,this.HideMaskBtnEvn=null,this.ShowMaskEvn=null,this.CompleteEnterGameEvn=null,this.isGoBack=!1,this.stop=!1,this.labelDes=null,this.targetNode=null,this.kindID=0,this.isCom=!1,this.canGoBack=!0,this.myGamePlay=[],this.mAssetType=p.AT_None,this.mIsGoBack=!1,this.currProgress=0}addRootNode(e){this.targetNode=e,f.default.RootNode=e}AddHandler(){r.EventCenter.AddHandler(this)}startLoad(e){if(cc.error("1====startLoad==="),this.mAssetType=p.AT_Start,r.EventCenter.AddHandler(this),this.isGoBack=!1,this.stop=!1,this.mIsGoBack=!1,this.targetNode.active=!0,this.cc_dev=e,this.currProgress=0,c.default.getInstance().KindID>0?(i.default.getInstance().IsNeedSpecial()||g.fulleScreen(this.cc_dev),this.kindID=c.default.getInstance().KindID,null!=this.ShowLogoEvn&&this.ShowLogoEvn(c.default.getInstance().KindID)):this.kindID=c.default.getInstance().KindID,this.SetLastProgressEvn&&this.SetLastProgressEvn.call(this.callerLoading,this.currProgress),this.SetProgressEvn&&this.SetProgressEvn.call(this.callerLoading,this.currProgress),c.default.getInstance().KindID>0)if(i.default.getInstance().IsNeedSpecial()){let e=function(){0==cc.assetManager.getQueueLenth()&&(this.unschedule(e),this.loadGameBundleHandle(c.default.getInstance().KindID)),this.currProgress+=.01,this.SetProgressEvn&&this.SetProgressEvn.call(this.callerLoading,this.currProgress)};0==cc.assetManager.getQueueLenth()?this.loadGameBundleHandle(c.default.getInstance().KindID):this.schedule(e,.1)}else this.loadGameBundleHandle(c.default.getInstance().KindID);else this.loadGameBundleHandle(c.default.getInstance().KindID)}RemoveHandler(){this.unscheduleAllCallbacks(),this.callerLoading=null,this.SetProgressEvn=null,this.ShowLogoEvn=null,this.SetLastProgressEvn=null,this.HideBtnReturnEvn=null}handleEvent(e,t){switch(e){case l.EventCommonCode.InitSceneComplete:cc.log("ok \u5b8c\u6210"),console.error("==========",this.kindID),this.kindID>0?(this.targetNode.active=!1,i.default.getInstance().IsNeedSpecial()?this.CompleteEnterGame(this.kindID):this.targetNode.destroy(),null!=this.SetProgressEvn&&this.SetProgressEvn(0)):(this.targetNode.active=!1,this.targetNode.destroy()),r.EventCenter.RemoveHandler(this)}}BundleInit(e,t,a,s,n,i){this.callerLoading=e,this.SetProgressEvn=a,this.ShowLogoEvn=s,this.SetLastProgressEvn=n,this.HideBtnReturnEvn=i,this.labelDes=t,this.isGoBack=!1,this.stop=!1}SetGameUrl(e){i.default.getInstance().SetUrl(e)}getGameUrl(){return cc.error("getGameUrl "),i.default.getInstance().getUrl()}loadGameBundleHandle(e){if(this.mAssetType=p.AT_AB,e>0){var t=i.default.getInstance().ClientGamesList[e].Category;if(o.CommonRes[t]&&(!o.CommonRes[t].NotLoadIds||o.CommonRes[t].NotLoadIds.indexOf(e)<0)){var a=o.CommonRes[t].bundleName;if(this.isCom=!0,this.labelDes&&(this.labelDes.string="Loading Common resources \u2026\u2026"),n=cc.assetManager.getBundle(a))cc.log("loadGameBundleHandle==\u516c\u5171bundle\u5982\u679c\u5b58\u5728\uff0c\u5219\u76f4\u63a5\u52a0\u8f7d\u901a\u7528\u8d44\u6e90load"),this.loadCommonPackage(a,e);else{cc.log("loadGameBundleHandle==\u516c\u5171bundle\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5219\u5148load"),this.mAssetType=p.AT_Common;let t=0;null!=this.SetProgressEvn&&this.SetProgressEvn.call(this.callerLoading,0);let n={version:globalThis.BundlerVerions[a],onFileProgress:(e,a)=>{a&&e/a>t&&(t=e/a),null!=this.SetProgressEvn&&this.SetProgressEvn.call(this.callerLoading,t/2)}};var s=a;""!=globalThis.mUrl&&globalThis.BundlerVerions[a]&&(cc.error("loadOptions.version::::",n.version,globalThis.useMainUrl),s=(1==globalThis.useMainUrl?globalThis.mUrl:"")+a),cc.assetManager.loadBundle(s,n,t=>{t?(cc.error("Common err",t.message),this.showMessage()):this.loadCommonPackage(a,e)})}}else{let t=i.default.getInstance().ClientGamesList[e];if(!t)return;var n;(n=cc.assetManager.getBundle(t.Bundle))?(i.default.getInstance().GameBundle[t.Bundle]=n,cc.error("1-\u8be5\u6e38\u620f\u7684\u8d44\u6e90\u5305\u5df2\u7ecf\u5b58\u5728\uff1a",e),this.onGameBundleLoaded(e,!0)):this.loadGameBundle(e)}}else i.default.getInstance().IsNeedSpecial()?(this.ShowMask(!1),this.targetNode.destroy()):this.loadPlaza(0==e)}loadCommonPackage(e,t){this.mAssetType=p.AT_CommonRes;let a=50;this.isCom=!0,cc.assetManager.getBundle(e).loadDir("Res",(e,t)=>{if(t>0)if(this.stop)this.HideBtnReturnEvn&&this.HideBtnReturnEvn.call(this.callerLoading),a==t?(this.labelDes&&(this.labelDes.string=""),a--):(this.labelDes&&(this.labelDes.string="Waiting \u2026\u2026 "),0==--a&&(a=t));else{var s=e/t/2;null!=this.SetProgressEvn&&this.SetProgressEvn.call(this.callerLoading,s)}},e=>{e?this.stop?cc.error("stop loadCommonPackage error"):(cc.error("loadPlazaBaseRes Base",e),this.showMessage()):this.stop?this.goBack(!0):this.loadGameBundle(t,!0)})}loadGameBundle(e,t=!1){this.isCom=!1,this.mAssetType=p.AT_Game,i.default.getInstance().loadGameBundle(e,e=>{this.stop?this.goBack():(this.labelDes&&(this.labelDes.string="Loading Bundle \u2026\u2026"),null!=this.SetProgressEvn&&this.SetProgressEvn.call(this.callerLoading,e))},a=>{a?(cc.error("loadGameBundle===",a),this.stop?cc.error("stop loadGameBundle error"):(this.labelDes&&(this.labelDes.string="Loading Bundle error\u2026\u2026"),this.showMessage())):this.onGameBundleLoaded(e,t)})}showMessage(){console.log("=====showMessage1",this.targetNode.parent),S.default.ShowMessage(S.messageType.newWork,this.targetNode.parent,()=>{cc.sys.isBrowser?window.location.reload():this.goBack()})}onGameBundleLoaded(e,t=!1){let a=50;this.mAssetType=p.AT_GameRes,i.default.getInstance().loadGameRes(e,e=>{this.stop?i.default.getInstance().IsNeedSpecial()?this.mIsGoBack||(this.mIsGoBack=!0):(this.HideBtnReturnEvn&&this.HideBtnReturnEvn.call(this.callerLoading),50==a?(this.labelDes&&(this.labelDes.string=""),a--):(this.labelDes&&(this.labelDes.string="Waiting \u2026\u2026 "),0==--a&&(a=50))):(t&&(e=.5+e/2),this.labelDes&&(this.labelDes.string="Loading resources \u2026\u2026"),null!=this.SetProgressEvn&&this.SetProgressEvn.call(this.callerLoading,e))},t=>{this.mAssetType=p.AT_GameResFinish,t?(cc.error("1----\u52a0\u8f7d\u6e38\u620f\u8d44\u6e90\u4e2d \u5f02\u5e38====",this.stop),this.stop?this.goBack():(this.labelDes&&(this.labelDes.string="Loading resources error \u2026\u2026 "),this.showMessage())):this.stop?(cc.error(" onGameResLoaded \u9000\u51fa",e),this.goBack()):(this.labelDes&&(this.labelDes.string="Loading Scene \u2026\u2026"),i.default.getInstance().IsNeedSpecial()?this.onGameResLoaded1(e):this.onGameResLoaded(e))})}onGameResLoaded(e){let t=i.default.getInstance().ClientGamesList[e];i.default.getInstance().GameBundle[t.Bundle].loadScene("GameScene"+t.Scene,(t,a)=>{t?this.stop?cc.log("stop onGameResLoaded error"):(cc.error("loadScene",t),this.labelDes&&(this.labelDes.string="Loading Scene error \u2026\u2026 "),this.showMessage()):this.stop?this.goBack():(this.addPrefComponent(e),cc.director.runSceneImmediate(a,()=>{},()=>{this.labelDes&&(this.labelDes.string="Run Scene \u2026\u2026 ")}))})}onGameResLoaded1(e){if(this.stop)return cc.error("stop onGameResLoaded1"),void this.goBack();this.canGoBack=!1;let t=i.default.getInstance().ClientGamesList[e];i.default.getInstance().ClientGamesList[e].Category,i.default.getInstance().ClientGamesList[e].Scene;let a=i.default.getInstance().GameBundle[t.Bundle];this.mAssetType=p.AT_gamePlay,a.load("Res/Prefab/GamePlay",cc.Prefab,(s,n)=>{if(!s)if(this.stop)this.getBackToPlaze();else{var i=cc.instantiate(n);if(i){let s=cc.director.getScene().getComponentInChildren("cc.Canvas");if(42==e||41==e||30==e?i.scale=1:t.IsPortrait?(i.scale=.4,null!=this.HideMaskBtnEvn&&this.HideMaskBtnEvn.call(this.callerPlaze)):i.scale=.9,this.myGamePlay.push(i),!this.stop)if(41==e){cc.error("\u8fd9\u662f\u8f6e\u76d8\uff01\uff01"),this.node.parent.addChild(i),cc.find("Main Camera",i).active=!1;var o="Res/Prefab/3dRoot";a.load(o,cc.Prefab,(t,s)=>{var n=cc.instantiate(s);this.node.parent.addChild(n),this.myGamePlay.push(n),a.load("Res/Prefab/CameraCtrl",cc.Prefab,(t,a)=>{var s=cc.instantiate(a);this.node.parent.addChild(s),this.myGamePlay.push(s),cc.find("Loading",this.node.parent).setSiblingIndex(5),this.addPrefComponent(e)})})}else 30==e?(this.node.parent.addChild(i),o="Res/Prefab/3dRoot",a.load(o,cc.Prefab,(t,a)=>{var s=cc.instantiate(a);this.node.parent.addChild(s),this.myGamePlay.push(s),cc.find("Loading",this.node.parent).setSiblingIndex(5),this.addPrefComponent(e)})):(s.node.addChild(i),cc.find("Loading",this.node.parent).setSiblingIndex(6),this.addPrefComponent(e))}else cc.error("gamePlay \u6e38\u620f\u9884\u5236\u4f53\u95ee\u9898==="),this.showMessage()}})}loadPlaza(e=!0){cc.error("loadPlaza>>>"),this.labelDes&&(this.labelDes.string="Loading Bundle \u2026\u2026");let t="Login";e&&(t="Plaza","CEPHEUS.STAR"==i.default.getInstance().PlatformName&&(t="Plaza1"),cc.error("loadPlaza>>>\u573a\u666f\u540d\u79f0:",t),d.default.getInstance().connectLogonServer(1)),null!=this.SetProgressEvn&&this.SetProgressEvn.call(this.callerLoading,0);{var a="Plaza";let s={onFileProgress:()=>{}};""!=globalThis.mUrl&&globalThis.BundlerVerions.Plaza&&(s.version=globalThis.BundlerVerions.Plaza,console.error("======loadOptions.version::::",s.version,globalThis.mUrl),a=(1==globalThis.useMainUrl?globalThis.mUrl:"")+"Plaza"),cc.assetManager.loadBundle(a,s,(a,s)=>{a?(this.labelDes&&(this.labelDes.string="Loading Bundle error \u2026\u2026"),cc.error("\u9519\u8bef\u4fe1\u606f\uff1a",a.message),console.log("\u9519\u8bef\u4fe1\u606f\uff1a",a.message),this.showMessage()):(i.default.getInstance().initBundles(),this.labelDes&&(this.labelDes.string="Loading resources \u2026\u2026"),s.loadDir("Res",(e,t)=>{t>0&&null!=this.SetProgressEvn&&this.SetProgressEvn.call(this.callerLoading,e/t)},a=>{a?(this.labelDes&&(this.labelDes.string="Loading resources error \u2026\u2026"),this.showMessage()):cc.director.loadScene(t,a=>{a?(this.labelDes&&(this.labelDes.string="Run Scene error\u2026\u2026 "),this.showMessage()):(cc.log("isPlaze",e),console.error("======isPlaze",e),e?this.targetNode.destroy():"Login"==t&&this.targetNode.destroy(),this.labelDes&&(this.labelDes.string="Run Scene \u2026\u2026 "),cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE))})}))})}}goBack(e=!1){if(this.isGoBack)return;this.isGoBack=!0;let t=c.default.getInstance().KindID;if(i.default.getInstance().IsNeedSpecial()&&this.getBackToPlaze(),this.HideBtnReturnEvn&&this.HideBtnReturnEvn.call(this.callerLoading),e)a=i.default.getInstance().ClientGamesList[t].Category,o.CommonRes[a]&&(s=o.CommonRes[a].bundleName,(n=cc.assetManager.getBundle(s))?i.default.getInstance().IsNeedSpecial()||(n.releaseAll(),cc.assetManager.removeBundle(n),this.ShowLogoEvn&&this.ShowLogoEvn.call(this.callerLoading,0),this.SetLastProgressEvn&&this.SetLastProgressEvn.call(this.callerLoading,0),this.loadPlaza(!0)):(cc.error("common bundle \u4e0d\u5b58\u5728"),i.default.getInstance().IsNeedSpecial()||(this.ShowLogoEvn&&this.ShowLogoEvn.call(this.callerLoading,0),this.SetLastProgressEvn&&this.SetLastProgressEvn.call(this.callerLoading,0),this.loadPlaza(!0))));else{var a=i.default.getInstance().ClientGamesList[t].Category;if(o.CommonRes[a]){var s=o.CommonRes[a].bundleName;(n=cc.assetManager.getBundle(s))&&(i.default.getInstance().IsNeedSpecial()||(n.releaseAll(),cc.assetManager.removeBundle(n)))}let e=i.default.getInstance().ClientGamesList[t];if(!e)return void cc.error("!gameInfo");var n;(n=cc.assetManager.getBundle(e.Bundle))?(cc.error("\u6e38\u620f bundle \u5b58\u5728"),i.default.getInstance().IsNeedSpecial()?(n.releaseAll(),cc.assetManager.removeBundle(n),i.default.getInstance().GameBundle[e.Bundle]=null):(this.ShowLogoEvn&&this.ShowLogoEvn.call(this.callerLoading,0),this.SetLastProgressEvn&&this.SetLastProgressEvn.call(this.callerLoading,0),n.releaseAll(),cc.assetManager.removeBundle(n),i.default.getInstance().GameBundle[e.Bundle]=null,this.loadPlaza(!0))):(cc.error("bundle \u4e0d\u5b58\u5728"),i.default.getInstance().IsNeedSpecial()||(this.ShowLogoEvn&&this.ShowLogoEvn.call(this.callerLoading,0),this.SetLastProgressEvn&&this.SetLastProgressEvn.call(this.callerLoading,0),this.loadPlaza(!0)))}}onExit(){return cc.error("onExit==",this.canGoBack,this.mAssetType,this.mIsGoBack),this.mAssetType==p.AT_Common||this.mAssetType==p.AT_CommonRes?(cc.error("1------onExit==\u516c\u5171\u8d44\u6e90=="),!1):this.mAssetType==p.AT_Game?(cc.error("1------onExit==\u6e38\u620fbundle\u52a0\u8f7d \u4e0d\u9000\u51fa=="),!1):this.mAssetType==p.AT_End?(cc.error("1------onExit==\u6b63\u5e38\u8fdb\u6e38\u620f=="),i.default.getInstance().stopGameRes(this.kindID),!0):this.mAssetType==p.AT_GameResFinish||this.mAssetType==p.AT_gamePlay||this.mAssetType==p.AT_gameNode?(cc.error("1------onExit==\u6700\u540e\u9636\u6bb5 GamePlay==\u4e0d\u7ed9\u8fd4\u56de=="),!1):this.mAssetType<p.AT_GameRes?(cc.error("1------onExit==< AssetType.AT_GameRes==\u4e0d\u7ed9\u8fd4\u56de=="),!1):(cc.log("\u540e\u9000KindID=",this.kindID),i.default.getInstance().stopGameRes(this.kindID),this.mAssetType==p.AT_GameRes?(this.stop=!0,this.unscheduleAllCallbacks(),this.CompleteEnterGame(this.kindID),!1):this.mIsGoBack?(cc.error("onExit==>>>mAssetType:",this.mAssetType),!1):this.canGoBack?(cc.error("onExit===mAssetType:",this.mAssetType),this.stop=!0,this.unscheduleAllCallbacks(),this.CompleteEnterGame(this.kindID),!0):void 0)}GetGoBackStatue(){return this.isGoBack}addPrefComponent(e){var t=i.default.getInstance().ClientGamesList[e].Category;let a=i.default.getInstance().ClientGamesList[e].Scene,s=cc.assetManager.getBundle("Game1");this.mAssetType=p.AT_gameNode,s.load("prefab/NodeGame",cc.Prefab,(s,r)=>{if(!s&&!this.stop){let s=cc.instantiate(r);if(this.myNodeGame=s,o.GameCategory.Slot==t){let e=s.addComponent(_.default);this.node.parent.addChild(s),cc.director.getScene().getComponentInChildren("Game_"+a).setIGameBase(e)}else if(o.GameCategory.Fish==t){let t=s.addComponent(h.default);this.node.parent.addChild(s),n.AudioPlayer.Instance.setCurrBundle(i.default.getInstance().GameBundle[i.default.getInstance().ClientGamesList[e].Bundle]),cc.director.getScene().getComponentInChildren(a+"_Game").setIGameBase(t)}else if(o.GameCategory.Keno==t){let t=s.addComponent(m.default);this.node.parent.addChild(s),n.AudioPlayer.Instance.setCurrBundle(i.default.getInstance().GameBundle[i.default.getInstance().ClientGamesList[e].Bundle]),cc.director.getScene().getComponentInChildren(a+"_Game").setIGameBase(t)}else if(o.GameCategory.Casion==t){let t=s.addComponent(u.default);this.node.parent.addChild(s),n.AudioPlayer.Instance.setCurrBundle(i.default.getInstance().GameBundle[i.default.getInstance().ClientGamesList[e].Bundle]),cc.director.getScene().getComponentInChildren(a+"_Game").setIGameBase(t)}this.canGoBack=!0,this.mAssetType=p.AT_End}})}SetGameVersion(e){i.default.getInstance().SetGameVersion(e)}LogoImage(e){this.mLogoImage=e}getLogoImage(){return this.mLogoImage}getKindID(){return this.kindID}setfulleScreen(){g.fulleScreen(!0)}SetBack2PlazeFuction(e,t,a,s,n){this.callerPlaze=e,this.Back2PlazeEvn=t,this.HideMaskBtnEvn=a,this.ShowMaskEvn=s,this.CompleteEnterGameEvn=n}ShowMask(e){null!=this.ShowMaskEvn&&this.ShowMaskEvn.call(this.callerPlaze,e)}CompleteEnterGame(e){cc.error("CompleteEnterGame",e),null!=this.CompleteEnterGameEvn&&this.CompleteEnterGameEvn.call(this.callerPlaze,e)}getBackToPlaze(){null!=this.Back2PlazeEvn&&this.Back2PlazeEvn.call(this.callerPlaze),this.targetNode.active=!1;let e=cc.director.getScene().getComponentInChildren("PlazaBase");e&&e.goback(),this.deleteGamePlay(),d.default.getInstance().connectLogonServer(1)}checkGamePlay(){return!!(this.myGamePlay&&this.myGamePlay.length>0)}deleteGamePlay(){if(this.myGamePlay){for(let e=0;e<this.myGamePlay.length;e++)this.myGamePlay[e].destroy();this.myGamePlay=[]}this.myNodeGame&&this.myNodeGame.destroy()}setLastProgressEvn(){this.SetLastProgressEvn&&this.SetLastProgressEvn.call(this.callerLoading,0)}IsNeedSpecial(){return i.default.getInstance().IsNeedSpecial()}CommonUI_RootNode(e){f.default.RootNode=e}};y=s([I],y),a.default=y,cc._RF.pop()},{"../../BaseRes/PopMessage/PopMessage":void 0,"../../ClientBase/BundleManager":void 0,"../../ClientBase/GameConfig":void 0,"../../ClientBase/Tool":void 0,"../../ClientBase/UI/CommonUI":void 0,"../../ClientBase/audioplayer":void 0,"../../ClientCommon/EventCenter":void 0,"../../ClientCommon/EventCommonCode":void 0,"../../ClientFrame/GameServerManager":void 0,"../../ClientFrame/LogonFrame":void 0,"./Casion/GameBaseCasion":"GameBaseCasion","./Fish/GameBaseFish":"GameBaseFish","./Keno/GameBaseKeno":"GameBaseKeno","./Slot/GameBaseSlot":"GameBaseSlot"}],MainControllerScript:[function(e,t,a){"use strict";cc._RF.push(t,"be6c2nPhMtMVrxv76yUGb8O","MainControllerScript");var s,n=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0});const i=e("../../ClientBase/BundleManager"),o=e("../../ClientBase/Device"),r=e("../../ClientCommon/EventCenter"),l=e("../../ClientFrame/GameServerManager"),c=e("../../ClientFrame/Header/GameMacro"),d=e("../../ClientFrame/LogonFrame"),h=e("../../ClientFrame/ServerConfig"),_=e("../../ClientFrame/UserManager"),m=e("../../ClientCommon/WSEngine"),u=e("../../BaseRes/PopDialog/PopDialog"),S=e("../../ClientBase/UI/CommonUI"),g=e("../../BaseRes/PopWait/PopWait"),f=e("../../ClientBase/Tool"),I=e("../../ClientFrame/GlobalUserItem"),C=e("../../ClientFrame/GameFrame"),{ccclass:p,property:y}=cc._decorator;let B=s=class extends cc.Component{constructor(){super(...arguments),this.handlerPriority=2,this.handlerName="MainControllerScript",this.nodeTarget=null,this.plazaNodeTarget=null,this.popWaitNode=null}onLoad(){}getKindID(){return l.default.getInstance().KindID}setKindID(e){l.default.getInstance().KindID=e}setTYPESERVER(e){m.default.TYPESERVER=e}setLOGONSERVER(e,t){s.LOGONSERVER=e,C.default.getInstance().setLOGONSERVER(s.LOGONSERVER,t)}setLOGONPORT(e){s.LOGONPORT=e,cc.error("setLOGONPORT:",s.LOGONPORT)}addRootNode(e){this.nodeTarget=e}destroyRootNode(){this.nodeTarget&&(cc.error("===destroyRootNode=",this.nodeTarget.name),this.nodeTarget.destroy())}connectLogonServer(){d.default.getInstance().connectLogonServer(1)}AddHandler(){r.EventCenter.AddHandler(this)}RemoveHandler(){r.EventCenter.RemoveHandler(this)}handleEvent(e,t){switch(e){case d.LogonEvent[d.LogonEvent.LogonFailure]:cc.error("LogonFailure",t,this.nodeTarget,this.popWaitNode),u.default.Show(this.nodeTarget,t,()=>{cc.log("ok callback")},()=>{cc.log("cancel callback")},!1),g.default.HidePopWait(this.nodeTarget),this.popWaitNode&&(this.popWaitNode.active=!1);break;case d.LogonEvent[d.LogonEvent.LogonSuccess]:cc.error("\u767b\u5f55\u6210\u529f:",I.default.UserInfo.dwLockServerID,I.default.UserInfo.dwKindID,d.default.getInstance().isBackPlaza),d.default.getInstance().isBackPlaza?this.Login_onGoPlaza():I.default.UserInfo.dwLockServerID>0&&I.default.UserInfo.dwKindID>0&&42==I.default.UserInfo.dwKindID?i.default.getInstance().IsNeedSpecial()?this.Login_onGoPlaza():i.default.getInstance().Loadloading(()=>{l.default.getInstance().KindID=I.default.UserInfo.dwKindID,l.default.getInstance().tableServerID=0}):this.Login_onGoPlaza();break;case d.LogonEvent[d.LogonEvent.LogonPogKick]:console.log("--------LogonPogKick----------"),this.popWaitNode&&(this.popWaitNode.active=!1)}}Login_Start(e){this.mcc_dev=e,o.default.init(),i.default.getInstance().initBundles(),h.ServerConfig.randLogonServer(),h.ServerConfig.randChatServer(),h.ServerConfig.randGameServer(),d.default.getInstance().setServer(s.LOGONSERVER,s.LOGONPORT,C.default.LOGONSERVERPORT)}Login_GetClientVersion(){return c.GameMacro.ClientVersion}Login_logonByAccount(e,t,a){this.popWaitNode&&(this.popWaitNode.active=!0),d.default.getInstance().logonByAccount(e,t,0),_.default.getInstance().userAccount=e,_.default.getInstance().userPassword=t}Login_registerAccount(e,t,a){d.default.getInstance().registerAccount(e,t,a,0),_.default.getInstance().userAccount=e,_.default.getInstance().userPassword=t}Login_onGoPlaza(){if(g.default.HidePopWait(this.nodeTarget),this.popWaitNode&&(this.popWaitNode.active=!1),l.default.getInstance().KindID=0,this.nodeTarget.active=!1,this.plazaNodeTarget&&(this.plazaNodeTarget.active=!0),i.default.getInstance().IsNeedSpecial()&&d.default.getInstance().isBackPlaza||r.EventCenter.EmitEvent("onGoLogin"),i.default.getInstance().IsNeedSpecial()&&I.default.UserInfo.dwLockServerID>0&&I.default.UserInfo.dwKindID>0&&42==I.default.UserInfo.dwKindID){let e=cc.director.getScene().getComponentInChildren("PlazaBase");e&&e.goToPlazGame(I.default.UserInfo.dwKindID)}}Login_FitScreen(e){o.default.FitScreen(e.getComponent(cc.Canvas))}Login_FulleScreen(){cc.error("Login_FulleScreen:",this.mcc_dev),f.fulleScreen(this.mcc_dev)}backPalaze(){cc.error("backPalaze:=="),i.default.getInstance().Loadloading(()=>{l.default.getInstance().KindID=0})}addPlazaNode(e){this.plazaNodeTarget=e}PopWait_show(){g.default.ShowPopWait(S.default.RootNode)}GetIsBackPlaza(){return d.default.getInstance().isBackPlaza}addPopWaitNode(e){this.popWaitNode=e}setPlatformName(e){cc.error("setPlatformName====",e),i.default.getInstance().PlatformName=e}};B.LOGONPORT=8600,B=s=n([p],B),a.default=B,cc._RF.pop()},{"../../BaseRes/PopDialog/PopDialog":void 0,"../../BaseRes/PopWait/PopWait":void 0,"../../ClientBase/BundleManager":void 0,"../../ClientBase/Device":void 0,"../../ClientBase/Tool":void 0,"../../ClientBase/UI/CommonUI":void 0,"../../ClientCommon/EventCenter":void 0,"../../ClientCommon/WSEngine":void 0,"../../ClientFrame/GameFrame":void 0,"../../ClientFrame/GameServerManager":void 0,"../../ClientFrame/GlobalUserItem":void 0,"../../ClientFrame/Header/GameMacro":void 0,"../../ClientFrame/LogonFrame":void 0,"../../ClientFrame/ServerConfig":void 0,"../../ClientFrame/UserManager":void 0}],MyFishSetting:[function(e,t,a){"use strict";cc._RF.push(t,"0ddb8TVRjdJX7N7sc3+Tv+t","MyFishSetting");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0});const{ccclass:n,property:i}=cc._decorator;let o=class extends cc.Component{constructor(){super(...arguments),this.setBtn=null,this.setPanel=null,this.setPanelMask=null,this.isPlaying=!1,this.setbtnWidget=null,this.setPanelWidget=null,this.scriptName="MyFishSetting",this.iGameBase=null,this.mCaller=null,this.InfoEvn=null}Init(e,t,a){this.iGameBase=e,this.mCaller=t,this.InfoEvn=a;var s=this.node;let n=cc.find("Setting",s),i=cc.find("layout/Sound/Switch",n);cc.error("==m_Panel_Setting===",i);let o=cc.find("soundOn",i),r=cc.find("soundOff",i);this.iGameBase.AddSetSystem(n,o,r)}start(){let e=null;e=this.node,this.setBtn=cc.find("SetBtn",e),this.SetBtnEvent(this.setBtn.getComponent(cc.Button),!0,!0),this.setPanel=cc.find("Setting",e),this.setPanelWidget=this.setPanel.getComponent(cc.Widget),this.setbtnWidget=this.setBtn.getComponent(cc.Widget),cc.error("\u8bbe\u7f6e>>>",this.setbtnWidget),this.setPanelMask=cc.find("Mask",this.setPanel),this.SetBtnEvent(this.setPanelMask.getComponent(cc.Button),!1,!0);var t=cc.find("layout",this.setPanel);let a=cc.find("Sound",t),s=cc.find("Switch/soundOn",a),n=cc.find("Switch/soundOff",a);this.iGameBase.AddSetSystem(this.setPanel,s,n),this.SetBtnEvent(a.getComponent(cc.Button),!0,!0);let i=cc.find("Info",t);i.active=!1,this.SetBtnEvent(i.getComponent(cc.Button),!0,!0);let o=cc.find("ToLgin",t);this.SetBtnEvent(o.getComponent(cc.Button),!0,!0)}SetBtnEvent(e,t=!0,a=!0){if(null!=e){let s=new cc.Component.EventHandler;s.target=this.node,s.component=this.scriptName,s.handler="BtnEventCallback",e.clickEvents.push(s),e.node.active=t,e.interactable=a}}BtnEventCallback(e,t){var a=e.target;this.OnClickBtn(a)}OnClickBtn(e){switch(cc.log("===============>>\u6240\u6709\u6309\u94ae\u70b9\u51fb\u4e8b\u4ef6\uff1a"+e.name),e.name){case"ToLgin":this.iGameBase.onBtnLeaveGame();break;case"Info":this.onMaskClick(),this.showGamInfoPanel();break;case"Sound":this.iGameBase.SettingClick();break;case"Mask":this.onMaskClick();break;case"SetBtn":this.onSetClick()}}onSetClick(){this.isPlaying||(this.setBtnPos=this.setBtn.getPosition(),this.setbtnWidth=this.setBtn.getContentSize().width,this.setPanelPos=this.setPanel.getPosition(),this.setPanelWidth=this.setPanel.getContentSize().width,this.isPlaying=!0,cc.tween(this.setBtn).to(.25,{position:cc.v3(this.setBtnPos.x+this.setbtnWidth,this.setBtnPos.y,0)}).call(()=>{this.setbtnWidget.right=-this.setbtnWidth,cc.tween(this.setPanel).to(.25,{position:cc.v3(this.setPanelPos.x-this.setPanelWidth,this.setPanelPos.y,0)}).call(()=>{this.setPanelWidget.right=0,this.setPanelMask.active=!0,this.isPlaying=!1}).start()}).start())}onMaskClick(){this.isPlaying||(this.setBtnPos=this.setBtn.getPosition(),this.setbtnWidth=this.setBtn.getContentSize().width,this.setPanelPos=this.setPanel.getPosition(),this.setPanelWidth=this.setPanel.getContentSize().width,this.isPlaying=!0,cc.tween(this.setPanel).to(.25,{position:cc.v3(this.setPanelPos.x+this.setPanelWidth,this.setPanelPos.y,0)}).call(()=>{this.setPanelMask.active=!1,this.setPanelWidget.right=-this.setPanelWidth,cc.tween(this.setBtn).to(.25,{position:cc.v3(this.setBtnPos.x-this.setbtnWidth,this.setBtnPos.y,0)}).call(()=>{this.setbtnWidget.right=0,this.isPlaying=!1}).start()}).start())}showGamInfoPanel(){null!=this.InfoEvn&&this.InfoEvn.call(this.mCaller,!0)}};s([i(cc.Node)],o.prototype,"setBtn",void 0),s([i(cc.Node)],o.prototype,"setPanel",void 0),s([i(cc.Node)],o.prototype,"setPanelMask",void 0),o=s([n],o),a.default=o,cc._RF.pop()},{}],MySetting:[function(e,t,a){"use strict";cc._RF.push(t,"f36dbEf0RVJ0KUjzFD0/fr0","MySetting");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0});const{ccclass:n,property:i}=cc._decorator;let o=class extends cc.Component{constructor(){super(...arguments),this.m_Button_Set=null,this.m_Panel_Set=null,this.m_Mask_Set=null,this.m_Widget_m_ButtonSet=null,this.m_Widget_PanelSet=null,this.m_Toggle_SoundOn=null,this.m_Toggle_SoundOff=null,this.scriptName="MySetting",this.iGameBase=null,this.m_SoundSystem=null,this.isPlaying=!1}Init(e,t){this.iGameBase=e,this.m_SoundSystem=t;var a=this.node;let s=cc.find("Panel_Set",a),n=cc.find("Button_FullScreen/Switch",s),i=cc.find("fullScreenOn",n),o=cc.find("fullScreenOff",n);this.iGameBase.AddSetSystem(s,i,o)}start(){let e,t=null,a=null,s=null,n=null,i=null,o=null,r=null,l=null;a=this.node,t=cc.find("Button_Set",a),this.SetBtnEvent(t.getComponent(cc.Button),!0,!0),s=cc.find("Panel_Set",a),n=cc.find("Mask_Set",s),this.SetBtnEvent(n.getComponent(cc.Button),!1,!0),l=cc.find("Button_Rule",s).getComponent(cc.Button),this.SetBtnEvent(l,!0,!0),i=cc.find("Button_Sound",s).getComponent(cc.Button),this.SetBtnEvent(i,!0,!0),o=cc.find("Switch/soundOn",i.node),r=cc.find("Switch/soundOff",i.node),e=cc.find("Button_ToLobby",s).getComponent(cc.Button),this.SetBtnEvent(e,!0,!0),this.m_Button_Set=t,this.m_Panel_Set=s,this.m_Mask_Set=n,this.m_Widget_PanelSet=s.getComponent(cc.Widget),this.m_Widget_m_ButtonSet=t.getComponent(cc.Widget),this.m_Toggle_SoundOn=o,this.m_Toggle_SoundOff=r}SetBtnEvent(e,t=!0,a=!0){if(null!=e){let s=new cc.Component.EventHandler;s.target=this.node,s.component=this.scriptName,s.handler="BtnEventCallback",e.clickEvents.push(s),e.node.active=t,e.interactable=a}}BtnEventCallback(e,t){var a=e.target;this.OnClickBtn(a)}OnClickBtn(e){switch(e.name){case"Button_ToLobby":this.iGameBase.onBtnLeaveGame();break;case"Button_RuleClose":this.hideGameInfo();break;case"Button_Rule":this.onMaskClick(),this.showGamInfoPanel();break;case"Button_Sound":this.iGameBase.SettingClick();break;case"Mask_Set":this.onMaskClick();break;case"Button_Set":this.onSetClick()}}onSetClick(){this.m_Panel_Set.active=!0,this.m_Pos_ButtonSet=this.m_Button_Set.getPosition(),this.m_Width_ButtonSet=this.m_Button_Set.getContentSize().width,this.m_Pos_PanelSet=this.m_Panel_Set.getPosition(),this.m_Width_PanelSet=this.m_Panel_Set.getContentSize().width,cc.tween(this.m_Button_Set).to(.25,{position:cc.v3(this.m_Pos_ButtonSet.x+this.m_Width_ButtonSet,this.m_Pos_ButtonSet.y,0)}).call(()=>{this.m_Widget_m_ButtonSet.right=-this.m_Width_ButtonSet,this.m_Button_Set.active=!1,cc.tween(this.m_Panel_Set).to(.25,{position:cc.v3(this.m_Pos_PanelSet.x-this.m_Width_PanelSet,this.m_Pos_PanelSet.y,0)}).call(()=>{this.m_Widget_PanelSet.right=0,this.m_Mask_Set.active=!0}).start()}).start()}onMaskClick(){this.isPlaying||(this.m_Panel_Set.active=!1,this.m_Pos_ButtonSet=this.m_Button_Set.getPosition(),this.m_Width_ButtonSet=this.m_Button_Set.getContentSize().width,this.m_Pos_PanelSet=this.m_Panel_Set.getPosition(),this.m_Width_PanelSet=this.m_Panel_Set.getContentSize().width,this.isPlaying=!0,cc.tween(this.m_Panel_Set).to(.25,{position:cc.v3(this.m_Pos_PanelSet.x+this.m_Width_PanelSet,this.m_Pos_PanelSet.y,0)}).call(()=>{this.m_Mask_Set.active=!1,this.m_Button_Set.active=!0,this.m_Widget_PanelSet.right=-this.m_Width_PanelSet,cc.tween(this.m_Button_Set).to(.25,{position:cc.v3(this.m_Pos_ButtonSet.x-this.m_Width_ButtonSet,this.m_Pos_ButtonSet.y,0)}).call(()=>{this.m_Widget_m_ButtonSet.right=0,this.isPlaying=!1}).start()}).start())}hideGameInfo(){}showGamInfoPanel(){}};o=s([n],o),a.default=o,cc._RF.pop()},{}],ObjScale:[function(e,t,a){"use strict";cc._RF.push(t,"608f79NuzdGabm9V2BLzmJK","ObjScale");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0}),a.ePosScaleState=void 0;const{ccclass:n,property:i}=cc._decorator;var o;(function(e){e[e.e_None=0]="e_None",e[e.e_Scaleing=1]="e_Scaleing",e[e.e_End=2]="e_End"})(o=a.ePosScaleState||(a.ePosScaleState={}));let r=class extends cc.Component{constructor(...e){super(),this.m_eScaleState=o.e_None,this.m_fScaleSpeed=0,this.m_StartScale=new cc.Vec3,this.m_TargetScale=new cc.Vec3,this.m_fTotalTime=0,cc.error("ObjScale===="),e[3]<=0&&(e[3]=2),this.m_trans=e[0],this.m_caller=e[1],this.ScaleBackEvn=e[2],this.m_fTotalTime=e[3]}UpdateState(){switch(this.m_eScaleState){case o.e_None:break;case o.e_Scaleing:this.MoveLogic();break;case o.e_End:this.m_eScaleState=o.e_None,this.m_trans.scaleX=this.m_TargetScale.x,this.m_trans.scaleY=this.m_TargetScale.y,null!=this.ScaleBackEvn&&this.ScaleBackEvn.call(this.m_caller)}}OnPlay(e,t,a=0,s=2){cc.error("OnPlay===="),s<=0&&(s=2);let n=0;switch(a){case 1:n=this.m_fTotalTime/s;break;case-1:n=this.m_fTotalTime*s;break;default:n=this.m_fTotalTime}this.m_StartScale=e,this.m_TargetScale=t,this.m_fScaleSpeed=(this.m_TargetScale.x-this.m_StartScale.x)/n,this.m_trans.scaleX=this.m_StartScale.x,this.m_trans.scaleY=this.m_StartScale.y,this.m_eScaleState!=o.e_Scaleing&&(this.m_eScaleState=o.e_Scaleing)}MoveLogic(){cc.error("MoveLogic===="),this.m_trans.scaleX=this.m_trans.scaleX+this.m_fScaleSpeed*cc.director.getDeltaTime(),this.m_trans.scaleY=this.m_trans.scaleY+this.m_fScaleSpeed*cc.director.getDeltaTime(),this.m_fScaleSpeed>0?(this.m_TargetScale.x-this.m_trans.scaleX<=0||this.m_TargetScale.y-this.m_trans.scaleY<=0)&&(this.m_eScaleState=o.e_End):this.m_fScaleSpeed<0?(this.m_TargetScale.x-this.m_trans.scaleX>=0||this.m_TargetScale.y-this.m_trans.scaleY>=0)&&(this.m_eScaleState=o.e_End):this.m_eScaleState=o.e_End}M_IsEnd(){return this.m_eScaleState==o.e_None}get M_TargetScale(){return this.m_TargetScale}set M_TargetScale(e){this.m_TargetScale.x=e.x,this.m_TargetScale.y=e.y,this.m_trans.scaleX=this.m_TargetScale.x,this.m_trans.scaleY=this.m_TargetScale.y}};r=s([n],r),a.default=r,cc._RF.pop()},{}],PayCommon:[function(e,t,a){"use strict";cc._RF.push(t,"556791KXqSzuxe8sOvEGx5j","PayCommon");var s,n=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o},i=this&&this.__awaiter||function(e,t,a,s){return new(a||(a=Promise))(function(n,i){function o(e){try{l(s.next(e))}catch(t){i(t)}}function r(e){try{l(s.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a(function(e){e(t)})).then(o,r)}l((s=s.apply(e,t||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});const o=e("../../BaseRes/PayCommon/CommonPay"),r=e("../../BaseRes/PopDialog/PopDialog"),l=e("../../ClientBase/GameUtils"),c=e("../../ClientBase/UI/CommonUI"),d=e("../../ClientBase/WebUtils"),h=e("../../ClientFrame/GlobalUserItem"),{ccclass:_,property:m}=cc._decorator;let u=s=class extends cc.Component{constructor(){super(...arguments),this.scriptName="PayCommon",this.myNode=null}static getInstance(){return null==s.instance&&(s.instance=new s),s.instance}start(){}ShowPay(e,t=null,a=null){s.instance.myNode=c.default.RootNode,o.default.ShowPay(h.default.UserInfo.dwUserID,c.default.RootNode,e,t,a,s.instance.startLoad,s.instance.fetchBundleVersion3)}IsOpenPayPage(){return cc.error("startLoad=====",o.default.IsOpenPayPage()),o.default.IsOpenPayPage()}hidePayPage(){o.default.hidePayPage()}onBtnPayClick(){l.GameUtils.getNum(h.default.UserInfo.lUserScore)>500?o.default.showTipInfo1():o.default.onBtnPayClick1()}startLoad(){return i(this,void 0,void 0,function*(){yield s.instance.fetchBundleVersion2(),s.instance.MyData?o.default.InitData(s.instance.MyData,!0,cc.Color.WHITE,new cc.Color(16,127,16),cc.Color.WHITE,new cc.Color(16,127,16)):r.default.Show(c.default.RootNode,"The Data is error!",()=>{},()=>{},!1)})}fetchBundleVersion2(){return i(this,void 0,void 0,function*(){let e=globalThis.payUrl+"/GameApp/RechargeItems";return cc.error(e),new Promise(t=>{d.default.request({url:e,method:"GET",success:e=>{cc.error(e),e&&"Success"==e.status?(s.instance.MyData=e.data,cc.error("\u5145\u503c\u8fd4\u56de\u503c===",e),t(!0)):(s.instance.MyData=null,t(!1))},fail:()=>{t(!1)}})})})}fetchBundleVersion3(e,t){return i(this,void 0,void 0,function*(){let a="";return a=t&&""!=t?globalThis.payUrl+"/GameApp/Pay/"+h.default.UserInfo.dwUserID+"/"+e+"/"+t:globalThis.payUrl+"/GameApp/Pay/"+h.default.UserInfo.dwUserID+"/"+e,cc.error(a),new Promise(e=>{d.default.request({url:a,method:"GET",success:t=>{o.default.hideWait(),"Success"==t.status?(cc.error("\u6210\u529f\uff01===",t.data),o.default.loadWebUrl(t.data),e(!0)):(r.default.Show(s.instance.myNode.parent,t.msg,()=>{},()=>{},!1),e(!1))},fail:t=>{r.default.Show(s.instance.myNode.parent,t,()=>{},()=>{},!1),e(!1)}})})})}onDynamicPassResult(e){}};u.instance=null,u=s=n([_],u),a.default=u,cc._RF.pop()},{"../../BaseRes/PayCommon/CommonPay":void 0,"../../BaseRes/PopDialog/PopDialog":void 0,"../../ClientBase/GameUtils":void 0,"../../ClientBase/UI/CommonUI":void 0,"../../ClientBase/WebUtils":void 0,"../../ClientFrame/GlobalUserItem":void 0}],PlazaBase:[function(e,t,a){"use strict";cc._RF.push(t,"ee7518eSsdBvLkTEsjfKarB","PlazaBase");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0});const n=e("../../BaseRes/DonatoAmount/DonatoAmount1"),i=e("../../BaseRes/PopDialog/PopDialog"),o=e("../../BaseRes/PopMessage/PopMessage"),r=e("../../BaseRes/PopTips/PopTips"),l=e("../../BaseRes/PopWait/PopWait"),c=e("../../ClientBase/audioplayer"),d=e("../../ClientBase/BundleManager"),h=e("../../ClientBase/Device"),_=e("../../ClientBase/GameConfig"),m=e("../../ClientBase/GameUtils"),u=e("../../ClientBase/orientation"),S=e("../../ClientBase/SettingSystem"),g=e("../../ClientBase/Tool"),f=e("../../ClientBase/UI/CommonUI"),I=e("../../ClientCommon/EventCenter"),C=e("../../ClientCommon/EventCommonCode"),p=e("../../ClientFrame/GameServerManager"),y=e("../../ClientFrame/GlobalUserItem"),B=e("../../ClientFrame/LogonFrame"),M=e("./PayCommon"),{ccclass:G,property:T}=cc._decorator;let P=class extends cc.Component{constructor(){super(...arguments),this.handlerPriority=3,this.handlerName="PlazaBase",this.isloading=!1,this.callerPlaza=null,this.setJackPotInfoEvn=null,this.screenSizeChangeEvn=null,this.UpdataUserInfoEvn=null,this.showMarqueeEvn=null,this.handleEventEvn=null,this.currgameCategory=_.GameCategory.All,this.SupportGamesList=[],this.mSettingSystem=null,this.m_IsShowDonateMessage=!1}AddHandler(){I.EventCenter.AddHandler(this),this.isloading=!1}RemoveHandler(){this.unscheduleAllCallbacks(),this.callerPlaza=null,this.setJackPotInfoEvn=null,this.screenSizeChangeEvn=null,this.UpdataUserInfoEvn=null,this.showMarqueeEvn=null,I.EventCenter.RemoveHandler(this)}handleEvent(e,t){switch(e){case C.EventCommonCode.receiveJackpot:this.setJackPotInfo();break;case C.EventCommonCode.screenSizeChange:this.screenSizeChange();break;case B.LogonEvent[B.LogonEvent.LogonFinish]:this.UpdataUserInfo();break;case C.EventCommonCode.marqueeMsg:this.showMarquee();break;case B.LogonEvent[B.LogonEvent.LogonFailure]:B.default.getInstance().isBackPlaza&&this.handleEventEvn&&this.handleEventEvn.call(this.callerPlaza,e,t);break;default:this.handleEventEvn&&this.handleEventEvn.call(this.callerPlaza,e,t)}}setJackPotInfo(){p.default.getInstance().jackPotInfo&&null!=this.setJackPotInfoEvn&&this.setJackPotInfoEvn.call(this.callerPlaza,p.default.getInstance().jackPotInfo.lJackPotScore)}showMarquee(){if(null!=this.showMarqueeEvn){let e="";p.default.getInstance().marqueeNotice.cbAgentNotice>0&&(e=p.default.getInstance().marqueeNotice.szNotice),this.showMarqueeEvn.call(this.callerPlaza,p.default.getInstance().marqueeNotice.cbAgentNotice,e)}}Init(e,t,a,s,n){this.callerPlaza=e,this.setJackPotInfoEvn=t,this.screenSizeChangeEvn=s,this.UpdataUserInfoEvn=n,this.showMarqueeEvn=a,c.AudioPlayer.Instance.setCurrBundle(d.default.getInstance().PlazaBundle),d.default.getInstance().IsNeedSpecial()||c.AudioPlayer.Instance.play_music("lobbyBgm")}setHandleEvent(e){this.handleEventEvn=e}screenSizeChange(){null!=this.screenSizeChangeEvn&&this.screenSizeChangeEvn.call(this.callerPlaza)}UpdataUserInfo(){null!=this.UpdataUserInfoEvn&&this.UpdataUserInfoEvn.call(this.callerPlaza)}FitScreen(e){h.default.FitScreen(e.getComponent(cc.Canvas)),h.default.FitBackground(e.getChildByName("bg"))}onGoLogin(){B.default.getInstance().intermitConnect("\u4e3b\u52a8\u79bb\u5f00"),p.default.getInstance().KindID=-1}onChooseGame(e){if(y.default.UserInfo.dwLockServerID>0&&y.default.UserInfo.dwKindID>0?y.default.IsReconnect=!0:y.default.IsReconnect=!1,null==p.default.getInstance().getGoldServersByKindID(e)){var t=cc.find("Canvas",this.node.parent);return cc.error(">>>>>showMessage==Game Updates!"),void r.default.showMessage(f.default.RootNode,"Game Updates!")}if(d.default.getInstance().ClientGamesList[e].IsEnterScore){let a=p.default.getInstance().getGoldServers(e,1)[0].lTableScore;if(y.default.UserInfo.lUserScore<=a)return cc.error("You can't enter the game if the score is less than 50.",e),t=cc.find("Canvas",this.node.parent),void i.default.Show(t,"You can't enter the game if the score is less than "+m.GameUtils.getNum(a),()=>{cc.log("ok callback")},()=>{cc.log("cancel callback")},!1)}this.enterGameScene(e)}download(e){if("HuoHu"==d.default.getInstance().PlatformName||"Frog"==d.default.getInstance().PlatformName){let a=d.default.getInstance().ClientGamesList[e];var t=d.default.getInstance().checkBundleVersion(a.Bundle);cc.error("\u68c0\u67e5\u7ed3\u679c::::",t),0==t?this.showLoading(e):(cc.error("\u4ec5\u4ec5\u4e0b\u8f7d kindid=====>",e),cc.director.getScene().getComponentInChildren("LoadingBase1").startLoad(e))}}enterGameScene(e){if(cc.error("===enterGameScene===",e),d.default.getInstance().IsNeedSpecial()){if(this.isloading)return void cc.error("\u6b63\u5728\u52a0\u8f7d\u6e38\u620f\uff01");this.isloading=!0,this.showMask()}else{if(this.isloading)return void cc.error("\u6b63\u5728\u52a0\u8f7d\u6e38\u620f\uff01");this.isloading=!0}this.showLoading(e)}setKindID(e,t,a){if(d.default.getInstance().ClientGamesList[e]){if(d.default.getInstance().ClientGamesList[e].GameIcon){t.node.active=!0;let s=d.default.getInstance().PlazaBundle.get(a+d.default.getInstance().ClientGamesList[e].GameIcon,cc.SpriteFrame);s&&(t.spriteFrame=s)}}else cc.error("setKindID return")}releasePlazaRes(){cc.error("releasePlazaRes"),d.default.getInstance().releasePlazaRes()}isCurrgameCategory(e){return e==this.currgameCategory}isGameCategoryAll(e){return e==_.GameCategory.All}setCurrgameCategory(e){this.currgameCategory=e}loadGameButtons(){let e=[];for(const t of this.SupportGamesList)d.default.getInstance().ClientGamesList[t]&&e.push(t);return e}getClientGames(e){return d.default.getInstance().ClientGamesList[e]}GetUserScore(){return m.GameUtils.getNum(y.default.UserInfo.lUserScore)}GetUserInsure(){return m.GameUtils.getNum(y.default.UserInfo.lUserInsure)}GetUserRightMask(){return cc.error("GetUserRightMask",y.default.UserInfo.cbRightMask),y.default.UserInfo.cbRightMask}getUserID(){return y.default.UserInfo.dwUserID}UpdataUserInfo1(){if(console.log("PlazaUserInfo_UpdataUserInfo",B.default.getInstance().mLoginSuccess),B.default.getInstance().mLoginSuccess)I.EventCenter.EmitEvent(C.EventCommonCode.InitSceneComplete);else{let e="System detects you\u2019ve left the game or weak network connection, please login again to continue!";I.EventCenter.EmitEvent(B.LogonEvent[B.LogonEvent.LogonFailure],e)}}setClientGames(e){d.default.getInstance().setClientGames(e)}setSupportGames(e){let t=e.replace("\n","").split(",");for(let a in t){let e=Number(t[a]);this.SupportGamesList.push(e)}}CommonUI_RootNode(e){cc.error("CommonUI_RootNode>>>",e),f.default.RootNode=e}sendSignInfo(e){B.default.getInstance().sendSignInfo(e)}sendWeelReward(){B.default.getInstance().sendWeelReward()}sendQuerySignInfo(){B.default.getInstance().sendQuerySignInfo()}sendWednesdayInfo(){B.default.getInstance().sendWednesdayInfo()}sendModifyPassword(e,t){B.default.getInstance().sendModifyPassword(e,t)}AddUserScore(e){y.default.UserInfo.lUserScore+=e}AddtUserInsure(e){y.default.UserInfo.lUserInsure+=e}GetTodayAlmsCount(){return y.default.UserInfo.TodayAlmsCount}setOrientation(e){u.setOrientation(e)}GetUserInfo(){return y.default.UserInfo}getNum(e,t){return m.GameUtils.getNum(e,t)}isScoreShowMode(){return m.GameUtils.m_eShowMode==m.eShowMode.eSM_Score}setShowMode(e){m.GameUtils.m_eShowMode=e}setScoreMode(e){m.GameUtils.m_eUserScoreMode=e}setTable(e){m.GameUtils.m_eTableMode=e}isNoWin(){return m.GameUtils.m_eUserScoreMode==m.eUserScoreMode.eSM_NoWin}isNoTable(){return m.GameUtils.m_eTableMode==m.eTableMode.eSM_NoTable}PopDialog_Show(e,t,a,s=!0){i.default.Show(f.default.RootNode,e,t,a,s)}AddSetSystem(e,t,a){this.mSettingSystem=e.addComponent(S.default),this.mSettingSystem.soundOn=t,this.mSettingSystem.soundOff=a,this.mSettingSystem.initSound()}SettingSoundClick(){this.mSettingSystem.onSoundClick()}getGoldRoomCellScoreList(e){return p.default.getInstance().getGoldRoomCellScoreList(e)}PopTips_showMessage(e){r.default.showMessage(f.default.RootNode,e)}getRandomGoldServer(e,t){return p.default.getInstance().getRandomGoldServer(e,t)}sendQueryTableInfo(e,t,a,s){B.default.getInstance().sendQueryTableInfo(e,t,a,s)}sendAddTable(e,t,a){B.default.getInstance().sendAddTable(e,t,a)}isCategory(e,t){var a=d.default.getInstance().ClientGamesList[e];return a?a.Category==t:(cc.error("!gameInfo",e),!1)}sendDeleteTable(e,t,a){B.default.getInstance().sendDeleteTable(e,t,a)}onChooseGameWithTable(e,t,a,s){if(null==p.default.getInstance().getGoldServersByKindID(e))return cc.error("onChooseGame\uff0cGame Updates! ",e),void r.default.showMessage(f.default.RootNode,"Game Updates!");l.default.ShowPopWait(f.default.RootNode),cc.log("this.tableInfo.wServerID",t);let n=a;d.default.getInstance().Loadloading(()=>{l.default.HidePopWait(f.default.RootNode),p.default.getInstance().KindID=e,cc.log("this.gameKind",e),cc.log("wServerID",t),p.default.getInstance().tableServerID=t,p.default.getInstance().tableServerTableID=n,p.default.getInstance().tableChairID=s})}sendTurntableInfo(){B.default.getInstance().sendTurntableInfo()}sendDynamicPass(){B.default.getInstance().sendDynamicPass()}isFull(){this.mSettingSystem.isFull()}setPlatformName(e){cc.error("setPlatformName====",e),d.default.getInstance().PlatformName=e}getPlatformName(){return d.default.getInstance().PlatformName}goback(){this.isloading=!1}getKindID(){return p.default.getInstance().KindID}connectLogonServer(){B.default.getInstance().connectLogonServer(1)}IsNeedSpecial(){return d.default.getInstance().IsNeedSpecial()}goToPlazGame(e){this.showMask(),this.showLoading(e)}showMask(){cc.assetManager.stopLoadAny(!1),cc.assetManager.setResetstop(!0),cc.director.getScene().getComponentInChildren("LoadingBase").ShowMask(!0)}showLoading(e){let t=cc.find("Loading",this.node.parent);if(t){let a=cc.director.getScene().getComponentInChildren("LoadingBase");p.default.getInstance().KindID=e,cc.error("kindid=====>",e),p.default.getInstance().tableServerID=0,a.startLoad(!0),t.active=!0}else cc.error("kindid=====>\u7b2c\u4e00\u6b21\u52a0\u8f7dload ",e),d.default.getInstance().Loadloading(()=>{p.default.getInstance().KindID=e,p.default.getInstance().tableServerID=0,cc.error("kindid=====>",e)})}sendExchangepoints(e){B.default.getInstance().sendExchangepoints(e)}removefulleScreen(e){g.removefulleScreen(e)}sendQueryGameRecord(e,t,a){B.default.getInstance().sendQueryGameRecord(e,t,a)}sendQueryAccountStatement(){B.default.getInstance().sendQueryAccountStatement()}isClosed(){return B.default.getInstance().isClosed()}showComPay(){this.m_IsShowDonateMessage||(this.m_IsShowDonateMessage=!0,M.default.getInstance().ShowPay(!1,()=>{cc.log("ok callback"),this.m_IsShowDonateMessage=!1},e=>{cc.error("====click==="+e,M.default.getInstance().IsOpenPayPage()),M.default.getInstance().onBtnPayClick()}))}IsOpenPayPage(){return M.default.getInstance().IsOpenPayPage()}hidePayPage(){M.default.getInstance().hidePayPage()}ShowDona(e){n.default.ShowDona(e,f.default.RootNode,!1,()=>{},e=>{cc.error("\u8f6c\u5206:",e),this.sendExchangepoints(e)})}sendRechargeWeelReward(){B.default.getInstance().sendRechargeWeelReward()}PopMessage_Show(e){o.default.ShowMessage(o.messageType.newWork,f.default.RootNode,e)}checkBundleVersion(e){let t=d.default.getInstance().ClientGamesList[e];return d.default.getInstance().checkBundleVersion(t.Bundle)}getGoldServersByKindID(e){return p.default.getInstance().getGoldServersByKindID(e)}GetFirstrecharge(){return y.default.UserInfo.cbFirstrecharge}sendQueryRechargeWheelReward(){B.default.getInstance().sendQueryRechargeWheelReward()}};P=s([G],P),a.default=P,cc._RF.pop()},{"../../BaseRes/DonatoAmount/DonatoAmount1":void 0,"../../BaseRes/PopDialog/PopDialog":void 0,"../../BaseRes/PopMessage/PopMessage":void 0,"../../BaseRes/PopTips/PopTips":void 0,"../../BaseRes/PopWait/PopWait":void 0,"../../ClientBase/BundleManager":void 0,"../../ClientBase/Device":void 0,"../../ClientBase/GameConfig":void 0,"../../ClientBase/GameUtils":void 0,"../../ClientBase/SettingSystem":void 0,"../../ClientBase/Tool":void 0,"../../ClientBase/UI/CommonUI":void 0,"../../ClientBase/audioplayer":void 0,"../../ClientBase/orientation":void 0,"../../ClientCommon/EventCenter":void 0,"../../ClientCommon/EventCommonCode":void 0,"../../ClientFrame/GameServerManager":void 0,"../../ClientFrame/GlobalUserItem":void 0,"../../ClientFrame/LogonFrame":void 0,"./PayCommon":"PayCommon"}],ROULETTE_CMD:[function(e,t,a){"use strict";cc._RF.push(t,"c4b524KDYRHl639YvElU/89","ROULETTE_CMD"),Object.defineProperty(a,"__esModule",{value:!0}),a.TALK_TYPE=a.MAX_RESULT_COUNT_100=a.AREA_MAX_100=a.COM_CARD_COUNT=a.PUBLIC_CARD_COUNT=a.PLAY_CARD_COUNT=a.MAX_CARD_COUNT=a.MAX_RESULT_COUNT_TexasPoker=a.AREA_MAX=a.GAME_PLAYER_TexasPoker=a.GAME_PLAYER=a.MAX_BET_NUMBER_COUNT=a.MAX_BET_COUNT=void 0,a.MAX_BET_COUNT=30,a.MAX_BET_NUMBER_COUNT=6,a.GAME_PLAYER=5,a.GAME_PLAYER_TexasPoker=6,a.AREA_MAX=6,a.MAX_RESULT_COUNT_TexasPoker=66,a.MAX_CARD_COUNT=52,a.PLAY_CARD_COUNT=2,a.PUBLIC_CARD_COUNT=5,a.COM_CARD_COUNT=5,a.AREA_MAX_100=5,a.MAX_RESULT_COUNT_100=66;class s{}a.default=s,s.SUB_S_GAME_START=100,s.SUB_S_XIAZHU_PUSH=101,s.SUB_S_SEND_ALL_CARD=102,s.SUB_S_INSURE=103,s.SUB_S_FIRST_TALK=104,s.SUB_S_TALK_PUSH=105,s.SUB_S_TALK_SPLIT=106,s.SUB_S_GAME_END_BT=107,s.SUB_S_INSURE_RESULT=108,s.SUB_S_TRANSITION_SCORE_BT=109,s.SUB_S_ADD_SCORE_START=201,s.SUB_S_ADD_SCORE=202,s.SUB_S_ADD_SCORE_DEAL=203,s.SUB_S_ADD_SCORE_CLEAR_LAST=204,s.SUB_S_ADD_SCORE_CLEAR=205,s.SUB_S_GAME_END=206,s.SUB_S_TRANSITION_SCORE=207,s.SUB_S_ADD_SCORE_DOWN=208,s.SUB_S_BET_INFO=209,s.Bet_Data=[{k:"cbBetType",t:"byte"},{k:"cbBetNumber",t:"byte",l:[a.MAX_BET_NUMBER_COUNT,0]},{k:"iScore",t:"int"}],s.CMD_S_BetInfo=[{k:"cbUserBetCount",t:"byte",l:[a.GAME_PLAYER,0]},{k:"betData",t:"table",d:s.Bet_Data,l:[a.GAME_PLAYER,a.MAX_BET_COUNT]},{k:"bAddScoreDeal",t:"bool",l:[a.GAME_PLAYER,0]}],s.CMD_S_AddScore=[{k:"wChairID",t:"word"},{k:"cbBetCount",t:"byte"},{k:"betData",t:"table",d:s.Bet_Data,l:[30,0]},{k:"iBetTotalScore",t:"int"}],s.CMD_S_AddScoreDeal=[{k:"wChairID",t:"word"}],s.CMD_S_AddScoreClear=[{k:"wChairID",t:"word"}],s.CMD_S_AddScoreClearLast=[{k:"wChairID",t:"word"},{k:"LastBetData",t:"table",d:s.Bet_Data},{k:"iBetTotalScore",t:"int"}],s.CMD_S_GameScene=[{k:"cbTableStatus",t:"byte"},{k:"bPlayers",t:"bool",l:[a.GAME_PLAYER,0]},{k:"cbAddScoreLeftTime",t:"byte"},{k:"cbUserBetCount",t:"byte",l:[a.GAME_PLAYER,0]},{k:"betData",t:"table",d:s.Bet_Data,l:[a.GAME_PLAYER,a.MAX_BET_COUNT]},{k:"cbResultIndex",t:"byte"},{k:"cbResult",t:"byte",l:[30,0]},{k:"iBetTotalScore",t:"int",l:[a.GAME_PLAYER,0]},{k:"cbRouletteResult",t:"byte"},{k:"fSelfScore",t:"score"},{k:"fWinScore",t:"score"},{k:"bAddScoreDeal",t:"bool",l:[a.GAME_PLAYER,0]}],s.CMD_S_GameScene_BT=[{k:"minBet",t:"dword"},{k:"maxBet",t:"dword"},{k:"curChairdId",t:"word"},{k:"cards1",t:"byte",l:[4,11]},{k:"cards2",t:"byte",l:[4,11]},{k:"userSplit",t:"byte",l:[3,0]},{k:"betMoney",t:"int",l:[3,2]},{k:"score",t:"double",l:[3,0]},{k:"winScore",t:"double",l:[3,0]},{k:"betBaseMoney",t:"int",l:[3,0]},{k:"isGameing",t:"bool"}],s.CMD_S_XIAZHU=[{k:"chairId",t:"dword"},{k:"money",t:"dword"}],s.CMD_S_SEND_ALL_CARD=[{k:"userData",t:"byte",l:[8,0]}],s.CMD_S_MAIBAOXIAN=[{k:"baoxian",t:"dword",l:[3,0]}],s.CMD_S_FRIST_TALK=[{k:"firstTalk",t:"word"}],s.CMD_S_TALK_PUSH=[{k:"talk",t:"byte"},{k:"curChairId",t:"word"},{k:"nextChairId",t:"word"},{k:"card",t:"byte"},{k:"currMound",t:"byte"},{k:"nextMound",t:"byte"},{k:"money",t:"int"}],s.CMS_S_TALK_SPLIT=[{k:"talkChairId",t:"word"},{k:"card",t:"byte",l:[2,0]},{k:"curChairiD",t:"word"},{k:"money",t:"int"},{k:"mound",t:"byte"}],s.CMD_S_Game_End_BT=[{k:"card",t:"byte",l:[11,0]},{k:"cardCount",t:"byte"},{k:"isSplit",t:"byte",l:[3,0]},{k:"winAndlost1",t:"int",l:[3,0]},{k:"winAndlost2",t:"int",l:[3,0]},{k:"lostwinInfo1",t:"byte",l:[3,0]},{k:"lostwinInfo2",t:"byte",l:[3,0]},{k:"insureMoney",t:"int",l:[3,0]},{k:"userStatu",t:"int",l:[3,0]}],s.CDM_S_Insurance=[{k:"chairId",t:"byte"},{k:"money",t:"dword"}],s.CMD_S_ScoreStart=[{k:"cbAddScoreTime",t:"byte"}],s.CMD_S_AddScore_100=[{k:"wChairID",t:"word"},{k:"iScore",t:"int",l:[a.AREA_MAX_100,0]}],s.CMD_S_AddScoreDeal_100=[{k:"wChairID",t:"word"},{k:"iScore",t:"int",l:[a.AREA_MAX_100,0]}],s.CMD_S_GameEnd_100=[{k:"cbCardCount",t:"byte",l:[2,0]},{k:"cbTableCardArray",t:"byte",l:[2,3]},{k:"iAreaWinScore",t:"int",l:[a.GAME_PLAYER,a.AREA_MAX_100]},{k:"cbOpenResult",t:"byte",l:[a.AREA_MAX_100,0]}],s.CMD_S_Transition_Score_100=[{k:"bTransition",t:"bool"}],s.CMD_S_GameScene_100=[{k:"cbTableStatus",t:"byte"},{k:"bPlayers",t:"bool",l:[a.GAME_PLAYER,0]},{k:"cbAddScoreLeftTime",t:"byte"},{k:"cbCardCount",t:"byte",l:[2,0]},{k:"cbTableCardArray",t:"byte",l:[2,3]},{k:"iAddScore",t:"int",l:[a.GAME_PLAYER,a.AREA_MAX_100]},{k:"cbResultIndex",t:"byte"},{k:"cbResult",t:"byte",l:[a.MAX_RESULT_COUNT_100,0]},{k:"cbResultCount",t:"byte",l:[a.AREA_MAX_100,0]},{k:"addMaxScore",t:"int"},{k:"addMinScore",t:"int"},{k:"wLeftCardCount",t:"word"},{k:"iAreaWinScore",t:"int",l:[a.GAME_PLAYER,a.AREA_MAX_100]},{k:"cbOpenResult",t:"byte",l:[a.AREA_MAX_100,0]},{k:"fSelfScore",t:"score"},{k:"fWinScore",t:"score"},{k:"cbAddScoreTime",t:"byte"}],s.CMD_S_GameEnd=[{k:"cbRouletteResult",t:"byte"},{k:"iBetWinScore",t:"int",l:[a.GAME_PLAYER,0]}],s.CMD_S_BackStage=[{k:"nPlayerID",t:"int"}],s.CMD_S_Transition_Score=[{k:"bTransition",t:"bool"},{k:"fScore",t:"double"},{k:"fTransitionScore",t:"double"}],s.SUB_C_ADD_SCORE=1,s.SUB_C_ADD_SCORE_DEAL=2,s.SUB_C_ADD_SCORE_CLEAR_LAST=3,s.SUB_C_ADD_SCORE_CLEAR=4,s.SUB_C_TRANSITION_SCORE=5,s.SUB_C_BACKSTAGE_START=6,s.SUB_C_BACKSTAGE_END=7,s.CMD_C_XIAZHU=[{k:"chairId",t:"dword"},{k:"money",t:"dword"}],s.CMD_C_TALK=[{k:"talk",t:"byte"},{k:"curChairId",t:"word"}],s.CMD_C_Insurance=[{k:"chairId",t:"byte"},{k:"isBuy",t:"bool"}],s.CMD_C_AddScore_100=[{k:"iScore",t:"int",l:[a.AREA_MAX_100,0]}],s.CMD_C_AddScore=[{k:"cbBetCount",t:"byte"},{k:"betData",t:"table",d:s.Bet_Data,l:[30,0]},{k:"bLastBet",t:"bool"}],s.CMD_C_Transition_Score=[{k:"fScore",t:"double"}],s.CMD_S_GameScene_TexasPoker=[{k:"cbTableStatus",t:"byte"},{k:"bPlayers",t:"bool",l:[a.GAME_PLAYER_TexasPoker,0]},{k:"wBankerUser",t:"word"},{k:"wCurrentUser",t:"word"},{k:"bMidway",t:"bool",l:[a.GAME_PLAYER_TexasPoker,0]},{k:"cbActionLeftTime",t:"byte"},{k:"cbPublicData",t:"byte",l:[a.PUBLIC_CARD_COUNT,0]},{k:"iAddScore",t:"int",l:[a.GAME_PLAYER_TexasPoker,0]},{k:"iScorePool",t:"int"},{k:"fUserScore",t:"double",l:[a.GAME_PLAYER_TexasPoker,0]},{k:"cbCurMaxCardType",t:"byte"},{k:"cbCardData",t:"byte",l:[a.PLAY_CARD_COUNT,0]},{k:"iMaxMangScore",t:"int"}],s.CMD_S_GiveUp=[{k:"wChairID",t:"word"},{k:"wNextUser",t:"word"}],s.CMD_S_PassCard=[{k:"wChairID",t:"word"},{k:"wNextUser",t:"word"}],s.CMD_S_GameStart=[{k:"wBankerUser",t:"word"},{k:"wMinMangUser",t:"word"},{k:"wMaxMangUser",t:"word"},{k:"iMinMangScore",t:"int"},{k:"iMaxMangScore",t:"int"},{k:"fScore",t:"double",l:[a.GAME_PLAYER_TexasPoker,0]}],s.CMD_S_AddScore_TexasPoker=[{k:"wChairID",t:"word"},{k:"iScore",t:"int"},{k:"cbStatus",t:"byte"},{k:"wNextUser",t:"word"}],s.CMD_S_SendCard=[{k:"wCurrentUser",t:"word"},{k:"cbCardData",t:"byte",l:[2,0]}],s.CMD_S_SendPublicCard=[{k:"wCurrentUser",t:"word"},{k:"cbCardData",t:"byte",l:[5,0]},{k:"cbMaxCardType",t:"byte"}],s.CMD_C_AddScore_Texas=[{k:"iScore",t:"int"},{k:"cbStatus",t:"byte"}],s.CMD_S_GameEnd_TexasPoker=[{k:"cbPublicData",t:"byte",l:[a.PUBLIC_CARD_COUNT,0]},{k:"cbUserCardData",t:"byte",l:[a.GAME_PLAYER_TexasPoker,a.PLAY_CARD_COUNT]},{k:"cbMaxCardType",t:"byte",l:[a.GAME_PLAYER_TexasPoker,0]},{k:"cbMaxCardTypeWeave",t:"byte",l:[a.GAME_PLAYER_TexasPoker,a.COM_CARD_COUNT]},{k:"iWinScore",t:"int",l:[a.GAME_PLAYER_TexasPoker,0]},{k:"bSidePot",t:"bool",l:[a.GAME_PLAYER_TexasPoker,0]},{k:"cbSort",t:"byte",l:[a.GAME_PLAYER_TexasPoker,0]}],function(e){e[e.SPLIT=1]="SPLIT",e[e.STAND=2]="STAND",e[e.HIT=3]="HIT",e[e.DOUBLE=4]="DOUBLE"}(a.TALK_TYPE||(a.TALK_TYPE={})),cc._RF.pop()},{}],ResManager:[function(e,t,a){"use strict";cc._RF.push(t,"78ae8LlWDVD4KSgGwJz8T1n","ResManager");var s,n=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0}),a.eRes_Assets=void 0;const{ccclass:i,property:o}=cc._decorator;var r;(function(e){e[e.e_None=0]="e_None",e[e.e_Sprite=1]="e_Sprite",e[e.e_Texture2D=2]="e_Texture2D",e[e.e_Audio=3]="e_Audio",e[e.e_GameObj=4]="e_GameObj",e[e.e_Other=5]="e_Other",e[e.MaxValue=6]="MaxValue"})(r=a.eRes_Assets||(a.eRes_Assets={}));let l=s=class{constructor(){this.m_dic_ListAssets=null,this.m_dic_ListAssets=new Map;for(let e=r.e_None+1;e<r.MaxValue;e++){let t=[];this.m_dic_ListAssets.set(e,t)}}static getInstance(){return this.instance||(this.instance=new s),this.instance}Clear(){for(let e=r.e_None+1;e<r.MaxValue;e++)this.m_dic_ListAssets[e].Clear()}GetAsset(e,t){let a=null;if(this.m_dic_ListAssets.has(e))for(let s=0;s<this.m_dic_ListAssets[e].Count;s++)if(this.m_dic_ListAssets[e][s].name==t){a=this.m_dic_ListAssets[e][s];break}return a}AddAssets(e){}GetBundlePath(e,t=!1){return""}};l.instance=null,l=s=n([i],l),a.default=l,cc._RF.pop()},{}],SHOTKENO_CMD:[function(e,t,a){"use strict";cc._RF.push(t,"8457dzUpqREH6mVe1sg3OEJ","SHOTKENO_CMD");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0});const{ccclass:n,property:i}=cc._decorator;let o=class{};o.SUB_S_CHANGE_MULRIPLE=201,o.SUB_S_RESULT_INFO=202,o.SUB_S_TRANSITION_SCORE=203,o.SUB_S_JACKCPOTS=204,o.SUB_S_BALLMAXWIN=205,o.SUB_S_WIN_JACKPOT=206,o.SUB_S_JACKPOT_STATUS=207,o.CMD_S_GameScene=[{k:"nBallMulriple",t:"int"},{k:"fBallScore",t:"score"},{k:"fWinScore",t:"score"},{k:"fJackpots",t:"double",l:[4,0]},{k:"iMaxWinScore",t:"int"}],o.CMD_S_GameScene1=[{k:"nBallMulriple",t:"int"},{k:"fBallScore",t:"score"},{k:"fWinScore",t:"score"},{k:"fJackpots",t:"double",l:[4,0]}],o.CMD_S_ResultInfo=[{k:"cbPickCount",t:"byte"},{k:"cbPickNumber",t:"byte",l:[10,0]},{k:"cbWinNumber",t:"byte",l:[20,0]},{k:"cbUserWinCount",t:"byte"},{k:"cbUserWinNumber",t:"byte",l:[10,0]},{k:"fWinScore",t:"score"},{k:"fBallScore",t:"score"},{k:"fTotalWinScore",t:"score"}],o.CMD_S_ChangeMultiple=[{k:"nMultiple",t:"int"}],o.CMD_S_BackStage=[{k:"nPlayerID",t:"int"}],o.CMD_S_Transition_Score=[{k:"bTransition",t:"bool"},{k:"fScore",t:"double"},{k:"fTransitionScore",t:"double"}],o.CMD_S_MaxWin=[{k:"iMaxWinScore",t:"int"}],o.CMD_S_Jackpot=[{k:"m_fJackpots",t:"double",l:[4,0]}],o.CMD_S_JackpotStatus=[{k:"bStatus",t:"bool"}],o.CMD_S_WinJackpot=[{k:"cbWinIndex",t:"byte"},{k:"jackpotScore",t:"double"}],o.SUB_C_CHANGE_MULRIPLE=1,o.SUB_C_PICK_NUMBER=2,o.SUB_C_TRANSITION_SCORE=3,o.SUB_C_BACKSTAGE_START=4,o.SUB_C_BACKSTAGE_END=5,o.CMD_C_ChangeMultiple=[{k:"bMultiple",t:"bool"},{k:"bMax",t:"bool"}],o.CMD_C_PlayerPickNumber=[{k:"cbPickNumber",t:"byte",l:[10,0]},{k:"cbPickCount",t:"byte"}],o.CMD_C_Transition_Score=[{k:"fScore",t:"double"}],o=s([n],o),a.default=o,cc._RF.pop()},{}],SMGlobal:[function(e,t,a){"use strict";cc._RF.push(t,"4362emFJPlDlr6k9IJL5yuP","SMGlobal");var s,n=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0}),a.eTransScoreKey=a.ePreObj=a.eShowLinesMode=a.eBtnState=a.eGameState=a.ePlayMode=a.eLuckyPrizeID=a.eManPullJPState=a.eTransScoreMode=void 0;const{ccclass:i,property:o}=cc._decorator;(function(e){e[e.eTSM_None=-1]="eTSM_None",e[e.eTSM_GameToWin=0]="eTSM_GameToWin",e[e.eTSM_GenWinToCredit=1]="eTSM_GenWinToCredit",e[e.eTSM_FSMedTotalWinToCredit=2]="eTSM_FSMedTotalWinToCredit",e[e.eTSM_MedToWin=3]="eTSM_MedToWin",e[e.eTSM_JPToCredit=4]="eTSM_JPToCredit"})(a.eTransScoreMode||(a.eTransScoreMode={})),function(e){e[e.eMPJPS_None=0]="eMPJPS_None",e[e.eMPJPS_Timer=1]="eMPJPS_Timer",e[e.eMPJPS_JPPro=2]="eMPJPS_JPPro"}(a.eManPullJPState||(a.eManPullJPState={})),function(e){e[e.e_None=-1]="e_None",e[e.e_LP_0=0]="e_LP_0",e[e.e_LP_1=1]="e_LP_1",e[e.e_LP_2=2]="e_LP_2",e[e.e_LP_3=3]="e_LP_3",e[e.MaxValue=4]="MaxValue"}(a.eLuckyPrizeID||(a.eLuckyPrizeID={})),function(e){e[e.ePM_Man=0]="ePM_Man",e[e.ePM_Auto=1]="ePM_Auto",e[e.eBS_FSIdle=2]="eBS_FSIdle"}(a.ePlayMode||(a.ePlayMode={})),function(e){e[e.eGS_None=0]="eGS_None",e[e.eGS_CanChangeBet=1]="eGS_CanChangeBet",e[e.eGS_Playing=2]="eGS_Playing",e[e.eGS_TransGameMode=3]="eGS_TransGameMode"}(a.eGameState||(a.eGameState={})),function(e){e[e.eBS_None=0]="eBS_None",e[e.eBS_GenIdle=1]="eBS_GenIdle",e[e.eBS_FSIdle=2]="eBS_FSIdle",e[e.eBS_Playing=3]="eBS_Playing",e[e.eBS_Auto=4]="eBS_Auto",e[e.eBS_Manual=5]="eBS_Manual",e[e.eBS_Trans=6]="eBS_Trans"}(a.eBtnState||(a.eBtnState={})),function(e){e[e.eSLM_HideAll=0]="eSLM_HideAll",e[e.eSLM_ShowAll=1]="eSLM_ShowAll",e[e.eSLM_ShowAllGen=2]="eSLM_ShowAllGen",e[e.eSLM_HideAllGen=3]="eSLM_HideAllGen",e[e.eSLM_ShowSingle=4]="eSLM_ShowSingle",e[e.eSLM_HideSingle=5]="eSLM_HideSingle",e[e.eSLM_ShowFS=6]="eSLM_ShowFS",e[e.eSLM_ShowFSOut=7]="eSLM_ShowFSOut",e[e.eSLM_ShowWILD=8]="eSLM_ShowWILD"}(a.eShowLinesMode||(a.eShowLinesMode={})),function(e){e[e.ePO_None=-1]="ePO_None",e[e.ePO_ItemAnim=0]="ePO_ItemAnim",e[e.ePO_LinesFra=1]="ePO_LinesFra",e[e.ePO_Bouns=2]="ePO_Bouns",e[e.ePO_ItemWILD=3]="ePO_ItemWILD",e[e.ePO_ItemAnim_1=4]="ePO_ItemAnim_1",e[e.ePO_Bouns_1=5]="ePO_Bouns_1",e[e.ePO_MaxValue=6]="ePO_MaxValue"}(a.ePreObj||(a.ePreObj={})),function(e){e[e.eSK_None=0]="eSK_None",e[e.eSK_CanGetScoreFast=1]="eSK_CanGetScoreFast",e[e.eSK_CanGetScoreAll=2]="eSK_CanGetScoreAll"}(a.eTransScoreKey||(a.eTransScoreKey={}));let r=s=class{static GetOpenSE(){return cc.error("GetOpenSE===="),s.M_bOpenSE}static Clamp(e,t,a){if(t>a)try{throw new Error("\u624b\u52a8\u629b\u51fa\u5f02\u5e38")}catch(s){}return e<t?t:e>a?a:e}static Random(e,t){return Math.floor(Math.random()*(t-1-e)+e)}static GetTurntableInitData(){cc.log("-----GetTurntableInitData");let e=new Map,t=[];t.push(1),t.push(4),t.push(7),t.push(10),e.set(0,t);let a=[];a.push(2),a.push(5),a.push(8),a.push(11),e.set(1,a);let s=[];s.push(3),s.push(6),s.push(9),e.set(2,s);let n=[];return n.push(0),e.set(3,n),e}static GetTurntableInitData_BUFFALO(){cc.log("-----GetTurntableInitData");let e=new Map,t=[];t.push(1),t.push(6),e.set(0,t);let a=[];a.push(4),a.push(10),a.push(15),e.set(1,a);let s=[];s.push(8),s.push(11),e.set(2,s);let n=[];n.push(12),e.set(3,n);let i=[];i.push(3),i.push(9),e.set(4,i);let o=[];o.push(7),o.push(13),e.set(5,o);let r=[];r.push(0),r.push(5),e.set(6,r);let l=[];return l.push(2),l.push(14),e.set(7,l),e}static GetTurntableInitData_Cash(){cc.log("-----GetTurntableInitData");let e=new Map,t=[];t.push(0),t.push(8),e.set(8,t);let a=[];a.push(1),e.set(25,a);let s=[];s.push(2),s.push(12),e.set(5,s);let n=[];n.push(3),n.push(11),n.push(25),e.set(50,n);let i=[];i.push(4),i.push(18),e.set(2,i);let o=[];o.push(5),e.set(10,o);let r=[];r.push(6),r.push(26),e.set(6,r);let l=[];l.push(7),l.push(21),l.push(29),e.set(0,l);let c=[];c.push(9),e.set(30,c);let d=[];d.push(10),d.push(24),e.set(4,d);let h=[];h.push(13),e.set(1,h);let _=[];_.push(14),e.set(38,_);let m=[];m.push(15),m.push(20),e.set(9,m);let u=[];u.push(16),u.push(28),e.set(3,u);let S=[];S.push(17),e.set(2500,S);let g=[];g.push(19),e.set(13,g);let f=[];f.push(22),e.set(7,f);let I=[];I.push(23),e.set(20,I);let C=[];return C.push(27),e.set(15,C),e}static GetSaveOpenSE(){cc.error("GetSaveOpenSE====");let e=cc.sys.localStorage.getItem(this.M_SaveOpenSE);return"true"==e?(this.M_bOpenSE=!0,!0):"false"==e?(this.M_bOpenSE=!1,!1):(this.M_bOpenSE=!0,!0)}};r.M_fVolPropBGM=1,r.M_fVolPropSE=1,r.M_bOpenBMG=!0,r.M_bOpenSE=!0,r.M_SaveOpenSE="M_bOpenSE",r=s=n([i],r),a.default=r,cc._RF.pop()},{}],ShowImageNumCtrl:[function(e,t,a){"use strict";cc._RF.push(t,"468c5ZQWApNWoAFOX8KZrLP","ShowImageNumCtrl");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0});const n=e("../../../../ClientBase/GameUtils"),{ccclass:i,property:o}=cc._decorator;let r=class extends cc.Component{constructor(...e){super(),this.m_list_icPairSpe=null,this.m_bIsShowComma=!1,this.m_IsScoreNum=!1;let t=e[0],a=e[1],s=e[2],n=e[3],i=e[4];null!=t&&null!=a&&null!=s?(this.m_transP=t,this.m_gNumPre=a,this.m_ary_SpNum=s,this.m_list_icPairSpe=n,this.m_bIsShowComma=i,this.m_queue_imaNum=new Array,this.m_list_ImaNum=new Array,this.m_IsScoreNum=e[5]):cc.log("[ShowImageNumCtrl]-> \u521d\u59cb\u5316\u5931\u8d25\uff01")}ShowNum2(e,t=!0,a=!1){let s=[];this.m_IsScoreNum&&n.GameUtils.m_eShowMode==n.eShowMode.eSM_Money&&(e=Math.floor(e)/100);let i=e.toString(),o=[];for(let n=i.length-1;n>=0;n--)o.push(i[n]);for(let n=o.length-1;n>=0;n--)s.push(o[n]);0!=e||t?this.ShowNumLogic(s):this.Recycle()}ShowNum3(e,t=!0,a=-1,s=!1){let n=[];cc.error("ShowNum3====");let i=e,o="";e>1e3?(i=e/1e3,o="k"):e>1e4&&(i=e/1e4,o="m");let r="";r=a>-1?i.toFixed(a):i.toFixed(0),i==Math.floor(i)&&(r=i.toFixed(0));let l=[],c=0,d=!1;for(let h=r.length-1;h>=0;h--)c>0&&c%3==0&&l.push(","),l.push(r[h]),d&&c++,"."==r[h]&&(d=!0);n.push("$");for(let h=l.length-1;h>=0;h--)n.push(l[h]);""!=o&&n.push(o),0!=e||t?this.ShowNumLogic(n):this.Recycle()}ShowNum1(e,t=!0,a=-1,s=!1){let i=[];this.m_IsScoreNum&&n.GameUtils.m_eShowMode==n.eShowMode.eSM_Money&&(i.push("$"),a=2,e=Math.floor(e)/100);let o=e,r=o.toString(),l=[],c=0;-1==a?r=(o=Math.floor(e)).toString():(a<0&&(a=0),r=o.toFixed(a),a>0&&(c=-a-1));for(let n=r.length-1;n>=0;n--)c>0&&c%3==0&&l.push(","),l.push(r[n]),c++;for(let n=l.length-1;n>=0;n--)i.push(l[n]);0!=e||t?this.ShowNumLogic(i):this.Recycle()}ShowNumLogic(e){for(let t=this.m_list_ImaNum.length-1;t>=e.length;t--){let e=this.m_list_ImaNum[t];e.node.active=!1,this.m_queue_imaNum.push(e),this.m_list_ImaNum.splice(t,1)}for(let t=0;t<e.length;t++){if(t>=this.m_list_ImaNum.length){let e=this.GetImagePef();e.node.active=!0,this.m_list_ImaNum.push(e)}let a,s=!1;if(Number(e[t])<=9&&Number(e[t])>=0&&(s=!0,a=Number(e[t])),s)this.m_ary_SpNum[a]?this.m_list_ImaNum[t].spriteFrame=this.m_ary_SpNum[a]:this.m_list_ImaNum[t].node.active=!1;else if(null==this.m_list_icPairSpe)cc.error("[ShowImageNumCtrl]->ShowNumLogic() \u6709\u4e0d\u5b58\u5728\u7684\u7b26\u53f7\uff1a",e[t]),this.m_list_ImaNum[t].spriteFrame=null,this.m_list_ImaNum[t].node.active=!1;else{let a=!1;this.m_list_icPairSpe.forEach((s,n)=>{s==e[t]&&(this.m_ary_SpNum[n]?this.m_list_ImaNum[t].spriteFrame=this.m_ary_SpNum[n]:(this.m_list_ImaNum[t].spriteFrame=this.m_ary_SpNum[n],this.m_list_ImaNum[t].node.active=!1),a=!0)}),a||(this.m_list_ImaNum[t].spriteFrame=null,this.m_list_ImaNum[t].node.active=!1)}}}GetImagePef(){let e=null;if(this.m_queue_imaNum.length>0)e=this.m_queue_imaNum.pop();else{let t=cc.instantiate(this.m_gNumPre);t.setParent(this.m_transP),t.active=!1,e=t.getComponent(cc.Sprite)}return e}Recycle(){if(cc.log("Recycle==="),this.m_list_ImaNum.length>0){for(let e=this.m_list_ImaNum.length-1;e>=0;e--){let t=this.m_list_ImaNum[e];t.node.active=!1,this.m_queue_imaNum.push(t)}this.m_list_ImaNum=[]}}Final(){this.m_queue_imaNum=[],this.m_list_ImaNum=[],this.m_ary_SpNum=[],this.m_list_icPairSpe=null}};r=s([i],r),a.default=r,cc._RF.pop()},{"../../../../ClientBase/GameUtils":void 0}],SlotJcakpotScale_Item:[function(e,t,a){"use strict";cc._RF.push(t,"937edJDUYFAlYgirtrUutu4","SlotJcakpotScale_Item");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0});const n=e("./SMGlobal"),i=e("./TransScoreCtrl"),{ccclass:o,property:r}=cc._decorator;let l=class extends cc.Component{constructor(...e){super(),this.m_eTransScoreMode=n.eTransScoreMode.eTSM_None,this.m_caller=e[0],this.ScaleBackEvn=e[1],this.m_ObjTitle=e[2],this.m_ary_SprNumJcakpotTitle=e[3],this.m_TransScoreCtrl=new i.default(this,null,this.AddTransScore.bind(this),2,2)}MyUpdate(){}OnPlay(e,t,a,s,i,o=!1,r=-1,l=!1){return cc.error("OnPlay===="),this.m_ObjTitle.spriteFrame=this.m_ary_SprNumJcakpotTitle[e],this.m_iKeepPoints=r,this.m_eTransScoreMode=n.eTransScoreMode.eTSM_MedToWin,this.m_TransScoreCtrl.TransScore(t,0,()=>{this.m_eTransScoreMode=n.eTransScoreMode.eTSM_None,null!=this.ScaleBackEvn&&this.ScaleBackEvn(this.m_caller,null)}),this.m_bIsScaleing=!0,null}ShowNum(e,t,a=-1){cc.error("ShowNum===="),this.m_ShowNum.ShowNum1(t,!0,a)}ColseJP(e){null!=e&&this.RecoverPreObj(e)}RecoverPreObj(e){this.m_bIsScaleing=!1}AddTransScore(e){switch(this.m_eTransScoreMode){case n.eTransScoreMode.eTSM_MedToWin:this.ShowImageNum(this.m_ShowNum,e)}}ShowImageNum(e,t){cc.error("ShowImageNum===="),e.ShowNum1(t,!0,this.m_iKeepPoints)}};l=s([o],l),a.default=l,cc._RF.pop()},{"./SMGlobal":"SMGlobal","./TransScoreCtrl":"TransScoreCtrl"}],SlotJcakpot_Flop:[function(e,t,a){"use strict";cc._RF.push(t,"3aa4eTTpQtLJZynEAZPS+D8","SlotJcakpot_Flop");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0}),a.ePosFlopState=void 0;const n=e("./SMGlobal"),{ccclass:i,property:o}=cc._decorator;var r;(function(e){e[e.ePMS_None=0]="ePMS_None",e[e.ePMS_Flop=1]="ePMS_Flop",e[e.ePMS_FlopEnd=2]="ePMS_FlopEnd"})(r=a.ePosFlopState||(a.ePosFlopState={}));let l=class extends cc.Component{constructor(){super(...arguments),this.m_ePosZoomState=r.ePMS_None,this.mLisTransJP=[],this.m_List=[],this.Num=-1,this.m_DicAnimsName=new Map,this.NumberOfClicks=0,this.m_bIslimit=!1,this.m_bIsDrawEnd=!1,this.m_caller=null,this.m_fToTalTime=2,this.m_fTimer=0}Init(e,t,a,s,n,i,o,r=null,l=null,c=null){cc.error("===SlotJcakpot_Flop===Init"),this.m_iJPid=e,this.m_ButtonColick=t,this.m_AnimJPDrawEff=a,this.m_SPJPDrawEff=s,this.m_SPFJPDrawEff=n,this.m_TransWinCoin=i,this.m_TransJPBG=o,this.m_caller=r,this.MovedBackEvn=l,this.MOnClickEvn=c,this.SetGameObject(this.m_ButtonColick,this.m_AnimJPDrawEff)}SetGameObject(e,t){cc.error("===SlotJcakpot_Flop===SetGameObject");for(let a=0;a<e.length;a++)this.SetBtnEvent(e[a],!0,!0),this.m_DicAnimsName.set(t[a].node.name,t[a])}UpdateJPMove(){switch(this.m_ePosZoomState){case r.ePMS_None:case r.ePMS_Flop:break;case r.ePMS_FlopEnd:this.m_ePosZoomState=r.ePMS_None,null!=this.MovedBackEvn&&this.MovedBackEvn.call(this.m_caller)}}ShowAnimsImage(e){cc.error("===SlotJcakpot_Flop===ShowAnimsImage"),this.m_iJPid=e,this.m_TransJPBG.active=!0;let t=0,a=function(){this.m_ButtonColick[t].node.opacity=255,++t==this.m_ButtonColick.length-1&&this.scheduleOnce(()=>{cc.log("====ShowAnimsImage \u52a8\u753b\u5b8c\u6210"),this.m_bIslimit=!0,this.m_ePosZoomState=r.ePMS_Flop},1)};this.scheduleOnce(()=>{this.schedule(a,.3,this.m_ButtonColick.length-1)},.5)}SetBtnEvent(e,t=!0,a=!0){if(null!=e){let s=new cc.Component.EventHandler;s.target=this.node,s.component="SlotJcakpot_Flop",s.handler="BtnEventCallback",e.clickEvents.push(s),e.node.active=t,e.interactable=a}}BtnEventCallback(e,t){var a=e.target;this.OnClickBtn(a)}OnClickBtn(e){this.m_bIslimit&&null!=e&&(null!=this.MOnClickEvn&&this.MOnClickEvn(),this.ShowImage(e))}ShowImage(e){let t="Image_FlopEff_",a=0,s=e.name.substr(t.length,e.name.length-t.length);if(a=Number(s),this.m_ButtonColick[a].interactable=!1,this.m_bIslimit=!1,this.m_List.length<=0)if(this.NumberOfClicks<2){for(let e=0;e<4;e++)this.m_List.push(e);this.NumberOfClicks++}else this.NumberOfClicks>=2&&(this.m_List.push(this.m_iJPid),this.NumberOfClicks++);if(this.m_List.length>0){let e=n.default.Random(0,this.m_List.length),t=this.m_List[e];this.m_List.splice(e,1),this.m_ButtonColick[a].node.opacity=0,t==this.m_iJPid&&this.mLisTransJP.push(a),this.m_SPJPDrawEff[a].spriteFrame=this.m_SPFJPDrawEff[t],this.m_DicAnimsName.get(this.m_AnimJPDrawEff[a].node.name).node.opacity=255,this.m_DicAnimsName.get(this.m_AnimJPDrawEff[a].node.name).play(),t==this.m_iJPid&&(this.m_List=[]),3==this.mLisTransJP.length?this.scheduleOnce(()=>{cc.error("====ShowImage====\u7ed3\u675f!"),this.m_bIsDrawEnd=!0,this.ShowCoinWinEff(),this.scheduleOnce(()=>{this.HideWinCoin(),this.m_ePosZoomState=r.ePMS_FlopEnd},this.m_fToTalTime)},1):this.m_bIslimit=!0}}HideWinCoin(){this.mLisTransJP=[];for(let e=0;e<this.m_ButtonColick.length;e++)this.m_ButtonColick[e].interactable=!0,this.m_ButtonColick[e].node.opacity=0,this.m_AnimJPDrawEff[e].node.opacity=0;if(this.m_TransWinCoin)for(let e=0;e<this.m_TransWinCoin.length;e++)this.m_TransWinCoin[e].node.opacity=0}ShowCoinWinEff(){if(this.mLisTransJP.length>0)for(let e=0;e<this.mLisTransJP.length;e++){let t=this.mLisTransJP[e];this.m_TransWinCoin&&(this.m_TransWinCoin[t].node.opacity=255,this.m_TransWinCoin[t].play(),this.m_AnimJPDrawEff[t].node.opacity=0)}}HideCoinWinEff(){this.m_TransJPBG.active=!1,this.NumberOfClicks=0,this.m_bIslimit=!1,this.m_bIsDrawEnd=!1,this.m_ePosZoomState!=r.ePMS_None&&(this.m_ePosZoomState=r.ePMS_None)}};l=s([i],l),a.default=l,cc._RF.pop()},{"./SMGlobal":"SMGlobal"}],SoundSystem:[function(e,t,a){"use strict";cc._RF.push(t,"8157c3poypFr4TWQH3XZwqp","SoundSystem");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0});const n=e("./SMGlobal"),i=e("./Sound"),{ccclass:o,property:r}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.m_aryList_acBGM=new Array,this.m_aryList_fBGMVolRatio=new Array,this.m_aryList_acSE=new Array,this.m_aryList_fSEVolRatio=new Array,this.m_queue_Sound=new Array,this.m_snBGM=null,this.m_iBGMIndex=0,this.m_bIsRandomBGM=!1,this.m_list_BGMPriorPlay=new Array,this.m_dic_NotRepIsPlay=new Map,this.m_list_iPairSEPlaying=new Map}OnDestroy(){cc.error("OnDestroy===SoundSystem"),this.ClearAllSound(),this.m_queue_Sound=[]}UpdateSound(){for(let e=this.m_list_iPairSEPlaying.size-1;e>=0;e--){let t=this.m_list_iPairSEPlaying[e].Value;if(null!=t&&!t.isPlaying){let a=this.m_list_iPairSEPlaying[e].Key;if(this.StopSound(t),this.m_list_iPairSEPlaying.delete(e),this.m_dic_NotRepIsPlay.has(a)){let e=this.m_dic_NotRepIsPlay.get(a);e.forEach((t,s)=>{e.set(s,!1),this.m_dic_NotRepIsPlay.set(a,e)}),this.m_dic_NotRepIsPlay.set(a,e)}}}this.m_bIsRandomBGM&&n.default.M_bOpenBMG&&(null!=this.m_snBGM&&!this.m_snBGM.isPlaying||null==this.m_snBGM)?this.BGMRandom():null==this.m_snBGM||this.m_snBGM.isPlaying||this.m_snBGM.loop||this.BGMStop()}ClearAllSound(){this.StopAllSound(),this.SEClear(),this.BGMClear()}StopAllSound(){this.BGMStop(),this.m_list_iPairSEPlaying.forEach(e=>{let t=e;this.StopSound(t)}),this.m_list_iPairSEPlaying.clear(),this.m_dic_NotRepIsPlay.clear()}GetAllSoundCount(){return this.m_aryList_acSE.length}GetBGMCount(){return this.m_aryList_acBGM.length}GetSECount(){return this.m_aryList_acSE.length-this.m_aryList_acBGM.length}SEClear(){this.m_aryList_acSE=[],this.m_aryList_fSEVolRatio=[]}SEAdd(e,t=1){null!=e&&(((t=n.default.Clamp(t,0,1))<0||t>1)&&(t=1),this.m_aryList_acSE.push(e),this.m_aryList_fSEVolRatio.push(t))}SEPlay(e,t=0,a=!1,s=!1){if(!n.default.M_bOpenSE)return null;if(e<0||e>=this.m_aryList_acSE.length)return null;if(s){if(this.m_dic_NotRepIsPlay.has(e)){this.m_dic_NotRepIsPlay.get(e).has(t)||this.m_dic_NotRepIsPlay.get(e).set(t,!1);let a=this.m_dic_NotRepIsPlay.get(e);a.forEach(s=>{if(s&&(a.set(t,!0),this.m_dic_NotRepIsPlay.set(e,a),this.m_list_iPairSEPlaying.has(e)))return this.m_list_iPairSEPlaying.get(e)}),a.set(t,!0),this.m_dic_NotRepIsPlay.set(e,a)}}else{this.m_dic_NotRepIsPlay.has(e)||this.m_dic_NotRepIsPlay.set(e,new Map),this.m_dic_NotRepIsPlay.get(e).has(t)||this.m_dic_NotRepIsPlay.get(e).set(t,!1);let a=this.m_dic_NotRepIsPlay.get(e);a.forEach(s=>{if(s&&(a.set(t,!0),this.m_dic_NotRepIsPlay.set(e,a),this.m_list_iPairSEPlaying.has(e)))return this.m_list_iPairSEPlaying.get(e)}),a.set(t,!0),this.m_dic_NotRepIsPlay.set(e,a)}let i=this.PlaySound(this.m_aryList_acSE[e],n.default.M_fVolPropSE*this.m_aryList_fSEVolRatio[e],a);return this.m_list_iPairSEPlaying.set(e,i),i}SEStop(e,t){this.m_list_iPairSEPlaying.forEach((a,s)=>{if(a==e){let a=s;if(this.m_dic_NotRepIsPlay.has(a)){let e=this.m_dic_NotRepIsPlay.get(a);e.set(t,!1),this.m_dic_NotRepIsPlay.set(a,e),e.forEach(()=>{})}this.StopSound(e),this.m_list_iPairSEPlaying.delete(s)}})}SEStop1(e){if(cc.error("SEStop1"),this.m_list_iPairSEPlaying.has(e)&&(this.StopSound(this.m_list_iPairSEPlaying.get(e)),this.m_list_iPairSEPlaying.delete(e)),this.m_dic_NotRepIsPlay.has(e)){let t=this.m_dic_NotRepIsPlay.get(e);t.forEach((e,a)=>{t.set(a,!1)}),this.m_dic_NotRepIsPlay.set(e,t)}}SEToggle(e){cc.log("SEToggle,bValue",e,"SMGlobal.M_bOpenSE",n.default.M_bOpenSE),n.default.M_bOpenSE!=e?(n.default.M_bOpenSE=e,n.default.M_bOpenSE?cc.sys.localStorage.setItem(n.default.M_SaveOpenSE,"true"):cc.sys.localStorage.setItem(n.default.M_SaveOpenSE,"false"),n.default.M_bOpenSE?this.BGMToggle(n.default.M_bOpenSE):this.StopAllSound()):n.default.M_bOpenSE&&(n.default.M_bOpenBMG=!0)}SEChangeVol(e){cc.error("SEChangeVol"),n.default.M_fVolPropSE=n.default.Clamp(e,0,1),this.m_list_iPairSEPlaying.forEach((e,t)=>{let a=t,s=e;n.default.M_bOpenSE&&null!=s&&(s.volume=n.default.M_fVolPropSE*this.m_aryList_fSEVolRatio[a])})}SEChangeSingleVol(e,t){if(cc.error("SEChangeSingleVol"),e<0||e>=this.m_aryList_acSE.length)cc.log("[SoundSystem] index out of range");else if(t=n.default.Clamp(t,0,1),this.m_list_iPairSEPlaying.has(e)){let a=this.m_list_iPairSEPlaying.get(e);a.volume=t*this.m_aryList_fSEVolRatio[e],this.m_list_iPairSEPlaying.set(e,a)}}BGMClear(){this.m_aryList_acBGM=[],this.m_aryList_fBGMVolRatio=[]}BGMAdd(e,t=1){null!=e&&(((t=n.default.Clamp(t,0,1))<0||t>1)&&(t=1),this.m_aryList_acBGM.push(e),this.m_aryList_fBGMVolRatio.push(t))}BGMPlay(e,t=!0){n.default.M_bOpenBMG&&(e<0||e>=this.m_aryList_acBGM.length||e==this.m_iBGMIndex&&null!=this.m_snBGM||(this.StopSound(this.m_snBGM),this.m_iBGMIndex=e,this.m_snBGM=this.PlaySound(this.m_aryList_acBGM[this.m_iBGMIndex],n.default.M_fVolPropBGM*this.m_aryList_fBGMVolRatio[this.m_iBGMIndex],t)))}BGMPlay1(e,t,a=!0){if(cc.error("BGMPlay1"),!n.default.M_bOpenBMG)return;if(e<0||e>=this.m_aryList_acBGM.length)return;if(this.m_list_BGMPriorPlay.length<=0)for(let n=0;n<this.m_aryList_acBGM.length;n++){let e=new Map;this.m_list_BGMPriorPlay.push(e)}if(!this.m_list_BGMPriorPlay[e].has(t))for(let n=0;n<this.m_list_BGMPriorPlay.length;n++)this.m_list_BGMPriorPlay[n].set(t,!1);for(let n=0;n<this.m_list_BGMPriorPlay.length;n++){let a=this.m_list_BGMPriorPlay[n];n==e?a.set(t,!0):a.set(t,!1)}let s=0;for(let n=0;n<this.m_list_BGMPriorPlay.length;n++)this.m_list_BGMPriorPlay[n].forEach(e=>{e&&(s=n)});s==this.m_iBGMIndex&&null!=this.m_snBGM||(this.StopSound(this.m_snBGM),this.m_iBGMIndex=s,this.m_snBGM=this.PlaySound(this.m_aryList_acBGM[this.m_iBGMIndex],n.default.M_fVolPropBGM*this.m_aryList_fBGMVolRatio[this.m_iBGMIndex],a))}BGMNext(){cc.error("BGMNext");let e=this.m_iBGMIndex+1;e>=this.m_aryList_acBGM.length&&(e=0),this.BGMPlay(e)}BGMPrev(){cc.error("BGMPrev");let e=this.m_iBGMIndex-1;e<0&&(e=this.m_aryList_acBGM.length-1),this.BGMPlay(e)}BGMRandom(){cc.error("BGMRandom");let e=0;this.m_aryList_acBGM.length>1&&(e=Math.floor(Math.random()*(this.m_aryList_acBGM.length-0)+0)+1),this.BGMPlay(e,!1),this.m_bIsRandomBGM=!0}BGMStop(){this.StopSound(this.m_snBGM),this.m_snBGM=null,this.m_bIsRandomBGM=!1,this.m_list_BGMPriorPlay=[],n.default.M_bOpenBMG=!1}BGMToggle(e){if(n.default.M_bOpenBMG!=e)if(n.default.M_bOpenBMG=e,cc.log("SMGlobal.M_bOpenBMG",n.default.M_bOpenBMG),n.default.M_bOpenBMG)this.BGMPlay(this.m_iBGMIndex);else{this.StopSound(this.m_snBGM),this.m_snBGM=null;for(let e=0;e<this.m_list_BGMPriorPlay.length;e++){let t=this.m_list_BGMPriorPlay[e];t.forEach((e,a)=>{t.set(a,!1)})}}}BGMChangeVol(e){n.default.M_fVolPropBGM=n.default.Clamp(e,0,1),n.default.M_bOpenBMG&&null!=this.m_snBGM&&(this.m_snBGM.volume=n.default.M_fVolPropBGM*this.m_aryList_fBGMVolRatio[this.m_iBGMIndex])}PlaySound(e,t=1,a=!1){let s=null;return(s=this.m_queue_Sound.length<=0?new i.default:this.m_queue_Sound.pop()).clip=e,s.loop=a,s.volume=t,s.Play(),s}StopSound(e){null!=e&&(e.Stop(),this.m_queue_Sound.push(e))}};l=s([o],l),a.default=l,cc._RF.pop()},{"./SMGlobal":"SMGlobal","./Sound":"Sound"}],Sound:[function(e,t,a){"use strict";cc._RF.push(t,"bc807sqQZZHT7MamjXKKB7u","Sound");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0});const{ccclass:n,property:i}=cc._decorator;let o=class extends cc.Component{constructor(){super(),this.m_loop=!1,this.m_isPlaying=!1,this.m_sid=0}get clip(){return this.m_clip}set clip(e){this.m_clip=e}get isPlaying(){return this.m_isPlaying}get volume(){return this.m_volume}set volume(e){this.m_volume=e}get loop(){return this.m_loop}set loop(e){this.m_loop=e}Play(){this.m_sid=cc.audioEngine.play(this.m_clip,this.m_loop,this.m_volume)}Stop(){cc.audioEngine.stop(this.m_sid)}};o=s([n],o),a.default=o,cc._RF.pop()},{}],TopBarH:[function(e,t,a){"use strict";cc._RF.push(t,"46ec1VWKJVERK7mTCOEZ5NH","TopBarH");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0});const n=e("./JackpotNumChange"),{ccclass:i,property:o}=cc._decorator;let r=class extends cc.Component{constructor(){super(...arguments),this.m_iJackpotCount=4,this.m_ary_JackpotNumChange=new Array(4)}onLoad(){for(let e=0;e<this.m_iJackpotCount;e++){let t=[],a=cc.assetManager.getBundle("SLOST_COMMON").get("Res/Texure/Jcakpot/jackpotNum_"+e,cc.SpriteAtlas);for(let n=0;n<13;n++)t[n]=a.getSpriteFrame("jackpotNum_"+e+"_"+n);let s=cc.find("Jackpot_"+e,this.node);this.m_ary_JackpotNumChange[e]=s.addComponent(n.default),this.m_ary_JackpotNumChange[e].setNumSpriteFrame(t)}}onJackpots(e){for(let t=0;t<e.length;t++)this.m_ary_JackpotNumChange[t].setString(Math.round(100*e[t])/100)}Final(){this.m_ary_JackpotNumChange=null}};r=s([i],r),a.default=r,cc._RF.pop()},{"./JackpotNumChange":"JackpotNumChange"}],TopBarV:[function(e,t,a){"use strict";cc._RF.push(t,"b553fqW2n1KDrq5u8IxMwrw","TopBarV");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0});const n=e("../GameBaseSlot"),i=e("./JackpotNumChange"),o=e("./ShowImageNumCtrl"),{ccclass:r,property:l}=cc._decorator;let c=class extends cc.Component{constructor(){super(...arguments),this.handlerComName="SLOST_COMMON",this.m_iJackpotCount=4,this.m_ary_JackpotNumChange=new Array(4),this.m_ShowCreditCtrl=null,this.m_ShowTotalWinNumCtrl=null}onLoad(){let e,t,a=new Array(13),s=new Map;e=cc.find("Image_BGCredit/Panel_NumPar",this.node),t=cc.find("Image_BGWin/Panel_NumPar",this.node);let r=this.GetGameAsset1("Res/Texure/Num/NumberWhite",n.AssetType.AT_SpriteAtlas);for(let n=0;n<a.length;n++)a[n]=r.getSpriteFrame("NumberWhite_"+n);let l=this.GetGameAsset1("Res/Prefab/Prefab_Num",n.AssetType.AT_Prefab);s.set(10,"."),s.set(11,","),s.set(12,":"),this.m_ShowCreditCtrl=new o.default(e,l,a,s,!0,!0),this.m_ShowTotalWinNumCtrl=new o.default(t,l,a,s,!0,!0);let c=cc.find("Panel_Jackpot",this.node),d=new Array(13),h=this.GetGameAsset1("Res/Texure/Jcakpot/Font_0",n.AssetType.AT_SpriteAtlas);for(let n=0;n<d.length;n++)d[n]=h.getSpriteFrame("Font_0_"+n);for(let n=0;n<this.m_iJackpotCount;n++)this.m_ary_JackpotNumChange[n]=cc.find("Image_Jackpot_"+n+"/Jackpot",c).addComponent(i.default),this.m_ary_JackpotNumChange[n].setNumSpriteFrame(d)}onJackpots(e){if(this.m_ary_JackpotNumChange)for(let t=0;t<e.length;t++)this.m_ary_JackpotNumChange[t].setString(Math.round(100*e[t])/100)}GetGameAsset1(e,t){switch(t){case n.AssetType.AT_SpriteFrame:return cc.assetManager.getBundle(this.handlerComName).get(e,cc.SpriteFrame);case n.AssetType.AT_SpriteAtlas:return cc.assetManager.getBundle(this.handlerComName).get(e,cc.SpriteAtlas);case n.AssetType.AT_Prefab:return cc.assetManager.getBundle(this.handlerComName).get(e,cc.Prefab);case n.AssetType.AT_AudioClip:return cc.assetManager.getBundle(this.handlerComName).get(e,cc.AudioClip)}}ShowUserPoint(e){cc.log("==>>\u663e\u793a\u603b\u5206\u6570\uff1a"+e),this.m_ShowCreditCtrl&&this.m_ShowCreditCtrl.ShowNum1(e,!0,0,!1)}ShowTableScore(e){cc.log("==>>\u663e\u793a\u53f0\u9762\u5206\u6570\uff1a"+e),this.m_ShowTotalWinNumCtrl&&this.m_ShowTotalWinNumCtrl.ShowNum1(e,!0,0,!1)}ShowImageNum(e,t){e.ShowNum1(t,!0,0,!1)}Final(){this.m_ShowCreditCtrl&&this.m_ShowCreditCtrl.Final(),this.m_ShowTotalWinNumCtrl&&this.m_ShowTotalWinNumCtrl.Final(),this.m_ShowCreditCtrl=null,this.m_ShowTotalWinNumCtrl=null,this.m_ary_JackpotNumChange=null}};c=s([r],c),a.default=c,cc._RF.pop()},{"../GameBaseSlot":"GameBaseSlot","./JackpotNumChange":"JackpotNumChange","./ShowImageNumCtrl":"ShowImageNumCtrl"}],TransScoreCtrl:[function(e,t,a){"use strict";cc._RF.push(t,"adad3IawbxNOos6i7+pOnSz","TransScoreCtrl");var s=this&&this.__decorate||function(e,t,a,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,s);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(o=(i<3?n(o):i>3?n(t,a,o):n(t,a))||o);return i>3&&o&&Object.defineProperty(t,a,o),o};Object.defineProperty(a,"__esModule",{value:!0}),a.eTransScoreState=void 0;const{ccclass:n,property:i}=cc._decorator;var o;(function(e){e[e.eTSS_None=-1]="eTSS_None",e[e.eTSS_Start=0]="eTSS_Start",e[e.eTSS_Fast=1]="eTSS_Fast",e[e.eTSS_All=2]="eTSS_All",e[e.Max=3]="Max"})(o=a.eTransScoreState||(a.eTransScoreState={}));let r=class extends cc.Component{constructor(...e){super(),this.caller=null,this.m_TransState=o.eTSS_None,this.SubBackEvn=null,this.AddBackEvn=null,this.m_bIsTransAll=!1,this.m_iGetWinInte=100,this.m_dGetWinAdd=1.11,this.m_fGetWinTotalTime=0,this.m_iFastMul=0,this.delay=0;let t=e[0],a=e[1],s=e[2],n=e[3],i=e[4];this.caller=t,this.SubBackEvn=a,this.AddBackEvn=s,n<0&&(n=3),i<1&&(i=1),this.m_fGetWinTotalTime=n,this.m_iFastMul=i,this.delay=this.m_fGetWinTotalTime/this.m_iGetWinInte}onDestroy(){this.unscheduleAllCallbacks(),this.SubBackEvn=null,this.AddBackEvn=null}get M_TransScoreState(){return this.m_TransState}set M_TransScoreState(e){e>=o.eTSS_None&&e<o.Max&&(this.m_TransState=e,this.GetWinFast())}TransScore(e,t,a=null){if(e>0){this.ResetGetWinInterval();let s=e,n=t;null!=this.SubBackEvn&&this.SubBackEvn.call(this.caller,s),null!=this.AddBackEvn&&this.AddBackEvn.call(this.caller,n),this.m_dGetWinAdd=Math.floor(s/this.m_iGetWinInte),this.m_dGetWinAdd<=0&&(this.m_dGetWinAdd=1),this.m_TransState=o.eTSS_Start;let i=function(){this.m_TransState==o.eTSS_Fast&&(this.m_dGetWinAdd+=e>=100?5:1),this.m_bIsTransAll&&(this.m_dGetWinAdd=e+t+10),(s-=this.m_dGetWinAdd)<0&&(s=0),(n+=this.m_dGetWinAdd)>e+t&&(n=e+t),null!=this.SubBackEvn&&this.SubBackEvn.call(this.caller,s),null!=this.AddBackEvn&&this.AddBackEvn.call(this.caller,n),n>=e+t&&(null!=this.SubBackEvn&&this.SubBackEvn(0),null!=this.AddBackEvn&&this.AddBackEvn.call(this.caller,e+t),this.scheduleOnce(()=>{null!=a&&a.call(this.caller)},1),this.unschedule(i))};s>0&&n<e+t?this.schedule(i,this.delay):null!=a&&a.call(this.caller)}else null!=a&&a.call(this.caller)}TransScoreAdd(e,t,a=null){cc.log("===TransScore===",e,t);{this.ResetGetWinInterval();let a=e,s=t;null!=this.AddBackEvn&&this.AddBackEvn.call(this.caller,s),this.m_dGetWinAdd=Math.floor(a/this.m_iGetWinInte),this.m_TransState=o.eTSS_Start}}ResetGetWinInterval(){this.m_TransState=o.eTSS_None,this.m_dGetWinAdd=1.11,this.m_bIsTransAll=!1,this.delay=this.m_fGetWinTotalTime/this.m_iGetWinInte}GetWinFast(){switch(cc.error("GetWinFast===="),this.m_TransState){case o.eTSS_Fast:this.delay=this.m_fGetWinTotalTime/(this.m_iGetWinInte*this.m_iFastMul);break;case o.eTSS_All:this.m_bIsTransAll=!0}}SetWinTotalTime(e,t){cc.error("SetWinTotalTime===="),this.m_fGetWinTotalTime=e,this.m_iGetWinInte=t,this.delay=this.m_fGetWinTotalTime/this.m_iGetWinInte}setScoreState(e){cc.error("setScoreState===="),e>=o.eTSS_None&&e<o.Max&&(this.m_TransState=e,this.GetWinFast())}Final(){}};r=s([n],r),a.default=r,cc._RF.pop()},{}]},{},["GameBaseCasion","GameLogicBaseCasion","IGameBaseCasion","IGameLogicCasion","ROULETTE_CMD","FISHO_CMD","FISHT_CMD","FishResMgrBase","GameBaseFish","GameLogicBaseFish","IFishResMgrBase","IGameBaseFish","IGameLogicFish","IMyFishSetting","MyFishSetting","ILoadingBase","IMainController","IPlazaBase","IUserItem","GameBaseKeno","GameLogicBaseKeno","IGameBaseKeno","IGameLogicKeno","SHOTKENO_CMD","LoadingBase","LoadingBase1","MainControllerScript","MySetting","PayCommon","PlazaBase","CMD","GameBaseSlot","GameLogicBaseSlot","IGameBaseSlot","IGameLogicSlot","BelowBarV","DealTurntable","GameSlotJcakpot_Item","IBelowBarV","IGameSlotJcakpot_Item","IItemCtrl_CR","IItemCtrl_CR_FireRes_Spe","IJackpotNumChange","IShowImageNumCtrl","ISoundSystem","ITopBarH","ITopBarV","ITransScoreCtrl","ItemCtrl_CR","ItemCtrl_CR_FireRes_Spe","ItemCtrl_CR_MulRes_Spe","JackpotNum","JackpotNumChange","ObjScale","ResManager","SMGlobal","ShowImageNumCtrl","SlotJcakpotScale_Item","SlotJcakpot_Flop","Sound","SoundSystem","TopBarH","TopBarV","TransScoreCtrl"]);