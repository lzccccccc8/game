window.__require=function e(t,i,n){function o(m,_){if(!i[m]){if(!t[m]){var r=m.split("/");if(r=r[r.length-1],!t[r]){var s="function"==typeof __require&&__require;if(!_&&s)return s(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+m+"'")}m=r}var l=i[m]={exports:{}};t[m][0].call(l.exports,function(e){return o(t[m][1][e]||e)},l,l.exports,e,t,i,n)}return i[m].exports}for(var a="function"==typeof __require&&__require,m=0;m<n.length;m++)o(n[m]);return o}({DataManager_Miner:[function(e,t,i){"use strict";cc._RF.push(t,"8bc40UitLia/MkRaWCmemCK","DataManager_Miner");var n=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,m=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)m=Reflect.decorate(e,t,i,n);else for(var _=e.length-1;_>=0;_--)(o=e[_])&&(m=(a<3?o(m):a>3?o(t,i,m):o(t,i))||m);return a>3&&m&&Object.defineProperty(t,i,m),m};Object.defineProperty(i,"__esModule",{value:!0}),i.AudioData=i.eAudioName=i.m_WinCount=i.m_ScoreTransCount=i.m_LockCount=i.m_Max_Bet=i.m_iItem_LockNum4=i.m_iItem_LockNum3=i.m_iItem_LockNum2=i.m_iItem_LockNum1=i.m_iItem_LockNum0=i.m_iPayTypeCountGenSpe=i.m_iPayTypeCountGen=i.m_iRuleCount=i.m_iJackpotCount=i.m_iLinesCount=i.m_iItemResCount=i.m_iItemRow1=i.m_iItemRow=i.m_iItemCol=i.m_iItem_Double=i.m_iItem_Gem=i.m_iItem_Jackpot3=i.m_iItem_Jackpot2=i.m_iItem_Jackpot1=i.m_iItem_Jackpot0=i.m_iItem_FREE=i.m_iItem_WILD=i.m_strKeepDecPoint=i.m_iKeepDecPoint=i.m_Delay3=i.m_Delay2=i.m_Delay1=i.m_Delay05=i.m_iVerUI=void 0;var o=cc._decorator,a=o.ccclass;o.property,i.m_iVerUI=0,i.m_Delay05=.5,i.m_Delay1=1,i.m_Delay2=2,i.m_Delay3=3,i.m_iKeepDecPoint=0,i.m_strKeepDecPoint="f"+i.m_iKeepDecPoint,i.m_iItem_WILD=18,i.m_iItem_FREE=19,i.m_iItem_Jackpot0=20,i.m_iItem_Jackpot1=21,i.m_iItem_Jackpot2=22,i.m_iItem_Jackpot3=23,i.m_iItem_Gem=24,i.m_iItem_Double=25,i.m_iItemCol=5,i.m_iItemRow=4,i.m_iItemRow1=8,i.m_iItemResCount=26,i.m_iLinesCount=49,i.m_iJackpotCount=4,i.m_iRuleCount=4,i.m_iPayTypeCountGen=8,i.m_iPayTypeCountGenSpe=4,i.m_iItem_LockNum0=4,i.m_iItem_LockNum1=8,i.m_iItem_LockNum2=12,i.m_iItem_LockNum3=16,i.m_iItem_LockNum4=20,i.m_Max_Bet=7,i.m_LockCount=4,i.m_ScoreTransCount=6,i.m_WinCount=3;var m=function(){function e(){}return n([a],e)}();i.default=m,function(e){e[e.BGM_Gen=0]="BGM_Gen",e[e.BGM_Free=1]="BGM_Free",e[e.BGM_Special=2]="BGM_Special",e[e.Sound_GameWinTrans=3]="Sound_GameWinTrans",e[e.Sound_TotalWinTrans=4]="Sound_TotalWinTrans",e[e.Sound_FreeEnab=5]="Sound_FreeEnab",e[e.Sound_FreeEnab1=6]="Sound_FreeEnab1",e[e.Sound_Spin=7]="Sound_Spin",e[e.Sound_SpinStop=8]="Sound_SpinStop",e[e.Sound_Bed=9]="Sound_Bed",e[e.Sound_Auto2Man=10]="Sound_Auto2Man",e[e.Sound_RollingSllow=11]="Sound_RollingSllow",e[e.Sound_Line=12]="Sound_Line",e[e.Sound_Lock=13]="Sound_Lock",e[e.Sound_Unlock=14]="Sound_Unlock",e[e.Sound_Cash=15]="Sound_Cash",e[e.Sound_End_Special=16]="Sound_End_Special",e[e.Sound_Enter_Special=17]="Sound_Enter_Special",e[e.Sound_End_Free=18]="Sound_End_Free",e[e.Sound_FreeIconStop=19]="Sound_FreeIconStop",e[e.Sound_FireIconStop=20]="Sound_FireIconStop",e[e.Sound_Fire=21]="Sound_Fire",e[e.Sound_Special_Line=22]="Sound_Special_Line",e[e.MI_miner_lightin_1=23]="MI_miner_lightin_1",e[e.MI_miner_lightin_2=24]="MI_miner_lightin_2",e[e.Sound_WILDIconStop=25]="Sound_WILDIconStop",e[e.Sound_BigWin=26]="Sound_BigWin",e[e.MI_miner_headlamp=27]="MI_miner_headlamp",e[e.MI_miner_jump_1=28]="MI_miner_jump_1",e[e.MI_miner_run=29]="MI_miner_run",e[e.MI_bonus_change1=30]="MI_bonus_change1",e[e.MI_bonus_change2=31]="MI_bonus_change2",e[e.MI_bonus_boardin=32]="MI_bonus_boardin",e[e.MI_bonus_boardout=33]="MI_bonus_boardout",e[e.MI_miner_dig=34]="MI_miner_dig",e[e.MI_miner_digend=35]="MI_miner_digend",e[e.MI_bonus_pointin1=36]="MI_bonus_pointin1",e[e.MI_bonus_pointlocate=37]="MI_bonus_pointlocate",e[e.MI_miner_fail=38]="MI_miner_fail",e[e.MI_miner_failend=39]="MI_miner_failend",e[e.MI_bonus_crystalballlocate=40]="MI_bonus_crystalballlocate",e[e.MI_bonus_greencrystalfly=41]="MI_bonus_greencrystalfly",e[e.MI_bonus_greencrystalin=42]="MI_bonus_greencrystalin",e[e.MI_bonus_bonuswin=43]="MI_bonus_bonuswin"}(i.eAudioName||(i.eAudioName={}));var _=function(){function e(){this.ary_AudioNames=["BGM_Gen","BGM_Free","BGM_Special","Sound_GameWinTrans","Sound_TotalWinTrans","Sound_FreeEnab","Sound_FreeEnab1","Sound_Spin","Sound_SpinStop","Sound_Bed","Sound_Auto2Man","Sound_RollingSllow","Sound_Line","Sound_Lock","Sound_Unlock","Sound_Cash","Sound_End_Special","Sound_Enter_Special","Sound_End_Free","Sound_FreeIconStop","Sound_FireIconStop","Sound_Fire","Sound_Special_Line","MI_miner_lightin_1","MI_miner_lightin_2","Sound_WILDIconStop","Sound_BigWin","MI_miner_headlamp","MI_miner_jump_1","MI_miner_run","MI_bonus_change1","MI_bonus_change2","MI_bonus_boardin","MI_bonus_boardout","MI_miner_dig","MI_miner_digend","MI_bonus_pointin1","MI_bonus_pointlocate","MI_miner_fail","MI_miner_failend","MI_bonus_crystalballlocate","MI_bonus_greencrystalfly","MI_bonus_greencrystalin","MI_bonus_bonuswin"],this.ary_AudioVolume=[.3,.5,.5,.5,.5,.5,.5,.3,.5,1,1,.3,.5,.3,.8,.5,.5,.5,.5,.5,.3,.8,.5,.5,.5,.5,1,1,.5,.5,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}return n([a],e)}();i.AudioData=_,cc._RF.pop()},{}],DealAutoTrans_Miner:[function(e,t,i){"use strict";cc._RF.push(t,"c5bb7JJeqLpD7uLNqrdWzN7","DealAutoTrans_Miner");var n=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,m=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)m=Reflect.decorate(e,t,i,n);else for(var _=e.length-1;_>=0;_--)(o=e[_])&&(m=(a<3?o(m):a>3?o(t,i,m):o(t,i))||m);return a>3&&m&&Object.defineProperty(t,i,m),m};Object.defineProperty(i,"__esModule",{value:!0}),i.ePlayMode=void 0;var o,a=e("./GameLogic_Miner"),m=cc._decorator,_=m.ccclass;m.property,function(e){e[e.ePM_Man=0]="ePM_Man",e[e.ePM_Auto=1]="ePM_Auto"}(o=i.ePlayMode||(i.ePlayMode={}));var r=function(){function e(e){this.m_ePlayMode=o.ePM_Man,this.spinBtnIsTouch=!1,this.spinBtnTouchTimer=0,this.spinBtnTouchTimes=1,this.m_SpinLeftSpriteFrame=[],this.m_Logic=e}return e.prototype.SetBtnAutoSpinState=function(e,t){void 0===t&&(t=!0),this.m_BtnAutoSpin.node.active=e,this.m_BtnAutoSpin.interactable=t},e.prototype.SetBtnStartSpinState=function(e,t){void 0===t&&(t=!0),this.m_BtnSpin.node.active=e,this.m_BtnSpin.interactable=t,this.m_BtnStop.node.active=!e,this.m_BtnStop.interactable=!0},e.prototype.SetBtnStopSpinState=function(e,t){void 0===t&&(t=!0),this.m_BtnStop.node.active=e,this.m_BtnStop.interactable=t},e.prototype.OnAutoBtn=function(){var e=this.m_ePlayMode==o.ePM_Man?o.ePM_Auto:o.ePM_Man;this.IsAutoPlay(e)},e.prototype.IsAutoPlay=function(e){cc.log("===IsAutoPlay",e),this.m_ePlayMode!=e&&(this.m_ePlayMode==o.ePM_Man?(this.m_Logic.m_GameTypeCur==a.eGameTypeCur.eGTN_SpecialGame||(this.m_Logic.m_GameTypeNext,a.eGameTypeNext.eGTN_SpecialGame),this.m_EffectBtnAutoSpin.active=!0):this.m_EffectBtnAutoSpin.active=!1),this.m_ePlayMode=e},e.prototype.onSpinBtnTouchStart=function(){this.m_Logic.m_GameState!=a.eGameState.eGS_Playing&&(this.spinBtnTouchTimer=0,this.spinBtnIsTouch=!0)},e.prototype.onSpinBtnTouchEnd=function(){this.spinBtnIsTouch=!1,this.m_spinBtnPressParticle.active=!1},e.prototype.onSpinBtnTouchCancel=function(){this.spinBtnIsTouch=!1,this.m_spinBtnPressParticle.active=!1},e.prototype.onSpinBtnTouch=function(){this.m_spinBtnPressParticle.active=!1,this.spinBtnIsTouch=!1,this.spinBtnTouchTimer=0,this.SetMan2AutoSpin(),this.m_Logic.SetBtnState(a.eBtnState.eBS_FSIdle),this.m_Logic.m_DealWinPro.ShowGameWin()},e.prototype.UpdateTouch=function(){this.spinBtnIsTouch&&this.m_Logic.m_GameTypeCur==a.eGameTypeCur.eGTC_General&&(this.spinBtnTouchTimer+=cc.director.getDeltaTime(),this.spinBtnTouchTimer>.15&&(this.m_spinBtnPressParticle.active=!0),this.spinBtnTouchTimer>this.spinBtnTouchTimes&&this.onSpinBtnTouch())},e.prototype.SetMan2AutoSpin=function(){this.m_ePlayMode==o.ePM_Man&&this.IsAutoPlay(o.ePM_Auto)},e.prototype.SetAuto2ManSpin=function(){this.m_ePlayMode==o.ePM_Auto&&this.IsAutoPlay(o.ePM_Man)},n([_],e)}();i.default=r,cc._RF.pop()},{"./GameLogic_Miner":"GameLogic_Miner"}],DealBetRelevant_Miner:[function(e,t,i){"use strict";cc._RF.push(t,"5e137gIT8g3xn6hxD/BUT3j","DealBetRelevant_Miner");var n=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,m=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)m=Reflect.decorate(e,t,i,n);else for(var _=e.length-1;_>=0;_--)(o=e[_])&&(m=(a<3?o(m):a>3?o(t,i,m):o(t,i))||m);return a>3&&m&&Object.defineProperty(t,i,m),m};Object.defineProperty(i,"__esModule",{value:!0});var o=e("./GameLogic_Miner"),a=cc._decorator,m=a.ccclass,_=(a.property,function(){function e(e){this.m_iBet=0,this.m_iLines=0,this.m_fTotalBet=0,this.m_Logic=e}return e.prototype.Final=function(){this.m_ShowTotalBetCtrl=null,this.m_ShowLinesCtrl=null},e.prototype.ShowAllData=function(){this.m_ShowTotalBetCtrl.ShowNum1(this.m_fTotalBet,!0,-1,!1)},e.prototype.MaxBet=function(){},e.prototype.AddBet=function(){this.BIsCanChangeBet()&&(this.m_Logic.m_SlotMSGStru.m_iBetType=1)},e.prototype.SubBet=function(){this.BIsCanChangeBet()&&(this.m_Logic.m_SlotMSGStru.m_iBetType=-1)},e.prototype.BIsCanChangeBet=function(){switch(this.m_Logic.m_GameState){case o.eGameState.eGS_CanChangeBet:return!0}return!1},n([m],e)}());i.default=_,cc._RF.pop()},{"./GameLogic_Miner":"GameLogic_Miner"}],DealItemRelevant_Miner:[function(e,t,i){"use strict";cc._RF.push(t,"d1fefJE8asvQK+sRcAKb0ll","DealItemRelevant_Miner");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,m=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)m=Reflect.decorate(e,t,i,n);else for(var _=e.length-1;_>=0;_--)(o=e[_])&&(m=(a<3?o(m):a>3?o(t,i,m):o(t,i))||m);return a>3&&m&&Object.defineProperty(t,i,m),m};Object.defineProperty(i,"__esModule",{value:!0}),i.eRollState=void 0;var m,_=e("./DataManager_Miner"),r=e("./DealAutoTrans_Miner"),s=e("./GameLogic_Miner"),l=cc._decorator,c=l.ccclass;l.property,function(e){e[e.eRS_None=0]="eRS_None",e[e.eRS_Rolling=1]="eRS_Rolling"}(m=i.eRollState||(i.eRollState={}));var h=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.call(this)||this;return n.m_ItemCtrl=null,n.m_eRollState=m.eRS_None,n.m_fItemTransInter=.2,n.m_fItemTransTimer=0,n.m_fItemStopTotalTime=.3,n.m_fItemStopTotalTimer=0,n.m_iColStop=0,n.m_bIsTransing=!1,n.m_bIsGetResult=!1,n.m_bIsAutoStopOpened=!1,n.m_list_iColCanShowRollEff=new Array,n.m_bIsRunRollEff=!1,n.m_fRollEffTotalTime=3,n.m_fRollEffTimer=0,n.m_bIsOverall=!1,n.m_fStopSoundTime=.1,n.m_IsMinerLampAnim=!1,n.m_Logic=t[0],n}return o(t,e),t.prototype.Final=function(){this.m_ItemCtrl=null},t.prototype.UpdateState=function(){this.m_ItemCtrl.StateItemCtrl()},t.prototype.ResetParam=function(){this.m_fItemTransTimer=0,this.m_fItemStopTotalTimer=0,this.m_bIsTransing=!1,this.m_bIsGetResult=!1,this.m_eRollState=m.eRS_None,this.m_bIsAutoStopOpened=!1,this.m_bIsRunRollEff=!1,this.m_fRollEffTimer=0,!this.m_Logic.m_GameMode&&this.m_RollerEff.active&&(this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEStop(this.m_RollingSllow,this.m_Logic.m_iSeatID),this.m_RollerEff.active=!1),this.m_bIsOverall=!1},t.prototype.ShowInitResultSpr=function(){this.m_ItemCtrl.ShowInitResultSpr()},t.prototype.OnTrans=function(){this.m_ItemCtrl.OnTrans()},t.prototype.SetAllItemResult=function(e){this.m_ItemCtrl.SetAllItemResult(e),this.m_Logic.m_GameMode?this.m_fStopSoundTime=.4:this.m_fStopSoundTime=.1},t.prototype.SetAItemResult=function(e,t,i){this.m_ItemCtrl.SetOneItemResult(e,t,i)},t.prototype.SetAllItemStop=function(e){var t=this;void 0===e&&(e=!0);var i=!1;if(this.m_bIsRunRollEff){this.m_list_iColCanShowRollEff[0];for(var n=1;n<_.m_iItemCol-1;n++)this.Get_m_ary_bIsCanStop(n)||(this.SetAColItemStop(n),i=!0)}else this.m_ItemCtrl.SetAllItemStop(),this.m_Logic.m_DealSound&&(this.m_SoundSpin=this.m_Logic.m_DealSound.SEPlay(_.eAudioName.Sound_SpinStop,this.m_Logic.m_iSeatID,!1,!0)),i=!0;i&&e&&this.scheduleOnce(function(){t.m_Logic.m_DealSound&&(t.m_SoundSpin=t.m_Logic.m_DealSound.SEPlay(_.eAudioName.Sound_SpinStop,t.m_Logic.m_iSeatID,!1,!0))},.25)},t.prototype.SetAColItemStop=function(e,t){var i,n=this;(void 0===t&&(t=!0),this.m_ItemCtrl.SetAColItemStop(e),t&&this.scheduleOnce(function(){var t=n.GetStopSound(e);n.m_Logic.m_GameMode?n.m_Logic.m_DealSound&&(n.m_SoundSpin=n.m_Logic.m_DealSound.SEPlay(_.eAudioName.Sound_SpinStop,n.m_Logic.m_iSeatID,!1,!0)):1==t?n.m_Logic.m_DealSound&&(n.m_SoundSpin=n.m_Logic.m_DealSound.SEPlay(_.eAudioName.Sound_FireIconStop,n.m_Logic.m_iSeatID,!1,!0)):2==t?n.m_Logic.m_DealSound&&(n.m_SoundSpin=n.m_Logic.m_DealSound.SEPlay(_.eAudioName.Sound_FreeIconStop,n.m_Logic.m_iSeatID,!1,!0)):n.m_Logic.m_DealSound&&(n.m_SoundSpin=n.m_Logic.m_DealSound.SEPlay(_.eAudioName.Sound_SpinStop,n.m_Logic.m_iSeatID,!1,!0))},this.m_fStopSoundTime),this.m_Logic.m_GameMode||0!=e&&2!=e&&4!=e)||(this.m_fRollEffTimer=0,-1!=(i=this.m_list_iColCanShowRollEff.indexOf(e))&&(this.m_bIsRunRollEff=!1),this.m_RollerEff.active&&(this.m_RollerEff.active=!1,this.m_AnimRollerEff.stop(),null!=this.m_RollingSllow&&this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEStop(this.m_RollingSllow,this.m_Logic.m_iSeatID)),this.m_list_iColCanShowRollEff.length>=1&&this.m_list_iColCanShowRollEff[0]<=e?e<=2&&!this.m_bIsRunRollEff&&(this.m_bIsRunRollEff=!0,this.m_RollerEff.active||(this.m_Logic.m_DealSound&&(this.m_RollingSllow=this.m_Logic.m_DealSound.SEPlay(_.eAudioName.Sound_RollingSllow,this.m_Logic.m_iSeatID,!1,!0)),this.SetModifySpeed(this.m_list_iColCanShowRollEff[0]+2,1.5),this.m_RollerEff.active=!0,this.m_RollerEff.position=this.m_VecRollerEff[this.m_list_iColCanShowRollEff[0]+2],this.m_list_iColCanShowRollEff.splice(i,1),this.m_AnimRollerEff.play(),this.m_Logic.m_DealWinPro.ShowFreeItemStop(e,2))):(this.m_bIsRunRollEff=!1,this.m_RollerEff.active=!1),this.m_bIsRunRollEff||this.m_Logic.m_DealWinPro.ShowFreeItemStop(e,1))},t.prototype.GetImage=function(e,t){return this.m_ItemCtrl.GetImage(e,t)},t.prototype.Get_IsAllItemTransEnd=function(){return this.m_ItemCtrl.Get_IsAllItemTransEnd()},t.prototype.Get_m_ary_bIsCanStop=function(e){return this.m_ItemCtrl.Get_m_ary_bIsCanStop(e)},t.prototype.DealTransStop=function(){var e=this;switch(this.m_eRollState){case m.eRS_None:this.m_bIsGetResult&&(this.OnTrans(),this.m_Logic.m_GameMode?(this.m_Logic.m_DealWinPro.m_DealSpecial.ResetItemImage(),this.SetAllItemResult(this.m_Logic.m_arys_ItemResult_1)):this.SetAllItemResult(this.m_Logic.m_arys_ItemResult),this.scheduleOnce(function(){e.SetTransing()},1),this.m_eRollState=m.eRS_Rolling);break;case m.eRS_Rolling:this.m_bIsTransing&&this.ItemTransLogic()}},t.prototype.SetTransing=function(){this.m_bIsTransing=!0},t.prototype.ItemTransLogic=function(){if(this.m_fRollEffTimer+=cc.director.getDeltaTime(),this.IsAutoStopOpened()){if(this.m_bIsRunRollEff&&this.m_fRollEffTimer<this.m_fRollEffTotalTime)return;if(this.m_fItemTransTimer+=cc.director.getDeltaTime(),this.m_fItemTransTimer>=this.m_fItemTransInter)if(this.m_IsMinerLampAnim)this.m_fItemTransTimer=0;else for(var e=0;e<_.m_iItemCol;e++)if(!this.Get_m_ary_bIsCanStop(e)){this.m_fItemTransTimer=0,this.SetAColItemStop(e);break}}},t.prototype.AllStopItem=function(){this.m_bIsTransing&&this.m_bIsGetResult&&(this.SetAllItemStop(),this.m_Logic.m_eStartKey=s.eStartKey.eSK_None)},t.prototype.DesignateStopItem=function(){if(this.m_bIsTransing&&this.m_bIsGetResult){var e=this.m_iColStop;e<0||e>=this.m_Logic.m_arys_ItemResult.length||this.Get_m_ary_bIsCanStop(e)||(this.SetAColItemStop(e),this.m_fItemStopTotalTimer=0)}},t.prototype.IsAutoStopOpened=function(){return!!this.m_bIsAutoStopOpened||(this.m_Logic.m_DealAutoTrans.m_ePlayMode==r.ePlayMode.ePM_Auto?(this.m_bIsAutoStopOpened=!0,!0):(this.m_fItemStopTotalTimer+=cc.director.getDeltaTime(),this.m_fItemStopTotalTimer>=this.m_fItemStopTotalTime&&(this.m_bIsAutoStopOpened=!0,!0)))},t.prototype.AColStopEvn=function(){},t.prototype.SetModifySpeed=function(e,t){void 0===t&&(t=.5),this.m_ItemCtrl.SetModifySpeed(e,t)},t.prototype.SetSpItemResIndex=function(e){e>=0&&e<_.m_Max_Bet&&(this.m_ItemCtrl.m_SpItemResIndex=e)},t.prototype.SetSpCurrentGameType=function(e){this.m_ItemCtrl.m_GameTypeCurIndex=e},t.prototype.GetStopSound=function(e){var t=0;if(e>=0&&e<=_.m_iItemCol)for(var i=_.m_iItemRow-1;i>=0;i--){var n=this.m_Logic.m_arys_ItemResult[e][i];if(n>=10&&n<_.m_iItem_WILD){t=1;break}if(n==_.m_iItem_FREE){t=2;break}}return t},t.prototype.SetIBet=function(e){this.m_ItemCtrl.m_iBet=e},t.prototype.SetIsMinerAnimPlay=function(e){this.m_IsMinerLampAnim=e},t.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},a([c],t)}(cc.Component);i.default=h,cc._RF.pop()},{"./DataManager_Miner":"DataManager_Miner","./DealAutoTrans_Miner":"DealAutoTrans_Miner","./GameLogic_Miner":"GameLogic_Miner"}],DealSpecial_Miner:[function(e,t,i){"use strict";cc._RF.push(t,"90b1bZh5TLQGmOb8lWRJGUt","DealSpecial_Miner");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,m=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)m=Reflect.decorate(e,t,i,n);else for(var _=e.length-1;_>=0;_--)(o=e[_])&&(m=(a<3?o(m):a>3?o(t,i,m):o(t,i))||m);return a>3&&m&&Object.defineProperty(t,i,m),m};Object.defineProperty(i,"__esModule",{value:!0});var m=e("./DataManager_Miner"),_=e("./DealWinProcess_Miner"),r=cc._decorator,s=r.ccclass,l=(r.property,function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.call(this)||this;n.m_ary_SprNumLock=new Array(12),n.m_ary_SprTips=new Array(4),n.m_NumlockCtrl=new Array(m.m_LockCount),n.m_list_SprItems=[],n.m_list_gAnimItemShowing1=[],n.m_dic_iqPreObj=new Map,n.m_list_gAnimItemNumCtrl=[],n.m_totalTime=0,n.m_Line=4,n.m_totoalWin=0,n.m_arys_Scatter=new Array,n.m_ary_Numlock=new Array(m.m_LockCount),n.m_aryScore=[50,100,250,500,1e3,1500,2500,5e3],n.m_FireBallEndPosx=[-160,0,160],n.m_PanelWinScoreAnim2=[],n.m_PanelLockEffect=[],n.m_winJackpotTile=[],n.fireBallCount=0,n.m_list_ItemNormalImage=[],n.m_ary_SprFireNum=new Array(12),n.m_list_icPairNumSpe=new Map,n.m_dic_iqNumCtrl=new Map;var o=t[0];n.m_Logic=o;for(var a=_.ePreObj.ePO_None+1;a<_.ePreObj.ePO_MaxValue;a++)n.m_dic_iqPreObj.set(a,[]),n.m_dic_iqNumCtrl.set(a,[]);return n.ClearScatter(),n}return o(t,e),t.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},t.prototype.InitLockNum=function(e){for(var t=0;t<m.m_iItemRow;t++)this.m_ary_Numlock[t]=e[t]},t.prototype.StartAnim=function(){var e=this;this.m_Logic.m_DealSound&&(this.m_Sound=this.m_Logic.m_DealSound.SEPlay(m.eAudioName.Sound_Enter_Special,this.m_Logic.m_iSeatID,!1,!1));var t=cc.instantiate(this.m_Logic.m_DealWinPro.m_StartSpecialPrefab);t.setParent(this.m_Logic.m_DealWinPro.m_StartSpecialGameAnim),this.scheduleOnce(function(){e.m_Logic.m_Image_Logo.active=!1,e.m_Logic.m_Root.active=!1,e.m_Logic.m_DealWinPro.m_PlayerBG.spriteFrame=e.m_Logic.m_DealWinPro.m_ary_imagBG[1]},2.5),this.scheduleOnce(function(){e.m_Logic.m_DealSound&&(e.m_Sound=e.m_Logic.m_DealSound.SEPlay(m.eAudioName.Sound_Special_Line,e.m_Logic.m_iSeatID,!0,!1))},6),this.scheduleOnce(function(){e.m_Logic.m_DealSound&&e.m_Logic.m_DealSound.SEStop(e.m_Sound,e.m_Logic.m_iSeatID),t.destroy(),e.m_Root.active=!0,e.Panel_SpecialSpinPar.active=!0,e.ResetItemImage(),e.StartAnimation()},9.8)},t.prototype.StartAnimation=function(){for(var e=0;e<m.m_LockCount;e++)this.m_ary_Numlock[e]>0&&this.m_NumlockCtrl[e].ShowNum1(this.m_ary_Numlock[e],!0,-1,!1);var t=0,i=function(){this.m_ary_Numlock[t]>0&&(this.m_ary_gLock[t].active=!0,this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEPlay(m.eAudioName.Sound_Lock,this.m_Logic.m_iSeatID,!1,!1)),t<m.m_iItemRow?t++:(this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.BGMPlay(m.eAudioName.BGM_Special),this.unschedule(i),this.m_initFlg=1,this.ShowLottery2(),this.m_Logic.SetStartWaitPlay())};this.schedule(i,m.m_Delay05)},t.prototype.OutSpecial=function(){this.m_Logic.m_GameMode=!1,this.m_Logic.m_DealWinPro.M_bIsWinSpecialWaitPlayOver=!1,this.m_Logic.SetTransMode(),this.OutAnimation()},t.prototype.OutAnimation=function(){this.fireBallCount=0,this.m_NumWinCtrl.ShowNum1(0,!0,-1,!1),this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEPlay(m.eAudioName.Sound_End_Special,this.m_Logic.m_iSeatID,!1,!1);var e=function(){var t=this;this.unschedule(e),this.scheduleOnce(function(){t.m_totoalWin=0;var e=0,i=m.m_iItemRow1-t.m_Line,n=function(){for(;-1==this.m_arys_Scatter[e][i];)if(e<m.m_iItemCol-1)e++;else if(i<m.m_iItemRow1-1)i++,e=0;else if(e==m.m_iItemCol-1&&i==m.m_iItemRow1-1){this.unschedule(n),this.OutAnimation2();break}this.m_arys_Scatter[e][i]>0&&(this.IsIconSpecial(this.m_arys_Scatter[e][i])?this.FireBallEndAnim(e,i,!1):this.IsIconJackpot(this.m_arys_Scatter[e][i])&&this.FireBallEndAnim(e,i,!0),e<m.m_iItemCol-1?e++:i<m.m_iItemRow1-1?(i++,e=0):e==m.m_iItemCol-1&&i==m.m_iItemRow1-1&&(this.unschedule(n),this.OutAnimation2()))};t.schedule(n,m.m_Delay1)},m.m_Delay05)};this.schedule(e,.2)},t.prototype.OutAnimation2=function(){var e=this;this.scheduleOnce(function(){e.Panel_OutSpecial.active=!0,e.m_Logic.m_DealWinPro.m_AddShowNum=e.m_NumWinCtrl,e.m_Logic.m_DealWinPro.m_eTransScoreMode=_.eTransScoreMode.eTSM_GameToWin,e.m_Logic.m_DealWinPro.mTransScoreKey=_.eTransScoreKey.eSK_CanGetScoreFast,cc.log("this.m_totoalWin",e.m_totoalWin),e.m_Logic.m_DealWinPro.m_TransScoreCtrl.TransScore(e.m_totoalWin,0,function(){e.scheduleOnce(function(){e.m_Logic.m_DealWinPro.m_TransScenePanel.opacity=0,e.m_Logic.m_DealWinPro.m_TransScenePanel.active=!0,cc.tween(e.m_Logic.m_DealWinPro.m_TransScenePanel).to(.5,{opacity:255}).call(function(){e.Panel_SpecialSpinPar.active=!1,e.Panel_OutSpecial.active=!1,e.m_Root.active=!1,e.m_Logic.m_Root.active=!0,e.m_Logic.m_DealWinPro.m_PlayerBG.spriteFrame=e.m_Logic.m_DealWinPro.m_ary_imagBG[0];for(var t=0;t<e.m_list_gAnimItemShowing1.length;t++){var i=e.m_list_gAnimItemShowing1[t];i.active=!1,e.m_dic_iqPreObj.get(_.ePreObj.ePO_ItemAnim).push(i)}for(e.m_list_gAnimItemShowing1=[],t=0;t<e.m_list_gAnimItemNumCtrl.length;t++){var n=e.m_list_gAnimItemNumCtrl[t];e.m_dic_iqNumCtrl.get(_.ePreObj.ePO_ItemAnim).push(n)}for(e.m_list_gAnimItemNumCtrl=[],t=0;t<e.m_list_gAnimItemNumCtrl.length;t++)n=e.m_list_gAnimItemNumCtrl[t],e.m_dic_iqNumCtrl.get(_.ePreObj.ePO_ItemAnim).push(n);for(e.m_list_gAnimItemNumCtrl=[],t=0;t<m.m_iItemRow;t++)e.m_ary_gLock[t].active=!1;e.m_Logic.m_DealWinPro.m_iJackpotId=-1,e.m_Logic.m_DealWinPro.m_dJackpotScore=0,e.m_Logic.m_arys_ItemResult=e.GetRanResult(),e.m_Logic.m_DealItem.SetAllItemResult(e.m_Logic.m_arys_ItemResult),e.m_Logic.m_DealItem.ShowInitResultSpr(),e.m_Logic.m_freeReels.length>0&&(e.m_Logic.SetItemResult(e.m_Logic.m_freeReels),e.m_Logic.m_DealItem.SetAllItemResult(e.m_Logic.m_arys_ItemResult),e.m_Logic.m_DealItem.ShowInitResultSpr()),cc.tween(e.m_Logic.m_DealWinPro.m_TransScenePanel).to(.5,{opacity:0}).call(function(){e.m_Logic.m_DealWinPro.m_TransScenePanel.active=!1,e.m_Logic.m_DealWinPro.BackToGeneral()}).start()}).start()},m.m_Delay2)})},m.m_Delay2)},t.prototype.InitLock=function(e){var t=0,i=e[0];i<m.m_iItem_LockNum1?(this.m_Line=4,i<m.m_iItem_LockNum0?this.InitLockNum([m.m_iItem_LockNum0,m.m_iItem_LockNum1,m.m_iItem_LockNum2,m.m_iItem_LockNum3]):(t=i-4,this.InitLockNum([m.m_iItem_LockNum0-t,m.m_iItem_LockNum1-t,m.m_iItem_LockNum2-t,m.m_iItem_LockNum3-t]))):(i+=e[1])<m.m_iItem_LockNum2?(this.m_Line=5,t=i-4,this.InitLockNum([0,m.m_iItem_LockNum1-t,m.m_iItem_LockNum2-t,m.m_iItem_LockNum3-t])):(i+=e[2])<m.m_iItem_LockNum3?(this.m_Line=6,t=i-4,this.InitLockNum([0,0,m.m_iItem_LockNum2-t,m.m_iItem_LockNum3-t])):(i+=e[3])<m.m_iItem_LockNum4?(this.m_Line=7,t=i-4,this.InitLockNum([0,0,0,16-t])):(i+=e[4],this.m_Line=8,this.InitLockNum([0,0,0,0]))},t.prototype.SetScatterData=function(e){for(var t=0,i=new Array(5),n=m.m_iItemRow1-1;n>=0;n--)for(var o=0;o<m.m_iItemCol;o++){if(n>=4){var a=n-4;this.IsIconSpecialJackpot(e[o][a])?(this.m_arys_Scatter[o][n]=e[o][a],t++):this.m_arys_Scatter[o][n]=-1}else this.m_arys_Scatter[o][n]=-1;4==n?i[0]=t:3==n?i[1]=t-i[0]:2==n?i[2]=t-i[0]-i[1]:1==n?i[3]=t-i[0]-i[1]-i[2]:0==n&&(i[4]=t-i[0]-i[1]-i[2]-i[3])}this.InitLock(i)},t.prototype.SetScatterData_1=function(e){for(var t=0,i=new Array(5),n=m.m_iItemRow1-1;n>=0;n--){for(var o=0;o<m.m_iItemCol;o++){var a=n;this.IsIconSpecialJackpot(e[o][a])?(this.m_arys_Scatter[o][n]=e[o][a],t++):this.m_arys_Scatter[o][n]=-1}4==n?i[0]=t:3==n?i[1]=t-i[0]:2==n?i[2]=t-i[0]-i[1]:1==n?i[3]=t-i[0]-i[1]-i[2]:0==n&&(i[4]=t-i[0]-i[1]-i[2]-i[3])}this.InitLock(i)},t.prototype.GetPreObj=function(e){var t=null;if(this.m_dic_iqPreObj.has(e))if(this.m_dic_iqPreObj.get(e).length>0)t=this.m_dic_iqPreObj.get(e).pop();else{var i=null;switch(e){case _.ePreObj.ePO_ItemAnim:(i=cc.instantiate(this.m_gScatterItemAnim)).parent=this.m_transItemAnimP}(t=i).active=!1}return t},t.prototype.ShowLottery_Special=function(){var e=this,t=!1,i=0,n=new Array(5);this.ShowSpecialTimesUsed();for(var o=m.m_iItemRow1-1;o>=0;o--){for(var a=0;a<m.m_iItemCol;a++){var _=a,r=o;if(-1==this.m_arys_Scatter[a][o]&&this.IsIconSpecialJackpot(this.m_Logic.m_arys_ItemResult_1[a][o])&&(this.m_arys_Scatter[a][o]=this.m_Logic.m_arys_ItemResult_1[a][o],m.m_iItemRow1-this.m_Line<=o&&(t=!0),this.AddItemShowing(_,r)),this.m_arys_Scatter[a][o]>-1){i++;var s=this.m_Logic.m_DealItem1.GetImage(_,r);s&&(s.node.active=!1,this.m_list_ItemNormalImage.push(s))}}4==o?n[0]=i:3==o?n[1]=i-n[0]:2==o?n[2]=i-n[0]-n[1]:1==o?n[3]=i-n[0]-n[1]-n[2]:0==o&&(n[4]=i-n[0]-n[1]-n[2]-n[3])}if(t){this.InitLock(n);var l=function(t){c.m_ary_Numlock[t]>0?c.m_NumlockCtrl[t].ShowNum1(c.m_ary_Numlock[t],!0,-1,!1):(c.m_ary_gLock[t].active&&(c.m_PanelLockEffect[t].node.active=!0,c.m_PanelLockEffect[t].resetSystem(),c.m_Logic.m_DealSound&&c.m_Logic.m_DealSound.SEPlay(m.eAudioName.Sound_Unlock,c.m_Logic.m_iSeatID,!1,!1),c.scheduleOnce(function(){e.m_PanelLockEffect[t].node.active=!1},.2)),c.m_ary_gLock[t].active=!1)},c=this;for(a=0;a<4;a++)l(a);this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEPlay(m.eAudioName.Sound_Fire,this.m_Logic.m_iSeatID,!1,!1)}},t.prototype.ShowSpecialTimesUsed=function(){this.m_totalTime>=0&&this.m_totalTime<this.m_ary_SprTips.length&&(this.m_transTip.spriteFrame=this.m_ary_SprTips[this.m_totalTime],this.m_Logic.m_DealAutoTrans.m_autoBtnSpinLeftCountSprite.spriteFrame=this.m_Logic.m_DealAutoTrans.m_SpinLeftSpriteFrame[this.m_totalTime])},t.prototype.ShowLottery2=function(){for(var e=0;e<m.m_iItemCol;e++)for(var t=0;t<m.m_iItemRow1;t++)if(this.IsIconSpecialJackpot(this.m_Logic.m_arys_ItemResult_1[e][t])){var i=e,n=t;this.AddItemShowing(i,n)}this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEPlay(m.eAudioName.Sound_Fire,this.m_Logic.m_iSeatID,!1,!1)},t.prototype.AddItemShowing=function(e,t){var i=this.GetPreObj(_.ePreObj.ePO_ItemAnim);i.setPosition(cc.v2(this.m_arys_VecItems[e][t].x,this.m_arys_VecItems[e][t].y));var n=this.m_Logic.m_arys_ItemResult_1[e][t],o=cc.find("Image_Item",i).getComponent(cc.Sprite),a=cc.find("Panel_NumPar",i);o.node.active=!1;var m=this.GetPreObjNumCtrl(_.ePreObj.ePO_ItemAnim,i);if(this.IsIconSpecial(n)){a.active=!0;var r=this.GetFireNumStr(n);m.ShowNum2(r,!0,!1)}else a.active=!1,o.node.active||(o.node.active=!0),o.spriteFrame=this.m_list_SprItems[this.m_Logic.m_iBetIndex][this.m_Logic.m_arys_ItemResult_1[e][t]];i.active=!0,this.m_list_gAnimItemShowing1.push(i),this.m_list_gAnimItemNumCtrl.push(m)},t.prototype.getAngle=function(e,t){var i=t.x-e.x,n=t.y-e.y;return-cc.v2(i,n).signAngle(cc.v2(1,0))/Math.PI*180},t.prototype.FireBallEndAnim=function(e,t,i){var n=this,o=cc.v3(0,-670,0),a=this.m_arys_VecItems[e][t].x,_=this.m_arys_VecItems[e][t].y,r=this.m_FireBallLight;this.m_FireBallLight.setPosition(a,_),r.active=!0;var s=this.getAngle(r.position,o)+90;r.angle=s;var l=r.position.sub(o).mag();r.height=0,this.m_FireBallLight2.height=l,this.m_FireBallLight2.angle=s,this.m_FireBallLight2.setPosition(a,_),this.m_FireBallLight2.active=!1,cc.tween(r).to(.2,{height:l}).call(function(){r.active=!1,n.m_FireBallLight2.active=!0,n.m_FireBallLight2.opacity=255,n.Panel_WinScoreEffect.active=!0,n.Panel_WinScoreEffect.getComponent(cc.Animation).play(),cc.tween(n.m_FireBallLight2).delay(.1).to(.2,{opacity:0}).call(function(){if(i)n.m_Logic.m_DealWinPro.m_iJackpotId>-1&&(o=100*n.m_Logic.m_DealWinPro.m_dJackpotScore,n.m_totoalWin+=o,cc.log("\u5f69\u91d1\u7ed3\u7b97\u5206\u6570\uff1a",o,n.m_totoalWin),cc.tween(n.m_Logic.m_DealWinPro.m_transGameWinNumP).to(.2,{scale:1.2}).to(.2,{scale:1}).start(),n.m_Logic.m_DealWinPro.ShowGameWin(n.m_totoalWin),n.m_Logic.OnShowMarquee());else{var o=n.GetFireNumStr(n.m_arys_Scatter[e][t]);n.m_totoalWin+=o,n.fireBallCount+=o,cc.log("\u706b\u7403\u7ed3\u7b97\u5206\u6570\uff1a",o,n.m_totoalWin),cc.tween(n.m_Logic.m_DealWinPro.m_transGameWinNumP).to(.2,{scale:1.2}).to(.2,{scale:1}).start(),n.m_Logic.m_DealWinPro.ShowGameWin(n.m_totoalWin)}n.m_Logic.m_DealSound&&n.m_Logic.m_DealSound.SEPlay(m.eAudioName.Sound_FireIconStop,n.m_Logic.m_iSeatID,!1,!1)}).start()}).start()},t.prototype.CheckResult=function(e){for(var t=0,i=(Array(),0);i<m.m_iItemCol;i++)for(var n=0;n<m.m_iItemRow;n++)this.IsIconSpecialJackpot(e[i][n])&&t++;return t>=4?this.GetRanResult():e},t.prototype.GetRanResult=function(){for(var e=Array(),t=0;t<m.m_iItemCol;t++){e[t]=[];for(var i=0;i<m.m_iItemRow;i++){var n=this.m_Logic.game.iGameBase.SMGlobal_Random(0,9);e[t][i]=n}}return e},t.prototype.ClearScatter=function(){for(var e=0;e<m.m_iItemCol;e++){this.m_arys_Scatter[e]=[];for(var t=m.m_iItemRow1-1;t>=0;t--)this.m_arys_Scatter[e][t]=-1}},t.prototype.ResetItemImage=function(){for(var e=0;e<this.m_list_ItemNormalImage.length;e++)this.m_list_ItemNormalImage[e].node.active=!0;this.m_list_ItemNormalImage=[]},t.prototype.IsIconSpecial=function(e){var t=!1;return e>=10&&e<m.m_iItem_WILD&&(t=!0),t},t.prototype.IsIconJackpot=function(e){var t=!1;return e>=m.m_iItem_Jackpot0&&e<=m.m_iItem_Jackpot3&&(t=!0),t},t.prototype.IsIconSpecialJackpot=function(e){var t=!1;return e>=10&&e<m.m_iItem_WILD?t=!0:e>=m.m_iItem_Jackpot0&&e<=m.m_iItem_Jackpot3&&(t=!0),t},t.prototype.GetPreObjNumCtrl=function(e,t){var i=null;if(this.m_dic_iqNumCtrl.has(e))if(this.m_dic_iqNumCtrl.get(e).length>0)i=this.m_dic_iqNumCtrl.get(e).pop();else{var n=cc.find("Panel_NumPar",t);i=this.m_Logic.game.iGameBase.NewShowNum(n,this.m_gNumPrefab,this.m_ary_SprFireNum,this.m_list_icPairNumSpe,!0,!0)}return i},t.prototype.GetFireNumStr=function(e){var t=0;if(this.IsIconSpecial(e)){var i=e-10;i<this.m_aryScore.length&&(t=this.m_aryScore[i]*this.m_Logic.m_iBet)}return t},a([s],t)}(cc.Component));i.default=l,cc._RF.pop()},{"./DataManager_Miner":"DataManager_Miner","./DealWinProcess_Miner":"DealWinProcess_Miner"}],DealWinProcess_Miner:[function(e,t,i){"use strict";cc._RF.push(t,"bb940tNK2H5nYOUs7HSQa8R","DealWinProcess_Miner");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,m=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)m=Reflect.decorate(e,t,i,n);else for(var _=e.length-1;_>=0;_--)(o=e[_])&&(m=(a<3?o(m):a>3?o(t,i,m):o(t,i))||m);return a>3&&m&&Object.defineProperty(t,i,m),m};Object.defineProperty(i,"__esModule",{value:!0}),i.eTransScoreMode=i.eShowLinesMode=i.ePreObj=i.eTransScoreKey=void 0;var m,_,r,s,l=e("./DataManager_Miner"),c=e("./DealSpecial_Miner"),h=e("./GameLogic_Miner");(function(e){e[e.eSK_None=0]="eSK_None",e[e.eSK_CanGetScoreFast=1]="eSK_CanGetScoreFast",e[e.eSK_CanGetScoreAll=2]="eSK_CanGetScoreAll"})(m=i.eTransScoreKey||(i.eTransScoreKey={})),function(e){e[e.ePO_None=-1]="ePO_None",e[e.ePO_ItemAnim=0]="ePO_ItemAnim",e[e.ePO_LinesFra=1]="ePO_LinesFra",e[e.ePO_Bouns=2]="ePO_Bouns",e[e.ePO_ItemWILD=3]="ePO_ItemWILD",e[e.ePO_ItemAnim_1=4]="ePO_ItemAnim_1",e[e.ePO_Bouns_1=5]="ePO_Bouns_1",e[e.ePO_MaxValue=6]="ePO_MaxValue"}(_=i.ePreObj||(i.ePreObj={})),function(e){e[e.eSLM_HideAll=0]="eSLM_HideAll",e[e.eSLM_ShowAll=1]="eSLM_ShowAll",e[e.eSLM_ShowAllGen=2]="eSLM_ShowAllGen",e[e.eSLM_HideAllGen=3]="eSLM_HideAllGen",e[e.eSLM_ShowSingle=4]="eSLM_ShowSingle",e[e.eSLM_HideSingle=5]="eSLM_HideSingle",e[e.eSLM_ShowFS=6]="eSLM_ShowFS",e[e.eSLM_ShowFSOut=7]="eSLM_ShowFSOut",e[e.eSLM_ShowWILD=8]="eSLM_ShowWILD"}(r=i.eShowLinesMode||(i.eShowLinesMode={})),function(e){e[e.eTSM_None=-1]="eTSM_None",e[e.eTSM_GameToWin=0]="eTSM_GameToWin",e[e.eTSM_GenWinToCredit=1]="eTSM_GenWinToCredit",e[e.eTSM_FSMedTotalWinToCredit=2]="eTSM_FSMedTotalWinToCredit",e[e.eTSM_MedToWin=3]="eTSM_MedToWin",e[e.eTSM_JPToCredit=4]="eTSM_JPToCredit"}(s=i.eTransScoreMode||(i.eTransScoreMode={}));var S=cc._decorator,u=S.ccclass,p=(S.property,function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.call(this)||this;n.m_eTransScoreMode=s.eTSM_None,n.m_list_PrizeInfos=[],n.m_list_ScatterInfos=[],n.m_list_AnimItemCtrlShowing=[],n.m_list_ItemCtrlShowing=[],n.m_ary_imagBG=new Array(2),n.m_iAllAwardsID=-1,n.m_iJackpotId=-1,n.m_dJackpotScore=0,n.m_iBonusID=0,n.m_iFSCountTotal=0,n.m_iFSCountUesed=0,n.m_iFSCountAdd=0,n.m_iFSCountLave=0,n.m_iFSTrigLinesCount=0,n.m_iNextGameSpecialOdds=0,n.m_dTableScore=0,n.m_dUserPoint=0,n.m_dWinScoreCur=0,n.m_dGameWinScoreCur=0,n.m_dTotalWinScoreCur=0,n.m_dFSTotalWinScore=0,n.m_bIsShowLinesFra=!1,n.m_bIsCanStopLine=!1,n.m_fNextLineToTalTime=1,n.m_fMandPullJPTimer=0,n.m_bIsPullJPAbled=!1,n.m_ary_JackpotNumChange=[],n.m_Button_Set=null,n.m_Panel_Set=null,n.m_Mask_Set=null,n.m_Widget_m_ButtonSet=null,n.m_Widget_PanelSet=null,n.m_Toggle_SoundOn=null,n.m_Toggle_SoundOff=null,n.m_gameInfoImage=[],n.m_gameInfoIndex=0,n.m_list_ItemNormalImage=[],n.m_dic_iqPreObj=new Map,n.m_list_gAnimItemShowing=[],n.m_list_gAnimItemBonusShowing=[],n.m_liat_gLinesShowing=[],n.m_IsShowDonateMessage=!1,n.mTransScoreKey=m.eSK_None,n.m_CurGemCount=0,n.m_CurGemSelectIndex=0,n.m_arys_winGem=[],n.m_arys_WinIcon=[],n.m_FSMinerPosNode=[],n.m_FSOreLightNode=[],n.m_FSIsExitFS=!1,n.m_ITopBar=null,n.m_IBelowBar=null,n.soundParticle=null,n.m_dPreSubNum=0,n.m_dSubNumDva=0,n.m_bIsWinFSWaitPlayOver=!1,n.m_bIsWinSpecialWaitPlayOver=!1,n.GemAnimPosX=[443,-443,-135,330,-164],n.GemAnimPosY=[-180,-112,-140,-83,35];var o=t[0];n.m_Logic=o,n.m_DealSpecial=new c.default(o);for(var a=_.ePO_None+1;a<_.ePO_MaxValue;a++)n.m_dic_iqPreObj.set(a,[]);return n}return o(t,e),t.prototype.onDestroy=function(){this.unscheduleAllCallbacks(),this.m_Logic.onDestroy(),this.m_TransScoreCtrl.onDestroy(),this.m_DealSpecial.onDestroy()},t.prototype.Final=function(){this.m_ary_SprItems=null,this.m_ary_SprItemPanel=null},t.prototype.MyUpdate=function(){this.m_Logic.m_DealAutoTrans.UpdateTouch()},t.prototype.ResetParam=function(){this.m_bIsCanStopLine=!1},t.prototype.UpdateTableScore=function(e){void 0===e&&(e=0)},t.prototype.ShowFSTimesUsed=function(){this.m_FSTimesUsedCtrl.ShowNum1(this.m_iFSCountUesed,!0,-1,!1)},t.prototype.ShowFSTimesTotal=function(){this.m_FSTotalTimes.ShowNum1(this.m_iFSCountTotal,!0,-1,!1)},t.prototype.ShowFSTotaolWin=function(){this.m_FSShowTotalWinNumCtrl.ShowNum1(this.m_dFSTotalWinScore,!0,-1,!1)},t.prototype.ShowTableScore=function(){cc.error("==>>\u663e\u793a\u53f0\u9762\u5206\u6570\uff1a"),this.m_Logic.game.iGameBase.isNoWin()?this.ShowUserPoint():this.ShowImageNum(this.m_ShowTotalWinNumCtrl,this.m_dTableScore)},t.prototype.ShowGameWin=function(e){void 0===e&&(e=0),this.ShowImageNum(this.m_ShowGameWinNumCtrl,e)},t.prototype.ShowMidWin=function(){},t.prototype.ShowUserPoint=function(){cc.log("==>>\u663e\u793a\u603b\u5206\u6570\uff1a"+this.m_dUserPoint),this.ShowImageNum(this.m_ShowCreditCtrl,this.m_dUserPoint)},t.prototype.ShowImageNum=function(e,t){var i=this.m_Logic.m_eShowMode==h.eShowMode.eSM_Score?0:l.m_iKeepDecPoint;e.ShowNum1(t,!0,i,!1)},t.prototype.SetStopLine=function(e){this.m_bIsShowLinesFra&&(this.m_bIsCanStopLine=e)},t.prototype.ShowLottery=function(){this.DealWinEff(this.m_dWinScoreCur)},t.prototype.DealWinEff=function(e){if(cc.log("========DealWinEff",e),e>0&&this.m_list_PrizeInfos.length>0){this.m_gLinesMask.active=!0,this.m_list_AnimItemCtrlShowing=[],this.m_list_ItemCtrlShowing=[],this.m_bIsShowLinesFra=!0,this.m_fMandPullJPTimer=0;var t=0;this.SetLineFAndItemAnimAct(r.eSLM_HideAll),this.SetLineFAndItemAnimAct(r.eSLM_ShowAllGen,-1,e);var i=this.m_fNextLineToTalTime;this.ShowWinEff(e);var n=function(){this.m_bIsCanStopLine?(this.unschedule(n),this.m_bIsShowLinesFra=!1,e>0&&(this.m_dWinScoreCur=0,this.ShowGameWin()),this.m_Logic.m_GameState==h.eGameState.eGS_TransGameMode?this.SetLineFAndItemAnimAct(r.eSLM_HideAll):this.DealWinEff_Reset()):(this.SetLineFAndItemAnimAct(r.eSLM_HideAll),this.SetLineFAndItemAnimAct(r.eSLM_ShowSingle,this.m_list_PrizeInfos[t].line),++t==this.m_list_PrizeInfos.length&&(t=0))};this.schedule(n,i)}else this.SetLineFAndItemAnimAct(r.eSLM_HideAll),this.ShowWinEff(e)},t.prototype.ShowWinEff=function(e){if(e>0)switch(this.m_Logic.m_PrizeType){case h.ePrizeType.ePT_None:break;case h.ePrizeType.ePT_General:case h.ePrizeType.ePT_Small:case h.ePrizeType.ePT_Medium:case h.ePrizeType.ePT_Big:case h.ePrizeType.ePT_AllAward:if(e>0){var t=this.PlayWinSound(e);this.m_AddShowNum=this.m_ShowGameWinNumCtrl,this.m_SubShowNum=null,this.m_eTransScoreMode=s.eTSM_GameToWin,this.mTransScoreKey=m.eSK_CanGetScoreFast;var i=function(){var i=this;this.m_eTransScoreMode=s.eTSM_None,this.mTransScoreKey=m.eSK_None,this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEStop(t,this.m_Logic.m_iSeatID),this.ShowTableScore(),this.m_Logic.m_DealSound&&(t=this.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_TotalWinTrans,this.m_Logic.m_iSeatID,!1,!1)),this.ShowWinScoreAnim(1),this.m_Logic.m_GameTypeCur==h.eGameTypeCur.eGTC_General?this.m_Logic.m_PrizeType>h.ePrizeType.ePT_General?this.scheduleOnce(function(){i.m_eTransScoreMode=s.eTSM_MedToWin,i.mTransScoreKey=m.eSK_CanGetScoreFast,i.m_SubShowNum=null,i.m_AddShowNum=i.m_Panel_BigWinNumCtrl,i.m_Panel_BigWin.getComponent(cc.Animation).play("Anim_BigWin_1"),i.m_Panel_BigWin.active=!0,i.scheduleOnce(function(){i.m_Panel_BigWin.getComponent(cc.Animation).play("Anim_BigWin_2")},1),i.m_Logic.m_DealSound&&(t=i.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_BigWin,i.m_Logic.m_iSeatID,!1,!1)),i.m_TransScoreCtrl.TransScore(e,0,function(){i.m_Panel_BigWin.active=!1,i.m_eTransScoreMode=s.eTSM_None,i.mTransScoreKey=m.eSK_None,i.m_Logic.m_DealSound&&i.m_Logic.m_DealSound.SEStop(t,i.m_Logic.m_iSeatID),i.ShowWinEnd(e)})},l.m_Delay2):this.ShowWinEnd(e):(this.m_dGameWinScoreCur+=e,this.ShowWinEnd(e))};this.m_Logic.m_GameTypeCur==h.eGameTypeCur.eGTC_General?this.m_TransScoreCtrl.TransScore(e,0,i):(this.m_AddShowNum=this.m_FSShowTotalWinNumCtrl,this.ShowGameWin(e),this.m_TransScoreCtrl.TransScore(e,this.m_dGameWinScoreCur,i))}}else this.ShowWinEnd(e)},t.prototype.ShowWinEnd=function(e){if(cc.log("===ShowWinEnd===,dWinScore",e),this.m_iFSCountAdd>0&&this.ShowWinEnd_FSCountAdd(e),this.m_Logic.m_GameTypeNext==h.eGameTypeNext.eGTN_FreeGame&&this.m_Logic.m_GameTypeCur!=h.eGameTypeCur.eGTC_FreeGame)this.ShowTableScore(),this.m_Logic.sendWaitBound(),this.m_Text_LinesScores.string="Click play to start";else if(this.m_Logic.m_GameTypeNext!=h.eGameTypeNext.eGTN_FreeGame&&this.m_Logic.m_GameTypeCur==h.eGameTypeCur.eGTC_FreeGame){this.m_FSIsExitFS=!0,this.m_FSOreButton.active=!0;for(var t=0;t<this.m_FSOreLightNode.length;t++)this.m_FSOreLightNode[t].active=!0,this.m_FSOreLightNode[t].getComponent(cc.Animation).play();this.StartMiningTimer()}else if(this.m_Logic.m_GameTypeNext==h.eGameTypeNext.eGTN_SpecialGame&&this.m_Logic.m_GameTypeCur!=h.eGameTypeCur.eGTN_SpecialGame)this.ShowTableScore(),this.m_Logic.sendWaitSpecial();else if(this.m_iFSCountAdd<=0){if(this.m_Logic.m_GameTypeCur==h.eGameTypeCur.eGTC_FreeGame){for(this.m_FSOreButton.active=!0,t=0;t<this.m_FSOreLightNode.length;t++)this.m_FSOreLightNode[t].active=!0,this.m_FSOreLightNode[t].getComponent(cc.Animation).play();this.StartMiningTimer()}this.m_Logic.m_GameTypeCur!=h.eGameTypeCur.eGTC_FreeGame&&this.ShowTableScore(),this.m_bIsShowLinesFra?this.SetStopLine(!0):this.DealWinEff_Reset()}},t.prototype.ShowWinEnd_FSCountAdd=function(){var e=this;this.m_bIsWinFSWaitPlayOver=!1,this.m_Logic.m_eStartKey=h.eStartKey.eSK_WinFSWaitPlay,this.m_Logic.SetTransMode(),this.SetStopLine(!0),this.SetLineFAndItemAnimAct(r.eSLM_ShowFS);var t=function(){this.m_bIsWinFSWaitPlayOver&&(cc.log("\u5df2\u70b9\u51fb\uff01"),this.unschedule(t),this.m_gAddFS.active=!1,this.m_gLinesMask.active=!1,this.ResetParam(),this.ShowFSTimesTotal(),this.m_iFSCountAdd=0,this.m_Logic.WaitFreeGameSelect())};this.m_FSAddTimesCtrl.ShowNum1(this.m_iFSCountAdd,!0,-1,!1),this.scheduleOnce(function(){e.SetLineFAndItemAnimAct(r.eSLM_HideAll),e.m_gAddFS.active=!0,e.schedule(t,l.m_Delay1),e.m_Logic.SetStartWaitPlay()},l.m_Delay2)},t.prototype.ShowWinEnd_FS2General=function(){var e,t,i=this;cc.log("====ShowWinEff  \u5f53\u524d\u514d\u8d39\u6e38\u620f,\u4e0b\u4e00\u8f6e\u4e0d\u662f\u514d\u8d39\u6e38\u620f\uff01"),this.m_FSIsExitFS=!1,this.m_Logic.SetTransMode(),this.SetStopLine(!0),this.m_bIsWinFSWaitPlayOver=!1,this.m_eTransScoreMode=s.eTSM_MedToWin,this.mTransScoreKey=m.eSK_CanGetScoreFast,this.m_SubShowNum=null,this.m_AddShowNum=this.m_Panel_BigWinNumCtrl,t=this.m_dFSTotalWinScore,this.m_Logic.SetPrizeType1(t),this.m_TransScenePanel.opacity=0,this.m_TransScenePanel.active=!0,this.m_CurGemCount=0,this.scheduleOnce(function(){i.m_Logic.m_DealSound&&(e=i.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_End_Free,i.m_Logic.m_iSeatID,!1,!1)),cc.tween(i.m_TransScenePanel).to(.5,{opacity:255}).call(function(){i.m_Logic.m_freeReels.length>0&&(i.m_Logic.SetItemResult(i.m_Logic.m_freeReels),i.m_Logic.m_DealItem.SetAllItemResult(i.m_Logic.m_arys_ItemResult),i.m_Logic.m_DealItem.ShowInitResultSpr(),i.SetLineFAndItemAnimAct(r.eSLM_ShowFSOut)),i.m_gFSPar.active=!1,i.m_Text_LinesScores.string="Congratulation! You won "+i.m_Logic.game.iGameBase.getNum(t,!1);for(var n=0;n<i.m_arys_winGem.length;n++)i.m_arys_winGem[n].active=!1;for(n=0;n<i.m_arys_WinIcon.length;n++)i.m_arys_WinIcon[n].active=!1;cc.tween(i.m_TransScenePanel).to(.5,{opacity:0}).call(function(){i.m_TransScenePanel.active=!1,i.m_Panel_BigWin.getComponent(cc.Animation).play("Anim_BigWin_1"),i.m_Panel_BigWin.active=!0,i.scheduleOnce(function(){i.m_Panel_BigWin.getComponent(cc.Animation).play("Anim_BigWin_2")},1),i.m_Logic.m_DealSound&&(e=i.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_BigWin,i.m_Logic.m_iSeatID,!1,!1)),i.m_TransScoreCtrl.TransScore(t,0,function(){i.scheduleOnce(function(){i.m_GameWinScoreParticleNode.active=!1,i.m_Panel_BigWin.active=!1,i.m_eTransScoreMode=s.eTSM_None,i.mTransScoreKey=m.eSK_None,i.m_Logic.m_DealSound&&i.m_Logic.m_DealSound.SEStop(e,i.m_Logic.m_iSeatID),i.ResetParam(),i.ShowWinScoreAnim(),i.ShowTableScore(),i.m_dFSTotalWinScore=0,i.m_dGameWinScoreCur=0,i.m_OutFS.active=!1,i.m_gLinesMask.active=!1,i.m_Logic.m_GameTypeCur=h.eGameTypeCur.eGTC_General,i.m_Logic.game.iGameBase.setGameTypeCur(i.m_Logic.m_GameTypeCur),i.m_Logic.m_DealItem.SetSpCurrentGameType(i.m_Logic.m_GameTypeCur),i.m_Logic.m_DealSound&&i.m_Logic.m_DealSound.BGMPlay(l.eAudioName.BGM_Gen,!0),i.SetLineFAndItemAnimAct(r.eSLM_HideAll),i.m_Logic.WaitGenGameSelect()},l.m_Delay1)})}).start()}).start()},1)},t.prototype.SubTransScore=function(e){switch(this.m_eTransScoreMode){case s.eTSM_GameToWin:case s.eTSM_MedToWin:case s.eTSM_GenWinToCredit:case s.eTSM_FSMedTotalWinToCredit:null!=this.m_SubShowNum&&this.ShowImageNum(this.m_SubShowNum,e)}},t.prototype.AddTransScore=function(e){switch(this.m_eTransScoreMode){case s.eTSM_GameToWin:case s.eTSM_MedToWin:case s.eTSM_GenWinToCredit:case s.eTSM_FSMedTotalWinToCredit:null!=this.m_AddShowNum&&this.ShowImageNum(this.m_AddShowNum,e)}},t.prototype.GetWinFast=function(){if(this.m_eTransScoreMode!=s.eTSM_None)switch(this.mTransScoreKey){case m.eSK_None:break;case m.eSK_CanGetScoreFast:this.m_TransScoreCtrl.setScoreState(1),this.mTransScoreKey=m.eSK_CanGetScoreAll,cc.log("\u52a0\u5feb\u8df3\u5206");break;case m.eSK_CanGetScoreAll:this.m_TransScoreCtrl.setScoreState(2),this.mTransScoreKey=m.eSK_None,cc.log("\u505c\u6b62\u8df3\u5206")}},t.prototype.PlayFreeGame=function(e,t,i,n,o,a,m,_,s,c){var S=this;this.m_Logic.m_eStartKey=h.eStartKey.eSK_WinFSWaitPlay,this.m_Logic.SetTransMode(),this.SetStopLine(!0),this.ShowGameWin(),this.m_Logic.m_DealBetRel.m_iBet=t,this.m_Logic.m_DealBetRel.m_iLines=i,this.m_iFSCountTotal=o,this.m_iFSCountUesed=a,this.m_iNextGameSpecialOdds=m,this.m_iFSTrigLinesCount=_,this.m_Logic.m_DealBetRel.m_fTotalBet=s,this.m_iFSCountLave=this.m_iFSCountTotal-this.m_iFSCountUesed,this.m_Logic.m_DealBetRel.ShowAllData(),this.m_dWinScoreCur=0,this.m_dFSTotalWinScore=c,this.m_dWinScoreCur=this.m_dFSTotalWinScore,cc.log("====PlayFreeGame=====--m_dFSTotalWinScore",this.m_dFSTotalWinScore),this.ShowTableScore(),this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_FreeEnab,this.m_Logic.m_iSeatID,!1,!0);var u=l.m_Delay3;this.m_Logic.m_bIsHasFSFromInit&&(u=0),this.scheduleOnce(function(){u>0?(S.m_Logic.m_DealSound&&S.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_FreeEnab1,S.m_Logic.m_iSeatID,!1,!0),S.SetLineFAndItemAnimAct(r.eSLM_ShowFS),S.scheduleOnce(function(){S.SetLineFAndItemAnimAct(r.eSLM_HideAll),S.PlayFreeGame2()},4)):S.PlayFreeGame2()},u)},t.prototype.PlayFreeGame2=function(){var e=this;this.m_panel_Miner.active=!1,this.m_MinerInfoFS.getComponent(cc.Animation).play(),this.m_MinerInfoFS.setScale(1),this.m_MinerInfoFS.active=!0,this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_bonus_change1,this.m_Logic.m_iSeatID,!1,!0),this.scheduleOnce(function(){e.m_MinerInfoFS.active=!1,e.m_panel_Miner.active=!0,e.ResetParam(),e.ShowFSTimesUsed(),e.ShowFSTimesTotal(),e.ShowFSTotaolWin(),e.m_dGameWinScoreCur+=e.m_dFSTotalWinScore,e.m_Logic.m_GameTypeCur=h.eGameTypeCur.eGTC_FreeGame,e.m_Logic.game.iGameBase.setGameTypeCur(e.m_Logic.m_GameTypeCur),e.m_Logic.WaitFreeGameSelect(),e.m_gFSPar.active=!0,e.m_FSMiner.parent=e.m_FSMinerStartNode,e.m_FSMiner.position=cc.v3(0,0,0),e.m_FSMiner.scale=1,e.m_FSMiner.getComponent(cc.Animation).play("Anim_FSMinerIdle");var t=e.GetGemCount();if(e.m_CurGemCount=0,t<3){for(var i=0;i<t;i++)e.m_arys_winGem[i].active=!0;e.m_CurGemCount=t}for(e.m_FSShowBonusNumCtrl.ShowNum2(500*e.m_Logic.m_iBet,!0,!1),i=0;i<5;i++)e.m_FSOreLightNode[i].active=!0,e.m_FSOreLightNode[i].getComponent(cc.Animation).play();e.m_Logic.m_DealAutoTrans.SetBtnStartSpinState(!1),e.m_Logic.m_DealAutoTrans.SetBtnAutoSpinState(!1),e.m_Logic.m_DealAutoTrans.SetBtnStopSpinState(!1),e.m_FSOreButton.active=!1,e.m_FSIntoAnimNode.active=!0,e.m_FSIntoAnimNumCtrl.ShowNum1(15,!0,-1,!1),e.m_FSTimerNumCtrl.ShowNum1(20,!0,-1,!1),e.m_Logic.m_DealSound&&e.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_bonus_boardin,e.m_Logic.m_iSeatID,!1,!0),e.m_FSIntoAnimNode.getComponent(cc.Animation).play(),e.scheduleOnce(function(){e.m_FSIntoAnimTimer=e.ShowTimer(e.m_FSIntoAnimNumCtrl,e,function(){this.OnFSIntoAnimTimerEnd()},15,1)},.5)},3)},Object.defineProperty(t.prototype,"M_bIsWinFSWaitPlayOver",{get:function(){return this.m_bIsWinFSWaitPlayOver},set:function(e){this.m_bIsWinFSWaitPlayOver=e},enumerable:!1,configurable:!0}),t.prototype.DealWinEff_Reset=function(){this.m_gLinesMask.active=!1,this.SetLineFAndItemAnimAct(r.eSLM_HideAll),this.ResetParam(),this.m_Logic.StartIdle()},t.prototype.ShowLottery_Special=function(){var e=this;this.m_DealSpecial.ShowLottery_Special(),this.m_Logic.m_GameTypeNext!=h.eGameTypeNext.eGTN_SpecialGame&&this.m_Logic.m_GameTypeCur==h.eGameTypeCur.eGTN_SpecialGame?this.m_DealSpecial.OutSpecial():this.scheduleOnce(function(){e.m_Logic.StartInitIdle()},1)},t.prototype.PlaySpecialGame=function(e,t,i,n,o,a,m,_,r){var s=this;cc.error("==PlaySpecialGame:m_dTotalWinScoreCur=",r),this.m_Logic.m_GameMode=!0,this.m_Logic.m_eStartKey=h.eStartKey.eSK_WinSpecialWaitPlay,this.m_Logic.SetTransMode(),this.SetStopLine(!0),this.m_DealSpecial.m_totalTime=o,this.m_DealSpecial.ShowSpecialTimesUsed();var c=l.m_Delay3;if(this.m_Logic.m_bIsHasSpecialFromInit?c=0:this.m_Logic.InitSpecialItemResult(this.m_Logic.m_arys_ItemResult),this.m_Logic.m_DealItem1.SetAllItemResult(this.m_Logic.m_arys_ItemResult_1),this.m_Logic.m_DealItem1.ShowInitResultSpr(),this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_FreeEnab,this.m_Logic.m_iSeatID,!1,!0),c>0){for(var S=0;S<l.m_iItemCol;S++)for(var u=0;u<l.m_iItemRow;u++)this.IsIconSpecialJackpot(this.m_Logic.m_arys_ItemResult[S][u])&&this.m_Logic.m_DealItem.GetImage(S,u).node.getComponent(cc.Animation).play("Anim_SlotItem_Fire");this.scheduleOnce(function(){s.m_DealSpecial.StartAnim()},1.5)}else this.m_DealSpecial.StartAnim();var p=function(){this.m_bIsWinSpecialWaitPlayOver&&(this.unschedule(p),this.ResetParam(),this.m_DealSpecial.Panel_IntoSpecial.active=!1,this.m_Logic.m_GameTypeCur=h.eGameTypeCur.eGTN_SpecialGame,this.m_Logic.game.iGameBase.setGameTypeCur(this.m_Logic.m_GameTypeCur),this.m_Logic.WaitSpecialGameSelect())};this.schedule(p,.1)},Object.defineProperty(t.prototype,"M_bIsWinSpecialWaitPlayOver",{get:function(){return this.m_bIsWinSpecialWaitPlayOver},set:function(e){this.m_bIsWinSpecialWaitPlayOver=e},enumerable:!1,configurable:!0}),t.prototype.BackToGeneral=function(){var e,t=this;this.m_Panel_BigWin.getComponent(cc.Animation).play("Anim_BigWin_1"),this.m_Panel_BigWin.active=!0,this.scheduleOnce(function(){t.m_Panel_BigWin.getComponent(cc.Animation).play("Anim_BigWin_2")},1),this.m_GameWinScoreBigWinAnim.node.active=!1,this.m_Logic.m_DealSound&&(e=this.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_BigWin,this.m_Logic.m_iSeatID,!1,!1)),this.m_AddShowNum=this.m_Panel_BigWinNumCtrl,this.m_eTransScoreMode=s.eTSM_GameToWin,this.mTransScoreKey=m.eSK_CanGetScoreFast,this.m_TransScoreCtrl.TransScore(this.m_DealSpecial.m_totoalWin,0,function(){var t=this;this.m_Panel_BigWin.active=!1,this.m_eTransScoreMode=s.eTSM_None,this.mTransScoreKey=m.eSK_None,this.m_GameWinScoreParticleNode.active=!1,this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEStop(e,this.m_Logic.m_iSeatID),this.ShowTableScore(),this.ShowWinScoreAnim(),this.m_Logic.m_GameTypeCur=h.eGameTypeCur.eGTC_General,this.m_Logic.game.iGameBase.setGameTypeCur(this.m_Logic.m_GameTypeCur),this.m_Logic.WaitGenGameSelect(),this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEStop(e,this.m_Logic.m_iSeatID),this.scheduleOnce(function(){t.m_Logic.m_DealSound&&t.m_Logic.m_DealSound.BGMPlay(l.eAudioName.BGM_Gen)},2)})},t.prototype.onSetClick=function(){var e=this;this.m_Panel_Set.active=!0,this.m_Pos_ButtonSet=this.m_Button_Set.getPosition(),this.m_Width_ButtonSet=this.m_Button_Set.getContentSize().width,this.m_Pos_PanelSet=this.m_Panel_Set.getPosition(),this.m_Width_PanelSet=this.m_Panel_Set.getContentSize().width,cc.tween(this.m_Button_Set).to(.25,{position:cc.v3(this.m_Pos_ButtonSet.x+this.m_Width_ButtonSet,this.m_Pos_ButtonSet.y,0)}).call(function(){e.m_Widget_m_ButtonSet.right=-e.m_Width_ButtonSet,e.m_Button_Set.active=!1,cc.tween(e.m_Panel_Set).to(.25,{position:cc.v3(e.m_Pos_PanelSet.x-e.m_Width_PanelSet,e.m_Pos_PanelSet.y,0)}).call(function(){e.m_Widget_PanelSet.right=0,e.m_Mask_Set.active=!0}).start()}).start()},t.prototype.onMaskClick=function(){var e=this;this.m_Panel_Set.active=!1,this.m_Pos_ButtonSet=this.m_Button_Set.getPosition(),this.m_Width_ButtonSet=this.m_Button_Set.getContentSize().width,this.m_Pos_PanelSet=this.m_Panel_Set.getPosition(),this.m_Width_PanelSet=this.m_Panel_Set.getContentSize().width,cc.tween(this.m_Panel_Set).to(.25,{position:cc.v3(this.m_Pos_PanelSet.x+this.m_Width_PanelSet,this.m_Pos_PanelSet.y,0)}).call(function(){e.m_Mask_Set.active=!1,e.m_Button_Set.active=!0,e.m_Widget_PanelSet.right=-e.m_Width_PanelSet,cc.tween(e.m_Button_Set).to(.25,{position:cc.v3(e.m_Pos_ButtonSet.x-e.m_Width_ButtonSet,e.m_Pos_ButtonSet.y,0)}).call(function(){e.m_Widget_m_ButtonSet.right=0}).start()}).start()},t.prototype.onSoundClick=function(){var e=this.m_Logic.game.iGameBase.SMGlobal_GetOpenSE();this.m_Logic.game.m_SoundSystem&&this.m_Logic.game.m_SoundSystem.SEToggle(!e),this.m_Toggle_SoundOn.active=e,this.m_Toggle_SoundOff.active=!e},t.prototype.InitSound=function(){var e=this.m_Logic.game.iGameBase.SMGlobal_GetOpenSE();this.m_Logic.game.m_SoundSystem&&this.m_Logic.game.m_SoundSystem.SEToggle(e),this.m_Toggle_SoundOn.active=e,this.m_Toggle_SoundOff.active=!e},t.prototype.showGamInfoPanel=function(){this.m_PanelRule.active=!0},t.prototype.hideGameInfo=function(){this.m_PanelRule.active=!1},t.prototype.GameInfoNextBtnClick=function(){this.m_gameInfoIndex+1<4&&(this.m_gameInfoIndex+=1),this.showGameInfoItem()},t.prototype.GameInfoPrevBtnClick=function(){this.m_gameInfoIndex-1>=0&&(this.m_gameInfoIndex-=1),this.showGameInfoItem()},t.prototype.showGameInfoItem=function(){for(var e=0;e<4;e++)this.m_gameInfoIndex==e?this.m_gameInfoImage[e].active=!0:this.m_gameInfoImage[e].active=!1},t.prototype.SetLineFAndItemAnimAct=function(e,t,i){switch(void 0===t&&(t=-1),void 0===i&&(i=0),e){case r.eSLM_HideAll:for(var n=0;n<this.m_list_gAnimItemShowing.length;n++)(h=this.m_list_gAnimItemShowing[n]).active=!1,h.getComponent(cc.Animation).stop(),this.m_dic_iqPreObj.get(_.ePO_ItemAnim).push(h);for(n=0;n<this.m_list_gAnimItemBonusShowing.length;n++)(h=this.m_list_gAnimItemBonusShowing[n]).active=!1,h.getComponent(cc.Animation).stop(),this.m_dic_iqPreObj.get(_.ePO_Bouns).push(h);for(this.m_list_gAnimItemShowing=[],this.m_list_gAnimItemBonusShowing=[],n=0;n<this.m_liat_gLinesShowing.length;n++)this.m_liat_gLinesShowing[n].active=!1,this.m_dic_iqPreObj.get(_.ePO_LinesFra).push(this.m_liat_gLinesShowing[n]);for(this.m_liat_gLinesShowing=[],n=0;n<this.m_list_ItemNormalImage.length;n++)this.m_list_ItemNormalImage[n].node.active=!0;this.m_list_ItemNormalImage=[];break;case r.eSLM_ShowAll:for(this.m_Text_LinesScores.string="You won a total of "+this.m_Logic.game.iGameBase.getNum(i,!1),this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_Line,this.m_Logic.m_iSeatID,!1,!0),n=0;n<this.m_list_PrizeInfos.length;n++)for(var o=this.m_list_PrizeInfos[n].line,a=this.m_list_PrizeInfos[n].ary_ilineFrom,m=0;m<a.length;m++)a[m]>-1&&this.ShowLineFAndItemAnim(m,a[m],o);for(n=0;n<this.m_list_ScatterInfos.length;n++)for(a=this.m_list_ScatterInfos[n].ary_ilineFrom,m=0;m<a.length;m++)a[m]>-1&&this.ShowLineFAndItemAnim(m,a[m],0);break;case r.eSLM_ShowAllGen:for(this.m_Text_LinesScores.string="You won a total of "+this.m_Logic.game.iGameBase.getNum(i,!1),this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_Line,this.m_Logic.m_iSeatID,!1,!0),n=0;n<this.m_list_PrizeInfos.length;n++)for(o=this.m_list_PrizeInfos[n].line,a=this.m_list_PrizeInfos[n].ary_ilineFrom,m=0;m<a.length;m++)a[m]>-1&&this.ShowLineFAndItemAnim(m,a[m],o);break;case r.eSLM_HideAllGen:for(n=0;n<this.m_list_gAnimItemShowing.length;n++)(h=this.m_list_gAnimItemShowing[n]).active=!1,h.getComponent(cc.Animation).stop(),this.m_dic_iqPreObj.get(_.ePO_ItemAnim).push(h);for(this.m_list_gAnimItemShowing=[],n=0;n<this.m_liat_gLinesShowing.length;n++)this.m_liat_gLinesShowing[n].active=!1,this.m_dic_iqPreObj.get(_.ePO_LinesFra).push(this.m_liat_gLinesShowing[n]);for(this.m_liat_gLinesShowing=[],n=0;n<this.m_list_ItemNormalImage.length;n++)this.m_list_ItemNormalImage[n].node.active=!0;this.m_list_ItemNormalImage=[];break;case r.eSLM_ShowSingle:if(-1==t)return;for(n=0;n<this.m_list_PrizeInfos.length;n++)if(this.m_list_PrizeInfos[n].line==t){var s=this.m_list_PrizeInfos[n],c=(o=s.line,a=s.ary_ilineFrom,s.point*this.m_Logic.m_DealBetRel.m_iBet);for(this.m_Text_LinesScores.string="You won "+this.m_Logic.game.iGameBase.getNum(c,!1)+" on line "+(o+1).toString(),this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_Line,this.m_Logic.m_iSeatID,!1,!0),m=0;m<a.length;m++)a[m]>-1&&this.ShowLineFAndItemAnim(m,a[m],o);break}break;case r.eSLM_HideSingle:for(n=0;n<this.m_list_gAnimItemShowing.length;n++){var h;(h=this.m_list_gAnimItemShowing[n]).active=!1,h.getComponent(cc.Animation).stop(),this.m_dic_iqPreObj.get(_.ePO_ItemAnim).push(h)}for(this.m_list_gAnimItemShowing=[],n=0;n<this.m_liat_gLinesShowing.length;n++)this.m_liat_gLinesShowing[n].active=!1,this.m_dic_iqPreObj.get(_.ePO_LinesFra).push(this.m_liat_gLinesShowing[n]);for(this.m_liat_gLinesShowing=[],n=0;n<this.m_list_ItemNormalImage.length;n++)this.m_list_ItemNormalImage[n].node.active=!0;this.m_list_ItemNormalImage=[];break;case r.eSLM_ShowFS:for(n=0;n<this.m_list_ScatterInfos.length;n++)for(a=this.m_list_ScatterInfos[n].ary_ilineFrom,m=0;m<a.length;m++)a[m]>-1&&this.ShowLineFAndItemAnim(m,a[m],0,!0);break;case r.eSLM_ShowFSOut:for(n=0;n<l.m_iItemCol;n++)for(m=0;m<l.m_iItemRow;m++)this.m_Logic.m_arys_ItemResult[n][m]==l.m_iItem_FREE&&this.ShowLineFAndItemAnim(n,m,0,!0)}},t.prototype.ShowLineFAndItemAnim=function(e,t,i,n){if(void 0===i&&(i=-1),void 0===n&&(n=!1),n){var o=this.GetPreObj(_.ePO_Bouns);return o.position=this.m_arys_VecItems[e][t],o.active=!0,o.getComponent(cc.Animation).play(),void this.m_list_gAnimItemBonusShowing.push(o)}var a=this.GetPreObj(_.ePO_ItemAnim),m=cc.find("Image_ItemAnim",a).getComponent(cc.Sprite);m.node.active=!1,a.position=this.m_arys_VecItems[e][t],m.spriteFrame=this.m_ary_SprItems[this.m_Logic.m_iBetIndex][this.m_Logic.m_arys_ItemResult[e][t]],a.active=!0,this.m_Logic.m_arys_ItemResult[e][t]==l.m_iItem_WILD?a.getComponent(cc.Animation).play("Anim_Item_wild"):(m.node.active=!0,a.getComponent(cc.Animation).play("Anim_Item_0_11"));var r=this.m_Logic.m_DealItem.GetImage(e,t);r.node.active=!1,this.m_list_ItemNormalImage.push(r),this.m_list_gAnimItemShowing.push(a);var s=this.GetPreObj(_.ePO_LinesFra);s.position=this.m_arys_VecItems[e][t],s.active=!0,this.m_liat_gLinesShowing.push(s)},t.prototype.GetPreObj=function(e){var t=null;if(this.m_dic_iqPreObj.has(e))if(this.m_dic_iqPreObj.get(e).length>0)t=this.m_dic_iqPreObj.get(e).pop();else{var i=null;switch(e){case _.ePO_ItemAnim:(i=cc.instantiate(this.m_gItemAnim)).setParent(this.m_transItemAnimP);break;case _.ePO_LinesFra:(i=cc.instantiate(this.m_gLinesFrame)).setParent(this.m_transLinesFrameP);break;case _.ePO_Bouns:(i=cc.instantiate(this.m_gBounsAnimPrefab)).setParent(this.m_transBounsAnimP)}(t=i).active=!1}return t},t.prototype.ShowDonateMessage=function(){this.m_Logic.game.iGameBase.ShowDonateMessage()},t.prototype.PlayWinSound=function(){var e,t;return e=l.eAudioName.Sound_GameWinTrans,this.m_Logic.m_DealSound&&(t=this.m_Logic.m_DealSound.SEPlay(e,this.m_Logic.m_iSeatID,!0,!1)),t},t.prototype.StartMining=function(e){cc.log("------\x3e>\u8bf7\u6c42\u4e00\u6b21\u6316\u77ff\u7ed3\u679c",e),this.m_CurGemSelectIndex=e,this.m_FSIsExitFS?this.ShowMiningEffect(0,!0):this.m_Logic.StartMining(),this.m_FSOreButton.active=!1,this.StopMiningTimer()},t.prototype.ShowMiningEffect=function(e,t){var i=this;void 0===t&&(t=!1);var n=this.GetGemCount(),o=this.GetIsDoubleScore();cc.log("------\x3e>\u6316\u77ff\u7ed3\u679c",e,n,this.m_CurGemCount,o),this.m_FSMiner.parent=this.m_FSMinerPosNode[this.m_CurGemSelectIndex],this.m_FSMiner.position=cc.v3(),this.m_FSMiner.scale=1,this.m_FSMiner.width=369,this.m_FSMiner.height=480;var a=!1;1==this.m_CurGemSelectIndex||2==this.m_CurGemSelectIndex||4==this.m_CurGemSelectIndex?(this.m_FSMiner.getComponent(cc.Animation).play("Anim_FSMinerLeft"),a=!0):this.m_FSMiner.getComponent(cc.Animation).play("Anim_FSMinerRight"),this.m_MiningParticle.node.position=this.m_FSOreLightNode[this.m_CurGemSelectIndex].position,this.m_MiningParticle.node.active=!0,this.m_MiningParticle.stopSystem(),this.scheduleOnce(function(){i.m_MiningParticle.resetSystem(),i.m_Logic.m_DealSound&&i.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_miner_dig,i.m_Logic.m_iSeatID,!1,!0)},.26),this.scheduleOnce(function(){i.m_MiningParticle.resetSystem(),i.m_Logic.m_DealSound&&i.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_miner_dig,i.m_Logic.m_iSeatID,!1,!0)},.6);for(var m=0;m<5;m++)this.m_FSOreLightNode[m].active=!1;this.m_FSOreLightNode[this.m_CurGemSelectIndex].active=!0,this.scheduleOnce(function(){if(i.m_MiningParticle.node.active=!1,t)i.scheduleOnce(function(){i.m_Logic.m_DealSound&&i.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_miner_fail,i.m_Logic.m_iSeatID,!1,!0),a?i.m_FSMiner.getComponent(cc.Animation).play("Anim_FSMinerExitLeft"):i.m_FSMiner.getComponent(cc.Animation).play("Anim_FSMinerExitRight");var t=i.m_arys_WinIcon[1];t.active=!0,t.opacity=255,t.scale=1,t.position=cc.v3(i.GemAnimPosX[i.m_CurGemSelectIndex],i.m_FSOreLightNode[i.m_CurGemSelectIndex].position.y),cc.tween(t).to(.5,{y:i.GemAnimPosY[i.m_CurGemSelectIndex]}).delay(1).to(.5,{opacity:0}).call(function(){i.m_OutFS.active=!0,i.m_Logic.m_DealSound&&i.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_miner_failend,i.m_Logic.m_iSeatID,!1,!0),a?i.m_OutFS.getComponent(cc.Animation).play("Anim_FSMinerExitLeft_2"):i.m_OutFS.getComponent(cc.Animation).play("Anim_FSMinerExitRight_2"),i.scheduleOnce(function(){i.ShowWinEnd_FS2General(e)},2.2)}).start()},.3);else if(o){var m=i.m_arys_WinIcon[2];m.active=!0,m.opacity=255,m.scale=1,m.position=cc.v3(i.GemAnimPosX[i.m_CurGemSelectIndex],i.m_FSOreLightNode[i.m_CurGemSelectIndex].position.y),m.getChildByName("Icon").active=!1,i.m_Logic.m_DealSound&&i.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_bonus_pointin1,i.m_Logic.m_iSeatID,!1,!0),cc.tween(m).to(.3,{y:i.GemAnimPosY[i.m_CurGemSelectIndex]}).call(function(){i.m_Logic.m_DealSound&&i.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_miner_digend,i.m_Logic.m_iSeatID,!1,!0),a?i.m_FSMiner.getComponent(cc.Animation).play("Anim_FSMinerWinScoreLeft"):i.m_FSMiner.getComponent(cc.Animation).play("Anim_FSMinerWinScoreRight"),m.getComponent(cc.Animation).play(),i.scheduleOnce(function(){m.getComponent(cc.Sprite).enabled=!1,cc.tween(m).delay(.5).to(.1,{scale:1.2}).to(.5,{position:cc.v3(-280,-600),scale:0}).call(function(){i.m_Logic.m_DealSound&&i.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_bonus_pointlocate,i.m_Logic.m_iSeatID,!1,!0),i.m_WinScoreParticle.active=!0,m.active=!1,m.getComponent(cc.Sprite).enabled=!0,i.ShowMiningWinSocre(e,!0)}).start()},1.7)}).start()}else if(n>i.m_CurGemCount)i.m_GemAnimNode.position=cc.v3(i.GemAnimPosX[i.m_CurGemSelectIndex],i.m_FSOreLightNode[i.m_CurGemSelectIndex].position.y),i.m_GemAnimNode.active=!0,i.m_Logic.m_DealSound&&i.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_bonus_pointin1,i.m_Logic.m_iSeatID,!1,!0),cc.tween(i.m_GemAnimNode).to(.3,{y:i.GemAnimPosY[i.m_CurGemSelectIndex]}).call(function(){i.m_Logic.m_DealSound&&i.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_bonus_bonuswin,i.m_Logic.m_iSeatID,!1,!0),a?i.m_FSMiner.getComponent(cc.Animation).play("Anim_FSMinerWinScoreLeft"):i.m_FSMiner.getComponent(cc.Animation).play("Anim_FSMinerWinScoreRight")}).delay(.5).to(.3,{position:i.m_arys_winGem[n-1].position}).call(function(){i.m_Logic.m_DealSound&&i.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_bonus_crystalballlocate,i.m_Logic.m_iSeatID,!1,!0),i.mPanel_FSBONUS.getComponent(cc.Animation).play("Anim_FSWinGem"),i.m_GemAnimNode.active=!1,i.m_arys_winGem[n-1].active=!0,i.m_CurGemCount=n,3==i.m_CurGemCount?(i.m_CurGemCount=0,i.scheduleOnce(function(){for(var t=0;t<i.m_arys_winGem.length;t++)i.m_arys_winGem[t].active=!1;i.mPanel_FSBONUS.getComponent(cc.Animation).play("Anim_FSWinBonus"),i.m_Logic.m_DealSound&&i.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_bonus_greencrystalfly,i.m_Logic.m_iSeatID,!1,!0),i.scheduleOnce(function(){i.m_Logic.m_DealSound&&i.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_bonus_greencrystalin,i.m_Logic.m_iSeatID,!1,!0)},1),i.m_FSMiner.getComponent(cc.Animation).play("Anim_FSMinerWinGem"),i.scheduleOnce(function(){i.m_Logic.m_DealSound&&i.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_bonus_pointlocate,i.m_Logic.m_iSeatID,!1,!0),i.m_WinScoreParticle.active=!0,i.ShowMiningWinSocre(e,!1)},3.2)},2)):(1==i.m_CurGemSelectIndex||2==i.m_CurGemSelectIndex||4==i.m_CurGemSelectIndex?i.m_FSMiner.getComponent(cc.Animation).play("Anim_FSMinerIdleLeft"):i.m_FSMiner.getComponent(cc.Animation).play("Anim_FSMinerIdleRight"),i.ShowWinEnd(e))}).start();else if(e>0){var _=i.m_arys_WinIcon[0];_.active=!0,_.opacity=255,_.position=cc.v3(i.GemAnimPosX[i.m_CurGemSelectIndex],i.m_FSOreLightNode[i.m_CurGemSelectIndex].position.y),i.m_FSWinNumPar.active=!1,i.m_Logic.m_DealSound&&i.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_bonus_pointin1,i.m_Logic.m_iSeatID,!1,!0),cc.tween(_).to(.3,{y:i.GemAnimPosY[i.m_CurGemSelectIndex]}).call(function(){i.m_Logic.m_DealSound&&i.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_miner_digend,i.m_Logic.m_iSeatID,!1,!0),a?i.m_FSMiner.getComponent(cc.Animation).play("Anim_FSMinerWinScoreLeft"):i.m_FSMiner.getComponent(cc.Animation).play("Anim_FSMinerWinScoreRight"),i.m_FSCurScoreNumCtrl.ShowNum2(e,!0,!1),i.m_FSWinNumPar.position=cc.v3(_.position.x,_.position.y+60),i.m_FSWinNumPar.active=!0,i.m_FSWinNumPar.scale=0,cc.tween(i.m_FSWinNumPar).delay(.2).to(.2,{scale:1}).call(function(){cc.tween(_).delay(.5).to(.2,{opacity:0}).start(),cc.tween(i.m_FSWinNumPar).delay(.5).to(.2,{scale:1.2}).to(.5,{position:cc.v3(-280,-565),scale:0}).call(function(){i.m_Logic.m_DealSound&&i.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_bonus_pointlocate,i.m_Logic.m_iSeatID,!1,!0),i.m_WinScoreParticle.active=!0,_.active=!1,i.m_FSWinNumPar.active=!1,i.ShowMiningWinSocre(e,!0)}).start()}).start()}).start()}},.8)},t.prototype.ShowMiningWinSocre=function(e){var t=this;1==this.m_CurGemSelectIndex||2==this.m_CurGemSelectIndex||4==this.m_CurGemSelectIndex?this.m_FSMiner.getComponent(cc.Animation).play("Anim_FSMinerIdleLeft"):this.m_FSMiner.getComponent(cc.Animation).play("Anim_FSMinerIdleRight"),this.m_AddShowNum=this.m_FSShowTotalWinNumCtrl,this.m_eTransScoreMode=s.eTSM_GameToWin,this.mTransScoreKey=m.eSK_CanGetScoreFast,this.m_dGameWinScoreCur+=e,this.m_FSShowTotalWinNumCtrl.ShowNum1(this.m_dGameWinScoreCur,!0,-1,!1),this.scheduleOnce(function(){t.m_WinScoreParticle.active=!1,t.m_eTransScoreMode=s.eTSM_None,t.mTransScoreKey=m.eSK_None,t.ShowWinEnd(e)},1)},t.prototype.GetGemCount=function(){for(var e=0,t=0;t<l.m_iItemRow;t++){if(this.m_Logic.m_arys_ItemResult[0][t]!=l.m_iItem_Gem)return e;e++}return e},t.prototype.GetIsDoubleScore=function(){return this.m_Logic.m_arys_ItemResult[1][0]==l.m_iItem_Double},t.prototype.ShowTimer=function(e,t,i,n,o){void 0===o&&(o=1);var a=function(){n>0?(e.ShowNum2(n,!0,!1),n--):(this.unschedule(a),e.ShowNum2(n,!0,!1),i&&i.call(t))};return this.schedule(a,o),a},t.prototype.OnFSIntoAnimTimerEnd=function(){var e=this;this.unschedule(this.m_FSIntoAnimTimer),this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_bonus_boardout,this.m_Logic.m_iSeatID,!1,!0),cc.tween(this.m_FSIntoAnimNode).to(.2,{scale:1.2}).to(.3,{scale:0}).call(function(){e.m_FSIntoAnimNode.active=!1,e.m_FSIntoAnimNode.scale=1,e.m_FSOreButton.active=!0}).start(),this.StartMiningTimer()},t.prototype.StartMiningTimer=function(){this.m_FSMiningTimer=this.ShowTimer(this.m_FSTimerNumCtrl,this,function(){var e=Math.floor(5*Math.random());e=e>=5?0:e,this.StartMining(e)},20,1)},t.prototype.StopMiningTimer=function(){this.unschedule(this.m_FSMiningTimer)},t.prototype.testFum=function(){this.m_dFSTotalWinScore=1e3,this.m_CurGemSelectIndex=3,this.ShowMiningEffect(100,!1),this.m_DealSpecial.m_totoalWin=1e3,this.m_DealSpecial.OutAnimation2()},t.prototype.ShowWILDItemAnim=function(e,t){this.m_Logic.m_DealSound&&this.m_Logic.m_DealSound.SEPlay(l.eAudioName.Sound_WILDIconStop,this.m_Logic.m_iSeatID,!1,!1);var i=this.GetPreObj(_.ePO_ItemAnim),n=cc.find("Image_ItemAnim",i).getComponent(cc.Sprite);n.node.active=!1,i.position=this.m_arys_VecItems[e][t],n.spriteFrame=this.m_ary_SprItems[this.m_Logic.m_iBetIndex][this.m_Logic.m_arys_ItemResult[e][t]],i.active=!0,n.node.active=!0,i.getComponent(cc.Animation).play("Anim_Item_wild"),this.m_list_gAnimItemShowing.push(i)},t.prototype.ShowLamp1=function(e,t,i){var n=this;cc.tween(this.m_LampAnimationNode).to(.8,{position:this.m_arys_VecItems[e][t]}).call(function(){n.ShowWILDItemAnim(e,t),n.scheduleOnce(function(){i.call(n)},1)}).start()},t.prototype.ShowMinerLampAnim=function(){if(Math.floor(100*Math.random())>75){for(var e=[-1,-1,-1],t=!1,i=1;i<l.m_iItemCol-1;i++)for(var n=0;n<l.m_iItemRow;n++)if(this.m_Logic.m_arys_ItemResult[i][n]==l.m_iItem_WILD){e[i-1]=n,t=!0;break}t&&this.ShowMinerLampAnim1(e)}},t.prototype.ShowMinerLampAnim1=function(e){var t=this;this.m_Logic.m_DealItem.SetIsMinerAnimPlay(!0);var i=function(){this.m_LampAnimationNode.active=!1,this.m_panel_Miner.getComponent(cc.Animation).play("Anim_MinerIdle"),this.m_Logic.m_DealItem.SetIsMinerAnimPlay(!1)};this.m_LampAnimationNode.active=!0,this.m_LampAnimationNode.position=cc.v3(-226,94),this.m_LampAnimationNode.setContentSize(0,0),this.m_panel_Miner.active=!0,this.m_panel_Miner.getComponent(cc.Animation).play("Anim_MinerLamp"),this.scheduleOnce(function(){t.m_Logic.m_DealSound&&t.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_miner_lightin_1,t.m_Logic.m_iSeatID,!1,!1),t.m_Logic.m_DealSound&&t.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_miner_lightin_2,t.m_Logic.m_iSeatID,!1,!1)},2),this.scheduleOnce(function(){t.m_Logic.m_DealSound&&t.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_miner_headlamp,t.m_Logic.m_iSeatID,!1,!1),t.m_panel_Miner.getComponent(cc.Animation).play("Anim_MinerLamp_1"),cc.tween(t.m_LampAnimationNode).to(.5,{width:180,height:180}).call(function(){e[0]>=0?t.ShowLamp1(1,e[0],function(){e[1]>=0?(t.m_panel_Miner.getComponent(cc.Animation).play("Anim_MinerLamp_2"),t.ShowLamp1(2,e[1],function(){e[2]>=0?(t.m_panel_Miner.getComponent(cc.Animation).play("Anim_MinerLamp_3"),t.ShowLamp1(3,e[2],function(){i.call(t)})):i.call(t)})):e[2]>=0?(t.m_panel_Miner.getComponent(cc.Animation).play("Anim_MinerLamp_2"),t.scheduleOnce(function(){t.m_panel_Miner.getComponent(cc.Animation).play("Anim_MinerLamp_3"),t.ShowLamp1(3,e[2],function(){i.call(t)})},.6)):i.call(t)}):e[1]>=0?(t.m_panel_Miner.getComponent(cc.Animation).play("Anim_MinerLamp_2"),t.ShowLamp1(2,e[1],function(){e[2]>=0?(t.m_panel_Miner.getComponent(cc.Animation).play("Anim_MinerLamp_3"),t.ShowLamp1(3,e[2],function(){i.call(t)})):i.call(t)})):e[2]>=0?(t.m_panel_Miner.getComponent(cc.Animation).play("Anim_MinerLamp_2"),t.scheduleOnce(function(){t.m_panel_Miner.getComponent(cc.Animation).play("Anim_MinerLamp_3"),t.ShowLamp1(3,e[2],function(){i.call(t)})},.6)):i.call(t)}).start()},4)},t.prototype.SHowMinerFireAnim=function(){var e=this;this.m_Logic.SetBtnState(h.eBtnState.eBS_Trans),this.m_Logic.m_DealAutoTrans.SetAuto2ManSpin(),this.m_LampAnimationNode.active=!0,this.m_LampAnimationNode.position=cc.v3(-226,94),this.m_LampAnimationNode.setContentSize(0,0),this.m_Logic.m_DealItem.SetIsMinerAnimPlay(!0),this.m_panel_Miner.active=!0,this.m_panel_Miner.getComponent(cc.Animation).play("Anim_MinerFire"),this.scheduleOnce(function(){e.m_Logic.m_DealSound&&e.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_miner_lightin_1,e.m_Logic.m_iSeatID,!1,!1),e.m_Logic.m_DealSound&&e.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_miner_lightin_2,e.m_Logic.m_iSeatID,!1,!1)},1.8),this.scheduleOnce(function(){e.m_Logic.m_DealSound&&e.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_miner_jump_1,e.m_Logic.m_iSeatID,!1,!1)},2.34),this.scheduleOnce(function(){e.m_Logic.m_DealSound&&e.m_Logic.m_DealSound.SEPlay(l.eAudioName.MI_miner_run,e.m_Logic.m_iSeatID,!1,!1)},5.3),this.m_panel_Miner.getComponent(cc.Sprite).enabled=!1,this.scheduleOnce(function(){e.m_LampAnimationNode.active=!1},5),this.scheduleOnce(function(){e.m_panel_Miner.getComponent(cc.Animation).play("Anim_MinerIdle"),e.m_LampAnimationNode.active=!1,e.m_Logic.m_DealItem.SetIsMinerAnimPlay(!1),e.m_panel_Miner.getComponent(cc.Sprite).enabled=!0},12)},t.prototype.IsIconSpecialJackpot=function(e){var t=!1;return e>=10&&e<l.m_iItem_WILD?t=!0:e>=l.m_iItem_Jackpot0&&e<=l.m_iItem_Jackpot3&&(t=!0),t},t.prototype.ShowFreeItemStop=function(e,t){if(1==t)for(var i=0;i<l.m_iItemRow;i++)this.m_Logic.m_arys_ItemResult[e][i]==l.m_iItem_FREE&&((o=this.GetPreObj(_.ePO_Bouns)).position=this.m_arys_VecItems[e][i],o.active=!0,o.getComponent(cc.Animation).play("Anim_Item_Free"),this.m_list_gAnimItemBonusShowing.push(o));else for(this.SetLineFAndItemAnimAct(r.eSLM_HideAll),i=0;i<=e;i++)for(var n=0;n<l.m_iItemRow;n++){var o;this.m_Logic.m_arys_ItemResult[i][n]==l.m_iItem_FREE&&((o=this.GetPreObj(_.ePO_Bouns)).position=this.m_arys_VecItems[i][n],o.active=!0,o.getComponent(cc.Animation).play("Anim_Item_Free1"),this.m_list_gAnimItemBonusShowing.push(o))}},t.prototype.ShowID=function(e){this.m_IDLabel.string="ID:"+e},t.prototype.ShowWinScoreAnim=function(e){void 0===e&&(e=0),0==e?this.m_Logic.game.iGameBase.isNoWin()?cc.tween(this.m_transCreditNumP).to(.2,{scale:1}).to(.2,{scale:.6}).start():cc.tween(this.m_transTotalWinNumP).to(.2,{scale:1}).to(.2,{scale:.6}).start():this.m_Logic.m_GameTypeCur==h.eGameTypeCur.eGTC_General&&(this.m_Logic.game.iGameBase.isNoWin()?cc.tween(this.m_transCreditNumP).to(.2,{scale:1}).to(.2,{scale:.6}).start():cc.tween(this.m_transTotalWinNumP).to(.2,{scale:1}).to(.2,{scale:.6}).start())},a([u],t)}(cc.Component));i.default=p,cc._RF.pop()},{"./DataManager_Miner":"DataManager_Miner","./DealSpecial_Miner":"DealSpecial_Miner","./GameLogic_Miner":"GameLogic_Miner"}],GameLogic_Miner:[function(e,t,i){"use strict";cc._RF.push(t,"e50b0Ry/PWtM6WBQ87pgWXd","GameLogic_Miner");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.eBtnState=i.eGameState=i.eShowMode=i.eStartKey=i.ePrizeType=i.eGameTypeNext=i.eGameTypeCur=void 0;var a,m,_,r,s,l,c,h=e("./DataManager_Miner"),S=e("./DealAutoTrans_Miner");(function(e){e[e.eGTC_General=0]="eGTC_General",e[e.eGTC_FreeGame=1]="eGTC_FreeGame",e[e.eGTN_SpecialGame=2]="eGTN_SpecialGame"})(a=i.eGameTypeCur||(i.eGameTypeCur={})),function(e){e[e.eGTN_General=0]="eGTN_General",e[e.eGTN_FreeGame=1]="eGTN_FreeGame",e[e.eGTN_SpecialGame=2]="eGTN_SpecialGame"}(m=i.eGameTypeNext||(i.eGameTypeNext={})),function(e){e[e.ePT_None=0]="ePT_None",e[e.ePT_General=1]="ePT_General",e[e.ePT_Small=2]="ePT_Small",e[e.ePT_Medium=3]="ePT_Medium",e[e.ePT_Big=4]="ePT_Big",e[e.ePT_AllAward=5]="ePT_AllAward"}(_=i.ePrizeType||(i.ePrizeType={})),function(e){e[e.eSK_None=0]="eSK_None",e[e.eSK_CanSpin=1]="eSK_CanSpin",e[e.eSK_StopAllItem=2]="eSK_StopAllItem",e[e.eSK_WinFSWaitPlay=3]="eSK_WinFSWaitPlay",e[e.eSK_WinSpecialWaitPlay=4]="eSK_WinSpecialWaitPlay"}(r=i.eStartKey||(i.eStartKey={})),function(e){e[e.eSM_None=-1]="eSM_None",e[e.eSM_Score=0]="eSM_Score",e[e.eSM_Money=1]="eSM_Money",e[e.Max=2]="Max"}(s=i.eShowMode||(i.eShowMode={})),function(e){e[e.eGS_None=0]="eGS_None",e[e.eGS_CanChangeBet=1]="eGS_CanChangeBet",e[e.eGS_Playing=2]="eGS_Playing",e[e.eGS_TransGameMode=3]="eGS_TransGameMode"}(l=i.eGameState||(i.eGameState={})),function(e){e[e.eBS_None=0]="eBS_None",e[e.eBS_GenIdle=1]="eBS_GenIdle",e[e.eBS_FSIdle=2]="eBS_FSIdle",e[e.eBS_Playing=3]="eBS_Playing",e[e.eBS_Auto=4]="eBS_Auto",e[e.eBS_Manual=5]="eBS_Manual",e[e.eBS_Trans=6]="eBS_Trans"}(c=i.eBtnState||(i.eBtnState={}));var u=function(e){function t(t,i){var n=e.call(this)||this;n.game=null,n.AwardLines=[],n.freeTimes=0,n.totalFreeTimes=0,n.allWinDouble=!1,n.freeTotalWinScore=0,n.iNextGameSpecialOdds=0,n.freeSpinAddTimes=0,n.m_JackpotsCur=[],n.currentWinScore=0,n.m_reels=[],n.m_GameTypeCur=a.eGTC_General,n.m_GameTypeNext=m.eGTN_General,n.m_GameState=l.eGS_None,n.m_PrizeType=_.ePT_None,n.m_eStartKey=r.eSK_None,n.m_eShowMode=s.eSM_Money,n.m_iSeatID=0,n.m_iWinType=0,n.m_arys_ItemResult=new Array,n.m_bIsHasFSFromInit=!1,n.m_bIsBSNeedEnab=!1,n.m_bStartCtrl=!1,n.m_bIsIdle=!1,n.m_flgStart=!1,n.m_ary_dJackpot=new Array(h.m_iJackpotCount),n.m_GameMode=!1,n.m_arys_ItemResult_1=new Array,n.m_bIsHasSpecialFromInit=!1,n.m_iBetIndex=0,n.m_iBet=1,n.m_freeReels=[],n.m_bBegin=!1,n.isLeave=!1,n.isAccordStand=!1,n.mMarqueelist=[],n.m_bIsWinCJ=!1,n.m_Stage=t,n.m_iSeatID=i;for(var o=0;o<h.m_iItemCol;o++){n.m_arys_ItemResult[o]=[];for(var c=0;c<h.m_iItemRow;c++)n.m_arys_ItemResult[o][c]=0}for(o=0;o<h.m_iItemCol;o++)for(n.m_arys_ItemResult_1[o]=[],c=0;c<h.m_iItemRow1;c++)n.m_arys_ItemResult_1[o][c]=0;return n}return o(t,e),t.prototype.onJackpots=function(e){this.m_JackpotsCur=e,this.game.onJackpots(e)},t.prototype.onBetFail=function(){},t.prototype.onGameScore=function(e){this.m_DealWinPro.m_dTotalWinScoreCur=Math.round(e),this.game.iGameBase.isNoWin()?this.m_DealWinPro.m_dUserPoint=this.m_DealWinPro.m_dTotalWinScoreCur:this.m_DealWinPro.m_dTableScore=this.m_DealWinPro.m_dTotalWinScoreCur},t.prototype.onUserScore=function(e){var t=Math.round(e);this.m_DealWinPro.m_dUserPoint=t},t.prototype.OnUpScore=function(e){var t=Math.round(e);this.m_DealWinPro.m_dUserPoint+=t,cc.log("====onUserScore\u4e0a\u5206\uff1a",e),this.m_DealWinPro.ShowUserPoint()},t.prototype.OnShowMarquee=function(){this.game.iGameBase.OnShowMarquee()},t.prototype.showInitResult=function(e){this.SetItemResult(e)},t.prototype.onTransScoreInfo=function(e,t){e?(this.m_DealWinPro.m_dTotalWinScoreCur=this.m_DealWinPro.m_dTotalWinScoreCur-t,this.m_DealWinPro.m_dTableScore=this.m_DealWinPro.m_dTotalWinScoreCur,this.m_DealWinPro.ShowTableScore(),this.m_DealWinPro.ShowUserPoint(),cc.log("====>>\u8f6c\u6362\u5206\u6570\u6210\u529f,\u5f53\u524d\u5269\u4f59\u8d62\u5206\uff1a"+this.m_DealWinPro.m_dTotalWinScoreCur+",\u5f53\u524d\u684c\u9762\u5206\uff1a"+this.m_DealWinPro.m_dTableScore)):cc.log("====>>\u8f6c\u6362\u5206\u6570\u5931\u8d25")},t.prototype.sendChangeBet=function(e){this.game.iGameBase.sendChangeBet(e)},t.prototype.sendRun=function(){this.game.iGameBase.sendRun(),cc.log("\u53d1\u9001\u6570\u636e-----SetPlayingData")},t.prototype.sendTransScore=function(e){this.game.iGameBase.sendTransScore(e)},t.prototype.onWinJackpot=function(e,t){this.m_bIsWinCJ=!0,this.m_DealWinPro.m_iJackpotId=e;var i=Math.round(100*t)/100;this.m_DealWinPro.m_dJackpotScore=i,this.m_DealWinPro.m_dTotalWinScoreCur=this.m_DealWinPro.m_dTotalWinScoreCur+100*i},t.prototype.onPayJackpot=function(){},t.prototype.onWaitBonus=function(e,t,i,n,o,a,m,_,r,s,l,c,h){this.m_DealWinPro.PlayFreeGame(e,t,i,n,o,a,r,s,l,c),this.m_freeReels=h},t.prototype.onWaitSpecial=function(e,t,i,n,o,a,m,_,r,s){this.m_DealWinPro.PlaySpecialGame(e,t,i,n,o,a,m,_,r),this.m_freeReels=s},t.prototype.sendAskForBeginPayJackpot=function(){cc.log("====sendAskForBeginPayJackpot====="),this.game.iGameBase.sendAskForBeginPayJackpot()},t.prototype.sendFinishPayJackpot=function(){this.m_bIsWinCJ=!1,this.game.iGameBase.sendFinishPayJackpot()},t.prototype.sendWaitBound=function(){this.game.iGameBase.sendWaitBound()},t.prototype.sendWaitSpecial=function(){this.game.iGameBase.sendWaitSpecial()},t.prototype.onSelectCard=function(){},t.prototype.onSelectCard2=function(){},t.prototype.onSelectCardLast=function(){},t.prototype.UpdateGameSlot=function(){this.m_bStartCtrl&&(this.m_GameMode?this.m_DealItem1.UpdateState():this.m_DealItem.UpdateState(),this.m_bIsIdle&&this.m_DealAutoTrans.m_ePlayMode==S.ePlayMode.ePM_Auto&&(this.m_GameTypeCur==a.eGTC_General?this.m_DealWinPro.m_dUserPoint>=this.m_DealBetRel.m_fTotalBet?(this.m_DealWinPro.m_Text_LinesScores.string="Good Luck",this.OnSpin()):(cc.log("===UpdateGameSlot----\u81ea\u52a8\u53d8\u6210\u624b\u52a8\uff01"),this.m_DealAutoTrans.IsAutoPlay(S.ePlayMode.ePM_Man),this.StartIdle(),this.m_DealWinPro.ShowDonateMessage()):this.m_GameTypeCur==a.eGTC_FreeGame&&this.m_DealWinPro.M_bIsWinFSWaitPlayOver?(this.m_DealWinPro.m_Text_LinesScores.string="Good Luck",this.OnSpin()):this.m_GameTypeCur==a.eGTN_SpecialGame&&this.m_DealWinPro.M_bIsWinSpecialWaitPlayOver&&(this.m_DealWinPro.m_Text_LinesScores.string="Good Luck",this.OnSpin())),this.m_GameMode?this.m_DealItem1.DealTransStop():this.m_DealItem.DealTransStop(),this.m_DealWinPro.MyUpdate())},t.prototype.OnKeyStartAction=function(){if(this.game.iGameBase.GetConnected())switch(this.m_eStartKey){case r.eSK_None:cc.log("eSK_None");break;case r.eSK_CanSpin:this.m_GameMode,this.OnManualSpin(),this.m_DealWinPro.ShowGameWin();break;case r.eSK_StopAllItem:this.m_GameMode?this.m_DealItem1.AllStopItem():this.m_DealItem.AllStopItem();break;case r.eSK_WinFSWaitPlay:this.m_DealWinPro.M_bIsWinFSWaitPlayOver=!0,this.m_eStartKey=r.eSK_None;break;case r.eSK_WinSpecialWaitPlay:this.m_DealWinPro.M_bIsWinSpecialWaitPlayOver=!0,this.m_eStartKey=r.eSK_None;break;default:cc.log("default")}},t.prototype.OnManualSpin=function(){switch(this.m_GameState){case l.eGS_None:if(this.m_DealAutoTrans.m_ePlayMode!=S.ePlayMode.ePM_Man)return;break;case l.eGS_CanChangeBet:break;default:return}this.OnSpin()},t.prototype.OnSpin=function(){this.ChangeGameState(l.eGS_Playing)},t.prototype.ShowLottery=function(){switch(this.m_GameState){case l.eGS_Playing:this.m_DealItem.ResetParam(),this.m_DealWinPro.ShowLottery()}},t.prototype.StartIdle=function(){this.m_GameState=l.eGS_None,this.ChangeGameState(this.m_GameState),this.m_bIsIdle=!0,this.m_GameTypeCur==a.eGTC_General?this.m_DealAutoTrans.m_ePlayMode==S.ePlayMode.ePM_Man?(this.SetBtnState(c.eBS_GenIdle),this.m_GameState=l.eGS_CanChangeBet):this.m_DealAutoTrans.m_ePlayMode==S.ePlayMode.ePM_Auto&&this.SetBtnState(c.eBS_Auto):this.m_GameTypeCur==a.eGTC_FreeGame||this.m_DealAutoTrans.m_ePlayMode==S.ePlayMode.ePM_Man&&this.SetBtnState(c.eBS_Auto)},t.prototype.StartInitIdle=function(){this.m_GameTypeCur==a.eGTC_General?this.SetBtnState(c.eBS_GenIdle):this.SetBtnState(c.eBS_FSIdle),this.m_GameState=l.eGS_None,this.ChangeGameState(this.m_GameState),this.m_bIsIdle=!0},t.prototype.SetBtnState=function(e){switch(e){case c.eBS_None:break;case c.eBS_GenIdle:cc.log("-------------------\x3e>>\u663e\u793a\u538b\u5206\u6309\u94ae002"),this.m_DealAutoTrans.SetBtnStartSpinState(!0),this.m_DealAutoTrans.SetBtnAutoSpinState(!0),this.m_DealBetRel.m_BtnBetAdd.interactable=!0,this.m_DealBetRel.m_BtnBetSub.interactable=!0,this.m_DealWinPro.m_BtnTransScore.interactable=!0;break;case c.eBS_FSIdle:this.m_DealAutoTrans.SetBtnAutoSpinState(!0),this.m_DealAutoTrans.SetBtnStartSpinState(!0),this.m_DealBetRel.m_BtnBetAdd.interactable=!1,this.m_DealBetRel.m_BtnBetSub.interactable=!1;break;case c.eBS_Playing:this.m_DealAutoTrans.m_ePlayMode==S.ePlayMode.ePM_Auto?(this.m_DealAutoTrans.SetBtnAutoSpinState(!0),this.m_DealAutoTrans.SetBtnStartSpinState(!1)):(this.m_DealAutoTrans.SetBtnAutoSpinState(!0,!1),this.m_DealAutoTrans.SetBtnStartSpinState(!1)),this.m_DealBetRel.m_BtnBetAdd.interactable=!1,this.m_DealBetRel.m_BtnBetSub.interactable=!1,this.m_DealWinPro.m_BtnTransScore.interactable=!1;break;case c.eBS_Auto:this.m_DealAutoTrans.SetBtnAutoSpinState(!0);break;case c.eBS_Manual:break;case c.eBS_Trans:cc.log("-------------------\x3e>>\u7981\u7528\u538b\u5206\u6309\u94ae001"),this.m_DealAutoTrans.SetBtnAutoSpinState(!0,!1),this.m_DealAutoTrans.SetBtnStartSpinState(!0,!1),this.m_DealBetRel.m_BtnBetAdd.interactable=!1,this.m_DealBetRel.m_BtnBetSub.interactable=!1,this.m_DealWinPro.m_BtnTransScore.interactable=!1}},t.prototype.DataInit=function(e,t,i,n,o,a,_,r,s,l,c,S){if(cc.log("===DataInit this.BonusID == ",o,this.m_reels),2==o){this.showInitResult(S),this.SetItemSpecialResult(S),this.m_DealWinPro.m_DealSpecial.SetScatterData_1(this.m_arys_ItemResult_1);for(var u=0;u<h.m_iItemCol;u++)for(var p=0;p<h.m_iItemRow1;p++)if(this.m_DealWinPro.m_DealSpecial.m_arys_Scatter[u][p]>0)this.m_arys_ItemResult_1[u][p]=this.m_DealWinPro.m_DealSpecial.m_arys_Scatter[u][p];else{var d=this.game.iGameBase.SMGlobal_Random(0,8);this.m_arys_ItemResult_1[u][p]=d}}else this.showInitResult(S);this.ResetParam(),this.SetBetIndex(e,t),this.m_DealBetRel.m_iBet=t,this.m_DealBetRel.m_iLines=i,this.m_DealWinPro.m_iBonusID=o,this.m_DealBetRel.m_fTotalBet=l,this.m_DealWinPro.m_dFSTotalWinScore=c,this.game.iGameBase.isNoWin()||(this.m_DealWinPro.m_dTableScore=this.m_DealWinPro.m_dTotalWinScoreCur),this.m_GameTypeNext=0==o?m.eGTN_General:1==o?m.eGTN_FreeGame:m.eGTN_SpecialGame,this.m_GameTypeNext==m.eGTN_FreeGame?this.m_bIsHasFSFromInit=!0:this.m_GameTypeNext==m.eGTN_SpecialGame?this.m_bIsHasSpecialFromInit=!0:(this.m_bIsHasFSFromInit=!1,this.m_bIsHasSpecialFromInit=!1,this.m_DealWinPro.m_dFSTotalWinScore=0),this.m_DealWinPro.m_dWinScoreCur=0,this.m_DealBetRel.ShowAllData(),this.m_DealWinPro.ShowTableScore(),this.m_DealWinPro.ShowGameWin(),this.m_DealWinPro.ShowUserPoint(),this.m_GameTypeNext!=m.eGTN_SpecialGame?(this.m_arys_ItemResult=this.m_DealWinPro.m_DealSpecial.CheckResult(this.m_arys_ItemResult),this.m_DealItem.SetAllItemResult(this.m_arys_ItemResult),this.m_DealItem.ShowInitResultSpr()):(this.m_DealItem.SetAllItemResult(this.m_arys_ItemResult),this.m_DealItem.ShowInitResultSpr()),this.game.iGameBase.EmitEvent("InitSceneComplete",null)},t.prototype.ResetParam=function(){},t.prototype.SetItemResult=function(e){for(var t=0;t<h.m_iItemCol;t++)for(var i=h.m_iItemRow;i<h.m_iItemRow1;i++){var n=e[t][i];n>=8?this.m_arys_ItemResult[t][i-h.m_iItemRow]=26==n?h.m_iItem_Double:n-8:0==n?this.m_arys_ItemResult[t][i-h.m_iItemRow]=h.m_iItem_WILD:2==n?this.m_arys_ItemResult[t][i-h.m_iItemRow]=h.m_iItem_FREE:3==n?this.m_arys_ItemResult[t][i-h.m_iItemRow]=h.m_iItem_Jackpot0:4==n?this.m_arys_ItemResult[t][i-h.m_iItemRow]=h.m_iItem_Jackpot1:5==n?this.m_arys_ItemResult[t][i-h.m_iItemRow]=h.m_iItem_Jackpot2:6==n?this.m_arys_ItemResult[t][i-h.m_iItemRow]=h.m_iItem_Jackpot3:7==n&&(this.m_arys_ItemResult[t][i-h.m_iItemRow]=h.m_iItem_Gem)}this.SetRollEffData()},t.prototype.SetItemResult_2=function(e){for(var t=0;t<h.m_iItemCol;t++)for(var i=0;i<h.m_iItemRow1;i++){var n=e[t][i];n>=8?this.m_arys_ItemResult[t][i]=26==n?h.m_iItem_Double:n-8:0==n?this.m_arys_ItemResult[t][i]=h.m_iItem_WILD:2==n?this.m_arys_ItemResult[t][i]=h.m_iItem_FREE:3==n?this.m_arys_ItemResult[t][i]=h.m_iItem_Jackpot0:4==n?this.m_arys_ItemResult[t][i]=h.m_iItem_Jackpot1:5==n?this.m_arys_ItemResult[t][i]=h.m_iItem_Jackpot2:6==n?this.m_arys_ItemResult[t][i]=h.m_iItem_Jackpot3:7==n&&(this.m_arys_ItemResult[t][i]=h.m_iItem_Gem)}},t.prototype.DataInitOk=function(){if(this.m_bIsHasFSFromInit)this.sendWaitBound();else if(this.m_bIsHasSpecialFromInit)this.sendWaitSpecial();else{switch(this.AddAction(),this.m_GameState){case l.eGS_Playing:}this.StartInitIdle(),this.m_GameTypeCur==a.eGTC_General&&this.m_DealSound&&this.m_DealSound.BGMPlay(h.eAudioName.BGM_Gen,!0),this.m_bStartCtrl=!0}},t.prototype.SetResult=function(e,t,i,n,o,a,_,r,s,l,c,h,S,u){if(this.m_DealBetRel.m_iBet=e,this.m_DealBetRel.m_iLines=t,this.m_DealWinPro.m_iBonusID=n,this.m_iWinType=o,this.SetAllAwardsID(a),this.m_DealBetRel.m_fTotalBet=r,this.SetItemResult(h),this.SetPrizeInfos(S),this.SetScatterInfos(u),2==n){for(var p=0,d=this.m_DealWinPro.m_list_ScatterInfos,g=0;g<d.length;g++)p+=d[g].point*this.m_DealBetRel.m_iBet;this.m_DealWinPro.m_dWinScoreCur=s>=p?s-p:s}else this.m_DealWinPro.m_dWinScoreCur=s;this.m_DealWinPro.m_dUserPoint=this.m_DealWinPro.m_dUserPoint-this.m_DealBetRel.m_fTotalBet,0==this.game.iGameBase.isNoWin()&&(this.m_DealWinPro.m_dTotalWinScoreCur+=this.m_DealWinPro.m_dWinScoreCur,this.m_DealWinPro.m_dTableScore=this.m_DealWinPro.m_dTotalWinScoreCur),this.m_GameTypeNext=0==n?m.eGTN_General:1==n?m.eGTN_FreeGame:m.eGTN_SpecialGame,this.m_DealBetRel.ShowAllData(),this.m_DealWinPro.ShowUserPoint(),this.SetWinTypeData(),this.m_DealItem.m_bIsGetResult=!0,this.m_GameTypeNext!=m.eGTN_General?this.m_DealWinPro.SHowMinerFireAnim():s>0&&this.m_DealWinPro.ShowMinerLampAnim()},t.prototype.SetAllAwardsID=function(e){2==this.m_iWinType?this.m_DealWinPro.m_iAllAwardsID=e>=8?e-8:0==e?h.m_iItem_WILD:2==e?h.m_iItem_FREE:-1:this.m_DealWinPro.m_iAllAwardsID=-1},t.prototype.SetPrizeInfos=function(e){this.m_DealWinPro.m_list_PrizeInfos=[];for(var t=e.length,i=0;i<t;i++){var n=e[i].id;n>=8?26==n?n=h.m_iItem_Double:n-=8:0==n?n=h.m_iItem_WILD:2==n?n=h.m_iItem_FREE:3==n?n=h.m_iItem_Jackpot0:4==n?n=h.m_iItem_Jackpot1:5==n?n=h.m_iItem_Jackpot2:6==n?n=h.m_iItem_Jackpot3:7==n&&(n=h.m_iItem_Gem);var o={id:n,line:e[i].line,dir:e[i].dir,num:e[i].num,point:Math.round(e[i].point),ary_ilineFrom:e[i].lineFrom};this.m_DealWinPro.m_list_PrizeInfos.push(o)}},t.prototype.SetScatterInfos=function(e){this.m_DealWinPro.m_list_ScatterInfos=[];for(var t=e.length,i=0;i<t;i++){var n=e[i].id;n>=8?26==n?n=h.m_iItem_Double:n-=8:0==n?n=h.m_iItem_WILD:2==n?n=h.m_iItem_FREE:3==n?n=h.m_iItem_Jackpot0:4==n?n=h.m_iItem_Jackpot1:5==n?n=h.m_iItem_Jackpot2:6==n?n=h.m_iItem_Jackpot3:7==n&&(n=h.m_iItem_Gem);var o={id:n,line:e[i].line,dir:e[i].dir,num:e[i].num,point:Math.round(e[i].point),ary_ilineFrom:e[i].lineFrom};this.m_DealWinPro.m_list_ScatterInfos.push(o)}},t.prototype.WaitFreeGameSelect=function(){if(this.m_bIsHasFSFromInit)return this.m_bIsHasFSFromInit=!1,void this.DataInitOk();this.StartInitIdle()},t.prototype.SetBonusResult=function(e,t,i,n,o,a,_,r,s,l,c,h,S,u,p){this.m_DealWinPro.m_iBonusID=e,this.m_iWinType=t,this.SetAllAwardsID(i),this.m_DealWinPro.m_iFSCountTotal=o,this.m_DealWinPro.m_iFSCountUesed=a,this.m_DealWinPro.m_iFSCountAdd=_,this.m_DealWinPro.m_iNextGameSpecialOdds=r,this.m_DealWinPro.m_dWinScoreCur=l,this.m_DealWinPro.m_dFSTotalWinScore=c,this.m_DealWinPro.m_dTotalWinScoreCur+=this.m_DealWinPro.m_dWinScoreCur,0==e&&(this.game.iGameBase.isNoWin()||(this.m_DealWinPro.m_dTableScore=this.m_DealWinPro.m_dTotalWinScoreCur)),this.SetItemResult(S),this.SetPrizeInfos(u),this.SetScatterInfos(p),this.m_GameTypeNext=0==this.m_DealWinPro.m_iBonusID?m.eGTN_General:m.eGTN_FreeGame,this.m_DealWinPro.m_iFSCountLave=this.m_DealWinPro.m_iFSCountTotal-this.m_DealWinPro.m_iFSCountUesed,this.SetWinTypeData(),this.m_DealWinPro.ShowMiningEffect(this.m_DealWinPro.m_dWinScoreCur)},t.prototype.ChangeBetResult=function(e,t,i){this.m_DealBetRel.m_iBet=e,this.m_DealBetRel.m_iLines=t,this.m_DealBetRel.m_fTotalBet=i,this.m_DealBetRel.ShowAllData()},t.prototype.ChangeBetPctResult=function(e,t,i,n){this.m_DealBetRel.m_iLines=t,this.m_DealBetRel.m_fTotalBet=i,this.m_DealBetRel.ShowAllData(),this.SetUserScore(n)},t.prototype.ChangeBetReleResult=function(e,t,i,n,o){this.m_DealBetRel.m_iBet=e,this.m_DealBetRel.m_iLines=i,this.m_DealBetRel.m_fTotalBet=n,this.m_DealBetRel.ShowAllData(),this.SetUserScore(o)},t.prototype.SetUserScore=function(e){var t=e-this.m_DealWinPro.m_dUserPoint;this.m_DealWinPro.m_dUserPoint=e,this.m_DealWinPro.UpdateTableScore(t)},t.prototype.SoundVolResult=function(){},t.prototype.SetWinTypeData=function(){this.m_GameTypeCur==a.eGTC_FreeGame?this.m_PrizeType=_.ePT_Medium:this.SetPrizeType1(this.m_DealWinPro.m_dWinScoreCur)},t.prototype.SetPrizeType=function(){this.m_PrizeType=_.ePT_None,-1!=this.m_DealWinPro.m_iAllAwardsID?this.m_PrizeType=_.ePT_AllAward:this.BInTheAward(10,30,!0)?this.m_PrizeType=_.ePT_Medium:this.BInTheAward(5,10)?this.m_PrizeType=_.ePT_Small:this.BInTheAward(30)?this.m_PrizeType=_.ePT_Big:this.m_DealWinPro.m_dWinScoreCur>0&&(this.m_PrizeType=_.ePT_General)},t.prototype.BInTheAward=function(e,t,i){if(void 0===t&&(t=Number.MAX_VALUE),void 0===i&&(i=!1),i&&this.m_GameTypeCur==a.eGTC_FreeGame)return!0;var n=this.m_DealBetRel.m_fTotalBet;return this.m_DealWinPro.m_dWinScoreCur>=e*n&&this.m_DealWinPro.m_dWinScoreCur<t*n},t.prototype.SetPrizeType1=function(e){this.m_PrizeType=_.ePT_None,-1!=this.m_DealWinPro.m_iAllAwardsID?this.m_PrizeType=_.ePT_AllAward:this.BInTheAward1(e,10,30)?this.m_PrizeType=_.ePT_Medium:this.BInTheAward1(e,5,10)?this.m_PrizeType=_.ePT_Small:this.BInTheAward1(e,30)?this.m_PrizeType=_.ePT_Big:e>0&&(this.m_PrizeType=_.ePT_General)},t.prototype.BInTheAward1=function(e,t,i){void 0===i&&(i=Number.MAX_VALUE);var n=this.m_DealBetRel.m_fTotalBet;return e>=t*n&&e<i*n},t.prototype.AddAction=function(){this.m_ActOnKeyStop4=this.m_DealBetRel.SubBet,this.m_ActOnKeyStop5=this.m_DealBetRel.AddBet,this.m_ActOnKeyStart=this.OnKeyStartAction,this.m_ActOnKeyAuto=this.m_DealAutoTrans.OnAutoBtn,this.m_ActOnKeyMaxBet=this.m_DealBetRel.MaxBet},t.prototype.RemoveAction=function(){},t.prototype.ChangeGameState=function(e){switch(e){case l.eGS_None:this.IdleRest();break;case l.eGS_Playing:switch(this.m_GameTypeNext){case m.eGTN_General:if(this.m_DealWinPro.m_dUserPoint<this.m_DealBetRel.m_fTotalBet)return cc.log("====ChangeGameState====eGS_Playing \u5206\u4e0d\u591f"),void this.m_DealWinPro.ShowDonateMessage();break;case m.eGTN_FreeGame:this.m_DealWinPro.m_iFSCountUesed+=1,this.m_DealWinPro.ShowFSTimesUsed();break;case m.eGTN_SpecialGame:this.m_DealWinPro.m_DealSpecial.m_totalTime-=1,this.m_DealWinPro.m_DealSpecial.ShowSpecialTimesUsed()}this.m_bIsIdle=!1,this.m_GameState=l.eGS_Playing,this.SetPlayingData()}},t.prototype.IdleRest=function(){this.m_eStartKey=r.eSK_CanSpin},t.prototype.SetPlayingData=function(){switch(this.SetBtnState(c.eBS_Playing),this.m_GameTypeNext){case m.eGTN_General:case m.eGTN_FreeGame:case m.eGTN_SpecialGame:this.sendRun()}this.m_eStartKey=r.eSK_StopAllItem,this.m_DealWinPro.m_Text_LinesScores.string="Good Luck"},t.prototype.OnClickBtn=function(e){if(cc.log("===============>>\u6240\u6709\u6309\u94ae\u70b9\u51fb\u4e8b\u4ef6\uff1a"+e.name,"OreButton_3"==e.name),this.m_bStartCtrl)switch(e.name){case"Button_ToLobby":cc.log("===Button_ToLobby==="),this.isLeave=!0,this.game.iGameBase.onBtnLeaveGame(),this.m_DealWinPro.onDestroy();break;case"Button_RuleClose":this.m_DealWinPro.hideGameInfo();break;case"Button_Rule":this.m_DealWinPro.showGamInfoPanel(),this.m_DealWinPro.onMaskClick();break;case"Button_RuleInfo":this.m_DealWinPro.showGamInfoPanel();break;case"Button_Sound":cc.log("\u58f0\u97f3\u5f00\u5173"),this.game.iGameBase.SMGlobal_SoundClick(this.m_DealWinPro.m_Toggle_SoundOn,this.m_DealWinPro.m_Toggle_SoundOff);break;case"Mask_Set":this.m_DealWinPro.onMaskClick();break;case"Button_Set":this.m_DealWinPro.onSetClick();break;case"Button_Spin":if(!this.game.iGameBase.GetConnected())return void this.onBtnLeaveGame();this.m_DealWinPro.GetWinFast(),this.m_GameTypeCur==a.eGTC_General?(this.m_DealSound&&this.m_DealSound.SEPlay(h.eAudioName.Sound_Spin,this.m_iSeatID,!1,!1),this.OnKeyStartAction()):(this.m_DealWinPro.M_bIsWinFSWaitPlayOver||this.m_DealWinPro.M_bIsWinSpecialWaitPlayOver)&&this.m_DealAutoTrans.SetMan2AutoSpin();break;case"Button_Stop":this.m_DealWinPro.GetWinFast(),this.m_eStartKey==r.eSK_StopAllItem&&this.OnKeyStartAction();break;case"Button_BetAdd":this.m_DealSound&&this.m_DealSound.SEPlay(h.eAudioName.Sound_Bed,this.m_iSeatID,!1,!1),this.sendChangeBet(1);break;case"Button_BetSub":this.m_DealSound&&this.m_DealSound.SEPlay(h.eAudioName.Sound_Bed,this.m_iSeatID,!1,!1),this.sendChangeBet(-1);break;case"Button_Auto":if(!this.game.iGameBase.GetConnected())return void this.onBtnLeaveGame();if(this.m_DealWinPro.GetWinFast(),this.m_GameTypeCur==a.eGTC_General)if(this.m_DealWinPro.ShowGameWin(),this.PlayBtnAudio(),this.m_DealAutoTrans.m_ePlayMode==S.ePlayMode.ePM_Man){if(this.m_eStartKey!=r.eSK_CanSpin)return;this.m_DealSound&&this.m_DealSound.SEPlay(h.eAudioName.Sound_Auto2Man,this.m_iSeatID,!1,!1),this.m_DealAutoTrans.IsAutoPlay(S.ePlayMode.ePM_Auto)}else this.m_DealAutoTrans.m_ePlayMode==S.ePlayMode.ePM_Auto&&(this.m_DealSound&&this.m_DealSound.SEPlay(h.eAudioName.Sound_Spin,this.m_iSeatID,!1,!1),this.m_DealAutoTrans.IsAutoPlay(S.ePlayMode.ePM_Man),this.m_GameState==l.eGS_Playing?this.SetBtnState(c.eBS_Playing):this.SetBtnState(c.eBS_GenIdle));else(this.m_DealWinPro.M_bIsWinFSWaitPlayOver||this.m_DealWinPro.M_bIsWinSpecialWaitPlayOver)&&this.m_DealAutoTrans.SetMan2AutoSpin();break;case"Button_StopAuto":break;case"Button_TransScore":this.game.iGameBase.ShowDona();break;case"Button_RuleRight":this.m_DealWinPro.GameInfoNextBtnClick();break;case"Button_RuleLeft":this.m_DealWinPro.GameInfoPrevBtnClick();break;case"Button_Exit":this.onBtnLeaveGame();break;case"OreButton_0":this.m_DealWinPro.StartMining(0);break;case"OreButton_1":this.m_DealWinPro.StartMining(1);break;case"OreButton_2":this.m_DealWinPro.StartMining(2);break;case"OreButton_3":this.m_DealWinPro.StartMining(3);break;case"OreButton_4":this.m_DealWinPro.StartMining(4);break;case"FSOKButton":this.m_DealWinPro.OnFSIntoAnimTimerEnd()}},t.prototype.PlayBtnAudio=function(){},t.prototype.Final=function(){this.RemoveAction(),this.m_bStartCtrl=!1},t.prototype.SetStartWaitPlay=function(){this.m_eStartKey!=r.eSK_WinFSWaitPlay&&this.m_eStartKey!=r.eSK_WinSpecialWaitPlay||this.OnKeyStartAction()},t.prototype.InitSpecialItemResult=function(e){this.m_DealWinPro.m_DealSpecial.SetScatterData(e);for(var t=0;t<h.m_iItemCol;t++)for(var i=0;i<h.m_iItemRow1;i++)if(this.m_DealWinPro.m_DealSpecial.m_arys_Scatter[t][i]>0)this.m_arys_ItemResult_1[t][i]=this.m_DealWinPro.m_DealSpecial.m_arys_Scatter[t][i];else{var n=this.game.iGameBase.SMGlobal_Random(0,8);this.m_arys_ItemResult_1[t][i]=n}},t.prototype.SetSpecialResult=function(e,t,i,n,o,a,_,r,s,l,c,h,S){this.m_DealWinPro.m_iBonusID=e,this.m_DealWinPro.m_DealSpecial.m_totalTime=o,this.m_iWinType=t,this.SetAllAwardsID(i),this.m_DealWinPro.m_iFSCountTotal=o,this.m_DealWinPro.m_iFSCountUesed=a,this.m_DealWinPro.m_iFSCountAdd=_,this.m_DealWinPro.m_dFSTotalWinScore=s,this.m_DealWinPro.m_dWinScoreCur=r,0==e&&(cc.error("\u7279\u6b8a\u7ed3\u7b97winning\u5206\u6570:"+this.m_DealWinPro.m_dTotalWinScoreCur),this.m_DealWinPro.m_dTotalWinScoreCur+=s,cc.error("\u7279\u6b8a\u603b\u5206:"+s+",winning\u5206\u6570:"+this.m_DealWinPro.m_dTotalWinScoreCur),this.game.iGameBase.isNoWin()?this.m_DealWinPro.m_dUserPoint=this.m_DealWinPro.m_dTotalWinScoreCur:this.m_DealWinPro.m_dTableScore=this.m_DealWinPro.m_dTotalWinScoreCur),this.SetItemSpecialResult(c),this.FixSpecialItemResult(),this.SetPrizeInfos(h),this.SetScatterInfos(S),0==e?this.m_GameTypeNext=m.eGTN_General:1==e?this.m_GameTypeNext=m.eGTN_FreeGame:2==e&&(this.m_GameTypeNext=m.eGTN_SpecialGame),this.m_DealWinPro.m_iFSCountLave=this.m_DealWinPro.m_iFSCountTotal-this.m_DealWinPro.m_iFSCountUesed,this.SetWinTypeData(),this.m_DealItem1.m_bIsGetResult=!0},t.prototype.SetItemSpecialResult=function(e){for(var t=0;t<h.m_iItemCol;t++)for(var i=0;i<h.m_iItemRow1;i++){var n=e[t][i];n>=8?this.m_arys_ItemResult_1[t][i]=26==n?h.m_iItem_Double:n-8:0==n?this.m_arys_ItemResult_1[t][i]=h.m_iItem_WILD:2==n?this.m_arys_ItemResult_1[t][i]=h.m_iItem_FREE:3==n?this.m_arys_ItemResult_1[t][i]=h.m_iItem_Jackpot0:4==n?this.m_arys_ItemResult_1[t][i]=h.m_iItem_Jackpot1:5==n?this.m_arys_ItemResult_1[t][i]=h.m_iItem_Jackpot2:6==n?this.m_arys_ItemResult_1[t][i]=h.m_iItem_Jackpot3:7==n&&(this.m_arys_ItemResult_1[t][i]=h.m_iItem_Gem)}},t.prototype.ShowLottery_Special=function(){switch(this.m_DealSound&&this.m_DealSound.SEStop(this.m_DealItem1.m_SoundSpin,this.m_iSeatID),this.m_GameState){case l.eGS_Playing:this.m_DealItem1.ResetParam(),this.m_DealWinPro.ShowLottery_Special()}},t.prototype.WaitSpecialGameSelect=function(){if(this.m_bIsHasSpecialFromInit)return this.m_bIsHasSpecialFromInit=!1,void this.DataInitOk();this.StartInitIdle()},t.prototype.SetBetIndex=function(e,t){this.m_iBetIndex=e,this.m_iBet=t,this.m_DealItem.SetSpItemResIndex(this.m_iBetIndex),this.m_DealItem1.SetSpItemResIndex(this.m_iBetIndex),this.m_DealItem.SetIBet(this.m_iBet),this.m_DealItem1.SetIBet(this.m_iBet)},t.prototype.onBtnLeaveGame=function(){this.game.iGameBase.onBtnLeaveGame()},t.prototype.WaitGenGameSelect=function(){this.StartInitIdle()},t.prototype.SetTransMode=function(){this.m_GameState=l.eGS_TransGameMode,this.SetBtnState(c.eBS_Trans),this.m_DealAutoTrans.SetAuto2ManSpin()},t.prototype.SetRollEffData=function(){this.m_DealItem.m_list_iColCanShowRollEff=[];for(var e=new Array,t=0,i=0;i<h.m_iItemCol;i++)for(var n=0;n<h.m_iItemRow;n++)if(i==t&&this.m_arys_ItemResult[i][n]==h.m_iItem_FREE){e.push(i),t+=2;break}if(e.length>0&&0==e[0])for(n=0;n<e.length;n++)this.m_DealItem.m_list_iColCanShowRollEff.push(e[n])},t.prototype.FixSpecialItemResult=function(){for(var e=0;e<h.m_iItemCol;e++)for(var t=0;t<h.m_iItemRow1;t++)if(this.m_DealWinPro.m_DealSpecial.m_arys_Scatter[e][t]>0){var i=this.game.iGameBase.SMGlobal_Random(0,8);this.m_arys_ItemResult_1[e][t]=i}},t.prototype.StartMining=function(){this.sendRun()},t.prototype.updateChangeBet=function(e,t,i){this.SetBetIndex(i,e),this.m_DealBetRel.m_iBet=e,this.m_DealBetRel.m_fTotalBet=t,this.m_DealBetRel.ShowAllData()},t.prototype.onGameMaxWinScore=function(){},t.prototype.onEnterBackground=function(){this.m_DealAutoTrans&&this.m_DealAutoTrans.SetAuto2ManSpin(),null!=this.game.iGameBase&&this.game.iGameBase.GetConnected()||this.m_DealWinPro.onDestroy()},t.prototype.onDestroy=function(){this.unscheduleAllCallbacks(),this.m_DealItem.onDestroy()},t.prototype.getWinScore=function(){return this.m_DealWinPro.m_dTotalWinScoreCur},t}(cc.Component);i.default=u,cc._RF.pop()},{"./DataManager_Miner":"DataManager_Miner","./DealAutoTrans_Miner":"DealAutoTrans_Miner"}],Game_Miner:[function(e,t,i){"use strict";cc._RF.push(t,"d7b24uRzJpkAg81cR52FmAU","Game_Miner");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,m=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)m=Reflect.decorate(e,t,i,n);else for(var _=e.length-1;_>=0;_--)(o=e[_])&&(m=(a<3?o(m):a>3?o(t,i,m):o(t,i))||m);return a>3&&m&&Object.defineProperty(t,i,m),m};Object.defineProperty(i,"__esModule",{value:!0}),i.AssetType=void 0;var m,_=e("./DataManager_Miner"),r=e("./DealAutoTrans_Miner"),s=e("./DealBetRelevant_Miner"),l=e("./DealItemRelevant_Miner"),c=e("./DealWinProcess_Miner"),h=e("./GameLogic_Miner"),S=e("./ItemCtrl_CR_MulRes_SpeFireMiner");(function(e){e[e.AT_SpriteFrame=0]="AT_SpriteFrame",e[e.AT_SpriteAtlas=1]="AT_SpriteAtlas",e[e.AT_Prefab=2]="AT_Prefab",e[e.AT_AudioClip=3]="AT_AudioClip"})(m=i.AssetType||(i.AssetType={}));var u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){var t=e.call(this)||this;return t.handlerPriority=2,t.handlerName="SLOT_Miner",t.scriptName="Game_Miner",t.handlerComName="SLOST_COMMON",t.m_bIsStartUpdate=!1,t.m_SoundSystem=null,t.sceneRate=1,t.GameLogic=new h.default(t,0),t.GameLogic.game=t,t}return o(t,e),t.prototype.setIGameBase=function(e){this.iGameBase=e,this.iGameBase.setMyGameLogic(this.GameLogic,this.iGameBase.GetKindID()),this.iGameBase.CommonUI_RootNode(this.node),this.SetSound(),this.SetGameObject(),this.m_bIsStartUpdate=!0,this.GameLogic.isAccordStand=!1,this.iGameBase.AddHandler(),this.GameLogic.m_DealWinPro.ShowID(this.iGameBase.getUserID()),this.iGameBase.setOrientation("V")},t.prototype.netWorkDelay=function(){var e=this;cc.error("===netWorkDelay===="),this.m_Signal.active=!0,this.scheduleOnce(function(){e.m_Signal.active=!1},3)},t.prototype.onLoad=function(){},t.prototype.update=function(){this.StageUpdate()},t.prototype.onDestroy=function(){this.GameLogic.isLeave&&null!=this.iGameBase&&this.iGameBase.GetConnected()||this.GameLogic.m_DealWinPro.onDestroy(),this.iGameBase.RemoveHandler(),this.unscheduleAllCallbacks(),this.m_SoundSystem&&(this.m_SoundSystem.ClearAllSound(),this.m_SoundSystem=null),this.GameLogic.Final(),this.GameLogic=null,this.iGameBase.releaseGameRes()},t.prototype.getGameUINode=function(){return null},t.prototype.onLogonFinish=function(){},t.prototype.onJackpots=function(e){if(null!=this.GameLogic.m_DealWinPro.m_ary_PlayerJP)for(var t=0;t<e.length;t++)this.GameLogic.m_DealWinPro.m_ary_JackpotNumChange[t].setString(Math.round(100*e[t])/100)},t.prototype.SetGameObject=function(){for(var e,t,i,n,o,a,h,u,p,d,g,I,f,y,P,G,L,A,D,T,W,C,M,B,v,w,N,R,b,F,O,k,E,x,K,J,j,U,z,V,H,q,X,Y,Q,Z,$,ee,te,ie,ne,oe,ae,me,_e,re,se,le,ce,he,Se,ue,pe,de,ge,Ie,fe,ye,Pe,Ge,Le,Ae,De,Te,We,Ce,Me,Be,ve,we,Ne,Re,be,Fe=new Array(_.m_iJackpotCount),Oe=new Array(_.m_iJackpotCount),ke=[],Ee=new Array,xe=new Array(_.m_iLinesCount),Ke=new Array,Je=new Array,je=Array(),Ue=new Array(_.m_iItemRow),ze=new Array(2),Ve=null,He=new Array,qe=new Array,Xe=new Array(_.m_iItemCol),Ye=new Array,Qe=new Array,Ze=new Array,$e=new Array(4),et=new Array(16),tt=new Array(4),it=new Array(4),nt=[],ot=null,at=null,mt=null,_t=null,rt=[],st=new Array(_.m_iItemResCount-1),lt=new Array(2),ct=new Array(10),ht=new Array(12),St=new Array(14),ut=new Array(12),pt=new Array(12),dt=new Array(12),gt=(new Array(12),new Array(14)),It=new Array(13),ft=new Array(4),yt=new Array(14),Pt=new Map,Gt=[],Lt=new Array(14),At=new Array(12),Dt=new Array(14),Tt=new Array(14),Wt=new Array(14),Ct=new Array(14),Mt=new Array(14),Bt=this.GetGameAsset("Res/Texure/Icon",m.AT_SpriteAtlas),vt=0;vt<_.m_Max_Bet;vt++){st[vt]=[];for(var wt=0;wt<=_.m_iItemResCount;wt++)wt>=10&&wt<_.m_iItem_WILD||(wt==_.m_iItemResCount?st[vt][wt]=this.GetGameAsset("Res/Texure/Item_00",m.AT_SpriteFrame):st[vt][wt]=24==wt?Bt.getSpriteFrame("Item_0_0"):25==wt?Bt.getSpriteFrame("Item_0_1"):Bt.getSpriteFrame("Item_0_"+wt))}for(vt=0;vt<ze.length;vt++)ze[vt]=this.GetGameAsset("Res/Texure/BG"+vt,m.AT_SpriteFrame);for(Be=this.GetGameAsset("Res/Texure/Icon_Mask",m.AT_SpriteFrame),vt=0;vt<lt.length;vt++)lt[vt]=this.GetGameAsset("Res/Texure/ItemPanel_"+vt,m.AT_SpriteFrame);var Nt=this.GetGameAsset1("Res/Texure/Num/NumberOrange",m.AT_SpriteAtlas);for(vt=0;vt<ct.length;vt++)ct[vt]=Nt.getSpriteFrame("NumberOrange_"+vt);var Rt=this.GetGameAsset1("Res/Texure/Num/NumberYellow",m.AT_SpriteAtlas),bt=this.GetGameAsset1("Res/Texure/Num/NumberYellow1",m.AT_SpriteAtlas);for(vt=0;vt<ht.length;vt++)pt[vt]=Rt.getSpriteFrame("NumberYellow_"+vt),ut[vt]=bt.getSpriteFrame("NumberYellow1_"+vt),dt[vt]=bt.getSpriteFrame("NumberYellow1_"+vt);var Ft=this.GetGameAsset("Res/Texure/SPWinScoreNum",m.AT_SpriteAtlas);for(vt=0;vt<St.length;vt++)St[vt]=Ft.getSpriteFrame(""+vt);var Ot=this.GetGameAsset("Res/Texure/FireNum",m.AT_SpriteAtlas);for(vt=0;vt<Lt.length;vt++)Lt[vt]=Ot.getSpriteFrame(""+vt);var kt=this.GetGameAsset1("Res/Texure/Num/NumberWhite",m.AT_SpriteAtlas);for(vt=0;vt<gt.length;vt++)gt[vt]=kt.getSpriteFrame("NumberWhite_"+vt);for(var Et=0;Et<4;Et++){var xt=this.GetGameAsset1("Res/Texure/Jcakpot/jackpotNum_"+Et,m.AT_SpriteAtlas);for(It[Et]=[],vt=0;vt<It.length;vt++)It[Et][vt]=xt.getSpriteFrame("jackpotNum_"+Et+"_"+vt)}for(vt=0;vt<ft.length;vt++)ft[vt]=this.GetGameAsset("Res/Texure/Jcakpot/JackpotTitle_"+vt,m.AT_SpriteFrame);var Kt=this.GetGameAsset1("Res/Texure/Num/NumberBlue1",m.AT_SpriteAtlas);for(vt=0;vt<yt.length;vt++)yt[vt]=Kt.getSpriteFrame("NumberBlue1_"+vt);var Jt=this.GetGameAsset("Res/Texure/FreeGame/NumberBlue3",m.AT_SpriteAtlas);for(vt=0;vt<At.length;vt++)At[vt]=Jt.getSpriteFrame("NumberBlue3_"+vt);ve=this.GetGameAsset("Res/Prefab/StartSpecialGameAnim",m.AT_Prefab);var jt=this.GetGameAsset1("Res/Texure/Num/NumberSpinLeft",m.AT_SpriteAtlas);for(vt=0;vt<4;vt++)Gt[vt]=jt.getSpriteFrame("NumberSpinLeft_"+vt);for(vt=0;vt<et.length;vt++)et[vt]=bt.getSpriteFrame("NumberYellow1_"+vt);for(this.GetGameAsset1("Res/Texure/Special/Tips_Special",m.AT_SpriteAtlas),vt=0;vt<it.length;vt++)it[vt]=Jt.getSpriteFrame("NumberBlue3_"+vt);var Ut=this.GetGameAsset("Res/Texure/FreeGame/NumberFSWin",m.AT_SpriteAtlas);for(vt=0;vt<Dt.length;vt++)Dt[vt]=Ut.getSpriteFrame("NumberFSWin_"+vt);var zt=this.GetGameAsset("Res/Texure/FreeGame/NumberFSWin2",m.AT_SpriteAtlas);for(vt=0;vt<Tt.length;vt++)Tt[vt]=zt.getSpriteFrame("NumberFSWin2_"+vt);var Vt=this.GetGameAsset("Res/Texure/FreeGame/NumberFSBounss",m.AT_SpriteAtlas);for(vt=0;vt<Wt.length;vt++)Wt[vt]=Vt.getSpriteFrame("NumberFSBounss_"+vt);var Ht=this.GetGameAsset("Res/Texure/NumBigWin",m.AT_SpriteAtlas);for(vt=0;vt<Ct.length;vt++)Ct[vt]=Ht.getSpriteFrame("NumBigWin_"+vt);var qt=this.GetGameAsset("Res/Texure/SP_LockNum",m.AT_SpriteAtlas);for(vt=0;vt<Mt.length;vt++)Mt[vt]=qt.getSpriteFrame(""+vt);j=this.GetGameAsset("Res/Prefab/Prefab_ScatterItemAnim",m.AT_Prefab),Y=this.GetGameAsset1("Res/Prefab/Prefab_NumLock",m.AT_Prefab),De=this.GetGameAsset1("Res/Prefab/Prefab_Num",m.AT_Prefab),Te=this.GetGameAsset1("Res/Prefab/Prefab_NumGameWin",m.AT_Prefab),Ce=this.GetGameAsset1("Res/Prefab/Prefab_NumFreeSpinTime",m.AT_Prefab),We=this.GetGameAsset1("Res/Prefab/Prefab_NumCJ",m.AT_Prefab),we=this.GetGameAsset("Res/Prefab/Prefab_ItemAnim",m.AT_Prefab),Ne=this.GetGameAsset("Res/Prefab/Prefab_LinesFrame",m.AT_Prefab),Re=this.GetGameAsset("Res/Prefab/Prefab_BonusAnim",m.AT_Prefab),be=this.GetGameAsset("Res/Prefab/Prefab_NumItem",m.AT_Prefab),this.GetGameAsset1("Res/Prefab/Panel_TopV",m.AT_Prefab),this.GetGameAsset1("Res/Prefab/Panel_BelowV",m.AT_Prefab),this.GetGameAsset1("Res/Prefab/Panel_TransScoreV",m.AT_Prefab);var Xt,Yt=this.GetGameAsset1("Res/Prefab/Panel_SettingV",m.AT_Prefab),Qt=this.GetGameAsset1("Res/Prefab/Panel_LoadingV",m.AT_Prefab);Pt.set(10,"."),Pt.set(11,","),Pt.set(12,":"),Pt.set(13,"$"),Pt.set(14,"k"),Pt.set(15,"m");var Zt=cc.find("GamePlay",this.node.parent);for(Xt=cc.find("GamePlay/Panel_Baground",this.node.parent),n=cc.find("Image_Baground",Xt).getComponent(cc.Sprite),o=cc.find("ImageLogo",Xt),e=cc.find("GamePlay/Panel_Top",this.node.parent),t=cc.find("Panel_Jackpot",e),vt=0;vt<Fe.length;vt++){Oe[vt]=cc.find("Image_Jackpot_"+vt+"/Panel_NumPar",t);var $t=cc.find("Image_Jackpot_"+vt+"/Jackpot",t);ke[vt]=this.iGameBase.NewJackpotNumChange($t)}for(C=cc.find("GamePlay/Panel_Middle",this.node.parent),a=cc.find("Panel_Trans",C).getComponent(cc.Sprite),Xt=cc.find("Panel_TransItems",a.node),vt=0;vt<_.m_iItemCol;vt++){var ei=cc.find("SlogCol_"+vt,Xt);for(Ee[vt]=[],He[vt]=[],qe[vt]=[],wt=0;wt<_.m_iItemRow+2;wt++){Ee[vt][wt]=cc.find("SlotItem_"+wt,ei).getComponent(cc.Sprite);var ti=cc.find("Panel_NumPar",Ee[vt][wt].node);qe[vt][wt]=this.iGameBase.NewShowNum(ti,be,Lt,Pt,!0,!0),wt>0&&wt<_.m_iItemRow+1&&((Ai=Ee[vt][wt].node.position).x=ei.position.x,He[vt][_.m_iItemRow-wt]=Ai)}}for(g=cc.find("Image_Mask",C),v=cc.find("Panel_TransAnim/Panel_ItemAnim",C),w=cc.find("Panel_TransAnim/Panel_LinesFrame",C),N=cc.find("Panel_TransAnim/Panel_ItemAnim_Bonus",C),R=cc.find("Panel_TransAnim/Panel_RollerEff",C),vt=0;vt<Xe.length;vt++)Xe[vt]=cc.find("Vec_RollerEff_"+vt,R).position;b=(F=cc.find("Image_RollEff",R)).getComponent(cc.Animation),h=cc.find("Panel_Tips",C),p=cc.find("Panel_Effect/particle_coin",C),d=cc.find("Panel_Effect/BigWinEffect",C).getComponent(cc.Animation);var ii=cc.find("Panel_Effect/Panel_BigWin",C),ni=cc.find("Panel_Effect/Panel_BigWin/Panel_WinScoreNumPar",C),oi=cc.find("Panel_MinerInfoFS",C);(I=cc.find("Panel_FreeSpinPar",C)).active=!1,y=cc.find("Panel_IntoFreeSpin",I),P=cc.find("Panel_AddFreeSpin",I),G=cc.find("Panel_AddFSTimesNumPar",P),L=cc.find("Panel_OutFreeSpin",I),f=cc.find("Panel_FSTimesUsed",I),A=cc.find("Panel_FSTimesUsedNumPar",f),D=cc.find("Panel_FSTimesTotalNumPar",f),T=cc.find("Panel_Win/Panel_FSTotalWinNumPar",f),W=cc.find("Panel_Win/Tips",f),(Ve=cc.find("Panel_InfoAnim",I)).active=!1,M=cc.find("Panel_InfoAnim/BGInfo_0",I),B=cc.find("Panel_InfoAnim/BG0",I);var ai=cc.find("MiningPos_Strart/Miner",I),mi=[],_i=[],ri=cc.find("Panel_FSOreButton",I);for(vt=0;vt<5;vt++){var si=cc.find("OreButton_"+vt,ri).getComponent(cc.Button);this.SetBtnEvent(si,!0,!0),mi[vt]=cc.find("MiningPos_"+vt,I),_i[vt]=cc.find("OreL_"+vt,I)}var li=cc.find("MiningPos_Strart",I),ci=cc.find("Panel_FSBONUS",I),hi=[];for(vt=0;vt<3;vt++)hi[vt]=cc.find("Gem_"+vt,ci),hi[vt].active=!1;var Si=cc.find("Gem_Anim",ci),ui=cc.find("Panel_FSBONUSNumPar",ci),pi=[];for(vt=0;vt<3;vt++)pi[vt]=cc.find("Panel_WinIcon/WinIcon_"+vt,I),pi[vt].active=!1;var di=cc.find("Panel_WinIcon/Panel_FSWinNumPar",I),gi=cc.find("Panel_InfoAnim/Panel_FSIntoNumPar",I),Ii=cc.find("Panel_FSTimesUsed/Panel_FSTimerNumPar",I),fi=cc.find("Panel_InfoAnim/FSOKButton",I).getComponent(cc.Button);this.SetBtnEvent(fi,!0,!0);var yi=cc.find("MiningParticle",I).getComponent(cc.ParticleSystem),Pi=cc.find("Panel_Win/WinScoreParticle",f);Pi.active=!1;var Gi=cc.find("Panel_Miner",C),Li=cc.find("Panel_TransAnim/LampAnim",C);for(J=cc.find("GamePlay/Panel_Middle_1",this.node.parent),E=cc.find("Panel_Trans_1",J).getComponent(cc.Sprite),O=cc.find("Panel_TransItems",E.node),vt=0;vt<_.m_iItemCol;vt++)for(ei=cc.find("SlogCol_"+vt,O),Ye[vt]=[],Qe[vt]=[],Ze[vt]=[],wt=0;wt<_.m_iItemRow1+2;wt++){var Ai;Ye[vt][wt]=cc.find("SlotItem_"+wt,ei).getComponent(cc.Sprite),ti=cc.find("Panel_NumPar",Ye[vt][wt].node),Ze[vt][wt]=this.iGameBase.NewShowNum(ti,be,Lt,Pt,!0,!0),wt>0&&wt<_.m_iItemRow1+1&&((Ai=Ye[vt][wt].node.position).x=ei.position.x,Qe[vt][_.m_iItemRow1-wt]=Ai)}for(x=cc.find("Image_Mask_1",J),k=cc.find("Panel_TransAnim_1",J),K=cc.find("Panel_TransAnim",k),q=cc.find("Panel_SpecialSpinPar",J),ee=cc.find("Panel_TimesUsedSpecial",q),U=cc.find("Tips",ee).getComponent(cc.Sprite),te=cc.find("Panel_Lock",ee),vt=0;vt<$e.length;vt++)$e[vt]=cc.find("Panel_LockLine_"+vt,te),tt[vt]=cc.find("Lock/Panel_NumPar",$e[vt]);H=cc.find("Panel_IntoSpecial",q),V=cc.find("Panel_OutSpecial",q),X=cc.find("Panel_WinSpecial",V),z=cc.find("Panel_NumPar",X),Q=cc.find("Panel_TransEndEffect",J),Z=cc.find("FireLight",Q);var Di=cc.find("FireLight2",Q);for($=cc.find("fireBall",Q),ie=cc.find("Panel_Effect",ee),vt=0;vt<4;vt++)nt.push(cc.find("effect_"+vt,ie).getComponent(cc.ParticleSystem)),nt[vt].node.active=!1;Xt=cc.find("GamePlay/Panel_Effect",this.node.parent),Xt=cc.find("GamePlay/Panel_Page",this.node.parent);var Ti=cc.find("GamePlay/Panel_Page",this.node.parent);for((at=cc.instantiate(Yt)).setParent(Ti),ot=cc.find("Button_Set",at),this.SetBtnEvent(ot.getComponent(cc.Button),!0,!0),(mt=cc.find("Panel_Set",at)).active=!1,_t=cc.find("Mask_Set",mt),this.SetBtnEvent(_t.getComponent(cc.Button),!1,!0),me=cc.find("Button_Rule",mt).getComponent(cc.Button),this.SetBtnEvent(me,!0,!0),ne=cc.find("Button_Sound",mt).getComponent(cc.Button),this.SetBtnEvent(ne,!0,!0),oe=cc.find("Switch/soundOn",ne.node),ae=cc.find("Switch/soundOff",ne.node),_e=cc.find("Button_ToLobby",mt).getComponent(cc.Button),this.SetBtnEvent(_e,!0,!0),se=cc.find("Panel_Rule",Xt),re=cc.find("Button_RuleClose",se).getComponent(cc.Button),this.SetBtnEvent(re,!0,!0),vt=0;vt<4;vt++)rt.push(cc.find("info_"+vt,se));cc.find("Button_RuleRight",se).getComponent(cc.Button),cc.find("Button_RuleLeft",se).getComponent(cc.Button),(le=cc.instantiate(Qt)).setParent(Ti),le.active=!1,ce=cc.find("Panel_TransScene",Xt),u=cc.find("StartSpecialGameAnim",Xt),this.m_Signal=cc.find("signal",Xt),this.m_Signal.active=!1;var Wi=Xt=cc.find("GamePlay/Panel_Below",this.node.parent),Ci=cc.find("IDLabel",Xt).getComponent(cc.Label);ue=cc.find("Image_BGGameWin/Panel_NumPar",Xt),Se=cc.find("Image_BGTotalBet/Panel_NumPar",Xt),cc.find("Image_BGJP/Panel_NumPar",Xt),pe=cc.find("Button_Spin",Xt).getComponent(cc.Button),this.SetBtnEvent(pe,!0,!0),Le=cc.find("pressParticle",pe.node),de=cc.find("Button_Stop",Xt).getComponent(cc.Button),this.SetBtnEvent(de,!1,!0),fe=cc.find("Button_Auto",Xt).getComponent(cc.Button),this.SetBtnEvent(fe,!0,!0),ye=cc.find("auto",fe.node),Pe=cc.find("spinleft",fe.node),Ge=cc.find("spinleft/Num",fe.node).getComponent(cc.Sprite),Ae=cc.find("Effect_Auto",fe.node),ge=cc.find("Button_BetAdd",Xt).getComponent(cc.Button),this.SetBtnEvent(ge,!0,!0),Ie=cc.find("Button_BetSub",Xt).getComponent(cc.Button),this.SetBtnEvent(Ie,!0,!0),Me=cc.find("Panel_LinesScore/Text_LinesScores",Xt).getComponent(cc.Label),he=cc.find("Image_BGCredit/Panel_NumPar",Xt);var Mi=cc.find("Image_BGWin",Xt),Bi=!this.iGameBase.isNoWin();Mi.active=Bi;var vi=cc.find("Image_BGWin/Panel_NumPar",Xt);i=cc.find("Button_TransScore",Xt).getComponent(cc.Button),this.SetBtnEvent(i,!this.iGameBase.isNoWin(),!0);var wi=cc.find("Panel_WinScoreEffect",this.node);for(this.GameLogic.m_DealAutoTrans=new r.default(this.GameLogic),this.GameLogic.m_DealAutoTrans.m_BtnAutoSpin=fe,this.GameLogic.m_DealAutoTrans.m_BtnSpin=pe,this.GameLogic.m_DealAutoTrans.m_BtnStop=de,this.GameLogic.m_DealAutoTrans.m_SpinLeftSpriteFrame=Gt,this.GameLogic.m_DealAutoTrans.m_autoBtnAutoTag=ye,this.GameLogic.m_DealAutoTrans.m_autoBtnSpinCountTag=Pe,this.GameLogic.m_DealAutoTrans.m_autoBtnSpinCountTag.active=!1,this.GameLogic.m_DealAutoTrans.m_autoBtnSpinLeftCountSprite=Ge,this.GameLogic.m_DealAutoTrans.m_EffectBtnAutoSpin=Ae,this.GameLogic.m_DealAutoTrans.m_spinBtnPressParticle=Le,this.GameLogic.m_DealItem=new l.default(this.GameLogic),this.GameLogic.m_DealItem.m_ItemCtrl=new S.default(st,Ee,qe,this,this.GameLogic.ShowLottery.bind(this.GameLogic),this.GameLogic.m_DealItem.AColStopEvn.bind(this.GameLogic.m_DealItem),2200,!0,40,.3),this.GameLogic.m_DealBetRel=new s.default(this.GameLogic),this.GameLogic.m_DealBetRel.m_BtnBetAdd=ge,this.GameLogic.m_DealBetRel.m_BtnBetSub=Ie,this.GameLogic.m_DealBetRel.m_ShowTotalBetCtrl=this.iGameBase.NewShowNum(Se,De,yt,Pt,!0,!0),this.GameLogic.m_DealWinPro=new c.default(this.GameLogic),this.GameLogic.m_DealWinPro.m_transCreditNumP=he,this.GameLogic.m_DealWinPro.m_transTotalWinNumP=vi,this.GameLogic.m_DealWinPro.m_AnimPlayerBG=void 0,this.GameLogic.m_DealWinPro.m_PlayerBG=n,this.GameLogic.m_DealWinPro.m_ary_imagBG=ze,this.GameLogic.m_DealWinPro.m_Text_Tips=void 0,this.GameLogic.m_DealWinPro.m_ImageTrans=a,this.GameLogic.m_DealWinPro.m_transLinesP=void 0,this.GameLogic.m_DealWinPro.m_ary_transLines=xe,this.GameLogic.m_DealWinPro.m_gLinesMask=g,this.GameLogic.m_DealWinPro.m_transLinesCacheP=void 0,this.GameLogic.m_DealWinPro.m_arys_AnimItems=Ke,this.GameLogic.m_DealWinPro.m_arys_imagItem=Je,this.GameLogic.m_DealWinPro.m_arys_AnimItemsBonus=je,this.GameLogic.m_DealWinPro.m_ary_VecLinesScoreNum=Ue,this.GameLogic.m_DealWinPro.m_transLinesScoreNumP=void 0,this.GameLogic.m_DealWinPro.m_Text_LinesScores=Me,this.GameLogic.m_DealWinPro.m_gFSPar=I,this.GameLogic.m_DealWinPro.m_gFSUseP=f,this.GameLogic.m_DealWinPro.m_gIntoFS=y,this.GameLogic.m_DealWinPro.m_gAddFS=P,this.GameLogic.m_DealWinPro.m_OutFS=L,this.GameLogic.m_DealWinPro.m_FSTips=W,this.GameLogic.m_DealWinPro.m_ary_SprItems=st,this.GameLogic.m_DealWinPro.m_SprItems11=Be,this.GameLogic.m_DealWinPro.m_ary_SprItemPanel=lt,this.GameLogic.m_DealWinPro.m_ShowCreditCtrl=this.iGameBase.NewShowNum(he,De,gt,Pt,!0,!0),this.GameLogic.m_DealWinPro.m_ShowTotalWinNumCtrl=this.iGameBase.NewShowNum(vi,De,gt,Pt,!0,!0),this.GameLogic.m_DealWinPro.m_ShowGameWinNumCtrl=this.iGameBase.NewShowNum(ue,Te,gt,Pt,!0,!0),this.GameLogic.m_DealWinPro.m_FSAddTimesCtrl=this.iGameBase.NewShowNum(G,De,ct,Pt,!1,!1),this.GameLogic.m_DealWinPro.m_FSTimesUsedCtrl=this.iGameBase.NewShowNum(A,Ce,ct,Pt,!1,!1),this.GameLogic.m_DealWinPro.m_FSTotalTimes=this.iGameBase.NewShowNum(D,Ce,ct,Pt,!1,!1),this.GameLogic.m_DealWinPro.m_FSShowTotalWinNumCtrl=this.iGameBase.NewShowNum(T,De,Dt,Pt,!0,!0),this.GameLogic.m_DealWinPro.m_transGameWinNumP=ue,this.GameLogic.m_DealItem.m_VecRollerEff=Xe,this.GameLogic.m_DealItem.m_AnimRollerEff=b,this.GameLogic.m_DealItem.m_RollerEff=F,this.GameLogic.m_DealWinPro.m_DealSpecial.m_ImageTrans=E,this.GameLogic.m_DealWinPro.m_DealSpecial.m_arys_VecItems=Qe,this.GameLogic.m_DealWinPro.m_DealSpecial.m_gMask=x,this.GameLogic.m_DealWinPro.m_DealSpecial.m_transItemAnimP=K,this.GameLogic.m_DealWinPro.m_DealSpecial.m_Root=J,this.GameLogic.m_DealWinPro.m_DealSpecial.m_ary_gLock=$e,this.GameLogic.m_DealWinPro.m_DealSpecial.m_ary_SprNumLock=et,this.GameLogic.m_DealWinPro.m_DealSpecial.m_list_SprItems=st,this.GameLogic.m_DealWinPro.m_DealSpecial.m_gScatterItemAnim=j,this.GameLogic.m_DealWinPro.m_DealSpecial.m_transTip=U,this.GameLogic.m_DealItem1=new l.default(this.GameLogic),this.GameLogic.m_DealItem1.m_ItemCtrl=new S.default(st,Ye,Ze,this,this.GameLogic.ShowLottery_Special.bind(this.GameLogic),this.GameLogic.m_DealItem1.AColStopEvn.bind(this.GameLogic.m_DealItem1),2200,!0,40,.3),this.GameLogic.m_DealWinPro.m_DealSpecial.Panel_SpecialSpinPar=q,this.GameLogic.m_DealWinPro.m_DealSpecial.m_ary_SprTips=it,vt=0;vt<_.m_LockCount;vt++)this.GameLogic.m_DealWinPro.m_DealSpecial.m_NumlockCtrl[vt]=this.iGameBase.NewShowNum(tt[vt],Y,Mt,Pt,!1,!1);for(this.GameLogic.m_DealWinPro.m_DealSpecial.Panel_IntoSpecial=H,this.GameLogic.m_DealWinPro.m_DealSpecial.Panel_OutSpecial=V,this.GameLogic.m_DealWinPro.m_DealSpecial.Panel_WinSpecial=X,this.GameLogic.m_DealWinPro.m_DealSpecial.m_NumWinCtrl=this.iGameBase.NewShowNum(z,De,St,Pt,!0,!0),this.GameLogic.m_DealWinPro.m_DealSpecial.m_Root.active=!1,this.GameLogic.m_Root=C,this.GameLogic.m_Root.active=!0,this.GameLogic.m_Image_Logo=o,vt=0;vt<Fe.length;vt++)Fe[vt]=this.iGameBase.NewShowNum(Oe[vt],We,It[vt],Pt,!0,!0),ke[vt].setNumSpriteFrame(It[vt]);this.GameLogic.m_DealWinPro.m_DealSpecial.m_Panel_Jackpot=e,this.GameLogic.m_DealWinPro.m_ary_PlayerJP=Fe,this.GameLogic.m_DealWinPro.m_ary_JackpotNumChange=ke,this.GameLogic.m_DealWinPro.m_PlayerJPPanel=e,this.GameLogic.m_DealWinPro.m_TransScoreCtrl=this.iGameBase.NewTransScoreCtrl(this.GameLogic.m_DealWinPro,this.GameLogic.m_DealWinPro.SubTransScore.bind(this.GameLogic.m_DealWinPro),this.GameLogic.m_DealWinPro.AddTransScore.bind(this.GameLogic.m_DealWinPro),3,2),this.GameLogic.m_DealWinPro.m_PanelTips=h,this.GameLogic.m_DealWinPro.m_StartSpecialGameAnim=u,this.GameLogic.m_DealWinPro.m_StartSpecialPrefab=ve,this.GameLogic.m_DealWinPro.m_DealSpecial.m_FireBallLight=Z,this.GameLogic.m_DealWinPro.m_DealSpecial.m_FireBallLight2=Di,this.GameLogic.m_DealWinPro.m_DealSpecial.Panel_WinScoreEffect=wi,this.GameLogic.m_DealWinPro.m_DealSpecial.m_fireBallMask=null,this.GameLogic.m_DealWinPro.m_DealSpecial.m_fireBall=$,this.GameLogic.m_DealWinPro.m_DealSpecial.m_FireBallLight.active=!1,this.GameLogic.m_DealWinPro.m_DealSpecial.m_FireBallLight2.active=!1,this.GameLogic.m_DealWinPro.m_DealSpecial.m_fireBall.active=!1,this.GameLogic.m_DealWinPro.m_DealSpecial.m_gNumPrefab=be,this.GameLogic.m_DealWinPro.m_DealSpecial.m_ary_SprFireNum=Lt,this.GameLogic.m_DealWinPro.m_DealSpecial.m_list_icPairNumSpe=Pt,this.GameLogic.m_DealWinPro.m_DealSpecial.m_PanelLockEffect=nt,this.GameLogic.m_DealWinPro.m_GameWinScoreParticleNode=p,this.GameLogic.m_DealWinPro.m_GameWinScoreBigWinAnim=d,this.GameLogic.m_DealWinPro.m_FSIntoAnimNode=Ve,this.GameLogic.m_DealWinPro.m_FSIntoAnimInfoNode=M,this.GameLogic.m_DealWinPro.m_FSIntoAnimBgNode=B,this.GameLogic.m_DealWinPro.m_offLineLodingPanel=le,this.GameLogic.m_DealWinPro.m_BtnTransScore=i,this.GameLogic.m_DealWinPro.m_PanelRule=se,this.GameLogic.m_DealWinPro.m_gameInfoImage=rt,this.GameLogic.m_DealWinPro.m_Button_Set=ot,this.GameLogic.m_DealWinPro.m_Panel_Set=mt,this.GameLogic.m_DealWinPro.m_Mask_Set=_t,this.GameLogic.m_DealWinPro.m_Widget_PanelSet=mt.getComponent(cc.Widget),this.GameLogic.m_DealWinPro.m_Widget_m_ButtonSet=ot.getComponent(cc.Widget),this.GameLogic.m_DealWinPro.m_Toggle_SoundOn=oe,this.GameLogic.m_DealWinPro.m_Toggle_SoundOff=ae,this.GameLogic.m_DealWinPro.InitSound(),this.GameLogic.m_DealWinPro.m_TransScenePanel=ce,this.GameLogic.m_DealWinPro.m_arys_VecItems=He,this.GameLogic.m_DealWinPro.m_gItemAnim=we,this.GameLogic.m_DealWinPro.m_gLinesFrame=Ne,this.GameLogic.m_DealWinPro.m_gBounsAnimPrefab=Re,this.GameLogic.m_DealWinPro.m_transItemAnimP=v,this.GameLogic.m_DealWinPro.m_transLinesFrameP=w,this.GameLogic.m_DealWinPro.m_transBounsAnimP=N,this.GameLogic.m_DealWinPro.m_arys_winGem=hi,this.GameLogic.m_DealWinPro.m_GemAnimNode=Si,this.GameLogic.m_DealWinPro.m_arys_WinIcon=pi,this.GameLogic.m_DealWinPro.m_FSShowBonusNumCtrl=this.iGameBase.NewShowNum(ui,De,Wt,Pt,!0,!0),this.GameLogic.m_DealWinPro.m_FSCurScoreNumCtrl=this.iGameBase.NewShowNum(di,De,Tt,Pt,!0,!0),this.GameLogic.m_DealWinPro.m_FSMiner=ai,this.GameLogic.m_DealWinPro.m_FSMinerPosNode=mi,this.GameLogic.m_DealWinPro.m_FSMinerStartNode=li,this.GameLogic.m_DealWinPro.m_FSOreLightNode=_i,this.GameLogic.m_DealWinPro.m_FSOreButton=ri,this.GameLogic.m_DealWinPro.m_FSIntoAnimNumCtrl=this.iGameBase.NewShowNum(gi,De,At,Pt,!1,!1),this.GameLogic.m_DealWinPro.m_FSTimerNumCtrl=this.iGameBase.NewShowNum(Ii,De,At,Pt,!1,!1),this.GameLogic.m_DealWinPro.m_MiningParticle=yi,this.GameLogic.m_DealWinPro.m_FSWinNumPar=di,this.GameLogic.m_DealWinPro.m_WinScoreParticle=Pi,this.GameLogic.m_DealWinPro.mPanel_FSBONUS=ci,this.GameLogic.m_DealWinPro.m_MinerInfoFS=oi,this.GameLogic.m_DealWinPro.m_Panel_BigWin=ii,this.GameLogic.m_DealWinPro.m_Panel_BigWinNumCtrl=this.iGameBase.NewShowNum(ni,De,Ct,Pt,!0,!0),this.GameLogic.m_DealWinPro.m_panel_Miner=Gi,this.GameLogic.m_DealWinPro.m_LampAnimationNode=Li,this.GameLogic.m_DealWinPro.m_IDLabel=Ci,this.iGameBase.isNoWin()&&(cc.find("Image_BGWin",Wi).active=!1,i.node.active=!1),Ti.setSiblingIndex(Zt.childrenCount-1);var Ni=this.GetGameAsset1("Res/Texure/GameInfo",m.AT_SpriteAtlas);cc.find("Button_RuleRight",se).getComponent(cc.Sprite).spriteFrame=Ni.getSpriteFrame("next"),cc.find("Button_RuleLeft",se).getComponent(cc.Sprite).spriteFrame=Ni.getSpriteFrame("prev"),cc.find("Button_RuleClose",se).getComponent(cc.Sprite).spriteFrame=Ni.getSpriteFrame("return");var Ri=this.GetGameAsset1("Res/Texure/UI",m.AT_SpriteAtlas);cc.find("BG",se).getComponent(cc.Sprite).spriteFrame=Ri.getSpriteFrame("BGDashStretcher");var bi=this.GetGameAsset1("Res/Texure/UI_1",m.AT_SpriteAtlas);cc.find("GamePlay/Panel_Below/GAMEWIN",this.node.parent).getComponent(cc.Sprite).spriteFrame=bi.getSpriteFrame("GAMEWIN");var Fi=this.GetGameAsset1("Res/Texure/Button1",m.AT_SpriteAtlas);cc.find("Background",pe.node).getComponent(cc.Sprite).spriteFrame=Fi.getSpriteFrame("Button_Play"),cc.find("Background",de.node).getComponent(cc.Sprite).spriteFrame=Fi.getSpriteFrame("Button_Stop"),cc.find("Image",fe.node).getComponent(cc.Sprite).spriteFrame=Fi.getSpriteFrame("Animation_Btutton_Auto"),cc.find("Effect_Auto",fe.node).getComponent(cc.Sprite).spriteFrame=Fi.getSpriteFrame("Animation_Btutton_Auto_Effect")},t.prototype.StageUpdate=function(){this.m_bIsStartUpdate&&this.GameLogic.UpdateGameSlot()},t.prototype.Leave=function(){cc.log("====Leave====",this.m_bIsStartUpdate),this.m_bIsStartUpdate=!1,this.GameLogic.Final(),this.GameLogic=null,this.m_SoundSystem&&this.m_SoundSystem.ClearAllSound()},t.prototype.SetSound=function(){if(this.m_SoundSystem=this.iGameBase.NewSoundSystem(),this.GameLogic.m_DealSound=this.m_SoundSystem,this.m_SoundSystem)for(var e=new _.AudioData,t=0;t<e.ary_AudioNames.length;t++){var i=this.GetGameAsset("Res/Sounds/"+e.ary_AudioNames[t],m.AT_AudioClip);this.m_SoundSystem.SEAdd(i,e.ary_AudioVolume[t]),t<3&&this.m_SoundSystem.BGMAdd(i,e.ary_AudioVolume[t])}},t.prototype.SetBtnEvent=function(e,t,i){if(void 0===t&&(t=!0),void 0===i&&(i=!0),null!=e){var n=new cc.Component.EventHandler;n.target=this.node,n.component=this.scriptName,n.handler="BtnEventCallback",e.clickEvents.push(n),e.node.active=t,e.interactable=i}},t.prototype.BtnEventCallback=function(e){var t=e.target;this.GameLogic.OnClickBtn(t)},t.prototype.GetGameAsset=function(e,t){return this.iGameBase.GetGameAsset(this.handlerName,e,t)},t.prototype.GetGameAsset1=function(e,t){return this.iGameBase.GetGameAsset1(e,t)},t.prototype.testFun=function(){this.GameLogic.m_DealWinPro.testFum()},a([p],t)}(cc.Component));i.default=d,cc._RF.pop()},{"./DataManager_Miner":"DataManager_Miner","./DealAutoTrans_Miner":"DealAutoTrans_Miner","./DealBetRelevant_Miner":"DealBetRelevant_Miner","./DealItemRelevant_Miner":"DealItemRelevant_Miner","./DealWinProcess_Miner":"DealWinProcess_Miner","./GameLogic_Miner":"GameLogic_Miner","./ItemCtrl_CR_MulRes_SpeFireMiner":"ItemCtrl_CR_MulRes_SpeFireMiner"}],ItemCtrl_CR_MulRes_SpeFireMiner:[function(e,t,i){"use strict";cc._RF.push(t,"fcc82M4N5RPK7jCPURNFwqn","ItemCtrl_CR_MulRes_SpeFireMiner");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,m=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)m=Reflect.decorate(e,t,i,n);else for(var _=e.length-1;_>=0;_--)(o=e[_])&&(m=(a<3?o(m):a>3?o(t,i,m):o(t,i))||m);return a>3&&m&&Object.defineProperty(t,i,m),m};Object.defineProperty(i,"__esModule",{value:!0});var m,_=e("./DataManager_Miner"),r=cc._decorator,s=r.ccclass;r.property,function(e){e[e.TC_NONR=0]="TC_NONR",e[e.TC_Trans=1]="TC_Trans",e[e.TC_End=2]="TC_End"}(m||(m={}));var l=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=e.call(this)||this;n.m_iTransCtrl=m.TC_NONR,n.caller=null,n.AllStopBackEvn=null,n.AColStopBackEvn=null,n.m_fImageHeight=0,n.m_ary_fTransSpeed=[],n.m_ary_fTransSpeedNow=[],n.m_arys_iItemResult=new Array,n.m_ary_iShowResultIdTemp=[],n.m_ary_bIsCanStop=[],n.m_ary_bIsStoped=[],n.m_fX1=0,n.m_fX2=0,n.m_fParabolaHeight=0,n.m_iParabolaReboundSpeed=0,n.m_ary_fParabolaXTemp=[],n.m_ary_bIsCanShowParabola=[],n.m_iStopedCount=0,n.m_ary_SpItemRes=[],n.m_dic_ListImage=null,n.m_ary_VecStartAncPos=[],n.m_SpItemResIndex=0,n.m_iBet=1,n.m_GameTypeCurIndex=0,n.m_colMark=0,n.m_aryScore=[50,100,250,500,1e3,1500,2500,5e3],n.m_dic_ListItemNum=null;var o=t[0],a=t[1],_=t[2],r=t[3],s=t[4],l=t[5],c=t[6],h=t[7],S=t[8],u=t[9];if(null==o||null==a||c<0)return n;S<=0&&(S=40),n.m_ary_SpItemRes=o,n.m_dic_ListImage=new Map;for(var p=0;p<a.length;p++){for(var d=new Array(a[0].length),g=0;g<a[0].length;g++)d[g]=a[p][g];n.m_dic_ListImage.set(p,d)}for(n.m_dic_ListItemNum=new Map,p=0;p<_.length;p++){for(d=new Array(_[0].length),g=0;g<_[0].length;g++)d[g]=_[p][g];n.m_dic_ListItemNum.set(p,d)}for(p=0;p<a[0].length;p++){var I=a[0][p].node.position;n.m_ary_VecStartAncPos[p]=cc.v2(I.x,I.y)}n.m_fImageHeight=Math.abs(n.m_ary_VecStartAncPos[1].y-n.m_ary_VecStartAncPos[0].y),n.caller=r,n.AllStopBackEvn=s,n.AColStopBackEvn=l,n.m_bIsShowParabola=h,n.m_iParabolaReboundSpeed=S,n.m_fParabolaHeight=n.m_fImageHeight*u;var f=a.length,y=a[0].length-2;for(n.m_ary_fTransSpeed=new Array(f),n.m_ary_fTransSpeedNow=new Array(f),p=0;p<n.m_ary_fTransSpeed.length;p++)n.m_ary_fTransSpeed[p]=c,n.m_ary_fTransSpeedNow[p]=c;for(n.m_ary_iShowResultIdTemp=new Array(f),p=0;p<f;p++)for(n.m_arys_iItemResult[p]=[],g=0;g<y;g++)n.m_arys_iItemResult[p][g]=0;return n.m_ary_bIsCanStop=new Array(f),n.m_ary_bIsStoped=new Array(f),n.m_ary_fParabolaXTemp=new Array(f),n.m_ary_bIsCanShowParabola=new Array(f),n.m_fX1=-Math.sqrt(n.m_fParabolaHeight),n.m_fX2=-n.m_fX1,n}return o(t,e),t.prototype.StateItemCtrl=function(){switch(this.m_iTransCtrl){case m.TC_NONR:break;case m.TC_Trans:this.m_iStopedCount=0;for(var e=0;e<this.m_ary_bIsStoped.length;e++)this.m_ary_bIsStoped[e]&&this.m_iStopedCount++;if(this.m_iStopedCount==this.m_ary_bIsStoped.length)return void(this.m_iTransCtrl=m.TC_End);for(e=0;e<this.m_ary_bIsCanStop.length;e++)this.m_ary_bIsStoped[e]||this.OnTransing(e,this.m_ary_bIsCanStop[e],this.m_bIsShowParabola);break;case m.TC_End:this.m_iTransCtrl=m.TC_NONR,null!=this.AllStopBackEvn&&this.AllStopBackEvn.call(this.caller)}},t.prototype.ShowInitResultSpr=function(){for(var e=0;e<this.m_dic_ListImage.size;e++)for(var t=0;t<this.m_dic_ListImage.get(e).length;t++)if(t>0&&t<this.m_dic_ListImage.get(e).length-1){var i=this.m_dic_ListImage.get(e),n=cc.find("Item",i[t].node).getComponent(cc.Sprite),o=cc.find("Panel_NumPar",i[t].node),a=this.m_arys_iItemResult[e][this.m_arys_iItemResult[0].length-t],m=this.m_dic_ListItemNum.get(e);this.isFireNum(a)?(i[t].enabled=!0,i[t].node.getComponent(cc.Animation).play(),n.node.active=!1,o.active=!0,m[t].ShowNum2(this.GetFireNumStr(a),!0,!1)):this.isJackPotNum(a)?(i[t].enabled=!0,i[t].node.getComponent(cc.Animation).play(),n.node.active=!0,o.active=!1,n.spriteFrame=this.m_ary_SpItemRes[this.m_SpItemResIndex][this.m_arys_iItemResult[e][this.m_arys_iItemResult[0].length-t]]):(i[t].enabled=!1,i[t].node.getComponent(cc.Animation).stop(),n.node.active=!0,o.active=!1,n.spriteFrame=this.m_ary_SpItemRes[this.m_SpItemResIndex][this.m_arys_iItemResult[e][this.m_arys_iItemResult[0].length-t]]),this.m_dic_ListImage.set(e,i),this.m_dic_ListItemNum.set(e,m)}else i=this.m_dic_ListImage.get(e),a=Math.floor(8*Math.random())+1,n=cc.find("Item",i[t].node).getComponent(cc.Sprite),this.isFireNum(a)?(i[t].enabled=!0,n.node.active=!1):(i[t].enabled=!1,n.node.active=!0,n.spriteFrame=this.m_ary_SpItemRes[this.m_SpItemResIndex][a]),this.m_dic_ListImage.set(e,i)},t.prototype.OnTrans=function(){if(this.m_iTransCtrl==m.TC_NONR){for(var e=0;e<this.m_arys_iItemResult.length;e++){for(var t=0;t<this.m_arys_iItemResult[0].length;t++)this.m_arys_iItemResult[e][t]=-1;this.m_ary_iShowResultIdTemp[e]=0,this.m_ary_fParabolaXTemp[e]=0,this.m_ary_bIsCanStop[e]=!1,this.m_ary_bIsStoped[e]=!1,this.m_ary_bIsCanShowParabola[e]=!1,this.m_ary_fTransSpeedNow[e]=this.m_ary_fTransSpeed[e]}this.m_iTransCtrl=m.TC_Trans}},t.prototype.SetAllItemResult=function(e){if(null!=e&&e.length==this.m_arys_iItemResult.length){for(var t=0;t<e.length;t++)for(var i=0;i<e[0].length;i++)this.m_arys_iItemResult[t][i]=e[t][i];this.m_colMark=0}else cc.log("[ItemCtrl_CR_MulRes_SpeRoute]-> SetAllItemResult() \u8bbe\u7f6e\u7ed3\u679c\u5931\u8d25")},t.prototype.SetOneItemResult=function(e,t,i){e<0||e>=this.m_arys_iItemResult.length||t<0||t>=this.m_arys_iItemResult[0].length||i<0||i>=this.m_ary_SpItemRes.length?cc.log("[ItemCtrl_CR_MulRes_SpeFireBall]-> SetOneResultImage() \u4f20\u5165\u53c2\u6570\u6709\u8bef\uff01col\uff1a"+e+"    row"+t+"  iResult\uff1a"+i):(this.m_arys_iItemResult[e][t]=i,cc.find("Item",this.m_dic_ListImage[e][this.m_dic_ListImage[e].Count-2-t].node).getComponent(cc.Sprite).spriteFrame=this.m_ary_SpItemRes[this.m_SpItemResIndex][this.m_arys_iItemResult[e][t]])},t.prototype.SetAllItemStop=function(){if(this.m_iTransCtrl==m.TC_Trans)for(var e=0;e<this.m_ary_bIsCanStop.length;e++)this.m_ary_bIsCanStop[e]=!0},t.prototype.SetAColItemStop=function(e){this.m_iTransCtrl!=m.TC_Trans||e<0||e>=this.m_ary_bIsCanStop.length?cc.log("[ItemCtrl_CR_MulRes_SpeFireBall]-> SetAColItemStop() \u5931\u8d25\uff01m_iTransCtrl= "+this.m_iTransCtrl+"   col\uff1a"+e):this.m_ary_bIsCanStop[e]=!0},t.prototype.Get_m_ary_bIsCanStop=function(e){return!(e<0||e>=this.m_ary_bIsCanStop.length)&&this.m_ary_bIsCanStop[e]},t.prototype.Get_m_ary_bIsStoped=function(e){return!(e<0||e>=this.m_ary_bIsStoped.length)&&this.m_ary_bIsStoped[e]},t.prototype.GetImage=function(e,t){return e<0||e>=this.m_arys_iItemResult.length||t<0||t>=this.m_arys_iItemResult[0].length?null:this.m_dic_ListImage.get(e)[this.m_dic_ListImage.get(e).length-2-t]},t.prototype.Get_IsAllItemTransEnd=function(){return this.m_iTransCtrl==m.TC_NONR},t.prototype.SetModifySpeed=function(e,t){void 0===t&&(t=.5),e<0||e>this.m_ary_fTransSpeedNow.length||t<=0||(this.m_ary_fTransSpeedNow[e]=this.m_ary_fTransSpeed[e]*t)},t.prototype.OnTransing=function(e,t,i){this.m_ary_iShowResultIdTemp[e]<this.m_arys_iItemResult[0].length?this.OnTransLogic(e,t):this.m_ary_bIsCanShowParabola[e]?i?this.ShowParabolaEff(e,this.ParabolaLogic(e,this.m_fParabolaHeight)):(this.m_ary_bIsStoped[e]=!0,this.ShowParabolaEff(e,0),null!=this.AColStopBackEvn&&this.AColStopBackEvn.call(this.caller,e)):this.OnTransLogic(e,!1)},t.prototype.OnTransLogic=function(e,t){for(var i=this.m_ary_fTransSpeedNow[e]*cc.director.getDeltaTime(),n=this.m_dic_ListImage.get(e),o=this.m_dic_ListItemNum.get(e),a=0;a<this.m_dic_ListImage.get(e).length;a++)n[a].node.position=cc.v3(n[a].node.position.x,n[a].node.y-i,0);var m=n[0],_=o[0];if(m.node.position.y<=this.m_ary_VecStartAncPos[0].y-this.m_fImageHeight){this.m_ary_iShowResultIdTemp[e]>=this.m_arys_iItemResult[0].length&&(this.m_ary_bIsCanShowParabola[e]=!0,t=!1);var r=0;if(t){if(-1!=this.m_arys_iItemResult[e][this.m_arys_iItemResult[0].length-1]){r=this.m_arys_iItemResult[e][this.m_arys_iItemResult[0].length-1-this.m_ary_iShowResultIdTemp[e]];var s=cc.find("Item",m.node).getComponent(cc.Sprite),l=cc.find("Panel_NumPar",m.node);this.isFireNum(r)?(m.enabled=!0,l.active=!0,s.node.active=!1,_.ShowNum2(this.GetFireNumStr(r),!0,!1),m.node.getComponent(cc.Animation).play()):this.isJackPotNum(r)?(m.enabled=!0,l.active=!1,s.node.active=!0,s.spriteFrame=this.m_ary_SpItemRes[this.m_SpItemResIndex][r],m.node.getComponent(cc.Animation).play()):(m.enabled=!1,s.node.active=!0,l.active=!1,s.spriteFrame=this.m_ary_SpItemRes[this.m_SpItemResIndex][r],m.node.getComponent(cc.Animation).stop()),this.m_ary_iShowResultIdTemp[e]++}}else r=this.GetRandomItemSpIndex(),s=cc.find("Item",m.node).getComponent(cc.Sprite),l=cc.find("Panel_NumPar",m.node),this.isFireNum(r)?(m.enabled=!0,s.node.active=!1,l.active=!0,_.ShowNum2(this.GetFireNumStr(r),!0,!1)):this.isJackPotNum(r)?(m.enabled=!0,s.node.active=!0,l.active=!1,s.spriteFrame=this.m_ary_SpItemRes[this.m_SpItemResIndex][r]):(m.enabled=!1,s.node.active=!0,l.active=!1,s.spriteFrame=this.m_ary_SpItemRes[this.m_SpItemResIndex][r]);var c=m.node.position.y-this.m_ary_VecStartAncPos[0].y+this.m_fImageHeight;m.node.position=cc.v3(this.m_ary_VecStartAncPos[this.m_ary_VecStartAncPos.length-1].x,this.m_ary_VecStartAncPos[this.m_ary_VecStartAncPos.length-1].y+c,0),n.shift(),n.push(m),o.shift(),o.push(_),this.m_dic_ListImage.set(e,n),this.m_dic_ListItemNum.set(e,o)}},t.prototype.ParabolaLogic=function(e,t){this.m_ary_fParabolaXTemp[e]+=cc.director.getDeltaTime()*this.m_iParabolaReboundSpeed;var i=this.m_fX1+this.m_ary_fParabolaXTemp[e];return(i=(i=i<this.m_fX1?this.m_fX1:i)>this.m_fX2?this.m_fX2:i)>=this.m_fX2&&(this.m_ary_bIsStoped[e]=!0,null!=this.AColStopBackEvn&&this.AColStopBackEvn.call(this.caller,e)),i*i-t},t.prototype.ShowParabolaEff=function(e,t){for(var i=this.m_dic_ListImage.get(e),n=0;n<i.length;n++)this.m_ary_bIsStoped[e]?i[n].node.position=cc.v3(this.m_ary_VecStartAncPos[n].x,this.m_ary_VecStartAncPos[n].y,0):i[n].node.position=cc.v3(this.m_ary_VecStartAncPos[n].x,this.m_ary_VecStartAncPos[n].y+t,0);this.m_dic_ListImage.set(e,i)},t.prototype.GetRandomItemSpIndex=function(){var e=Math.floor(11*Math.random());return 9==e&&(e=1==this.m_GameTypeCurIndex?Math.floor(8*Math.random()):8+Math.floor(14*Math.random())),e>=this.m_ary_SpItemRes[this.m_SpItemResIndex].length&&(e=0),e},t.prototype.isFireNum=function(e){return e>=10&&e<_.m_iItem_WILD},t.prototype.GetFireNumStr=function(e){var t=0;if(this.isFireNum(e)){var i=e-10;i<this.m_aryScore.length&&(t=this.m_aryScore[i]*this.m_iBet)}return t},t.prototype.isJackPotNum=function(e){return e>=_.m_iItem_Jackpot0&&e<=_.m_iItem_Jackpot3},a([s],t)}(cc.Component);i.default=l,cc._RF.pop()},{"./DataManager_Miner":"DataManager_Miner"}]},{},["DataManager_Miner","DealAutoTrans_Miner","DealBetRelevant_Miner","DealItemRelevant_Miner","DealSpecial_Miner","DealWinProcess_Miner","GameLogic_Miner","Game_Miner","ItemCtrl_CR_MulRes_SpeFireMiner"]);